(("undefined"!=typeof self?self:this)["wpJsonpChessCom_play-computer"]=("undefined"!=typeof self?self:this)["wpJsonpChessCom_play-computer"]||[]).push([[8096],{10394:function(e){/*!
 * Chess.com (c) 2020 | all rights reserved
 *//*!
 * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
 */!function(){"use strict";var t=function(){var e=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],t=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],n=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],a={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},l=[];l[5]=1;l[6]=0;l[9]=3;l[10]=2;l[17]=5;l[18]=4;l[33]=7;l[34]=6;l[65]=9;l[66]=8;l[129]=11;l[130]=10;var c=[2,5,10,20,40,80,160,64],d=["","0000000","000000","00000","0000","000","00","0",""];function to32BitHex(e){var t=e.toString(16);return d[t.length]+t}function to64BitHex(e){return to32BitHex(e[0])+to32BitHex(e[1])}function hex64ToDec(e){return[parseInt(e.substr(0,8),16),parseInt(e.substr(8),16)]}function hash(l,d){var f,m,g,_,y,b,A,C,w,k,S,T,M=l.split(" "),P=M[0].split("/"),L="w"===M[1],N=0,x=Number(L),O=x?3:4;for(g=7;g>=0;g-=1){_=0;A=(y=P[g]).length;for(b=0;b<A;b+=1){S=a[C=y[b]];if(S>=0){f=(f^(w=e[64*S+8*(7-g)+_])[0])>>>0;m=(m^w[1])>>>0;S===x&&g===O&&(N|=1<<_)}_+=Number(C)||1}}if("-"!==M[2]){k=M[2];if(k.indexOf("K")>-1){f=(f^(w=t[0])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("Q")>-1){f=(f^(w=t[2])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("k")>-1){f=(f^(w=t[1])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("q")>-1){f=(f^(w=t[3])[0])>>>0;m=(m^w[1])>>>0}}if(M[3]&&"-"!==M[3]){T=M[3].charCodeAt(0)-97;if(c[T]&N){f=(f^(w=n[T])[0])>>>0;m=(m^w[1])>>>0}}if(L){f=(4174784170^f)>>>0;m=(2938602761^m)>>>0}return d&&"hex"===d?to64BitHex([f,m]):[f,m]}function ajaxLoad(e,t){var n=new XMLHttpRequest,a=e.toLowerCase().indexOf(".json")>-1;function onload(){if(n.status>=200&&n.status<300||304===n.status||0===n.status||1223===n.status){if(a)try{t(null,JSON.parse(n.response))}catch(e){t(e)}else t(null,new DataView(n.response))}else t(Error("Error code: "+n.status))}n.open("GET",e,!0);a||(n.responseType="arraybuffer");n.onload=onload;n.onerror=onload;n.send()}function wrap(e){var t,n,a,l,c={};function parseBook(e,t){var a,l,c,d,f,m,g=n.getUint16(e+8),_=n.getUint16(e+10);return l=g>>9&7,c=g>>6&7,d=g>>3&7,f=7&g,m=g>>12&7,4===c&&t&&l===d&&"-"!==t&&(7===f&&(0===l&&t.indexOf("K")>-1||7===l&&t.indexOf("k")>-1)?f-=1:0===f&&(0===l&&t.indexOf("Q")>-1||7===l&&t.indexOf("q")>-1)&&(f+=2)),a=String.fromCharCode(c+97)+(l+1)+String.fromCharCode(f+97)+(d+1),m&&(a+="nbrq"[m-1]),{move:a,weight:_}}function sortMoves(e){e.sort(function sorter(e,t){return t.weight-e.weight})}function query(e){return"string"==typeof e&&(e={fen:e}),t(e)}function pick(e){var t,n,a,l,c,d=0;sortMoves(t=(e=e||{}).moves||query(e));a=t.length;if(a){if(!e.type||1===a||"best"===e.type)return t[0].move;if("random"===e.type){l=Math.floor(Math.random()*t.sum)+1;for(c=0;c<a-1;c+=1){d+=t[c].weight;if(l<=d)break}return t[c].move}return"randomDisregardWeight"===e.type?t[Math.floor(Math.random()*a)].move:"worst"===e.type?t[a-1].move:((n=parseInt(e.type)||1)<0&&(n=a+n+1),n<1?n=1:n>a&&(n=a),t[n-1].move)}}function bufferBookFind(e){var t,a,l,c,d,f=n.length||n.byteLength||0,m=e.offset||0,g=e.fen,_=e.chess960,y=e.checkAll,b=[],A=0;e.hash?"string"==typeof(t=e.hash)&&(t=hex64ToDec(t)):t=hash(g);!_&&g&&(d=g.split(" ")[2]);for(m=0;m<f;m+=16)if(n.getUint32(m)===t[0]&&n.getUint32(m+4)===t[1]){l=parseBook(m,d);b[b.length]=l;A+=l.weight;a=!0}else if(a&&!y)break;b.sum=A;if(e.relative)for(c=b.length-1;c>=0;c-=1)b[c].relative=Math.round(b[c].weight/A*1e4);return b}function decompressMoves(e){var t,n=[],a=e.b.length;for(t=0;t<a;++t)n.push({move:e.b[t],weight:e.w[t]});return n}function jsonBookFind(e){var t,n,l,d,f,m,g=0,_=e.fen;if(c.useFen)(t=a[l=_.replace(/ \d+ \d+$/,"")])||(d=l.replace(/[a-h][1-8]$/,"-"))===l||(t=a[d]);else{e.hash||(e.hash=hash(_,"hex"));t=a[e.hash];if(t){t[0]&&t[0].n&&(t=t[0]);if(t.n&&!t.b)return[];if(t.b)t=decompressMoves(t);else if(!e.chess960&&_){m=_.split(" ")[2];for(n=t.length-1;n>=0;n-=1)(f=t[n].move.match(/e([18])([ah])\1/))&&("h"===f[2]&&("1"===f[1]&&m.indexOf("K")>-1||"8"===f[1]&&m.indexOf("k")>-1)?t[n]={move:"e"+f[1]+"g"+f[1],weight:t[n].weight}:"a"===f[2]&&("1"===f[1]&&m.indexOf("Q")>-1||"8"===f[1]&&m.indexOf("q")>-1)&&(t[n]={move:"e"+f[1]+"c"+f[1],weight:t[n].weight}))}}}if(t)for(n=t.length-1;n>=0;n-=1)g+=Number(t[n].weight);else t=[];return t.sum=g,t}c={query:query,pick:pick};if(e.getUint32){t=bufferBookFind;n=e;c.buffer=n}else{t=jsonBookFind;a=e;c.json=a;for(l in a){c.useFen=l.indexOf(" ")>-1;break}}return c}function getBook(e,t){ajaxLoad(e,function onload(e,n){var a;n&&(a=wrap(n));if(t)return t(e,a);if(e)throw e;return a})}return{hash:hash,loadBook:function(){var e={};return function loadBook(t,n){if(e[t]){e[t].book?setTimeout(function(){n(null,e[t].book)},0):e[t].cbs.push(n);return}e[t]={cbs:[n]};getBook(t,function onload(n,a){var l=e[t].cbs;if(n)delete e[t];else{e[t].book=a;e[t].cbs=void 0}l.forEach(function(e){setTimeout(function(){e(n,a)},0)})})}}(),to64BitHex:to64BitHex,zobristPiece:e,zobristCastle:t,zobristEnPassant:n,zobristTurn:[4174784170,2938602761],zobristPieceValue:a,zobristPieceValueNumbers:l}}(),n=function init(){var e,n,a,l,c={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},d=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],f={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,_=0,y=0,b=-1,A=1,C=2,w=4,k=8,S=16,T=32,M=64,P=128,L=3,N=252,x=255,O=512,I=112,R=1,B=2,V=4,H=3,D=7,F=14,$=21,U=127,W="pnbrqkPNBRQK",j="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",G=[];G[5]=[-16,-17,-15];G[6]=[16,17,15];G[8]=[-18,-33,-31,-14,18,33,31,14];G[16]=[-17,-15,17,15];G[32]=[-16,1,16,-1];G[64]=[-17,-16,-15,1,17,16,15,-1];G[128]=[-17,-16,-15,1,17,16,15,-1];var q={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},Z={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},z={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},K={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},Q=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],X=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],Y=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],J=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],ee=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],et=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],en=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],eo=[0,5,8,11,14],er=[31,7,7,7,63],ei={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},ea=[w,k,S,T,M],es=["","N","B","R","Q"],el={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},eu=[0,6,1],ec={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},ed=["Event","Site","Date","Round","White","Black","Result"],ef=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(e){return e>>4}function file(e){return 7&e}function algebraic(e){return String.fromCharCode(file(e)+97)+(8-rank(e))}function swapColor(e){return 3-e}function hashNum(e,t){e[0]=(e[0]^t[0])>>>0;e[1]=(e[1]^t[1])>>>0}function wordWrap(e,t,n){return t<1?e:(t="number"==typeof t?t:80,e.replace(RegExp("(.{1,"+t+"})(?: |$|\r?\n)","g"),"$1"+n).slice(0,-n.length))}function completeFen(e){var t,n;t=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(n=(e=e.trim()).split(" ")).length];if(t&&e)e+=t;else if("0"===n[5]){n[5]=1;e=n.join(" ")}return e}function formatTimestamp(e){var t=Math.floor(e%36e3/600),n=Math.floor(e%36e3%600)/10;return Math.floor(e/36e3)+":"+(t<10?"0":"")+t+":"+(n<10?"0":"")+n}function timestampToTime(e){var t=e.split(":");return(3600*t[0]+60*t[1]+1*t[2])*10}function createVariantZobristNumbers(){t.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function fixFenPieces(e,t){var n,a,l=e.length,d=0,f=0,m=t&&(t===c.Crazyhouse||t===c.Bughouse);for(n=0;n<l;++n){a=e[n];if(+a!=+a){if("/"===a){if(8!==f){e=e.substr(0,n)+(8-f)+e.substr(n);++n;++l}f=0;if(++d>7){if(!m&&n<l-1||!/^[pnbrq]{0,63}$/i.test(e.substr(n+1)))return!1;break}}else if(q[a]){if(++f>8)return!1}else if("~"!==a)return!1;else if(!m||!n||!/[nbrq]/i.test(e[n-1])){e=e.substr(0,n)+e.substr(n+1);--n;--l}}else{f+=1*a;if(f>8){e=e.substr(0,n)+(a-(f-8))+e.substr(n+1);f=8}}}return e}function validateFen(e,t){var n,a,l,d,f,m,g,_,y,b,A,C,w,k,S,T,M,P,L,N,x=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,O=c[t]||1*t||c[String(t).replace(/\s/g,"").toLowerCase()],I=O===c.Crazyhouse||O===c.Bughouse,R=0,B=0,V=!0,H="",D={0:0,7:0},F={0:0,7:0},$={0:"k",7:"K"},U={0:"r",7:"R"},j=O===c.Chess960;if(!e)return 1;if(O===c.Bughouse){f=e.split(" | ");if(2===f.length)return 0===(m=validateFen(f[0],t))&&(m=validateFen(f[1],t)),m}f=e.split(/\s+/);if(O===c["3-check"]&&7===f.length){d=f.pop();if(!/^\+[0-3]\+[0-3]$/.test(d)||"+3+3"===d)return 14}if(6!==f.length)return 1;if(/\D|.{7,}|^0|^$/.test(f[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(f[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(f[3]))return 4;b=f[2];if(j){if(!x.test(b))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(b)){if(void 0!==t||!x.test(b))return 5;j=!0}if("w"!==f[1]&&"b"!==f[1])return 6;I&&(f[0]=f[0].replace(/~(?=.*\/)/g,""));a=f[0].split("/");if(I&&9===a.length){d=a.pop();if(!/^[pnbrq]{0,63}$/i.test(d))return 13}if(8!==a.length)return 7;if("3"===f[3][1]&&"w"===f[1]||"6"===f[3][1]&&"b"===f[1])return 11;if("-"!==f[3]){g=4==(B="3"===f[3][1]?4:3)?5:2;R=f[3].charCodeAt(0)-97;V=!1;H=4===B?"P":"p"}for(n=0;n<a.length;++n){P=0;L=!1;for(N=0;N<a[n].length;N++){l=a[n][N];if(+l==+l){if(L)return 8;P+=1*l;L=!0}else{if(-1===W.indexOf(l))return 9;V||B!==n||R!==P||H!==l||(V=!0);if(g===n&&R===P)return 11;n%7==0&&(l===$[n]?F[n]=1<<P:l===U[n]&&(D[n]|=1<<P));++P;L=!1}}if(8!==P)return 10}if(!V)return 11;if("-"!==b){if(j){C={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0};A={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0};M={0:[0,0],7:[0,0]};for(n=b.length-1;n>=0;--n){S=b.charCodeAt(n);if(T&&T>S&&T-S<8)return 15;if(75===S)w=D[k=7]&C[F[k]];else if(81===S)w=D[k=7]&A[F[k]];else if(107===S)w=D[k=0]&C[F[k]];else if(113===S)w=D[k=0]&A[F[k]];else{k=S>=97?0:7;w=1<<S-(k?65:97);T=S}if(!w||(w&w-1)!=0||F[k]<2||F[k]>64||(w&D[k])!==w||++M[k][(F[k]<w)*1]>1)return 15}}else{_=(b.indexOf("K")>-1?128:0)|(b.indexOf("Q")>-1?1:0);if(_&&(16!==F[7]||(_&D[7])!==_))return 15;y=(b.indexOf("k")>-1?128:0)|(b.indexOf("q")>-1?1:0);if(y&&(16!==F[0]||(y&D[0])!==y))return 15}}return 0}function handToString(e,t){var n,a,l="",c=0,d=t?6:0;if(e)for(;c<5;){n=e>>eo[c]&er[c];for(a=0;a<n;++a)l+=W[c+d];++c}return l}function hash3Check(e,n){n[A]&&hashNum(e,t.zobristCheck[n[A]-1]);n[C]&&hashNum(e,t.zobristCheck[n[C]+2])}function hashHand(e,n){var a,l,c,d,f,m,g,_=0;for(a=1;a<3;++a){l=n[a];if(l){c=0;for(;c<5;){f=_+63*c;d=l>>eo[c]&er[c];for(m=0;m<d;++m)hashNum(e,[31*(g=t.zobristPiece[f++])[0]>>>0,17*g[1]>>>0]);++c}}_=315}}function hashEP(e,n,a,l){(e[a+1]===l||e[a-1]===l)&&hashNum(n,t.zobristEnPassant[file(a)])}function getPieces(e,t){var n,a,l=[];for(n=0;n<120;++n){136&n&&(n+=8);a=e[n];if(a&&(a&t)===t){l.push(n);continue}}return l}function addPawnMove(e,t,a,l){var c;if(0===n||e[a+8]&B){if(rank(a)%7==0){c=l|el.PROMOTION|t<<D|a<<F;m[_++]=c|4<<$;m[_++]=c|3<<$;m[_++]=c|2<<$;m[_++]=c|1<<$}else m[_++]=l|t<<D|a<<F}}function kingOfTheHillWin(e){switch(e){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(e,t,n,a){var l,c,d,f=t+(n-t%8),m=n>t%8?1:-1;for(d=t+m;d!==f;d+=m)if(e[d])return!1;c=(l=a===A?1===m?118:114:1===m?6:2)-m;if(e[l+8]||e[l]&&l!==t&&l!==f||e[c]&&c!==t&&c!==f)return!1;if(l!==t){m=l>t?1:-1;for(d=t+m;d!==l;d+=m)if(d!==f&&e[d]||e[d+8])return!1}return!0}var ep=function(){function createLine(e,t,n,a,l,d,f){var m,g,_,y,b,w,k,S,T=[],M="",P=!0,L=t[n],N=L.length,x="";if(L.commands)for(y in L.commands)(!d||d.indexOf(y)>-1)&&(x+="[%"+y+" "+L.commands[y]+"]");L.initComment&&!f&&(x=(x+" "+L.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim());x&&T.push("{"+x+"}");for(g=0;g<N;++g){w=(m=L[g]).color===A;M="";x="";if(a!==c.Bughouse){P&&!w?M=e+"...":w&&(M=e+".");l&&(w||P)&&(M+=" ")}else{T.bughouseOrder||(T.bughouseOrder=[]);T.bughouseOrder.push(m.bughouseOrder);g||(T.blackCountOffset=L[0].color===C?1:0)}M+=m.san;m.annotation&&(M+=m.annotation);m.additionalAnnotation&&(M+=" "+m.additionalAnnotation.join(" "));P=!1;void 0===m.time||m.commands||(m.commands={clk:formatTimestamp(m.time)});if(m.commands)for(y in m.commands)(!d||d.indexOf(y)>-1)&&(x+="[%"+y+" "+m.commands[y]+"]");m.comment&&!f&&(x=(x+" "+m.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim());if(x){M+=" {"+x+"}";P=!0}T.push(M);if(m.lines){k=m.lines.length;for(_=0;_<k;++_){S=m.lines[_];if(t[S].length){(b=createLine(e,t,S,a,l,d,f))[0]="("+b[0];b[b.length-1]+=")";T=T.concat(b);P=!0}}}!w&&e++}return T}function makeBugHousePgn(e,t,n){var a=t,l=e.siblingGame.pgn(),c=0,d=0,f=[];t.bughouseOrder=t.bughouseOrder||[];l.bughouseOrder=l.bughouseOrder||[];for(;t.bughouseOrder.length||l.bughouseOrder.length;)if(!t.bughouseOrder.length||l.bughouseOrder.length&&t.bughouseOrder[0]>l.bughouseOrder[0]){l.bughouseOrder.shift();f.push("B")}else{t.bughouseOrder.shift();f.push("A")}return t=[],f.forEach(function(f){var m,g,_,y="";if("A"===f){m=a;++c;g=c;_=e.startingMoveNumber()}else{m=l;++d;g=d;_=e.siblingGame.startingMoveNumber()}y=String(Math.floor((g+1)/2)+_-1);(m.blackCountOffset+g)%2?y+=f:y+=f.toLowerCase();y+="."+(n?" ":"")+m.shift();t.push(y)}),t}function createHeader(e,t){return"["+e+' "'+String(t).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn(e,t,n,a,l,d){var f,m,g="string"==typeof e.newline?e.newline:"\n",_=void 0===e.spaceAfterPeriods||e.spaceAfterPeriods,y="";y+=createHeader("Event",t.Event)+g+(createHeader("Site",t.Site)+g)+(createHeader("Date",t.Date)+g)+(createHeader("Round",t.Round)+g);l===c.Bughouse?y+=createHeader("WhiteA",t.WhiteA||"?")+g+(createHeader("BlackA",t.BlackA||"?")+g)+(createHeader("WhiteB",t.WhiteB||"?")+g)+(createHeader("BlackB",t.BlackB||"?")+g):y+=createHeader("White",t.White)+g+(createHeader("Black",t.Black)+g);y+=createHeader("Result",t.Result)+g;l&&(y+=createHeader("Variant",t.Variant)+g);t.FEN&&t.FEN!==j&&(y+=createHeader("SetUp","1")+g+(createHeader("FEN",t.FEN)+g));for(f in t)-1===ef.indexOf(f)&&(y+=createHeader(f,t[f])+g);y+=g;m=createLine(a,n,0,l,_,e.hideCommands?[]:e.restrictCommands,e.hideComments);if(l===c.Bughouse){if(d.isDependent)return m;m=makeBugHousePgn(d,m,_)}return m.push(t.Result),y+wordWrap(m.join(" "),e.maxWidth,g)}}(),em=function(){var e="!?‼⁇⁉⁈□∇Δ∞⩲⩱\xb1∓⨀⟳→↑⇆∆⌓⇔⇗⟫⟪✕⊥⊕○⇄↻⊙☒~",t=/\[%(\S+)\s([^\]]+)\]/,n=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(e){for(var n,a=e.commands||{};n=t.exec(e.value);){e.value=e.value.replace(n[0],"").trim();a[n[1]]=n[2];e.commands=a}}function isSplitGame(e,t,n,a){for(var l;++t<n;)if((l=e[t].trim())&&"%"!==l[0])return"["===l[0]&&(!a||/^\[\S+\s+".*"\]$/.test(l))}return function tokenize(t,a){var l,c,d,f,m,g,_,y="tags",b=[],A={type:y,value:""},C=0,w=[],k=!0;a=a||{};f=(l=t.split(/\r?\n/)).length;if(a.recordErrorInfo){w._trackTokenInfo=function(e){var t=b.length;e._lineStart=t?b[t-1]._lineEnd:1;e._colStart=t?b[t-1]._colEnd+1:0;e._lineEnd=c+1;e._colEnd=m;b[t]=e};b.push=w._trackTokenInfo}e:for(c=0;c<f;++c){d=l[c].trim();if("%"!==d[0]){if(d){g=(d=" "+d+" ").length;m=0;if(k)for(;m<g;++m){_=d[m];if("tags"===y){if("["===_)A={type:y="tagName",value:""};else if(_.trim()){A={type:y="san",value:""};k=!1;break}}else if("tagName"===y){if(A.value&&""===_.trim()){b.push(A);y="tagValueStart"}else" "!==_&&(A.value+=_)}else if("tagValueStart"===y){if('"'===_||"“"===_)A={type:y="tagValue",value:""};else if(_.trim()){b.push({type:"tagValue",value:d.slice(m,-1).match(/(.*?)"?\]?$/)[1]});A={type:y="tags",value:""};continue e}}else if("tagValue"===y){if('"'===_||"”"===_){b.push(A);if("]"===d[m+1]){A={type:y="tags",value:""};++m}else if("]"===d.slice(-2,-1)){A.value+=d.substr(m).match(/(.*?)"?\s*\] $/)[1];A={type:y="tags",value:""};continue e}else y="tagEnd"}else{if("\\"===_&&m+2<g){++m;_=d[m]}m>0&&(A.value+=_)}}else{if("]"!==_){if(!_.trim())continue;--m}A={type:y="tags",value:""}}}for(;m<g;++m){_=d[m];if("san"===y){if(e.indexOf(_)>-1){if("!"===_||"?"===_||6>e.indexOf(_)&&(_=["!!","??","!?","?!"][e.indexOf(_)-2])){A.value&&b.push(A);A={type:"a",value:_};("!"===d[m+1]||"?"===d[m+1])&&(A.value+=d[++m]);b.push(A);A={type:"san",value:""}}else{if("∞"===_&&"=/"===A.value){A.type="aa";A.value+=_}else{if(A.value){n.test(A.value)&&("--"!==A.value||a.rejectNullMoves)&&(A.type="aa");b.push(A)}A={type:"aa",value:_};if("↑"===_&&"↑"===d[m+1]){A.value="↻";++m}}b.push(A);A={type:"san",value:""}}}else if(" "===_||"	"===_||"\r"===_||"{"===_||"("===_||")"===_){if(A.value){if("$"===A.value[0])A.type="nag";else if("*"===A.value||"1-0"===A.value||"0-1"===A.value||"1/2-1/2"===A.value||"\xbd-\xbd"===A.value){if(C||m+1<g)A.type="*"===A.value?"cont":"comment";else{A.type="result";"\xbd-\xbd"===A.value&&(A.value="1/2-1/2");b.push(A);w.push(b);if(c+1===f||c+2===f&&!l[c+1])return w;k=!0;A={type:y="tags",value:""};b=[];a.recordErrorInfo&&(b.push=w._trackTokenInfo);break}}n.test(A.value)&&("--"!==A.value||a.rejectNullMoves)&&(A.type="aa");b.push(A);A={type:y,value:""}}if(" "===_||"	"===_||"\r"===_)y="san";else if("{"===_){y="comment";if(b.length&&"comment"===b[b.length-1].type){A=b.pop();A.value+=" "}}else if("("===_){y="san";b.push({type:"variationStart",value:++C})}else{if(C<1){if(!a.commentErrors)return!1}else b.push({type:"variationEnd",value:C--});y="san"}A.type=y}else if("."!==_&&(A.value||+_!=+_||"-"===d[m+1]||"/"===d[m+1]))A.value+=_;else if(+_==+_){A.number||(A.number="");A.number+=_;switch(d[m+1]){case"A":case"a":case"B":case"b":A.number+=d[++m];b.push({type:"number",value:A.number});delete A.number}}}else{0===m&&(A.value=A.value.trim());if("}"!==_){"\\"===_&&m+2<g&&(_=d[++m]);A.value+=_}else{A.value=A.value.trim();A.value.indexOf("[")>-1&&extractCommands(A);b.push(A);A={type:y="san",value:""}}}}}else if(b.length){if("tags"===y){y="san";k=!1}else if("tagValueStart"!==y&&isSplitGame(l,c,f,C||"comment"===y)){"comment"===y&&b.push(A);if("tagValue"!==b[b.length-1].type){w.push(b);b=[];a.recordErrorInfo&&(b.push=w._trackTokenInfo)}y="tags";k=!0;C=0}}}}return A.value&&b.push(A),(b.length||!w.length)&&w.push(b),w}}();function Chess(ef,eh){var eg,ev,e_=0,ey=!0,eb=[],eA=A,eC=[],ew=b,ek=0,eS=1,eE=1,eT=[],eM=[eT],eP=0;eT.id=eP;var eL={},eN=[],ex=!1,eO=!1,eI=makeMoveChess,moveToSan=function(e,t){var n,a,l,c,d,f,m="";if(e&el.KQSIDE_CASTLE)m=e&el.KSIDE_CASTLE?"O-O":"O-O-O";else if(e&el.DROP){l=e>>F&U;(n=e>>$)&&(m+=es[n]);m+="@"+algebraic(l)}else{l=e>>F&U;c=ev[a=e>>D&U];if(c&w){e&el.ANY_CAPTURE&&(m+=String.fromCharCode(file(a)+97)+"x");m+=algebraic(l);e&el.PROMOTION&&(m+="="+es[n=e>>$])}else{m+=K[c&x];y>1&&(m+=getDisambiguator(c,a,l));e&el.ANY_CAPTURE&&(m+="x");m+=algebraic(l)}}if(!t){if(e&el.KQSIDE_CASTLE){a=e>>D&U;l=e>>F&U}else e&el.DROP_OR_PROMOTE&&(c=ea[n]+eA);if(inCheckAfterMove(c,a,l,e)){eI(e,a,l,n);d=g;g=_;f=y;e_&&isVariantWin()||generateMoves()===g?m+="#":m+="+";_=g;g=d;y=f;reverseMove(eT.pop())}}return m};function hashPosition(){var e,n,a,l=eA===A?[4174784170,2938602761]:[0,0];for(a=0;a<120;++a){136&a&&(a+=8);(e=ev[a])&&hashNum(l,t.zobristPiece[64*t.zobristPieceValueNumbers[e&x]+8*(7-rank(a))+file(a)])}if(eO){for(n=1;n<3;++n)if(eC[n]){if((eC[n]&eC[n]-1)!=0){hashNum(l,t.zobristCastle[n-1]);hashNum(l,t.zobristCastle[n+1])}else eC[n]>1<<file(eb[n])?hashNum(l,t.zobristCastle[n-1]):hashNum(l,t.zobristCastle[n+1])}}else{for(n=1;n<3;++n)if(eC[n]){eC[n]&el.KSIDE_CASTLE&&hashNum(l,t.zobristCastle[n-1]);eC[n]&el.QSIDE_CASTLE&&hashNum(l,t.zobristCastle[n+1])}ex?hashHand(l,eg._hand):e_===c["3-check"]&&hash3Check(l,eN)}return ew!==b&&hashEP(ev,l,ew+(eA===A?16:-16),w|eA),l}function getCurrentHash(){var e;if(eT.length)e=eT[eT.length-1].hash;else{eT.hash||(eT.hash=hashPosition());e=eT.hash}return[e[0],e[1]]}function bughouseify(e){function fixBughouseSan(e){return/#/.test(e)&&checkIsPotentiallyBlockable()&&(e=e.replace("#","+")),e}function bughouseFunc(t,n){var a=e(t,n);if(a){if("string"==typeof a)a=fixBughouseSan(a);else{a.san=fixBughouseSan(a.san);eT[eT.length-1].san=a.san}}return a}return bughouseFunc._isBughouseified=!0,bughouseFunc._orig=e,bughouseFunc}function setVariant(e,t){var n=e_;e_=e?c[e]||1*e||c[String(e).replace(/\s/g,"").toLowerCase()]||c.Chess:0;if(n!==e_){if(e_===c.Bughouse){ex=!0;if(!eg.isDependent){eg.siblingGame=Chess();eg.siblingGame.hashing(ey);eg.siblingGame.isDependent=!0;eg.siblingGame.siblingGame=eg;eg.siblingGame.header({Variant:"Bughouse"})}createVariantZobristNumbers();eI=makeMoveVariant;moveToSan=bughouseify(moveToSan);eg.move=bughouseify(eg.move)}else{delete eg.siblingGame;ex=e_===c.Crazyhouse;eO=e_===c.Chess960;if(e_){createVariantZobristNumbers();eI=makeMoveVariant}else eI=makeMoveChess;if(moveToSan._isBughouseified){moveToSan=moveToSan._orig;eg.move=eg.move._orig}}t||updateSetup(generateFen())}}function disambiguate960Rook(e,t){for(var n,a,l=e>7?A:C;!(136&e);){n=ev[e];if(n&l){if(n&T){if(a)return;a=e%8+(l===A?65:97)}else if(n&P)return a}e+=t}}function clear(e,t,n){ev=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];eA=A;eb[A]=b;eb[C]=b;eC[A]=0;eC[C]=0;eg._hand[A]=0;eg._hand[C]=0;eN[A]=0;eN[C]=0;ew=b;ek=0;eS=1;if(!t){eM=[eT=[]];eP=0;eT.id=eP;eL={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"};e?setHeader(["Variant",e]):setVariant(!1,n);n||updateSetup(generateFen())}}function reset(){clear(0,!1,!0);eT.hash=[1178310168,378666140];ev=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0];eE=1;eb[A]=116;eb[C]=4;eC[A]=48;eC[C]=48}function load(e,t,n,a){var l,m,g,_,y,k,S,M,N,x,I,R,B=0;if(a){R=(l=e.split(" "))[3];I=l[2]}else{R=(l=e.trim().split(/\s+/))[3]||"-";I=l[2]||"-"}void 0===t?(31&I.charCodeAt(0))<9&&setVariant(c.Chess960,!0):setVariant(t,!0);m=l[0];if(!a&&!(m=fixFenPieces(m,e_)))return!1;_=m.length;clear(d[e_],n,!0);if(ex){if(e_===c.Bughouse&&!eg.isDependent){k=e.split(" | ");if(!eg.siblingGame.load(1===k.length?e:k[1],t,n,a))return reset(),!1}for(y=0;y<_;++y){S=m[y];if(+S!=+S){if("/"===S){if(B>111){for(++y;y<_;++y){S=m[y];eg._hand[S<"a"?A:C]+=1<<ei[S]>>>0}break}B+=8}else{ev[B]=q[S];if("~"===m[y+1]){++y;ev[B]|=O}ev[B]&P&&(eb[ev[B]&L]=B);++B}}else B+=1*S}}else for(y=0;y<_;++y){S=m[y];if(+S!=+S){if("/"===S)B+=8;else{ev[B]=q[S];ev[B]&P&&(eb[ev[B]&L]=B);++B}}else B+=1*S}eA="b"===l[1]?C:A;if("-"!==I){if(eO){N={1:[0,0],2:[0,0]};for(y=I.length-1;y>=0;--y){75===(g=I.charCodeAt(y))?g=disambiguate960Rook(119,-1):81===g?g=disambiguate960Rook(112,1):107===g?g=disambiguate960Rook(7,-1):113===g&&(g=disambiguate960Rook(0,1));M=g<97?A:C;x=ec[String.fromCharCode(g)];if(a||ev[x]===(T|M)){g>=97?eb[M]>=1&&eb[M]<=6&&(eC[M]|=1<<x):eb[M]>=113&&eb[M]<=118&&(eC[M]|=1<<x-112);++N[M][(eb[M]<x)*1]}}(N[A][0]>1||N[A][1]>1)&&(eC[A]=0);(N[C][0]>1||N[C][1]>1)&&(eC[C]=0)}else{if(!a)for(y=I.length-1;y>=0;--y){M=97>I.charCodeAt(y)?A:C;(ev[ec[I[y]]]!==(T|M)||eb[M]!==(M===A?116:4))&&(I=I.substr(0,y)+I.substr(y+1))}for(y=I.length-1;y>=0;--y)switch(I[y]){case"K":eC[A]|=el.KSIDE_CASTLE;break;case"Q":eC[A]|=el.QSIDE_CASTLE;break;case"k":eC[C]|=el.KSIDE_CASTLE;break;case"q":eC[C]|=el.QSIDE_CASTLE}}}!a&&(2!==R.length||eA===A&&"6"!==R[1]||eA===C&&"3"!==R[1]||ev[R.charCodeAt(0)-97+(8-("3"===R[1]?4:5))*16]!==(w|swapColor(eA))||ev[f[R]])&&(R="-");ew="-"===R?b:f[R];ek=1*l[4]||0;eS=1*l[5]||1;if(e_===c["3-check"]){l[6]&&"+3+3"!==l[6]&&(k=l[6].match(/^\+([0-3])\+([0-3])$/));k=k||[0,0,0];eN[A]=1*k[1];eN[C]=1*k[2]}if(!n){eE=eS;updateSetup(generateFen())}return!0}function generateStandardFen(){var e,t,n=0,a="",l="";for(e=0;e<120;++e){if(136&e){n&&(a+=n);a+="/";n=0;e+=8}t=ev[e];if(t){if(n){a+=n;n=0}a+=z[t&x]}else++n}return n&&(a+=n),eC[A]&el.KSIDE_CASTLE&&(l+="K"),eC[A]&el.QSIDE_CASTLE&&(l+="Q"),eC[C]&el.KSIDE_CASTLE&&(l+="k"),eC[C]&el.QSIDE_CASTLE&&(l+="q"),a+=" "+(eA===A?"w":"b")+" "+(l||"-")+" "+(ew===b?"-":algebraic(ew))+" "+ek+" "+eS}function generateVariantFen(){var e,t,n,a=0,l="",d="";for(e=0;e<120;++e){if(136&e){a&&(l+=a);l+="/";a=0;e+=8}n=ev[e];if(n){if(a){l+=a;a=0}l+=z[n&x];ex&&n&O&&(l+="~")}else++a}a&&(l+=a);ex&&(l+="/"+handToString(eg._hand[A],!0)+handToString(eg._hand[C]));if(eO){t=eC[C];e=0;for(;t;){1&t&&(d=String.fromCharCode(e+97)+d);t>>=1;++e}t=eC[A];e=0;for(;t;){1&t&&(d=String.fromCharCode(e+65)+d);t>>=1;++e}}else{eC[A]&el.KSIDE_CASTLE&&(d+="K");eC[A]&el.QSIDE_CASTLE&&(d+="Q");eC[C]&el.KSIDE_CASTLE&&(d+="k");eC[C]&el.QSIDE_CASTLE&&(d+="q")}return l+=" "+(eA===A?"w":"b")+" "+(d||"-")+" "+(ew===b?"-":algebraic(ew))+" "+ek+" "+eS,e_===c["3-check"]?l+=" +"+eN[A]+"+"+eN[C]:e_!==c.Bughouse||eg.isDependent||(l+=" | "+eg.siblingGame.fen()),l}function generateFen(){return e_?generateVariantFen():generateStandardFen()}function setHeader(e){var t,n,a;for(t=0;t<e.length;t+=2){n=e[t];a=e[t+1];if(n){if("Variant"===n){setVariant(a);a=e_?d[e_]:void 0}"Result"===n&&"*"!==a&&"1-0"!==a&&"0-1"!==a&&"1/2-1/2"!==a&&(a="*");void 0!==a?eL[n]=String(a):ed.indexOf(n)>-1?"Date"===n?eL[n]="????.??.??":eL[n]="?":delete eL[n]}}return eL}function updateSetup(e){if(!(eT.length>0)&&!eP){if(e!==j){eL.SetUp="1";eL.FEN=e;eT.hash=null}else{delete eL.SetUp;delete eL.FEN;eT.hash=[1178310168,378666140]}}}function get(e){var t=ev[f[e]];return t?{type:z[t&N|C],color:t&L,promoted:(t&O)!=0}:null}function chooseKingThreats(e,t){return eO&&eC[e]?et:!(eC[e]&el.KSIDE_CASTLE)||ev[t+1]||ev[t+2]?!(eC[e]&el.QSIDE_CASTLE)||ev[t-1]||ev[t-2]||ev[t-3]?X:(l=el.QSIDE_CASTLE,J):!(eC[e]&el.QSIDE_CASTLE)||ev[t-1]||ev[t-2]||ev[t-3]?(l=el.KSIDE_CASTLE,Y):(l=el.KQSIDE_CASTLE,ee)}function calculateLegalMoveInfo(t,c){var d,f,m,g,_,y,A,C,k,S,T,M,P,L=eA,x=ev;e=[];n=0;a=0;l=0;x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=x[24]=x[25]=x[26]=x[27]=x[28]=x[29]=x[30]=x[31]=x[40]=x[41]=x[42]=x[43]=x[44]=x[45]=x[46]=x[47]=x[56]=x[57]=x[58]=x[59]=x[60]=x[61]=x[62]=x[63]=x[72]=x[73]=x[74]=x[75]=x[76]=x[77]=x[78]=x[79]=x[88]=x[89]=x[90]=x[91]=x[92]=x[93]=x[94]=x[95]=x[104]=x[105]=x[106]=x[107]=x[108]=x[109]=x[110]=x[111]=x[120]=x[121]=x[122]=x[123]=x[124]=x[125]=x[126]=x[127]=0;if(c===b){e=getPieces(ev,L|t);return}M=chooseKingThreats(L,c);for(d=0;d<120;++d){136&d&&(d+=8);g=ev[d];if(g){if(g&L){(!t||(0|g)&t)&&e.push(d);continue}P=M[d-c+119];if((P&g)!=0){if(g&w){k=G[g];for(f=1;f<3;++f){A=d+k[f];if(!(136&A)){x[A+8]|=R;if(A===c){++n;x[d+8]|=B}}}}else{C=(k=G[g&N]).length;T=g&I;t:for(f=0;f<C;++f){S=k[f];A=d;if((!(c>A)||!(S<0)||!(c-A>16))&&(!(c<A)||!(S>0)||!(A-c>16)))for(;(136&(A+=S))==0;){x[A+8]|=R;_=ev[A];if(_){if(_&L){if(A===c){for(m=A-S;m!==d;m-=S)x[m+8]|=B;x[d+8]|=B;++n;T&&(136&(A+=S))==0&&(x[A+8]|=R)}else if(T&&256&P){y=A;for(;(y+=S)!==c;)if(136&y||ev[y])continue t;x[A+8]|=V+(Math.abs(S)<<H);++a}}break}if(!T)break}}}}}}n>1&&(e=[c])}function validateEnPassant(e,t){var a,l,c,d=t+16*(eA===A?1:-1);return(1!==n||(ev[t+8]&B)!=0||(ev[d+8]&B)!=0)&&(a=ev[e],ev[t]=a,ev[e]=0,l=ev[d],ev[d]=0,c=inCheck(),ev[e]=a,ev[t]=0,ev[d]=l,!c)}function addCastlingMoves(e){var t,n,a;if(eO){if(eC[e]){n=(t=eb[e])%8;for(a=0;a<8;++a)if(eC[e]&1<<a&&canCastle960(ev,t,a,e)){m[_++]=(a>n?el.KSIDE_CASTLE:el.QSIDE_CASTLE)+(t<<D)+(t+(a-n)<<F);++a}}}else{if(l&el.KSIDE_CASTLE){n=(t=eb[e])+2;0===ev[t+9]&&0===ev[t+10]&&(m[_++]=el.KSIDE_CASTLE+(t<<D)+(n<<F))}if(l&el.QSIDE_CASTLE){n=(t=eb[e])-2;0===ev[t+7]&&0===ev[t+6]&&(m[_++]=el.QSIDE_CASTLE+(t<<D)+(n<<F))}}}function drop(e,t,a){var l,c,d,f,g;if(!e){t&&(t>>=26);for(f=0;f<5;++f)if((!t||(0|t)==1<<f)&&eg._hand[a]&er[f]<<eo[f]){if(0===f){l=16;c=103;d=el.DROP}else{l=0;c=119;d=el.DROP|f<<$}for(g=l;g<=c;++g){136&g&&(g+=8);!ev[g]&&(0===n||1===n&&ev[g+8]&B)&&(m[_++]=d|g<<F)}if(t)return}}}function generateMoves(t,l){var c,d,f,b,A,C,S,T,M,P,L=eA,x=swapColor(L),O=eb[L];calculateLegalMoveInfo(t,O);y=e.length;_=g;for(M=0;M<y;++M){b=ev[c=e[M]];if(!n||!a||!(ev[c+8]&V)){if(b&w){C=G[b];if(0===a||(ev[c+8]&V)==0||ev[c+8]>>H==16){A=c+C[0];if(0===ev[A]){addPawnMove(ev,c,A,0);eu[L]!==rank(c)||ev[A+=C[0]]||addPawnMove(ev,c,A,el.BIG_PAWN)}}for(d=1;d<3;++d)!(136&(A=c+(S=C[d])))&&(!a||!(ev[c+8]&V)||ev[c+8]>>H===Math.abs(S))&&(ev[A]&x?addPawnMove(ev,c,A,el.CAPTURE):A===ew&&validateEnPassant(c,A)&&(m[_++]=el.EP_CAPTURE|c<<D|A<<F))}else{if(a&&ev[c+8]&V){if(b&k||!(Q[c-eb[L]+119]&b))continue;C=[S=ev[c+8]>>H,-S]}else C=G[b&N];P=c<<D;if(c===O){for(d=0;d<8;++d)(136&(A=c+(S=C[d])))==0&&(ev[A]?ev[A]&x&&(ev[A+8]&R)==0&&(m[_++]=el.CAPTURE|P|A<<F):(ev[A+8]&R)==0&&(m[_++]=P|A<<F));0===n&&addCastlingMoves(L)}else{f=C.length;T=b&I;for(d=0;d<f;++d){S=C[d];A=c;for(;;){A+=S;if(136&A)break;if(ev[A]){ev[A]&x&&(0===n||ev[A+8]&B)&&(m[_++]=el.CAPTURE|P|A<<F);break}(0===n||ev[A+8]&B)&&(m[_++]=P|A<<F);if(!T)break}}}}}}return e_&&(ex?drop(l,t,L):!eO&&isVariantWin()&&(_=g)),_}function inCheckAfterMove(e,t,n,a){var l,d,f,m,g,_,y,C,k;if(e_===c["King of the Hill"]&&e&P&&kingOfTheHillWin(n))return!0;if(a&el.KQSIDE_CASTLE){n=eA===A?a&el.KSIDE_CASTLE?117:115:a&el.KSIDE_CASTLE?5:3;e=T;k=!0}l=eb[swapColor(eA)];if(l===b)return!1;if((e&P)==0){d=Q[n-l+119];if(d&e){m=en[n-l+119];_=e&I;g=n+m;for(;(136&g)==0;){if(g===l){if(e&w){if((e&L)===A?l-n<0:l-n>0)return!0;break}return!0}if(g!==t&&ev[g]||!_)break;g+=m}}}if(!k){f=Q[t-l+119];if(f&I){m=en[t-l+119];if(m!==en[n-l+119]){g=l-m;for(;(136&g)==0;){if(g!==t){y=ev[g];if(y){if(y&eA&&f&y&&y&I)return!0;break}}g-=m}}}if(a&el.EP_CAPTURE){f=Q[(C=n+16*(eA===A?1:-1))-l+119];if(f&I){m=en[C-l+119];g=l-m;for(;(136&g)==0;){if(g!==t&&g!==C){if(g===n)break;y=ev[g];if(y){if(y&eA&&f&y&&y&I)return!0;break}}g-=m}}}}return!1}function attacked(e,t){var n,a,l,c,d=G[k],f=k|e;for(n=0;n<8;++n){l=t+d[n];if((136&l)==0){a=ev[l];if((a&f)===f)return!0}}d=G[P];for(n=0;n<8;++n){l=t+(c=d[n]);for(;(136&l)==0;){a=ev[l];if(a){if(a&e&&Q[t-l+119]&a&&(!(a&w)||(e===A?t-l<0:t-l>0)))return!0;break}l+=c}}return!1}function kingAttacked(e){return eb[e]!==b&&attacked(swapColor(e),eb[e])}function inCheck(){return kingAttacked(eA)}function checkIsPotentiallyBlockable(){var e,t,n,a=16384;return eg._hand[eA]+=a,e=g,g=_,t=y,n=generateMoves()!==g,_=g,g=e,y=t,eg._hand[eA]-=a,n}function inCheckmate(){return inCheck()&&(m[0]=0)===generateMoves()&&!m[0]&&(e_!==c.Bughouse||!checkIsPotentiallyBlockable())}function inStalemate(){var e=!inCheck()&&(m[0]=0)===generateMoves()&&!m[0];return e&&e_===c.Bughouse&&!eg.isDependent&&(e=eg.siblingGame.inStalemate()),e&&eb[eA]!==b}function insufficientMaterial(e){var t,n,a=0,l=0,c=0;for(n=0;n<120;++n){136&n&&(n+=8);t=ev[n];if(t){if(e&&(t&e)==0)continue;if(100&t)return!1;if(t&k){if(l||a++)return!1}else if(t&S){if(a)return!1;++l;(rank(n)+n)%2&&++c;if(c&&l!==c)return!1}}}return eb[A]!==b&&eb[C]!==b}function inThreefoldRepetition(){if(ek<8)return!1;for(var e,t=getCurrentHash(),n=!1,a=ek,l=!1,c=eT,d=c.length-1;;){d-=2;if(d<0){if(c.id){d=c.atMoveNode+d+2;c=eM[c.parentId];continue}if(-2===d)return!1;e=c.hash;l=!0}else{e=c[d].hash;c[d].halfMoves>a||a<2?l=!0:a=c[d].halfMoves}if(e[0]===t[0]&&e[1]===t[1]){if(n)return!0;n=!0}if(l)return!1}}function modifyHand(e){var n,a,l,d,f,m,g,_,y,b,C=e.move;if(e_===c.Crazyhouse||C&el.DROP){a=eg._hand;m=e.hash;b=e.color}else{a=eg.siblingGame._hand;e.handSibling=!0;if(ey){g=eg.siblingGame._history();if(g.length)m=g[g.length-1].hash;else{g.hash||(g.hash=eg.siblingGame._hashPosition());m=g.hash}}b=swapColor(e.color)}if(e.captured){l=e.captured&O?w:e.captured&N;switch(l&N){case w:_=0;break;case k:_=1;break;case S:_=2;break;case T:_=3;break;default:_=4}n=1<<eo[_];if(ey){f=a[b]>>eo[_]&er[_];y=t.zobristPiece[f+63*_+(b===A?0:315)]}}else{n=-1<<eo[d=C>>$];if(ey){f=a[b]>>eo[d]&er[d];y=t.zobristPiece[f-1+63*d+(b===A?0:315)]}}a[b]+=n;e.handChange=n;ey&&hashNum(m,[31*y[0]>>>0,17*y[1]>>>0])}function makeMoveChess(e,n,a,l){var c,d,f,m,g,_,y,k,S=eA,M=swapColor(S),L={move:e,epSquare:ew,halfMoves:ek,castlingW:eC[A],castlingB:eC[C],color:S},N=S===A;if(ey){m=getCurrentHash();L.hash=m;hashNum(m,t.zobristTurn);ew!==b&&hashEP(ev,m,ew+(N?16:-16),w|S)}if((e&el.KQSIDE_CASTLE)==0){if(ex&&e&el.DROP){ev[a]=ea[l]|S;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]]+8*(7-rank(a))+file(a)]);modifyHand(L);y=0}else{y=ev[n];k=ev[a];if(k){L.captured=k;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]&x]+8*(7-rank(a))+file(a)]);if(k&T&&eC[M]){if(eO){if(rank(a)===(N?0:7)){f=1<<file(a);if(eC[M]&f){eC[M]^=f;ey&&(f>1<<file(eb[S])?hashNum(m,t.zobristCastle[M-1]):hashNum(m,t.zobristCastle[M+1]))}}}else if(a===(N?7:119)){if(eC[M]&el.KSIDE_CASTLE){eC[M]^=el.KSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[M-1])}}else if(a===(N?0:112)&&eC[M]&el.QSIDE_CASTLE){eC[M]^=el.QSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[M+1])}}}e&el.PROMOTION?ev[a]=ea[l]|S|O:ev[a]=ev[n];ev[n]=0;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[y&x]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]&x]+8*(7-rank(a))+file(a)])}}}else y=P;if(e&el.EP_CAPTURE){if(N){_=a+16;g=6}else{_=a-16;g=8}L.captured=w|M;ev[_]=0;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[w|M]+8*(g-rank(a))+file(a)])}else if(y&P){if(eO){if(e&el.KQSIDE_CASTLE){ev[a]=0;ev[n]=0;if(e&el.KSIDE_CASTLE){if(N){c=118;d=117}else{c=6;d=5}}else if(N){c=114;d=115}else{c=2;d=3}ev[c]=S|P;ev[d]=S|T;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(a))+file(a)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(c))+file(c)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(d))+file(d)])}}if(ey){if((eC[S]&eC[S]-1)!=0){hashNum(m,t.zobristCastle[S-1]);hashNum(m,t.zobristCastle[S+1])}else eC[S]>1<<file(eb[S])?hashNum(m,t.zobristCastle[S-1]):hashNum(m,t.zobristCastle[S+1])}eb[S]=c||a}else{if(e&el.KQSIDE_CASTLE){ev[a]=ev[n];ev[n]=0;if(e&el.KSIDE_CASTLE){c=a-1;d=a+1}else{c=a+1;d=a-2}ev[c]=ev[d];ev[d]=0;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(d))+file(d)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(a))+file(a)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(c))+file(c)])}}if(ey){eC[S]&el.KSIDE_CASTLE&&hashNum(m,t.zobristCastle[S-1]);eC[S]&el.QSIDE_CASTLE&&hashNum(m,t.zobristCastle[S+1])}eb[S]=a}eC[S]=0}else if(y&T&&eC[S]){if(eO){if(rank(n)===(N?7:0)){f=1<<file(n);if(eC[S]&f){eC[S]^=f;ey&&(f>1<<file(eb[S])?hashNum(m,t.zobristCastle[S-1]):hashNum(m,t.zobristCastle[S+1]))}}}else if(n===(N?119:7)){if(eC[S]&el.KSIDE_CASTLE){eC[S]^=el.KSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[S-1])}}else if(n===(N?112:0)&&eC[S]&el.QSIDE_CASTLE){eC[S]^=el.QSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[S+1])}}if(e&el.BIG_PAWN){ew=N?a+16:a-16;ey&&hashEP(ev,m,a,w|M)}else ew=b;y&w||e&el.ANY_CAPTURE?ek=0:ek++;eA=M;eT.push(L)}function makeNullMove(){var e,n={color:eA,san:"--",epSquare:ew},a={color:eA,san:"--"};if(ey){e=getCurrentHash();n.hash=e;hashNum(e,t.zobristTurn);ew!==b&&hashEP(ev,e,ew+(eA===A?16:-16),w|eA)}return ew=b,ek++,(eA=swapColor(eA))===A&&++eS,eT.push(n),a}function makeMoveVariant(e,n,a,l){var d,f=eA;makeMoveChess(e,n,a,l);d=eT[eT.length-1];if(ex){ek=d.halfMoves+1;d.captured&&modifyHand(d);e_===c.Bughouse&&(d.bughouseOrder=eg.moveCount()-1+eg.siblingGame.moveCount())}else if(e_===c["3-check"]&&kingAttacked(eA)){d.checked=!0;ey&&eN[f]&&hashNum(d.hash,t.zobristCheck[eN[f]+(f===A?-1:2)]);++eN[f];ey&&hashNum(d.hash,t.zobristCheck[eN[f]+(f===A?-1:2)])}}function reverseMove(e){var t,n,a=eA,l=swapColor(a),d=e.move,f=d>>F&U,m=d>>D&U;eA=l;eC[C]=e.castlingB;eC[A]=e.castlingW;ew=e.epSquare;ek=e.halfMoves;if(e_){if(eO&&d&el.KQSIDE_CASTLE){if(d&el.KSIDE_CASTLE){if(l===A){n=118;t=117}else{n=6;t=5}}else if(l===A){n=114;t=115}else{n=2;t=3}ev[n]=0;ev[t]=0;ev[m]=l|P;ev[f]=l|T;eb[l]=m;return}e.handChange&&(e_!==c.Crazyhouse&&e.handSibling?eg.siblingGame._hand[swapColor(l)]-=e.handChange:eg._hand[l]-=e.handChange);if(d&el.DROP){ev[f]=0;return}e.checked&&--eN[l]}if(d&el.PROMOTION){ev[m]=w|l;d&el.CAPTURE?ev[f]=e.captured:ev[f]=0}else{ev[m]=ev[f];if(d&el.KQSIDE_CASTLE){ev[f]=0;if(d&el.KSIDE_CASTLE){t=f+1;n=f-1}else{t=f-2;n=f+1}ev[t]=l|T;ev[n]=0;eb[l]=m}else{f===eb[l]&&(eb[l]=m);if(d&el.CAPTURE)ev[f]=e.captured;else{ev[f]=0;d&el.EP_CAPTURE&&(ev[f-(l===A?-16:16)]=w|a)}}}}function getDisambiguator(e,t,n){var a,l,c,d,f,g,y,b;if(_<2)return"";e&=N;for(b=0;b<_;++b){y=(a=m[b])>>F;if(n===y){d=a>>D&U;if(d!==t){l=ev[d];if(l&e){c=!0;if(rank(t)===rank(d)){if(f)return algebraic(t);g=!0}if(file(t)===file(d)){if(g)return algebraic(t);f=!0}}}}}return c?f?String(8-rank(t)):String.fromCharCode(file(t)+97):""}function beautifyMove(e,t,n){var a,l,c=e>>F&U,d={color:eA,to:algebraic(c),flags:e&U};if(ex&&(e&el.DROP)!=0){l=e>>$;d.drop=l;d.piece=ea[l]+eA}else{a=e>>D&U;d.from=algebraic(a);d.piece=ev[a];if(e&el.PROMOTION){l=e>>$;d.promotion=ea[l]+eA}e&el.CAPTURE?d.captured=ev[c]:e&el.EP_CAPTURE&&(d.captured=w|swapColor(eA))}return t?d.san=t:d.san=moveToSan(e,n),d}function isVariantWin(){return e_===c["3-check"]?3===eN[swapColor(eA)]:e_===c["King of the Hill"]?kingOfTheHillWin(eb[swapColor(eA)]):void 0}function isBughouseWin(){if(e_===c.Bughouse)return eg.siblingGame.inCheckmate()}function isBughouseDraw(){if(e_===c.Bughouse)return eg.siblingGame.in50MoveRule()||eg.siblingGame.inThreefoldRepetition()}function createVariation(){var e=[],t=generateFen(),n=eT.length-1,a=eT[n];if(!a)return!1;e.parentId=eP;e.id=eM.length;eT.curFen=t;a.lines||(a.lines=[]);a.lines.push(e.id);if(a.move)reverseMove(a);else{ew=a.epSquare;--ek;eA=swapColor(eA)}return eA===C&&--eS,e.atMoveNode=n,n?e.hash=eT[n-1].hash:e.hash=eT.hash,eP=e.id,eM.push(e),eT=e,!0}function selectLine(e){var t=generateFen();eT.curFen=t;eT=eM[e];eP=e;load(eT.curFen,e_,!0,!0)}return eg={WHITE:A,BLACK:C,PAWN:w,KNIGHT:k,BISHOP:S,ROOK:T,QUEEN:M,KING:P,FLAGS:el,load:load,reset:reset,moves:function(e){var t,n,a,l=[],c=moveToSan;if(e){e.verbose&&(c=beautifyMove);e.type&&(n=e.type|e.type<<24);a=e.noDrop}generateMoves(n,a);for(t=0;t<_;++t)l.push(c(m[t]));return l},inCheck:inCheck,inCheckmate:inCheckmate,inStalemate:inStalemate,isBughouseWin:isBughouseWin,in50MoveRule:function(){return ek>=100},inDraw:function(){return ek>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||!!isBughouseDraw()},insufficientMaterial:insufficientMaterial,inThreefoldRepetition:inThreefoldRepetition,isVariantWin:isVariantWin,gameOver:function(){return eg.inDraw()||inCheckmate()||!!isVariantWin()||!!isBughouseWin()},isPositionValid:function(e){var t,n,a,l=0;e=e||{};if(!1!==e.pawns){t=0;for(;t<=119;){a=ev[t];if(a&w)return!1;8==++t&&(t=112)}}if(!1!==e.kings){for(t=0;t<=119;++t){136&t&&(t+=8);a=ev[t];if(a&P){if(++l>2||n&&n&a)return!1;n=a&L}}if(2!==l)return!1}return!(!1!==e.check&&!(!1===e.kings&&eb[swapColor(eA)]===b)&&kingAttacked(swapColor(eA)))},validateFen:validateFen,fen:generateFen,pgn:function(e){return(e=e||{}).useResultHeader||eP||(isVariantWin()||inCheckmate()?eL.Result=eA===C?"1-0":"0-1":eg.inStalemate()?eL.Result="1/2-1/2":isBughouseWin()&&(eL.Result=eg.siblingGame.turn()===A?"1-0":"0-1")),ep(e,eL,eM,eE,e_,eg)},loadPgn:function(e,t,n){var a,l,c,d,f,m,g,_,y={},b=0;if("number"!=typeof t){n=n||t;t=0}n=n||{};if("string"==typeof e){n.singleGame&&(e=e.replace(/(?:\r?\n\s*){2,}/g,"\n"));e=eg.tokenizePgn(e,n)}n.recordErrorInfo&&(_=function(e,a){var l={reason:e,token:a,lineStart:c._lineStart,colStart:c._colStart,lineEnd:c._lineEnd,colEnd:c._colEnd,pgnIndex:t};return n.errors||(n.errors=[]),n.errors.push(l),!1});t<0&&(t=e.length+t);d=e[t];if(!d)return!1;reset();l=d.length;for(a=0;a<l;++a){c=d[a];if("tagName"!==c.type)break;if(!d[a+1]||"tagValue"!==d[a+1].type)return!1;++a;"FEN"===c.value?g=completeFen(d[a].value):y[c.value]=d[a].value}n.variant&&(y.Variant=n.variant);y.Variant&&!g&&(g=j);if(g||"1"===y.SetUp){if("0"===y.SetUp)y.FEN=g;else if(!g||!load(g,y.Variant))return!1}eg.header(y);m=(f=eg)._history();for(;a<l;++a){c=d[a];if("san"===c.type&&0===b){if(!f.move(c.value)&&("Z0"!==c.value&&"<>"!==c.value||n.rejectNullMoves||!f.move("--"))){_&&_("Invalid SAN move",c.value);if(n.commentErrors)m.length?m[m.length-1].comment=((m[m.length-1].comment||"")+" "+c.value).trim():m.initComment=((m.initComment||"")+" "+c.value).trim();else if(n.skipBadLines&&(0!==eP||eT.length&&n.allowBadMainLine))b=1;else{reset();return!1}}}else if("result"===c.type&&"*"===eL.Result)setHeader(["Result",c.value]);else if("a"===c.type&&0===b&&m[m.length-1])m[m.length-1].annotation=c.value;else if(("nag"===c.type||"aa"===c.type)&&0===b&&m[m.length-1]){m[m.length-1].additionalAnnotation||(m[m.length-1].additionalAnnotation=[]);-1===m[m.length-1].additionalAnnotation.indexOf(c.value)&&m[m.length-1].additionalAnnotation.push(c.value)}else if("comment"===c.type&&0===b){if(m.length){c.value&&(m[m.length-1].comment=c.value);if(c.commands){m[m.length-1].commands=c.commands;c.commands.clk?m[m.length-1].time=timestampToTime(c.commands.clk):c.commands.emt&&(c.commands.timestamp=String(timestampToTime(c.commands.emt)))}}else{m.initComment=String(c.value);c.commands&&(m.commands=c.commands)}}else if("variationStart"===c.type){if(b>0)++b;else if(!createVariation()){reset();return!!_&&_("Invalid variation start","(")}m=f._history()}else if("variationEnd"===c.type){b>0&&--b;if(0===b){selectLine(m.parentId);m=f._history()}}else if("number"===c.type){f=/b/i.test(c.value.slice(-1))?eg.siblingGame:eg;if(!f)return!!_&&_("Invalid Bughouse move number",c.value);m=f._history()}else"cont"===c.type&&eP&&!m.length&&f.move(f._lines()[m.parentId][m.atMoveNode].san)}return!0},header:function(e){return Array.isArray(e)?setHeader(e):("object"==typeof e&&Object.keys(e).forEach(function(t){setHeader([t,e[t]])}),eL)},turn:function(e){return(e===A||e===C)&&(eA=e),eA},move:function playMove(e){var t,n,a,l,c,d,g,y,b,C,k,S,T;if("string"==typeof e){l=e.length-1;switch(e[l]){case"+":case"#":e=e.substr(0,l)}b=W.indexOf(e[0])>6?Z[e[0]]:"O"===e[0]?P:w;if(ex){if(-1===e.indexOf("@"))C=!0;else{C=!1;b<<=24}}generateMoves(b,C);for(l=0;l<_;++l){d=moveToSan(m[l],!0);if(e===d){n=m[l];break}}if(n){g=n>>D&U;y=n>>F&U;a=n>>$}else{if("--"===e)return makeNullMove();if(e=eg.fixMove(e))try{return playMove(e)}catch(e){}return null}}else{if(e.drop){switch(e.drop){case"p":a=0;break;case"n":a=1;break;case"b":a=2;break;case"r":a=3;break;case"q":a=4;break;default:return null}b=1<<26+a}else{if(e.promotion)switch(e.promotion){case"q":a=4;break;case"n":a=1;break;case"r":a=3;break;case"b":a=2;break;default:return null}g=f[e.from];C=!0;b=ev[g]&N}t=((a?a<<$:0)|(y=f[e.to])<<F)>>D|g;generateMoves(b,C);for(l=0;l<_;++l)if(m[l]>>D===t){n=m[l];break}if(!n)return(e=eg.fixMove(e))?playMove(e):null}return T=n&el.DROP_OR_PROMOTE?ea[a]+eA:ev[g],c=beautifyMove(n,d,!0),k=inCheckAfterMove(T,g,y,n),eI(n,g,y,a),k&&(e_&&isVariantWin()||0===generateMoves()?c.san+="#":c.san+="+"),(S=eT[eT.length-1]).san=c.san,c.piece&O&&(S.promoted=!0),eA===A&&++eS,c},undo:function(e){var t=eT.pop();return t?(eA===A&&--eS,t.move)?(reverseMove(t),!!e||beautifyMove(t.move,t.san)):(ew=t.epSquare,--ek,eA=swapColor(eA),!!e||{san:"--",color:t.color}):null},clear:function(e){clear(e)},put:function(e,t,n){var a,l=f[t],c=!1,d=ev[l],m=d&L,g=e.color;if(isNaN(l)||!e.type||!g||-1===W.indexOf(e.type))return!1;ev[l]=Z[e.type]|g|(e.promoted?O:0);ev[l]&P&&(eb[g]=l);if(d&&ev[eb[m]]&&ev[eb[m]]!==(P|m)){for(a=0;a<120;++a){136&a&&(a+=8);if(ev[a]===(P|m)){eb[m]=a;c=!0}}c||(eb[m]=b)}return n||load(generateFen(),e_,!1,!1),!0},get:get,remove:function(e,t){var n,a=ev[f[e]],l=get(e),c=a&L;ev[f[e]]=0;if(a&P){eb[c]=b;eC[c]=0;for(n=0;n<120;++n){136&n&&(n+=8);if(ev[n]===(P|c)){eb[a.color]=n;break}}}return t||load(generateFen(),e_,!0,!1),l},history:function(e,t){for(var n,a=[],l=eT,c=l.length;;){if(-1==--c){if(l.id&&!t){c=l.atMoveNode;l=eM[l.parentId];continue}break}if(e){(n=beautifyMove(l[c].move,l[c].san)).color=l[c].color;!c&&l.initComment&&(n.firstComment=l.initComment);void 0!==l[c].comment&&(n.comment=l[c].comment);void 0!==l[c].time&&(n.time=l[c].time);void 0!==l[c].annotation&&(n.annotation=l[c].annotation);void 0!==l[c].additionalAnnotation&&(n.additionalAnnotation=l[c].additionalAnnotation);void 0!==l[c].commands&&(n.commands=l[c].commands);void 0!==l[c].captured&&(n.captured=l[c].captured);void 0!==l[c].promoted&&(n.promoted=l[c].promoted);void 0!==l[c].lines&&(n.lines=l[c].lines);void 0!==l[c].bughouseOrder&&(n.bughouseOrder=l[c].bughouseOrder);W.indexOf(l[c].san[0])>6?n.piece=Z[l[c].san[0]]:"O"===l[c].san[0]?n.piece=P:n.piece=w;n.piece|=n.color;a.unshift(n)}else a.unshift(l[c].san)}return a},hashes:function(){for(var e=[],t=eT,n=t.length;;){if(-1==--n){if(t.id){n=t.atMoveNode;t=eM[t.parentId];continue}t.hash||getCurrentHash();e.unshift(t.hash);break}e.unshift(t[n].hash)}return e},moveCount:function(){return eT.length},startingMoveNumber:function(){return eE},completeFen:completeFen,createVariation:createVariation,selectLine:selectLine,hash:function(){var e=getCurrentHash();return e_!==c.Bughouse||eg.isDependent?e:[e,eg.siblingGame.hash()]},hashing:function(e){ey=e;e_!==c.Bughouse||eg.isDependent||eg.siblingGame.hashing(ey)},hand:function(){if(ex)return handToString(eg._hand[A],!0)+handToString(eg._hand[C])},checks:function(){if(e_===c["3-check"])return[eN[A],eN[C]]},threats:function(){var e,t,l,c,d,f,y,A=eA,C=swapColor(A),w=[],k=[],S=[],T=[],M=[],P=ew;calculateLegalMoveInfo(0,eb[A]);if(n||a)for(e=0;e<120;++e){136&e&&(e+=8);ev[e+8]&B&&ev[e]?S.push(algebraic(e)):ev[e+8]&V&&w.push(algebraic(e))}eA=C;ew=b;generateMoves();for(e=_;e--;){d=(t=m[e])>>F&U;f=t>>D&U;if(t&el.DROP_OR_PROMOTE){c=ea[y=t>>$]|C;if(t&el.PROMOTION&&y%3!=1)continue}else{c=ev[f];y=0}if(inCheckAfterMove(c,f,d,t)){eI(t,f,d,y);g=e;(e_&&isVariantWin()||generateMoves()===e)&&k.push((t&el.DROP?z[c].toLowerCase()+"@":algebraic(f))+algebraic(d));reverseMove(eT.pop());if(t&el.CAPTURE){l=0;for(e=_;e>g;)if((m[--e]>>F&U)===d){l=1;e=g;break}if(!l){T.push(algebraic(f)+algebraic(d));continue}}}t&el.CAPTURE&&1!==y&&(l=124&ev[d])&&(attacked(A,d)?l>(c=ev[f]&N)&&l-c!=8&&M.push(algebraic(f)+algebraic(d)):T.push(algebraic(f)+algebraic(d)))}return g=0,eA=A,ew=P,{pins:w,checkers:S,mates:k,undefended:T,underdefended:M}},tokenizePgn:em,fixMove:function(e){var t,n,a;if("string"==typeof e){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test(e))return e.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");n=e.indexOf("=")>0?-4:-2;t=f[e.substr(n,2)];if("number"==typeof t){if(ev[t]&swapColor(eA)||/^[a-h]x?[a-h][36]$/.test(e)){if(-1===e.indexOf("x"))return e.slice(0,n)+"x"+e.substr(n)}else if(e.indexOf("x")>-1)return e.replace(/x/g,"");if(a=e.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(ev[f[a[2]]])return{from:a[2],to:a[3],promotion:a[4].toLowerCase()};if(/^\d$/.test(a[2])){e=0;generateMoves(Z[a[1]],!0);for(n=0;n<_;++n)if(m[n]>>F===t&&rank(m[n]>>D&U)===8-a[2]){if(e)return;e=m[n]}if(e)return moveToSan(e,!0)}return a[1]+a[3]+a[4]}}}else if(ev[f[e.from]]===(P|eA)&&e.to&&e.from[1]===e.to[1]){if(e.from<e.to)return"O-O";if(e.from>e.to)return"O-O-O"}},_hand:[],_history:function(e){return e&&(eP=(eT=e).id),eT},_lines:function(){return eM},_hashPosition:hashPosition,_board:function(){return ev}},ef&&load(ef,eh)||reset(),eg}return Chess.variants=d,Chess}(),ENGINE_MANAGER=function(e){var n=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],a=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],l=["moves","searchmoves"],c=["ponder","infinite","startpos"],d={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},f=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function fakeWorker(e){var t,n=[],a=[],l={},c={isFakeWorker:!0},d=e.replace(/^[^#]*#/,"");function runAsync(e){setTimeout(e,1)}function flushMessages(e,n){var a;if(!t){if(e.onmessage){a=n.concat();n.length=0;a.forEach(function(t){try{e.onmessage({data:t})}catch(e){console.error(e)}})}else setTimeout(flushMessages,5,e,n)}}return function asyncImport(e,n){var a=document.createElement("script");a.setAttribute("src",e);a.onload=function onload(){a.remove();n(a._exports)};a.onerror=function onError(e){t=!0;a.remove();l.onerror(e)};document.head.appendChild(a)}(e,function(n){var a=e.replace(/[?#].*/,""),f=a.replace(/\/[^\/]+$/,"/"),m={locateFile:function(e){return e.indexOf(".wasm")>-1&&d?d:e.indexOf(".worker.js")>-1?a+"#"+d+",worker":f+e}};n(m).then(function(){n=null;function onBeforeunload(){m=null;t=!0}window.addEventListener("beforeunload",onBeforeunload,{once:!0});c.onmessage=function onmessage(e){var n=e.data;(m.onSpecialMessage||m.onCustomMessage)(n);if("quit"===n){m=null;t=!0;window.removeEventListener("beforeunload",onBeforeunload)}};m.addMessageListener(c.postMessage)}).catch(function(e){n=null;t=!0;l.onerror(e)})}),l.postMessage=function(e){n.push(e);runAsync(function(){flushMessages(c,n)})},c.postMessage=function(e){a.push(e);runAsync(function(){flushMessages(l,a)})},l.terminate=function(){},l}function requeue(e,t){var n=t.concat();t.length=0;n.forEach(function onEachCmd(t){if(t.cmd)"go"!==t.cmd.substr(0,2)&&e.send(t.cmd,t.cb,t.stream);else{clearTimeout(t.timer);e.getBestMove(t.args,t.cb,t.stream)}})}function createWebWorker(e,t,n){var a=e&&e.loader?e.loader+(e.engine?"#"+e.engine:""):"stockfish.js",l=t.useFakeWorker&&t.useFakeWorker[a.replace(/[?#].*$/,"")]?fakeWorker(a):new Worker(a),c={terminate:terminate,postMessage:postMessage};function postMessage(e){l.postMessage(e)}function terminate(){l.terminate()}return l.onmessage=function(e){"string"==typeof e.data&&c.onmessage(e.data)},l.onerror=function(e){var a,d=!0;n.availableEngines.shift();if(n.availableEngines.length){d=!1;try{e.preventDefault()}catch(e){}try{l.terminate()}catch(e){}(a=createWebWorker(n.availableEngines[0],t,n))._origWorker=c._origWorker||c;a.onmessage=function(e){a._origWorker.onmessage(e)};a._origWorker.postMessage=a.postMessage;a._origWorker.terminate=a.terminate;requeue(n,n._activeCommands());requeue(n,n._bestMoveQueue())}if(t.onError)return t.onError(e,d)},c}function getAvailableEngines(t){var n=[];if(t.engines){t.engines.multiThreaded&&e.supportsMultithreading()&&e.supportsSIMD()&&n.push(t.engines.multiThreaded);t.engines.multiThreadedNoSIMD&&e.supportsMultithreading()&&n.push(t.engines.multiThreadedNoSIMD);t.engines.singleThreaded&&n.push(t.engines.singleThreaded);t.engines.asm&&n.push({loader:t.engines.asm})}return(t.enginePath||t.pathToEngineWorker)&&n.push({loader:t.enginePath||t.pathToEngineWorker,engine:t.pathToWasmEngine}),(t.fallbackPath||t.pathToNonWasmEngine)&&n.push({loader:t.fallbackPath||t.pathToNonWasmEngine}),n}function createWorker(e,t){return t.availableEngines=getAvailableEngines(e),createWebWorker(t.availableEngines[0],e,t)}function parseSearchLine(e){for(var t,n,a=e.split(" "),l=a.length,c="info"===a[0]?1:0,f={mtype:a[0]};c<l;++c){n=a[c];if(n){t=d[n];if(1===t){for(;!a[++c]&&c<l;);f[n]=Number(a[c])}else if(2===t)f[n]=!0;else if(3===t){for(;!a[++c]&&c<l;);f[n]=a[c]}else{f[n]=[];for(++c;c<l;++c){if(d[a[c]]){--c;break}a[c]&&f[n].push(a[c])}}}}if("string"==typeof f.bestmove)switch(f.bestmove){case"(none)":case"0000":case"a1a1":f.bestmove=void 0;f.bestmoveSan=void 0}if("string"==typeof f.ponder)switch(f.ponder){case"(none)":case"0000":case"a1a1":f.ponder=void 0;f.ponderSan=void 0}return f}function getFirstWord(e){var t=e.indexOf(" ");return -1===t?e:e.substr(0,t)}function convertStockfishVariantFen(e){return(e+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(e,t,n,a){return" "+(3-n)+"+"+(3-a)+t})}function convertStandardVariantFen(e){return(e+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(e,t,n,a){return a+" +"+(3-t)+"+"+(3-n)})}function determineQueueNum(e,t){var n,a,l,c,d=getFirstWord(e);n="uciok"===d||"option"===d?"uci":"readyok"===d||"ready"===d?"isready":"json"===d||e.indexOf("info string CEEError")>=0?"fetch":"bestmove"===d||"info"===d?"go":"other";c=t.length;for(l=0;l<c;l+=1){a=getFirstWord(t[l].cmd);if(a===n||"other"===n&&("d"===a||"eval"===a))return l}return 0}function parseEngineName(e){var t=e.match(/id name ((\S+)(?: ([\S]+).*)?)/i);if(t&&t[1])return{all:t[1].trim(),short:t[2],version:t[3],full:(t[2]+" "+(t[3]||"")).trim(),wasm:/ wasm/i.test(e),multithreaded:/ multithreaded/i.test(e)}}function loadEngine(d,m){var g,_,y,b={},A=[],C=[],w=null,k={},S={};function onmessage(t){var n,a,l,c,m=0;if(t.indexOf("\n")>-1){l=t.split("\n");for(c=0;c<l.length;c+=1)onmessage(l[c]);return}e.log&&console.log("debug (onmessage): "+t);b.stream&&b.stream(t);if(!A.length||0===t.indexOf("No such option")||0===t.indexOf("Stockfish")||0===t.indexOf("Komodo")||0===t.indexOf("Explanation Engine")||0===t.indexOf("info string variant")){if(d.ceeMode&&0===t.indexOf("Explanation Engine")){var g=t.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\s*\(C\)/);w=g?{date:g[1],increment:g[2]}:{major:parseInt((g=t.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\.([0-9]+)/))[1]),minor:parseInt(g[2]),patch:parseInt(g[3])}}return}m=determineQueueNum(t,A);(a=A[m]).stream&&!a.discard&&a.stream(t);void 0===a.message?a.message="":""!==a.message&&(a.message+="\n");a.message+=t;if(0===t.indexOf("uciok")){b.name=parseEngineName(a.message);n=!0}else if(0===t.indexOf("ready"))n=!0;else if((0===t.indexOf("bestmove")||"bestmove"===getFirstWord(t))&&"bench"!==a.cmd){n=!0;a.message=t}else if("d"===a.cmd){if(0===t.indexOf("Legal uci moves")||0===t.indexOf("Key is")){a.done=!0;n=!0}}else if(0===a.cmd.indexOf("fetch"))try{var _=a.message.split("\n").filter(function(e){return e.startsWith("json")}).join("\n");if(_){a.message=JSON.parse(_.replace(/^json /mg,"").replace(/\n/g,""));n=!0}}catch(e){}else"eval"===a.cmd?f.test(a.message)&&(n=!0):0===t.indexOf("pawn key")?n=!0:0===t.indexOf("Nodes/second")?n=!0:0===t.indexOf("Unknown command")&&(n=!0);if(n){A.splice(m,1);a.cb&&!a.discard?a.cb(a.message):a.ondiscard&&a.ondiscard()}}function isPrintingCommand(e){return"ucinewgame"!==e&&"flip"!==e&&"stop"!==e&&"ponderhit"!==e&&0!==e.indexOf("position")&&0!==e.indexOf("setoption")&&0!==e.indexOf("variation")&&0!==e.indexOf("threat-variation")&&0!==e.indexOf("push")&&0!==e.indexOf("pop")&&0!==e.indexOf("serve")&&0!==e.indexOf("speech")}b.send=function(t,n,a){var l;isPrintingCommand(t=String(t).trim())?A.push({cmd:t,cb:n,stream:a}):l=!0;if(g){e.log&&console.log("stdin: "+t);g.postMessage(t);l&&n&&setTimeout(n,0)}};b._activeCommands=function(){return A};b._bestMoveQueue=function(){return C};b.quit=function(){if(g&&g.terminate){try{b.send("quit")}catch(e){}try{g.terminate()}catch(e){}g=null;b.ready=void 0}clearTimeout(_)};n.forEach(function oneach(e){b[e]=function makeSCmd(t,n){b.send(e,t,n)}});a.forEach(function oneach(e){b[e.cmd]=function makeCCmd(t,n,a){var d=[e.cmd];y&&t.fen&&(t.fen=convertStockfishVariantFen(t.fen));e.args.forEach(function oneach(e){if(t[e]||0===t[e]){if(l.indexOf(e)>-1){if(!t[e]||!t[e].length)return;Array.isArray(t[e])&&(t[e]=t[e].join(" "))}d.push(e);-1===c.indexOf(e)&&d.push(t[e])}});b.send(d.join(" "),n,a)}});b.setoption=function(e,t){b.send("setoption name "+e+" value "+t)};b.setVariant=function(e){var t;if(e!==y){t=String(e).toLowerCase().replace(/ |-/g,"");if(e&&"chess"!==t){if("chess960"===t){b.setoption("UCI_Variant","chess");b.setoption("UCI_Chess960","true")}else{"threecheck"===t&&(t="3check");b.setoption("UCI_Variant",t);b.setoption("UCI_Chess960","false")}}else{t=void 0;b.setoption("UCI_Variant","chess");b.setoption("UCI_Chess960","false")}y=t}};b.loadBook=function(e,n){b.pathToBook=e;t.loadBook(e,function onload(e,t){if(e){console.error("Error loading opening book.");console.error(e);b.pathToBook=null;b.bookLoaded=!1}else{b.book=t;b.rawBook=t.json;b.bookLoaded=!0}n()})};b.getBookMove=function(t){var n=e.createGame(t),a=b.book.pick({fen:n.fen(),type:void 0!==t.bookPick?t.bookPick:"random",chess960:"Chess960"===n.header().Variant}),l=a&&n.move(a);if(l)return{moveSan:l.san,moveLan:a,move:{from:l.from,to:l.to,promotion:l.promotion||null},baseTurn:1===n.turn()?"b":"w",pv:[{moveSan:l.san,moveLan:a}],depth:null,score:null,mateIn:null,isBookMove:!0}};function getCEE(t,n){var a=t.loader,l=k[a]=k[a]||[],c=S[a]=S[a]||[];return t.maxEngines&&(n%=t.maxEngines),l[n]&&void 0!==l[n].ready||(l[n]=e({enginePath:a,pathToWasmEngine:t.engine,ceeMode:!0})),clearTimeout(c[n]),c[n]=setTimeout(function(){try{l[n].quit()}catch(e){}l[n]=null},t.killDelay||1e4),l[n]}function classifyStream(n,a,l,c,d,f){var m,g=[],_=[],y=a.minDepth||14,A=[],C=[];function getClassification(d,f,g){var _={cp:f[d].cp,mateIn:f[d].mateIn,pv:f[d].pv.slice(1)},y=getCEE(a,d),w={moveLan:f[d].pv[0]},k=a.book||b.rawBook;function streamCEEData(e){A[d]=!1;if(!m&&b.ready){e.mtype="classification";e.depth=g;e.multipv=d+1;n(e);C[d]&&getClassification(d,C[d].evals,C[d].depth)}}if(A[d]){C[d]={evals:f,depth:g};return}k&&(w.isBook=!!k[t.to64BitHex(e.createGame({fen:l,moves:w.moveLan,variant:c}).hash())]);A[d]=!0;C[d]=null;y.fetch({action:"analysis",variant:c,startFen:l,moves:[w],evals:[f,[_]],options:{WhiteElo:a.whiteElo,BlackElo:a.blackElo,ScoreWhiteToMove:!0}},function onDone(e){streamCEEData(e.positions[1])},function onError(e){e.err=!0;streamCEEData(e);y.quit()})}return function stream(e){var t;if("bestmove"===e.mtype)m=!0;else if(e.depth>=y){t=e.multipv-1;if("info"===e.mtype&&e.pv&&e.multipv>0&&(e.pv.length>1||1===e.mate)&&_[t]!==e.depth){g[t]=e;_[t]=e.depth;if(t<=1&&_[0]===_[1]){getClassification(0,g,e.depth);f||getClassification(1,g,e.depth)}else(d||_[0]===_[1])&&getClassification(t,g,e.depth)}}f&&e.multipv&&(1!==e.multipv||!n)||n(e)}}function bestMoveSearch(){var t,n,a,l,c,d=1,f=[],m=[],g=null,y=C[0].args,A=C[0].cb,w=C[0].stream,k=1,S=[],T=14,M=loadEngine._previousCP;C[0].started=!0;loadEngine._previousCP=null;function convertpv(e){var t=[],n=m[e]||createSanPv(f[e]);return f[e].forEach(function oneach(e,a){t.push({moveSan:n[a],moveLan:e})}),t}function getpv(e,t,n,a){var l;for(l=f.length-1;l>=0;l-=1)if(f[l][0]===e)return convertpv(l);return n?[{moveSan:t,moveLan:e},{moveSan:a,moveLan:n}]:t?[{moveSan:t,moveLan:e}]:[]}function normalize(e){var t=.03*Math.pow(32,e.depth/T);e.cp=M+(e.cp-M)*t}function convertScore(e){if(0===e.mate){e.mateIn=0;e.cp=-31800*k}else{e.mateIn=Number(e.mate*k)||null;if("number"!=typeof e.mateIn||isNaN(e.mateIn)||"number"==typeof e.cp){e.cp*=k;9===Math.abs(e.cp)&&(e.cp=0);y.normalize&&e.depth<=T&&"number"==typeof M&&1===e.multipv&&normalize(e)}else e.cp=31800*k*(e.mate/Math.abs(e.mate))}e.score=e.cp/100}function returnBestMove(e){var n=parseSearchLine(e);addBestMoveProps(n);d>T&&t<5e3&&t>-5e3&&(loadEngine._previousCP=t);n.pv=getpv(n.moveLan,n.moveSan);1===n.pv.length&&n.ponder&&(n.pv=getpv(n.moveLan,n.moveSan,n.ponder,n.ponderSan));if(S.length>1){S.splice(S.indexOf(n.moveLan),1);y.searchmoves=S;y.getNextBest=0;queueBestMoveSearch(y,function done(){A(n)},function streamer(e){if(w){e.multipv=2;w(e)}})}else if(A)try{A(n)}catch(e){console.error(e)}C.shift();clearTimeout(_);C.length>0&&bestMoveSearch()}function addBestMoveProps(c){var f;c.baseTurn=a;void 0===t&&(l.inCheckmate()?streamInfo("info depth 0 score mate 0"):l.inStalemate()&&streamInfo("info depth 0 score cp 0"));c.cp=t;c.score=t/100;c.mate=n;c.mateIn=g;c.depth=d;c.moveLan=c.bestmove;if(c.moveLan){c.move=e.uciToObj(c.moveLan)[0];f=l.move(c.move);if(f){c.moveSan=c.bestmoveSan=f.san;if(c.ponder){f=l.move(e.uciToObj(c.ponder)[0]);if(f){c.ponderSan=f.san;l.undo(!0)}}l.undo(!0)}}}function createSanPv(t){var n,a,c=t.length,d=[];for(n=0;n<c;++n){a=l.move(e.uciToObj(t[n])[0]);if(!a)break;d.push(a.san)}for(;n>0;--n)l.undo(!0);return d}function streamInfo(e){var l=parseSearchLine(e);if(l.score){l.baseTurn=a;convertScore(l);!l.multipv&&l.depth&&(l.multipv=1);if(1===l.multipv||0===l.depth){t=l.cp;n=l.mate;g=l.mateIn}}l.pv&&w&&(l.pvSan=createSanPv(l.pv));if(l.pv&&!(l.lowerbound||l.upperbound)){f.push(l.pv);w&&m.push(l.pvSan)}l.depth>d?d=l.depth:"bestmove"===l.mtype&&addBestMoveProps(l);w&&!(0===l.mateIn&&l.pv)&&w(l);createTimeout()}function createTimeout(){if(y.timeout){clearTimeout(_);C[0].timer=_=setTimeout(function(){b.stop();if(A){A();A=void 0}},y.timeout)}}if(y.difficulty>=0&&y.difficulty<20){b.setoption("Skill Level",y.difficulty);y.maximumError>=0&&y.maximumError<=4999&&b.setoption("Skill Level Maximum Error",y.maximumError);y.errorProbability>=1&&y.errorProbability<=128&&b.setoption("Skill Level Probability",y.errorProbability)}else b.setoption("Skill Level",20);void 0!==y.contempt?b.setoption("Contempt",y.contempt):b.setoption("Contempt","0");y.multiPv>1?b.setoption("MultiPV",y.multiPv):b.setoption("MultiPV",1);if(!y.movetime&&(!y.wtime||!y.btime)&&!y.depth&&!y.infinite){y.btime=y.btime||72e3;y.wtime=y.wtime||72e3}if(!y.startpos&&y.fen||y.moves||y.variant){l=e.createGame({fen:y.fen?convertStandardVariantFen(y.fen):"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:y.moves,variant:y.variant,disableHashing:!0});if(l.turn()===l.WHITE)a="w";else{a="b";k=-1}}else{a="w";l=e.createGame({disableHashing:!0})}if(y.cee&&w){if(2>(Number(y.multiPv)||1)){c=!0;b.setoption("MultiPV",2)}w=classifyStream(w,y.cee,l.fen(),y.variant,1===l.moves().length,c)}b.setVariant(y.variant);b.position(y);b.go(y,returnBestMove,streamInfo);y.getNextBest&&A&&l.moves({verbose:!0}).forEach(function toLan(t){t=e.normalizeMoveObj(t);S.push(t.from+t.to+(t.promotion||""))});createTimeout()}function queueBestMoveSearch(e,t,n){C.push({args:e,cb:t,stream:n});1===C.length&&b.ready&&bestMoveSearch()}b.getBestMove=function(e,t,n){var a;(e=e||{}).fen=e.fen||e.baseFen;e.is960&&(e.variant="Chess960");if(b.bookLoaded&&e.useBook){a=b.getBookMove(e);if(a)return setTimeout(function(){a.mtype="bestmove";t(a)},0)}queueBestMoveSearch(e,t,n)};b.stopAll=function(t){var n,a=A.length,l=0;function ondiscard(){0==(l-=1)&&t()}C=[];for(n=0;n<a;n+=1){e.log&&console.log("debug (stop_moves): "+n,getFirstWord(A[n].cmd));if("go"===getFirstWord(A[n].cmd)&&!A[n].discard){b.stop();A[n].discard=!0;if(t&&b.ready){l+=1;A[n].ondiscard=ondiscard}}}b.ready?t&&!l&&b.isready(t):setTimeout(t,0)};b.restartEngine=function(e){return b.stopAll(),b.quit(),A=[],C=[],b.bookLoaded&&!d.book&&((d=JSON.parse(JSON.stringify(d))).book=b.book),loadEngine(d,e)};b.stopFast=function(e,t){var n,a;if(b._isStopping)return b._stopQueue.push(e);a=function(e){b._stopQueue.forEach(function(t){t(e)});b._stopQueue=null;b._isStopping=!1};b._isStopping=!0;b._stopQueue=[e];b.stopAll(function(){clearTimeout(n);a(b)});n=setTimeout(function(){b.restartEngine(a)},Math.max(+t||5e3,50))};function startUp(){b.uci(function onstart(){d.settings&&Object.keys(d.settings).forEach(function oneach(e){b.setoption(e,d.settings[e])});b.ready=!0;C.length&&bestMoveSearch();cbIfReady()})}function cbIfReady(){b.ready&&(b.bookLoaded||!b.pathToBook)&&m&&m(b)}if("undefined"==typeof Worker)return!1;if(d.ceeMode){addCeeInterface(b,d);b.ceeVersion=function(){return JSON.parse(JSON.stringify(w))}}(g=createWorker(d,b)).onmessage=onmessage;if(d.book){b.book=d.book;b.bookLoaded=!0;b.pathToBook=d.pathToBook}return b.getFenFromMoves=e.getFenFromMoves,b.getLegalMoves=e.getLegalMoves,b.getPositionInfo=e.getPositionInfo,b.isFenValid=e.isFenValid,b.ready=!1,startUp(),!b.book&&d.pathToBook&&b.loadBook(d.pathToBook,cbIfReady),b}function addCeeInterface(t,n){var a,l,c=1e3,d=0;function createInterruptHook(e){function interruptHook(e){var t=interruptHook.callbacks;interruptHook.callbacks={};interruptHook.original&&interruptHook.original(e);for(var n in t)t[n](e)}return interruptHook.callbacks={},interruptHook.original=e,interruptHook}n.onError=a=createInterruptHook(n.onError);n.onSignal=l=createInterruptHook(n.onSignal);function analyze(n,f,m,g){var _,y=Date.now(),b=!1,A=++d;function cleanup(){clearTimeout(_);delete a.callbacks[A];delete l.callbacks[A];b=!0}function handleError(e){if(!b){cleanup();g({data:e,action:f,uci:n},n)}}function onProcessCrash(t){handleError({msg:"CEE process crashed unexpectedly",code:e.ERROR_CODES.CRASH,exitCode:t,err:Error("CEE process exited with "+t)})}a.callbacks[A]=onProcessCrash;l.callbacks[A]=onProcessCrash;_=setTimeout(function(){handleError({msg:"CEE timed out",code:e.ERROR_CODES.TIMEOUT,timeout:c,duration:Date.now()-y,err:Error("CEE timed out")})},c);for(var C=0;C<n.length;++C)t.send(n[C]);t.send("fetch "+f,function onFetchDone(e){if(!b){cleanup();m(e,n)}},function onFetchStream(n){n.indexOf("info string CEEError")>=0?handleError({msg:"CEE crashed with error code",code:e.ERROR_CODES.ERROR,log:n.match(/info string CEEError\s*(.*)/)[1],err:Error(n.match(/info string CEEError\s*(.*)/)[1])}):t.ceeDebug&&n.indexOf("not recognized")>=0&&handleError({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:n,code:e.ERROR_CODES.NONFATAL_ERROR,err:Error(n)})})}t.fetch=function(t,n,a){var l,c;l=(t=t||[]).action||"analysis";if(Array.isArray(t))c=t;else{c=t.uciCommands?t.uciCommands.map(function(e){return e}):[];if(t.startFen){t.options=t.options||{};void 0===t.options.ScoreWhiteToMove&&(t.options.ScoreWhiteToMove=!0);void 0===t.options.SerializeLikeCEAC&&(t.options.SerializeLikeCEAC=!0);e.CEE_LIB.addOptions(c,t.options);e.CEE_LIB.addVariant(c,t.variant);e.CEE_LIB.addPosition(c,t.startFen)}e.CEE_LIB.addVariations(c,t.evals&&t.evals[0]);e.CEE_LIB.addVariations(c,t.threats&&t.threats[0],"threat-variation");(t.moves||[]).forEach(function(n,a){var l=a+1;e.CEE_LIB.addPush(c,n);e.CEE_LIB.addClock(c,t.clocks&&t.clocks[a]);e.CEE_LIB.addVariations(c,t.evals&&t.evals[l]);e.CEE_LIB.addVariations(c,t.threats&&t.threats[l],"threat-variation")})}analyze(c,l,n,a)};t.fetch.setTimeout=function(e){c=e};e.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}return loadEngine},a=function(){var e,a=n(),l="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",c=252,d={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},f=512,m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",g="qnrbkp";function decodeTCN(e){var t,n,a,l,c=e.length,d=[];for(t=0;t<c;t+=2){l={};n=m.indexOf(e[t]);a=m.indexOf(e[t+1]);if(a>63){l.promotion=g[Math.floor((a-64)/3)];a=n+(n<16?-8:8)+(a-1)%3-1}n>75?l.drop=g[n-79]:l.from=m[n%8]+(Math.floor(n/8)+1);l.to=m[a%8]+(Math.floor(a/8)+1);d.push(l)}return d}function encodeTCN(e){var t,n,a,l,c="";Array.isArray(e)||(e=[e]);n=e.length;for(t=0;t<n;t+=1){a=e[t].drop?79+g.indexOf(e[t].drop):m.indexOf(e[t].from[0])+(e[t].from[1]-1)*8;l=m.indexOf(e[t].to[0])+(e[t].to[1]-1)*8;e[t].promotion&&(l=3*g.indexOf(e[t].promotion)+64+(l<a?9+l-a:l-a-7));c+=m[a]+m[l]}return c}function uciToObj(e){var t,n,a=e.split(" "),l=a.length,c=[];if(e)for(t=0;t<l;++t)4===(n=a[t]).length?"@"===n[1]?c.push({drop:n[0].toLowerCase(),to:n.substr(2,2)}):c.push({from:n.substr(0,2),to:n.substr(2,2)}):c.push({from:n.substr(0,2),to:n.substr(2,2),promotion:n[4]});return c}function isSameMove(e,t){return e.san===t.san||e.to===t.to&&(e.from===t.from||!e.from&&!t.from)&&(e.promotion===t.promotion||!e.promotion&&!t.promotion)&&(e.drop===t.drop||!e.drop&&!t.drop)}function getPremoves(e,t,a){var l,c,d,f,m,g,_,y,b,A,C=[],w=1,k=8,S=1,T=8,M={verbose:!0};b=3-(A=e.turn());(f=n("/",t)).turn(b);if(a){w=k=+a[1];S=T=a.charCodeAt(0)-96}for(l=w;l<=k;++l)for(c=S;c<=T;++c){m=String.fromCharCode(c+96)+l;d=e.get(m);if(d&&d.color===b){f.put(d,m,!0);if("p"===d.type){g=String.fromCharCode(c-1+96)+(l+(1===b?1:-1));_=String.fromCharCode(c+1+96)+(l+(1===b?1:-1));f.put({type:"n",color:A},g,!0);f.put({type:"n",color:A},_,!0)}else"k"===d.type&&"-"!==(y=e.fen().split(" ")[2])&&f.load(f.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+y),t,!0,!0);C=C.concat(f.moves(M));f.remove(m,!0);if("p"===d.type){f.remove(g,!0);f.remove(_,!0)}}}if(t&&e.hand()){f._hand[b]=18721;C=C.concat(f.moves({verbose:!0}).filter(function(e){return!a||e.to===a}))}return C.forEach(function(e){normalizeMoveObj(e)}),C}function makePremove(e,t){var n,l,c,d,f,m=e.header().Variant,g=getPremoves(e,m,t.from),_=3-e.turn();for(n=g.length-1;n>=0;--n){l=g[n];if(isSameMove(l,t)){c=!0;break}}if(c){if(l.drop)e.put({type:l.drop,color:_},l.to);else{d=e.remove(l.from,!0);if(l.flags===a.FLAGS.KSIDE_CASTLE){f=e.remove("Chess960"===m?l.to:"h"+l.from[1],!0);e.put(d,"g"+l.from[1],!0);e.put(f,"f"+l.from[1])}else if(l.flags===a.FLAGS.QSIDE_CASTLE){f=e.remove("Chess960"===m?l.to:"a"+l.from[1],!0);e.put(d,"c"+l.from[1],!0);e.put(f,"d"+l.from[1])}else{if(l.promotion){d.type=l.promotion;d.promoted=!0}f=e.get(l.to);e.put(d,l.to,"k"!==d.type&&"r"!==d.type&&(!f||f.color!==_||"r"!==f.type))}}return l}if(t.from){e.turn(_);t=e.fixMove(t);e.turn(3-_);if(t)return makePremove(e,{san:t,from:t.from})}}function getPieces(e,t){var n,a,l,g=t?{}:[],_=e._board();if(t)for(n=112;n>=0;++n){136&n&&(n-=24);(a=_[n])&&(g[l=m[7&n]+(8-(n>>4))]={type:d[a&c],color:3&a,promoted:(a&f)!=0,square:l})}else for(n=112;n>=0;++n){136&n&&(n-=24);(a=_[n])&&g.push({type:d[a&c],color:3&a,promoted:(a&f)!=0,rank:8-(n>>4),file:(7&n)+1})}return g}function predict(e,t){var n=Math.min(Math.max(.20773843*Math.atan(2.49085889*e/100-2.47841945*t/100)+.02262979*e/100-.02256839*t/100+.52239679,0),1),a=Math.min(Math.max(-.20720905*Math.atan(2.49626837*e/100-2.48220286*t/100)+-.02352551*e/100+.02172627*t/100+.49443923,0),1),l=Math.min(Math.max(Math.exp(.037043456*e/100+.178106427*t/100+-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(e/100-t/100,2))+-.001625539,0),1),c=n+a+l;return{w:n/c,b:a/c,d:l/c}}function getPositionDetails(e,t){var n,a,l,c;(e=e||{}).disableHashing=!0;n=createGame(e);if(!n)return null;if(t){l=n.move(t);if(!l)return null;n.extended||normalizeMoveObj(l)}return(c=n.fen(),e.skipValidation||n.isPositionValid(e))?(a=c.split(" "),{fen:c,pieces:getPieces(n),sideToMove:n.turn(),castling:a[2],epSquare:"-"===a[3]?null:a[3],halfMoves:+a[4],moveNumber:+a[5],move:l,hand:n.hand(),checks:n.checks()}):null}function gameFingerprints(e){var n,a,c,d,f,m,g,_,y,b=createGame(e),A=[""],C=[];if(!b)return!1;y=(_=b.header()).Variant||"";m=b.hashes();n="function"==typeof b.origHistory?b.origHistory(!0):b.history(!0);f=m.length;a=[m[0][0],m[0][1]];C.push(t.to64BitHex(a)+y);m[0]=t.to64BitHex(m[0]);for(c=1;c<f;++c){a[0]=(a[0]^m[c][0]*(c+58465))>>>0;a[1]=(a[1]^m[c][1]*(c+984))>>>0;m[c]=t.to64BitHex(m[c]);C.push(t.to64BitHex(a)+y);normalizeMoveObj(n[d=c-1]);g=(n[d].from?n[d].from:n[d].drop.toUpperCase()+"@")+n[d].to+(n[d].promotion||"");d&&(g=A[d]+" "+g);A.push(g)}return{startingFen:_.FEN||l,hashes:m,fingerprints:C,moves:A,variant:_.Variant}}function makeMoves(e,t,n,a){var l,c,d,f,m,g,_,y,b,A,C;n=n||{};"string"==typeof t&&(t=t.trim().split(" "));d=t.length;for(l=0;l<d;l+=1){m="b"===t[l].board||"B"===t[l].board?e.siblingGame:e;g="string"==typeof t[l].moveLan?uciToObj(t[l].moveLan)[0]:"string"==typeof t[l]?uciToObj(t[l])[0]:t[l].san?t[l].san:t[l];if(!m.move(g)){if(!n.rejectNullMoves&&/^(?:--|00|Z0|<>)+$/.test(g.to||t[l]))m.move("--");else if(n.autoPromote){!0===n.autoPromote?g.promotion="q":g.promotion=n.autoPromote;if(!m.move(g)){if(n.skipBadLines)break;return!1}}else{if(n.skipBadLines)break;return!1}}y=(_=m._history())[_.length-1];a&&(b=parseInt(a[l],10));("number"!=typeof b||isNaN(b))&&(b=parseInt(t[l].time,10));if("number"==typeof b&&!isNaN(b)){y.time=b;b=void 0}t[l].firstComment&&(_.initComment=t[l].firstComment);t[l].comment&&(y.comment=t[l].comment);t[l].annotation&&(y.annotation=t[l].annotation);t[l].additionalAnnotation&&(y.additionalAnnotation=t[l].additionalAnnotation);t[l].commands&&(y.commands=t[l].commands);if(t[l].lines){f=t[l].lines.length;for(c=0;c<f;++c){A=e._history().id;e.createVariation();C=makeMoves(e,t[l].lines[c],n);if(!C&&!n.skipBadLines)return!1;e.selectLine(A)}}}return!0}function playBughouseTCN(e,t,n){var a,l,c,d=[decodeTCN(t[0]),decodeTCN(t[1])],f=[0,0],m=[0,0],g=d[0].length+d[1].length,_=Math.max(0|n[0][0],0|n[0][1],0|n[1][0],0|n[1][1]),y=[0,0],b=[0,0];_+=600-_%600;a=[[_,_],[_,_]];for(;g--;){b[0]=y[0]+a[0][m[0]]-n[0][f[0]]||0;b[1]=y[1]+a[1][m[1]]-n[1][f[1]]||0;d[l=b[0]<=b[1]?0:1][f[l]]||(l^=1);c=l?e.siblingGame:e;if(!c.move(d[l][f[l]])||g&&c.inCheckmate()&&c.undo(!0)){l^=1;c=l?e.siblingGame:e;if(!c.move(d[l][f[l]]))return!1}c._history()[f[l]].time=n[l][f[l]];a[l][m[l]]=n[l][f[l]];y[l]=b[l];m[l]^=1;++f[l]}return!0}function extendChess(e){var t,c,d=-1,f=0;function descendsFromMove(e,t,n){for(var a,l=e[t];"number"==typeof(a=l.parentId);){if(a===n)return l.atMoveNode;l=e[a]}return!1}function swapMoveAttributes(e,t){var n={moveTime:e.moveTime,firstComment:e.firstComment,comment:e.comment,annotation:e.annotation,additionalAnnotation:e.additionalAnnotation,commands:e.commands};Object.keys(n).forEach(function(a){e[a]=t[a];t[a]=n[a]})}if(!e.extended){e.extended=!0;t={header:e.header,load:e.load,loadPgn:e.loadPgn,createVariation:e.createVariation,undo:e.undo,pgn:e.pgn};e._move=e.move;e.undo=function(){return e.siblingGame?e.deleteBughouseMove(e.curBughouseMove()):e.deletePosition(d,f)};e.getMove=function(n){return n&&("string"==typeof n||n.to&&(n.from||n.drop))&&e._move(n)&&normalizeMoveObj(t.undo())||null};e.premove=function(){var t,a=[];return{queue:a,move:function(l){var c;return(c=makePremove(t=t||n(e.fen(),e.header().Variant),l))&&!f&&d===e._history().length-1?(a.push(c),c):(a.length||(t=void 0),null)},consume:function(){var l,c,d,f=a.shift();if(f){l=e.move(f);if(l){t=void 0;c=a.length;if(c){t=n(e.fen(),e.header().Variant);for(d=0;d<c;++d)makePremove(t,a[d])}return l}e.premove.cancel()}},moves:function(n){return!f&&d===e._history().length-1&&getPremoves(t||e,e.header().Variant,n)},getPieces:function(n){return getPieces(t||e,n)},fen:function(){return(t||e).fen()},cancel:function(){a.length=0;t=void 0}}}();e.getPieces=function(t){return getPieces(e,t)};e.material=function(){var t,n,a,l=e.getPieces(),c={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},d={p:1,n:3,b:3,r:5,q:9,k:0};for(t=l.length-1;t>=0;--t){if(1===l[t].color){n=c.white;a=c.black}else{n=c.black;a=c.white}a[l[t].type]&&--a[l[t].type];n.count+=d[l[t].type]}return c.imbalance=c.white.count-c.black.count,c};e.origHistory=e.history;e.history=function(t,n){var a,l,c,d=[],f=e._history(),m=f.length,g=e._lines();"boolean"==typeof t&&(t={verbose:t});t=t||{};n&&(t.noParentLines=n);t.toCurrent&&(m=e.ids().move+1);for(;;){if(-1==--m){if(f.id&&!t.noParentLines){m=f.atMoveNode;f=g[f.parentId];continue}break}if(t.verbose){a={};for(l in f[m])if(f[m][l]&&"object"==typeof f[m][l]){a[l]=f[m][l].constructor===Array?[]:{};for(c in f[m][l])a[l][c]=f[m][l][c]}else a[l]=f[m][l];d.unshift(a)}else d.unshift(f[m].san)}return d};e._getPos=function(n,a,c){var m,g,_;return("number"!=typeof n&&(n=d),"number"!=typeof a&&(a=f),m=(g=e._lines())[a],n>=0)?m[n]:c?m:m.id?m.atMoveNode?g[m.parentId][m.atMoveNode-1]:e._getPos(m.atMoveNode-1,m.parentId):(_={fen:t.header().FEN||l,hash:m.hash,initial:!0,ids:{move:-1,line:0},moveNumber:-1},e.siblingGame&&(_.bughouseOrder=-1),_)};e.move=function(t,n){var a,l,c,m,g=e._history();if(t&&("string"==typeof t||t.to&&(t.from||t.drop))){if(f===g.id&&d<g.length-1||n){if(e.moveForward(n,t))return!0;if(d<g.length-1){e.selectPosition(d+1);e.createVariation();g=e._history()}}e.siblingGame&&(c=e.isDependent?e.siblingGame.fen():e.fen());a=e._move(t);if(a){normalizeMoveObj(a);f=g.id;d=g.length-1;l=g[d];m=e._getPos(d-1);if(e.siblingGame){l.fen=e.isDependent?e.siblingGame.fen():e.fen();l.beforeFen=c;l.siblingIds=e.siblingGame.ids()}else{l.fen=e.fen();l.beforeFen=m.fen}l.moveNumber=m.moveNumber+1;l.previous=m.ids;f&&0===d&&e._lines()[g.parentId][g.atMoveNode].move===l.move&&(l.isContinuation=!0);l.flags=a.flags;l.to=a.to;l.from=a.from;l.drop=a.drop;l.capturedStr=a.captured;l.promotion=a.promotion;l.piece=a.piece;a.promoted&&(l.promoted=!0);a.capturedPromotedPawn&&(l.capturedPromotedPawn=!0);l.ids={move:d,line:f}}}return a};e.moveDetails=function(t){t=t||e._history()[d];if(t){t.lines=t.lines||null;if(t.flags===a.FLAGS.KSIDE_CASTLE){t.rookFrom="Chess960"===e.header().Variant?t.to:"h"+t.to[1];t.rookTo="f"+t.to[1];t.kingTo="g"+t.to[1]}else if(t.flags===a.FLAGS.QSIDE_CASTLE){t.rookFrom="Chess960"===e.header().Variant?t.to:"a"+t.to[1];t.rookTo="d"+t.to[1];t.kingTo="c"+t.to[1]}else t.flags===a.FLAGS.EP_CAPTURE&&(t.epCapture=t.to[0]+t.from[1])}return t};e.header=e.headers=function(n){var a=t.header(n);return e.siblingGame&&extendChess(e.siblingGame),a};e.load=function(n,a,l,c){var m=t.load(n,a,l,c);e.siblingGame&&extendChess(e.siblingGame);if(m&&!l){d=-1;f=0}return m};e.removeEmptyLines=function(){var t,n,a=e._lines();for(t=a.length-1;t>0;--t)if(!a[t].length){a[t]=void 0;n=!0}n&&e.reorderLines()};e.loadPgn=function(n,a,l){var c=t.loadPgn(n,a,l),m=e._history();return e.removeEmptyLines(),d=m.length-1,(f=m.id)&&e.selectLine(0),c};e.ids=function(){return{move:d,line:f}};e.selectLine=function(t){e.selectPosition(null,t)};e.curBughouseMove=function(){return Math.max(e._getPos().bughouseOrder,e.siblingGame._getPos().bughouseOrder)};e.deleteBughouseMove=function(t){var n,a,l,c=e.curBughouseMove(),d=!1,f=e;if(t>=0){c>=t&&e.selectBughouseMove(t-1);for(;;){a=(n=f._history()).length;for(l=0;l<a;++l)if(n[l].bughouseOrder>=t){n.length=l;d=!0;break}if(f===e.siblingGame)break;f=e.siblingGame}}return d};e.selectBughouseMove=function(t){var n,a,l=e.isDependent?e.siblingGame:e,c=l;if(-1===t)return c.selectPosition(-1,0,!0),c.siblingGame.selectPosition(-1,0,!0),l.load(l.header().FEN,"Bughouse",!0,!0);for(;;){n=c._history();for(a=n.length-1;a>=0;--a)if(n[a].bughouseOrder===t){c.selectPosition(n[a].ids.move,0,!0);c.siblingGame.selectPosition(n[a].siblingIds.move,0,!0);return l.load(n[a].fen,"Bughouse",!0,!0)}if(c===l.siblingGame)return!1;c=l.siblingGame}};e.moveBackward=function(t){var n,a,l;if(e.siblingGame)return e.selectBughouseMove(e.curBughouseMove()-1);if(-1===d&&0===f)return!1;if(d>1||0===f)e.selectPosition(d-1);else{n=e._getPos();a=e._getPos(n.previous.move,n.previous.line);for(;a.isContinuation&&!t;){l=e._lines()[a.ids.line];a=e._getPos(l.atMoveNode,l.parentId)}e.selectPosition(a.ids.move,a.ids.line)}return!0};e.moveForward=function(t,n){var a,l,c,m,g,_,y=e._lines();if(e.siblingGame)return e.selectBughouseMove(e.curBughouseMove()+1);a=y[f][d+1];"string"==typeof n&&(n={san:n});if(!a||n&&!isSameMove(n,a)){if(n&&a&&a.lines){g=a.lines.length;for(m=0;m<g;++m){c=y[a.lines[m]][0];if(c&&isSameMove(n,c)){a=c;_=!0;break}}}if(!_&&t){l=y[f][d];if(l&&l.lines){g=l.lines.length;for(m=0;m<g;++m){c=y[l.lines[m]][0];if(c&&c.isContinuation){c=y[l.lines[m]][1];if(c&&(!n||isSameMove(n,c))){a=c;_=!0;break}}}}}if(!_){try{if(n&&n.san&&(n=e.fixMove(n.san))||n&&n.to&&n.from&&Math.abs(n.to.charCodeAt(0)-n.from.charCodeAt(0))>1&&(n=e.fixMove(n)))return e.moveForward(t,n)}catch(e){}return!1}}return e.selectPosition(a.ids.move,a.ids.line)};e.moveVariation=function(t,n){var a,l,c,d=e._lines(),f=d[t];if(f&&f.id){a=d[f.parentId][f.atMoveNode].lines;for(l=a.length-1;l>=0;--l)if(a[l]===t){c=l-(n?1:-1);if(a[c]){a[l]=a[c];a[c]=t;e.reorderLines();return!0}}}return!1};e.promoteVariation=function(t,n){for(var a,l,c,m,g,_,y=e._lines(),b=y[t];b&&b[0]&&b.id&&(-1!==n||b.parentId);){a=y[c=b.parentId];m=b.atMoveNode;b[0].lines=a[m].lines.concat(b[0].lines||[]);a[m].lines=void 0;_=a.length-m;l=a.splice(m,_);for(g=0;g<_;++g){l[g].ids.line=t;l[g].ids.move=g}l.id=t;l.parentId=c;l.atMoveNode=m;l.hash=b.hash;if(0===m){l.initComment=a.initComment;a.initComment=b.initComment}else b.initComment&&(a[m-1].comment=((a[m-1].comment||"")+" "+b.initComment).trim());y[t]=l;_=b.length;for(g=0;g<_;++g){b[g].ids.line=c;b[g].ids.move=g+m;a.push(b[g])}l[0].isContinuation=!!b[0].isContinuation;a[m].isContinuation=!m&&"number"==typeof a.parentId&&y[a.parentId][a.atMoveNode].move===a[0].move;_=a[m].lines.length;for(g=0;g<_;++g){y[a[m].lines[g]].atMoveNode=m;y[a[m].lines[g]][0]&&(y[a[m].lines[g]][0].isContinuation=y[a[m].lines[g]][0].move===a[m].move)}if(f===t){f=c;d+=m}else if(f===c&&d>=m){f=t;d-=m}if(1===n)break;b=y[t=c]}return void 0!==a&&(e._history(y[f]),e.reorderLines(),!d&&y[f][0].isContinuation&&e.selectPosition(y[f].atMoveNode,y[f].parentId),!0)};e.reorderLines=function(t,n){var a,l,d,m,g,_,y,b,A,C,w=e._lines(),k=!1;if(t)A=n.length-1;else{t=0;n=[w[0]];A=0;c=!1}d=(a=w[t]).length;for(l=0;l<d;++l){m=a[l];if(m.ids.line!==A){k=!0;m.ids.line=A}if(m.lines){g=m.lines.length;for(_=0;_<g;++_){b=w[y=m.lines[_]];if(b){b.atMoveNode=l;C=n.length;m.lines[_]=C;b.parentId=A;if(!c&&y===f){c=!0;f=C}n.push(b);k=e.reorderLines(y,n)||k}else{1===m.lines.length?delete m.lines:m.lines.splice(_,1);--_;--g}}}}return t||e.saveLines(n,!0),k};e.createVariation=function(){var n,a,l,c=e._history(),m=e._lines();return d===c.length-1?(n=t.createVariation(),d=(c=e._history()).length-1,f=c.id,n):-1!==d&&(a=[],l=c[d],a.parentId=c.id,a.id=m.length,l.lines||(l.lines=[]),l.lines.push(a.id),a.hash=e._getPos(d-1).hash,a.atMoveNode=d,m.push(a),e.selectPosition(-1,a.id))};e.selectLineEnd=function(t){return e.siblingGame?e.selectBughouseMove(e._history().length+e.siblingGame._history().length-1):("number"!=typeof t&&(t=f),(t!==f||d<e._history().length-1)&&e.selectPosition(null,t,!0))};e.selectLineStart=function(){var t,n;if(e.siblingGame)return e.selectBughouseMove(-1);if(!f)return -1!==d&&e.selectPosition(-1,0);if(d>1||1===d&&!e._getPos(0).isContinuation)t=e._history();else{n=e._getPos(-1);t=e._lines()[n.ids.line]}return e.selectPosition(t.id?t[1]&&t[0].isContinuation?1:0:-1,t.id)};e.selectPosition=function(n,a,l){var c=e._lines(),m=e._history();if("number"==typeof a&&(a!==f||l)){if(a<0||a>=c.length)return!1;m=c[a];if("number"!=typeof n)n=m.length-1;else if(n<-1||n>=m.length)return!1;f=a;e._history(m);l=!0}if("number"==typeof n&&(n!==d||l)){if(n<-1||n>=m.length)return!1;t.load(e._getPos(n).fen,t.header().Variant,!0,!0);d=n}return!0};e.resetToMainLine=function(){var t=e._lines();e.selectLineEnd(0);if(t.length>1){t.length=1;e.reorderLines()}};e.updateNode=function(t,n,a){var l,c,m=e._lines();a="number"==typeof a?a:f;n="number"==typeof n?n:d;l=m[a][n]||m[a];for(c in t)l[c]=t[c]};e.updateLineComment=function(t,n){e.updateNode({initComment:t},-1,n)};e.saveLines=function(t,n){var a,l,c,d=e._lines(),f=t.length;t!==d&&(d.length=0);for(l=0;l<f;++l){a=t[l];if(l&&"number"!=typeof a.parentId)return!1;t!==d&&d.push(a);a.id=l}e._history(e._history());if(!n){c=e.ids();e.selectPosition(-1,0,!0);e.selectPosition(c.move,c.line)}return!0};e.deletePosition=function(t,n){var a,l,c=e._lines();if(!c[n]||!c[n][t]&&(-1!==t||0===n))return!1;n&&(0===t?t=-1:1===t&&c[n][0].isContinuation&&(t=-1));l=f>0&&n!==f?!1!==(a=descendsFromMove(c,f,n))&&a>=t:n===f&&t<=d;if(l){if(t>1)e.selectPosition(t-1,n);else{e.selectPosition((c[n][0].isContinuation||1===t)&&c[n][1]?1:0,n);e.moveBackward()}}return t>0?c[n].length=t:n?c[n]=null:c[0].length=0,e.reorderLines(),e.ids()};e.mark=function(t,n,a,l){var c=e._getPos(a,l,!0),d=t.type,f=1;t.color&&("arrow"===d?e.mark({key:t.color+t.key,type:"cal"},n,a,l):"square"===d&&e.mark({key:t.color+t.key,type:"csl"},n,a,l));if("cal"!==d&&"csl"!==d){d="c_"+d;f=0}if(c.commands&&c.commands[d]){c.commands[d]=c.commands[d].split(",").filter(function rm(e){return e.slice(f).split(";")[0]!==t.key.slice(f)}).join(",");c.commands[d]||delete c.commands[d]}if(!n){c.commands||(c.commands={});c.commands[d]=(c.commands[d]?c.commands[d]+",":"")+t.key+(t.data?";"+t.data.join(";"):"")}};e.markings=function(t,n){var a,l,c,d,f,m,g,_,y={},b=e._getPos(t,n,!0),A={cal:"arrow",csl:"square"};for(l in b.commands){c=b.commands[l];if(A[l]){l=A[l];d=0}else{if("c_"!==l.substr(0,2))continue;l=l.slice(2);d=1}y[l]=y[l]||{};m=(f=c.split(",")).length;for(a=0;a<m;++a)if(d){_=(g=f[a].split(";")).shift();y[l][_]=y[l][_]||{type:l,key:_};y[l][_].data=g}else{_=f[a].slice(1);y[l][_]=y[l][_]||{type:l,key:_};y[l][_].color=f[a][0]}}return y};e.clearMarkings=function(t,n){var a,l=e._getPos(t,n,!0);for(a in l.commands)/^c[sa]l$|^c_/.test(a)&&delete l.commands[a]};e.pgn=function(n){var a,l=e.ids();return e.selectLineEnd(0),a=t.pgn(n),e.selectPosition(l.move,l.line),a};e.loadMoves=function(t,n){var a,l,c,m,g;n=n||{};"string"==typeof t&&(t=decodeTCN(t));if(t){n.atCurrent||e.selectPosition(-1,0);c=f;l=t.length;for(a=0;a<l;++a){m=e.move(t[a],!0);if(!m){t[a].promotion=!0===n.autoPromote?"q":n.autoPromote;m=e.move(t[a],!0);if(!m)return!1}if(f!==c&&"merge"!==n.method){e.promoteVariation(f,1);if("promote"!==n.method){e._history()[d].lines=void 0;e.reorderLines()}c=f}}if("promote"===n.method){if(l){if(e._history()[d+1]){m=e._history()[d];e.createVariation();e.move(m);swapMoveAttributes(e._history()[0],m);e.promoteVariation(f,1)}g=e._lines();for(a=g.length-1;a>=0;--a)if(1===g[a].length&&g[a][0].isContinuation){swapMoveAttributes(g[a][0],g[g[a].parentId][g[a].atMoveNode]);g[a].length=0}e.removeEmptyLines()}}else"merge"!==n.method&&e.deletePosition(d+1,f)}return!0}}}function createGame(e){var t,a;e=e||{};if(e.game)return e.game;t=n();e.analysis&&extendChess(t);e.disableHashing&&t.hashing(!1);if(e.pgn){if(!t.loadPgn(e.pgn,e.index,e.options)&&("detect"!==e.variant||!n.variants.some(function(n){return e.options=e.options||{},e.options.variant=n,t.loadPgn(e.pgn,e.index,e.options)})))return!1}else{if(e.headers){e.variant=e.headers.Variant||e.variant;e.fen||(e.fen=e.headers.FEN)}"detect"===e.variant&&e.fen&&(e.fen.indexOf("|")>-1?e.variant="Bughouse":9===e.fen.split("/").length?e.variant="Crazyhouse":e.fen.indexOf("+")>-1?e.variant="3-check":e.variant=void 0);if((e.fen||e.variant)&&!t.load(e.fen||l,e.variant))return!1;e.headers&&"object"==typeof e.headers&&!Array.isArray(e.headers)&&t.header(e.headers)}if(e.tcn){if("object"==typeof e.tcn){if(!playBughouseTCN(t,e.tcn,e.timestamps||[[],[]]))return!1}else a=decodeTCN(e.tcn)}else a=e.moves;return(!a||!!makeMoves(t,a,e,e.timestamps))&&t}function generatePgn(e){var t;return(e=e||{}).disableHashing=!0,!!(t=createGame(e))&&t.pgn(e)}function pgnToFen(e,t){var n,l,c=[];a.reset();if(!a.loadPgn(e))return!1;n=a.moveCount();if("number"==typeof t){t<0&&(t=n+t+1);for(l=n-1;l>=t&&l>=0;l-=1)a.undo();return a.fen()}for(l=0;l<=n;l+=1){c.unshift(a.fen());a.undo()}return c}function normalizeMoveObj(e){if(e){e.piece&f&&(e.promoted=!0);e.piece=d[e.piece&c];if(e.captured){e.captured&f&&(e.capturedPromotedPawn=!0);e.captured=d[255&e.captured]}e.promotion&&(e.promotion=d[e.promotion&c]);void 0!==e.drop&&(e.drop="pnbrq"[e.drop])}return e}function normalizeHistory(e){var t,n,a,l,c,d,f,m=e.history(!0,!0);if(e.siblingGame){t=e.siblingGame.history(!0,!0);a=m.length+t.length;n=[];for(l=0;l<a;++l){!m.length||t.length&&t[0].bughouseOrder<m[0].bughouseOrder?(c=t.shift()).board="b":(c=m.shift()).board="a";n.push(c)}m=n}a=m.length;for(l=0;l<a;++l){(d=m[l]).fen||normalizeMoveObj(d);if(d.lines)for(f=d.lines.length-1;f>=0;--f){e.selectLine(d.lines[f]);d.lines[f]=normalizeHistory(e).moves}}return{moves:m}}function pgnToJson(e,t,n){var l,c=[],d=a;if("number"!=typeof t){n=t;t=void 0}return l=d.tokenizePgn(e,n),t<0&&(t=l.length+t),!!l&&((n&&n.includeFen&&(d=createGame({analysis:!0})),l.forEach(function(e,a){void 0===t||a===t?d.loadPgn([e],0,n)?c.push({headers:d.header(),moves:normalizeHistory(d).moves}):c.push(!1):c.push(void 0)}),"number"==typeof t)?c[t]:c)}function sanToObj(e,t,n){return a.reset(),!!a.load(t,n)&&normalizeMoveObj(a.move(e))}function shortenFen(e,t){return a.completeFen(e).split(" ").slice(0,t||4).join(" ")}function getFenFromMoves(e,t,n,l){return a.reset(),a.load(e,n),(!t||!!makeMoves(a,t,l))&&a.fen()}function getLegalMoves(e,t){var n,l,c,d;if("string"==typeof e){(l=a).reset();if(!l.load(e,t))return null}else l=createGame(e);d=(n=l.moves({verbose:!0})).length;for(c=0;c<d;++c)normalizeMoveObj(n[c]);return n}function getPositionInfo(e,t,n){var l,c,d={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(!Array.isArray(t)){n=t;t=null}if("boolean"==typeof n){l=n;n={}}else l=(n=n||{}).variant;if("string"==typeof e){(c=a).reset();if(0!==c.validateFen(e,l)||!c.load(e,l))return!1}else c=createGame(e);if(t&&!makeMoves(c,t,n))return!1;n.getLegalMoves&&(d.legalMoves=getLegalMoves({game:c}));if(c.inCheck()){d.check=!0;d.checkmate=c.inCheckmate()}else d.stalemate=c.inStalemate();d.threefold=c.inThreefoldRepetition();d.insufficient=c.insufficientMaterial(n.color);d.fiftyMoveRule=c.in50MoveRule();d.draw=d.stalemate||d.threefold||d.insufficient||d.fiftyMoveRule||c.inDraw();n.skipValidation||(d.isValid=c.isPositionValid(n));if(l){d.variantWin=c.isVariantWin();void 0===d.variantWin&&(d.variantWin=c.isBughouseWin())}return d.gameOver=d.checkmate||d.draw||!!d.variantWin,d}function isFenValid(e,t){return 0===a.validateFen(e,t)}function loadECO(e,n){t.loadBook(e,function onload(e,a){if(!a||!a.json)return n(e||Error("Invalid book"));n(e,function queryECO(e){var n,l,c,d,f,m,g,_,y;if(e.hash){l="string"==typeof e.hash?[t.hex64ToDec(e.hash)]:[e.hash];d=1}else{n=createGame(e);if(!n)return!1;d=(l=n.hashes()).length}for(c=0;c<d;++c){f=a.json[t.to64BitHex(l[c])];if(f){if(f.constructor===Array){if(m&&-1===f[0].m.indexOf(m.m)){for(_=f.length-1;_>=0;--_)if(!_||-1!==f[_].m.indexOf(m.m)){(y=f[_]).e=f[0].e;y.s=f[0].s;y.mate=f[0].mate;y.v=f[0].v;y.h=f[0].h;y.n=y.n||f[0].n;y.u=y.u||f[0].u;y.c=y.c||f[0].c;break}}else y=f[0]}else y=f;(y.n||e.allowNameless)&&(m=y)}else e.mustEndInBook&&(m=void 0)}if(m){g={name:m.n};m.m&&(g.moves=m.m);void 0!==m.d&&(g.sdiff=m.d/100);if(m.c){g.code=m.c;g.url=m.u||m.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/ig,"-").replace(/(with-\d|St)\.+-?/,"$1-")}if(m.e){g.eval=m.e;g.depth=m.h;g.score=m.e[0].cp/100;void 0!==m.e[0].mate&&(g.mate=m.e[0].mate)}else{g.score=m.s/100;void 0!==m.mate&&(g.mate=m.mate)}return m.v&&(g.bad=!0),g}},a.json)})}function jce(t,n){return(e=e||ENGINE_MANAGER(jce))(t,n)}return jce.supportsMultithreading=function(){var e,t=!!jce._hasThreads;if("boolean"!=typeof jce._hasThreads){try{(e=new Worker("data:application/javascript,")).postMessage(new SharedArrayBuffer(1));t=!0}catch(e){}try{e.terminate()}catch(e){}jce._hasThreads=t}return t},jce.supportsSIMD=function(){return"boolean"==typeof jce._hasSIMD?jce._hasSIMD:jce._hasSIMD=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))},jce.gameFingerprints=gameFingerprints,jce.getFenFromMoves=getFenFromMoves,jce.getLegalMoves=getLegalMoves,jce.getPositionInfo=getPositionInfo,jce.isFenValid=isFenValid,jce.encodeTCN=encodeTCN,jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=generatePgn,jce.pgnToFen=pgnToFen,jce.pgnToJson=pgnToJson,jce.sanToObj=sanToObj,jce.completeFen=a.completeFen,jce.shortenFen=shortenFen,jce.createGame=createGame,jce.getPositionDetails=getPositionDetails,jce.predict=predict,jce.normalizeMoveObj=normalizeMoveObj,jce.FLAGS=a.FLAGS,jce.loadECO=loadECO,jce.CEE_LIB=function(){var e={};return e.addOptions=function(e,t){for(var n in t)void 0!==t[n]&&e.push("setoption name "+n+" value "+t[n]);return e},e.addVariations=function(e,t,n){t=t||[];n=n||"variation";for(var a,l,c=0;c<t.length;++c){l=n+" "+(Array.isArray((a=t[c]).pv)?a.pv.join(" "):a.pv||"");"number"==typeof a.mateIn?l+=" mate "+a.mateIn:"number"==typeof a.mate?l+=" mate "+a.mate:l+=" cp "+Math.round(a.cp);"number"==typeof a.depth&&(l+=" depth "+a.depth);e.push(l)}return e},e.addPush=function(e,t){var n;return"string"==typeof t&&(t={moveLan:t}),n="push "+t.moveLan,t.isBook&&(n+=" isBook"),t.isRetry&&(n+=" isRetry"),e.push(n),e},e.addPosition=function(e,t){return e.push("position fen "+t),e},e.addClock=function(e,t){return t&&e.push("clock "+t),e},e.addVariant=function(e,t){if("chess960"===String(t).toLowerCase().replace(/ |-/g,"")){e.push("setoption name UCI_Variant value chess");e.push("setoption name UCI_Chess960 value true")}else{e.push("setoption name UCI_Variant value chess");e.push("setoption name UCI_Chess960 value false")}return e},e}(),jce}();e.exports=a}()},7216:function(){},50953:function(e,t,n){"use strict";let a,l,c,d;n.d(t,{C4:function(){return pauseTracking},EW:function(){return computed},Gc:function(){return shallowReactive},IG:function(){return markRaw},IJ:function(){return shallowRef},KR:function(){return ref},Kh:function(){return reactive},Pr:function(){return proxyRefs},R1:function(){return unref},X2:function(){return _},bl:function(){return resetTracking},fE:function(){return isShallow},g8:function(){return isReactive},hV:function(){return traverse},hZ:function(){return trigger},i9:function(){return isRef},jr:function(){return onScopeDispose},ju:function(){return isProxy},lJ:function(){return toReactive},o5:function(){return getCurrentScope},qA:function(){return shallowReadArray},rY:function(){return customRef},tB:function(){return readonly},u4:function(){return track},ux:function(){return toRaw},wB:function(){return watch},yC:function(){return m}});var f=n(90033);class m{constructor(e=!1){this.detached=e;this._active=!0;this.effects=[];this.cleanups=[];this._isPaused=!1;this.parent=a;!e&&a&&(this.index=(a.scopes||(a.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;this._isPaused=!0;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;this._isPaused=!1;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=a;try{a=this;return e()}finally{a=t}}}on(){a=this}off(){a=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();if(e&&e!==this){this.parent.scopes[this.index]=e;e.index=this.index}}this.parent=void 0;this._active=!1}}}function getCurrentScope(){return a}function onScopeDispose(e,t=!1){a&&a.cleanups.push(e)}let g=new WeakSet;class _{constructor(e){this.fn=e;this.deps=void 0;this.depsTail=void 0;this.flags=5;this.next=void 0;this.cleanup=void 0;this.scheduler=void 0;a&&a.active&&a.effects.push(this)}pause(){this.flags|=64}resume(){if(64&this.flags){this.flags&=-65;if(g.has(this)){g.delete(this);this.trigger()}}}notify(){(!(2&this.flags)||32&this.flags)&&(8&this.flags||batch(this))}run(){if(!(1&this.flags))return this.fn();this.flags|=2;cleanupEffect(this);prepareDeps(this);let e=l,t=b;l=this;b=!0;try{return this.fn()}finally{cleanupDeps(this);l=e;b=t;this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0;cleanupEffect(this);this.onStop&&this.onStop();this.flags&=-2}}trigger(){64&this.flags?g.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let y=0;function batch(e){e.flags|=8;e.next=c;c=e}function startBatch(){y++}function endBatch(){let e;if(!(--y>0)){for(;c;){let t=c;c=void 0;for(;t;){let n=t.next;t.next=void 0;t.flags&=-9;if(1&t.flags)try{t.trigger()}catch(t){e||(e=t)}t=n}}if(e)throw e}}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep){t.version=-1;t.prevActiveLink=t.dep.activeLink;t.dep.activeLink=t}}function cleanupDeps(e,t=!1){let n;let a=e.depsTail,l=a;for(;l;){let e=l.prevDep;if(-1===l.version){l===a&&(a=e);removeSub(l,t);removeDep(l)}else n=l;l.dep.activeLink=l.prevActiveLink;l.prevActiveLink=void 0;l=e}e.deps=n;e.depsTail=a}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(4&e.flags&&!(16&e.flags))return;e.flags&=-17;if(e.globalVersion===C)return;e.globalVersion=C;let t=e.dep;e.flags|=2;if(t.version>0&&!e.isSSR&&e.deps&&!isDirty(e)){e.flags&=-3;return}let n=l,a=b;l=e;b=!0;try{prepareDeps(e);let n=e.fn(e._value);if(0===t.version||(0,f.$H)(n,e._value)){e._value=n;t.version++}}catch(e){t.version++;throw e}finally{l=n;b=a;cleanupDeps(e,!0);e.flags&=-3}}function removeSub(e,t=!1){let{dep:n,prevSub:a,nextSub:l}=e;if(a){a.nextSub=l;e.prevSub=void 0}if(l){l.prevSub=a;e.nextSub=void 0}n.subs===e&&(n.subs=a);if(!n.subs){if(n.computed){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)removeSub(e,!0)}else if(n.map&&!t){n.map.delete(n.key);n.map.size||S.delete(n.target)}}}function removeDep(e){let{prevDep:t,nextDep:n}=e;if(t){t.nextDep=n;e.prevDep=void 0}if(n){n.prevDep=t;e.nextDep=void 0}}let b=!0,A=[];function pauseTracking(){A.push(b);b=!1}function resetTracking(){let e=A.pop();b=void 0===e||e}function cleanupEffect(e){let{cleanup:t}=e;e.cleanup=void 0;if(t){let e=l;l=void 0;try{t()}finally{l=e}}}let C=0;class w{constructor(e,t){this.sub=e;this.dep=t;this.version=t.version;this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class k{constructor(e){this.computed=e;this.version=0;this.activeLink=void 0;this.subs=void 0;this.target=void 0;this.map=void 0;this.key=void 0}track(e){if(!l||!b||l===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==l){t=this.activeLink=new w(l,this);if(l.deps){t.prevDep=l.depsTail;l.depsTail.nextDep=t;l.depsTail=t}else l.deps=l.depsTail=t;4&l.flags&&addSub(t)}else if(-1===t.version){t.version=this.version;if(t.nextDep){let e=t.nextDep;e.prevDep=t.prevDep;t.prevDep&&(t.prevDep.nextDep=e);t.prevDep=l.depsTail;t.nextDep=void 0;l.depsTail.nextDep=t;l.depsTail=t;l.deps===t&&(l.deps=e)}}return t}trigger(e){this.version++;C++;this.notify(e)}notify(e){startBatch();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{endBatch()}}}function addSub(e){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)addSub(e)}let n=e.dep.subs;if(n!==e){e.prevSub=n;n&&(n.nextSub=e)}e.dep.subs=e}let S=new WeakMap,T=Symbol(""),M=Symbol(""),P=Symbol("");function track(e,t,n){if(b&&l){let t=S.get(e);t||S.set(e,t=new Map);let a=t.get(n);if(!a){t.set(n,a=new k);a.target=e;a.map=t;a.key=n}a.track()}}function trigger(e,t,n,a,l,c){let d=S.get(e);if(!d){C++;return}let run=e=>{e&&e.trigger()};startBatch();if("clear"===t)d.forEach(run);else{let l=(0,f.cy)(e),c=l&&(0,f.yI)(n);if(l&&"length"===n){let e=Number(a);d.forEach((t,n)=>{("length"===n||n===P||!(0,f.Bm)(n)&&n>=e)&&run(t)})}else{void 0!==n&&run(d.get(n));c&&run(d.get(P));switch(t){case"add":if(l)c&&run(d.get("length"));else{run(d.get(T));(0,f.CE)(e)&&run(d.get(M))}break;case"delete":if(!l){run(d.get(T));(0,f.CE)(e)&&run(d.get(M))}break;case"set":(0,f.CE)(e)&&run(d.get(T))}}}endBatch()}function reactiveReadArray(e){let t=toRaw(e);return t===e?t:(track(t,"iterate",P),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",P),e}let L={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(e=>(0,f.cy)(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,e=>e.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,n){let a=shallowReadArray(e),l=a[t]();if(a!==e&&!isShallow(e)){l._next=l.next;l.next=()=>{let e=l._next();return e.value&&(e.value=n(e.value)),e}}return l}let N=Array.prototype;function apply(e,t,n,a,l,c){let d=shallowReadArray(e),f=d!==e&&!isShallow(e),m=d[t];if(m!==N[t]){let t=m.apply(e,c);return f?toReactive(t):t}let g=n;d!==e&&(f?g=function(t,a){return n.call(this,toReactive(t),a,e)}:n.length>2&&(g=function(t,a){return n.call(this,t,a,e)}));let _=m.call(d,g,a);return f&&l?l(_):_}function reduce(e,t,n,a){let l=shallowReadArray(e),c=n;return l!==e&&(isShallow(e)?n.length>3&&(c=function(t,a,l){return n.call(this,t,a,l,e)}):c=function(t,a,l){return n.call(this,t,toReactive(a),l,e)}),l[t](c,...a)}function searchProxy(e,t,n){let a=toRaw(e);track(a,"iterate",P);let l=a[t](...n);return(-1===l||!1===l)&&isProxy(n[0])?(n[0]=toRaw(n[0]),a[t](...n)):l}function noTracking(e,t,n=[]){pauseTracking();startBatch();let a=toRaw(e)[t].apply(e,n);return endBatch(),resetTracking(),a}let x=(0,f.pD)("__proto__,__v_isRef,__isVue"),O=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(f.Bm));function hasOwnProperty(e){(0,f.Bm)(e)||(e=String(e));let t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class I{constructor(e=!1,t=!1){this._isReadonly=e;this._isShallow=t}get(e,t,n){let a=this._isReadonly,l=this._isShallow;if("__v_isReactive"===t)return!a;if("__v_isReadonly"===t)return a;if("__v_isShallow"===t)return l;if("__v_raw"===t)return n===(a?l?Q:K:l?z:Z).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let c=(0,f.cy)(e);if(!a){let e;if(c&&(e=L[t]))return e;if("hasOwnProperty"===t)return hasOwnProperty}let d=Reflect.get(e,t,isRef(e)?e:n);return((0,f.Bm)(t)?O.has(t):x(t))?d:(a||track(e,"get",t),l)?d:isRef(d)?c&&(0,f.yI)(t)?d:d.value:(0,f.Gv)(d)?a?readonly(d):reactive(d):d}}class R extends I{constructor(e=!1){super(!1,e)}set(e,t,n,a){let l=e[t];if(!this._isShallow){let t=isReadonly(l);if(!isShallow(n)&&!isReadonly(n)){l=toRaw(l);n=toRaw(n)}if(!(0,f.cy)(e)&&isRef(l)&&!isRef(n))return!t&&(l.value=n,!0)}let c=(0,f.cy)(e)&&(0,f.yI)(t)?Number(t)<e.length:(0,f.$3)(e,t),d=Reflect.set(e,t,n,isRef(e)?e:a);return e===toRaw(a)&&(c?(0,f.$H)(n,l)&&trigger(e,"set",t,n,l):trigger(e,"add",t,n)),d}deleteProperty(e,t){let n=(0,f.$3)(e,t),a=e[t],l=Reflect.deleteProperty(e,t);return l&&n&&trigger(e,"delete",t,void 0,a),l}has(e,t){let n=Reflect.has(e,t);return(0,f.Bm)(t)&&O.has(t)||track(e,"has",t),n}ownKeys(e){return track(e,"iterate",(0,f.cy)(e)?"length":T),Reflect.ownKeys(e)}}class B extends I{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}let V=new R,H=new B,D=new R(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,n=!1,a=!1){let l=toRaw(e=e.__v_raw),c=toRaw(t);if(!n){(0,f.$H)(t,c)&&track(l,"get",t);track(l,"get",c)}let{has:d}=getProto(l),m=a?toShallow:n?toReadonly:toReactive;return d.call(l,t)?m(e.get(t)):d.call(l,c)?m(e.get(c)):void(e!==l&&e.get(t))}function has(e,t=!1){let n=this.__v_raw,a=toRaw(n),l=toRaw(e);if(!t){(0,f.$H)(e,l)&&track(a,"has",e);track(a,"has",l)}return e===l?n.has(e):n.has(e)||n.has(l)}function size(e,t=!1){return e=e.__v_raw,t||track(toRaw(e),"iterate",T),Reflect.get(e,"size",e)}function add(e,t=!1){t||isShallow(e)||isReadonly(e)||(e=toRaw(e));let n=toRaw(this),a=getProto(n).has.call(n,e);if(!a){n.add(e);trigger(n,"add",e,e)}return this}function set(e,t,n=!1){n||isShallow(t)||isReadonly(t)||(t=toRaw(t));let a=toRaw(this),{has:l,get:c}=getProto(a),d=l.call(a,e);if(d);else{e=toRaw(e);d=l.call(a,e)}let m=c.call(a,e);return a.set(e,t),d?(0,f.$H)(t,m)&&trigger(a,"set",e,t,m):trigger(a,"add",e,t),this}function deleteEntry(e){let t=toRaw(this),{has:n,get:a}=getProto(t),l=n.call(t,e);if(l);else{e=toRaw(e);l=n.call(t,e)}let c=a?a.call(t,e):void 0,d=t.delete(e);return l&&trigger(t,"delete",e,void 0,c),d}function clear(){let e=toRaw(this),t=0!==e.size,n=e.clear();return t&&trigger(e,"clear",void 0,void 0,void 0),n}function createForEach(e,t){return function forEach(n,a){let l=this,c=l.__v_raw,d=toRaw(c),f=t?toShallow:e?toReadonly:toReactive;return e||track(d,"iterate",T),c.forEach((e,t)=>n.call(a,f(e),f(t),l))}}function createIterableMethod(e,t,n){return function(...a){let l=this.__v_raw,c=toRaw(l),d=(0,f.CE)(c),m="entries"===e||e===Symbol.iterator&&d,g=l[e](...a),_=n?toShallow:t?toReadonly:toReactive;return t||track(c,"iterate","keys"===e&&d?M:T),{next(){let{value:e,done:t}=g.next();return t?{value:e,done:t}:{value:m?[_(e[0]),_(e[1])]:_(e),done:t}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}let[F,$,U,W]=function createInstrumentations(){let e={get(e){return get(this,e)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(e){return get(this,e,!1,!0)},get size(){return size(this)},has,add(e){return add.call(this,e,!0)},set(e,t){return set.call(this,e,t,!0)},delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(e){return get(this,e,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},a={get(e){return get(this,e,!0,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{e[l]=createIterableMethod(l,!1,!1);n[l]=createIterableMethod(l,!0,!1);t[l]=createIterableMethod(l,!1,!0);a[l]=createIterableMethod(l,!0,!0)}),[e,n,t,a]}();function createInstrumentationGetter(e,t){let n=t?e?W:U:e?$:F;return(t,a,l)=>"__v_isReactive"===a?!e:"__v_isReadonly"===a?e:"__v_raw"===a?t:Reflect.get((0,f.$3)(n,a)&&a in t?n:t,a,l)}let j={get:createInstrumentationGetter(!1,!1)},G={get:createInstrumentationGetter(!1,!0)},q={get:createInstrumentationGetter(!0,!1)},Z=new WeakMap,z=new WeakMap,K=new WeakMap,Q=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap((0,f.Zf)(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,V,j,Z)}function shallowReactive(e){return createReactiveObject(e,!1,D,G,z)}function readonly(e){return createReactiveObject(e,!0,H,q,K)}function createReactiveObject(e,t,n,a,l){if(!(0,f.Gv)(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let c=l.get(e);if(c)return c;let d=getTargetType(e);if(0===d)return e;let m=new Proxy(e,2===d?a:n);return l.set(e,m),m}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return!!e&&!!e.__v_raw}function toRaw(e){let t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!(0,f.$3)(e,"__v_skip")&&Object.isExtensible(e)&&(0,f.yQ)(e,"__v_skip",!0),e}let toReactive=e=>(0,f.Gv)(e)?reactive(e):e,toReadonly=e=>(0,f.Gv)(e)?readonly(e):e;function isRef(e){return!!e&&!0===e.__v_isRef}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new X(e,t)}class X{constructor(e,t){this.dep=new k;this.__v_isRef=!0;this.__v_isShallow=!1;this._rawValue=t?e:toRaw(e);this._value=t?e:toReactive(e);this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e);if((0,f.$H)(e,t)){this._rawValue=e;this._value=n?e:toReactive(e);this.dep.trigger()}}}function unref(e){return isRef(e)?e.value:e}let Y={get:(e,t,n)=>"__v_raw"===t?e:unref(Reflect.get(e,t,n)),set:(e,t,n,a)=>{let l=e[t];return!isRef(l)||isRef(n)?Reflect.set(e,t,n,a):(l.value=n,!0)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,Y)}class J{constructor(e){this.__v_isRef=!0;this._value=void 0;let t=this.dep=new k,{get:n,set:a}=e(t.track.bind(t),t.trigger.bind(t));this._get=n;this._set=a}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(e){return new J(e)}class ee{constructor(e,t,n){this.fn=e;this.setter=t;this._value=void 0;this.dep=new k(this);this.__v_isRef=!0;this.deps=void 0;this.depsTail=void 0;this.flags=16;this.globalVersion=C-1;this.effect=this;this.__v_isReadonly=!t;this.isSSR=n}notify(){this.flags|=16;if(!(8&this.flags)&&l!==this)return batch(this),!0}get value(){let e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed(e,t,n=!1){let a,l;if((0,f.Tn)(e))a=e;else{a=e.get;l=e.set}return new ee(a,l,n)}let et={},en=new WeakMap;function onWatcherCleanup(e,t=!1,n=d){if(n){let t=en.get(n);t||en.set(n,t=[]);t.push(e)}}function watch(e,t,n=f.MZ){let a,l,c,m;let{immediate:g,deep:y,once:b,scheduler:A,augmentJob:C,call:w}=n,reactiveGetter=e=>y?e:isShallow(e)||!1===y||0===y?traverse(e,1):traverse(e),k=!1,S=!1;if(isRef(e)){l=()=>e.value;k=isShallow(e)}else if(isReactive(e)){l=()=>reactiveGetter(e);k=!0}else if((0,f.cy)(e)){S=!0;k=e.some(e=>isReactive(e)||isShallow(e));l=()=>e.map(e=>isRef(e)?e.value:isReactive(e)?reactiveGetter(e):(0,f.Tn)(e)?w?w(e,2):e():void 0)}else l=(0,f.Tn)(e)?t?w?()=>w(e,2):e:()=>{if(c){pauseTracking();try{c()}finally{resetTracking()}}let t=d;d=a;try{return w?w(e,3,[m]):e(m)}finally{d=t}}:f.tE;if(t&&y){let e=l,t=!0===y?1/0:y;l=()=>traverse(e(),t)}let T=getCurrentScope(),watchHandle=()=>{a.stop();T&&(0,f.TF)(T.effects,a)};if(b&&t){let e=t;t=(...t)=>{e(...t);watchHandle()}}let M=S?Array(e.length).fill(et):et,job=e=>{if(1&a.flags&&(a.dirty||e)){if(t){let e=a.run();if(y||k||(S?e.some((e,t)=>(0,f.$H)(e,M[t])):(0,f.$H)(e,M))){c&&c();let n=d;d=a;try{let n=[e,M===et?void 0:S&&M[0]===et?[]:M,m];w?w(t,3,n):t(...n);M=e}finally{d=n}}}else a.run()}};return C&&C(job),(a=new _(l)).scheduler=A?()=>A(job,!1):job,m=e=>onWatcherCleanup(e,!1,a),c=a.onStop=()=>{let e=en.get(a);if(e){if(w)w(e,4);else for(let t of e)t();en.delete(a)}},t?g?job(!0):M=a.run():A?A(job.bind(null,!0),!0):a.run(),watchHandle.pause=a.pause.bind(a),watchHandle.resume=a.resume.bind(a),watchHandle.stop=watchHandle,watchHandle}function traverse(e,t=1/0,n){if(t<=0||!(0,f.Gv)(e)||e.__v_skip)return e;n=n||new Set;if(n.has(e))return e;n.add(e);t--;if(isRef(e))traverse(e.value,t,n);else if((0,f.cy)(e))for(let a=0;a<e.length;a++)traverse(e[a],t,n);else if((0,f.vM)(e)||(0,f.CE)(e))e.forEach(e=>{traverse(e,t,n)});else if((0,f.Qd)(e)){for(let a in e)traverse(e[a],t,n);for(let a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&traverse(e[a],t,n)}return e}},20641:function(e,t,n){"use strict";let a,l,c,d,f;n.d(t,{$V:function(){return defineAsyncComponent},$u:function(){return G},$y:function(){return resolveDynamicComponent},CE:function(){return createElementBlock},Df:function(){return getTransitionRawChildren},EW:function(){return computed},FK:function(){return eu},Gy:function(){return useTransitionState},HF:function(){return mergeDefaults},Im:function(){return B},K9:function(){return createRenderer},KC:function(){return U},Lk:function(){return createBaseVNode},MZ:function(){return setTransitionHooks},OW:function(){return resolveTransitionHooks},Q3:function(){return createCommentVNode},QP:function(){return F},RG:function(){return renderSlot},Tb:function(){return toHandlers},Vq:function(){return setBlockTracking},Wv:function(){return createBlock},bF:function(){return eg},bo:function(){return withDirectives},dY:function(){return nextTick},eW:function(){return createTextVNode},eX:function(){return createSlots},fn:function(){return useModel},g2:function(){return resolveComponent},gN:function(){return resolveDirective},h:function(){return h},hi:function(){return Z},jC:function(){return ef},k6:function(){return withCtx},nI:function(){return getCurrentInstance},nT:function(){return watchEffect},p9:function(){return watchPostEffect},pI:function(){return renderList},pM:function(){return defineComponent},pR:function(){return $},qL:function(){return callWithAsyncErrorHandling},rk:function(){return useTemplateRef},sV:function(){return W},uX:function(){return openBlock},v6:function(){return mergeProps},wB:function(){return watch},xo:function(){return q},zz:function(){return mergeModels}});var m=n(50953),g=n(90033);function callWithErrorHandling(e,t,n,a){try{return a?e(...a):e()}catch(e){handleError(e,t,n)}}function callWithAsyncErrorHandling(e,t,n,a){if((0,g.Tn)(e)){let l=callWithErrorHandling(e,t,n,a);return l&&(0,g.yL)(l)&&l.catch(e=>{handleError(e,t,n)}),l}if((0,g.cy)(e)){let l=[];for(let c=0;c<e.length;c++)l.push(callWithAsyncErrorHandling(e[c],t,n,a));return l}}function handleError(e,t,n,a=!0){let l=t?t.vnode:null,{errorHandler:c,throwUnhandledErrorInProduction:d}=t&&t.appContext.config||g.MZ;if(t){let a=t.parent,l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){let t=a.ec;if(t){for(let n=0;n<t.length;n++)if(!1===t[n](e,l,d))return}a=a.parent}if(c){(0,m.C4)();callWithErrorHandling(c,null,10,[e,l,d]);(0,m.bl)();return}}logError(e,n,l,a,d)}function logError(e,t,n,a=!0,l=!1){if(l)throw e;console.error(e)}let _=!1,y=!1,b=[],A=0,C=[],w=null,k=0,S=Promise.resolve(),T=null;function nextTick(e){let t=T||S;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=_?A+1:0,n=b.length;for(;t<n;){let a=t+n>>>1,l=b[a],c=getId(l);c<e||c===e&&2&l.flags?t=a+1:n=a}return t}function queueJob(e){if(!(1&e.flags)){let t=getId(e),n=b[b.length-1];!n||!(2&e.flags)&&t>=getId(n)?b.push(e):b.splice(findInsertionIndex(t),0,e);e.flags|=1;queueFlush()}}function queueFlush(){if(!_&&!y){y=!0;T=S.then(flushJobs)}}function queuePostFlushCb(e){if((0,g.cy)(e))C.push(...e);else if(w&&-1===e.id)w.splice(k+1,0,e);else if(!(1&e.flags)){C.push(e);e.flags|=1}queueFlush()}function flushPreFlushCbs(e,t,n=_?A+1:0){for(;n<b.length;n++){let t=b[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;b.splice(n,1);n--;4&t.flags&&(t.flags&=-2);t();4&t.flags||(t.flags&=-2)}}}function flushPostFlushCbs(e){if(C.length){let e=[...new Set(C)].sort((e,t)=>getId(e)-getId(t));C.length=0;if(w){w.push(...e);return}w=e;for(k=0;k<w.length;k++){let e=w[k];4&e.flags&&(e.flags&=-2);8&e.flags||e();e.flags&=-2}w=null;k=0}}let getId=e=>null==e.id?2&e.flags?-1:1/0:e.id;function flushJobs(e){y=!1;_=!0;g.tE;try{for(A=0;A<b.length;A++){let e=b[A];if(e&&!(8&e.flags)){4&e.flags&&(e.flags&=-2);callWithErrorHandling(e,e.i,e.i?15:14);4&e.flags||(e.flags&=-2)}}}finally{for(;A<b.length;A++){let e=b[A];e&&(e.flags&=-2)}A=0;b.length=0;flushPostFlushCbs(e);_=!1;T=null;(b.length||C.length)&&flushJobs(e)}}let M=[],P=!1;function emit$1(e,...t){a?a.emit(e,...t):P||M.push({event:e,args:t})}function setDevtoolsHook$1(e,t){var n,l;a=e;if(a){a.enabled=!0;M.forEach(({event:e,args:t})=>a.emit(e,...t));M=[]}else if("undefined"==typeof window||!window.HTMLElement||(null==(l=null==(n=window.navigator)?void 0:n.userAgent)?void 0:l.includes("jsdom"))){P=!0;M=[]}else{(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(e=>{setDevtoolsHook$1(e,t)});setTimeout(()=>{if(!a){t.__VUE_DEVTOOLS_HOOK_REPLAY__=null;P=!0;M=[]}},3e3)}}function devtoolsInitApp(e,t){emit$1("app:init",e,t,{Fragment:eu,Text:ec,Comment:ed,Static:ef})}function devtoolsUnmountApp(e){emit$1("app:unmount",e)}let L=createDevtoolsComponentHook("component:added"),N=createDevtoolsComponentHook("component:updated"),x=createDevtoolsComponentHook("component:removed"),devtoolsComponentRemoved=e=>{a&&"function"==typeof a.cleanupBuffer&&!a.cleanupBuffer(e)&&x(e)};/*! #__NO_SIDE_EFFECTS__ */function createDevtoolsComponentHook(e){return t=>{emit$1(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function devtoolsComponentEmit(e,t,n){emit$1("component:emit",e.appContext.app,e,t,n)}let O=null,I=null;function setCurrentRenderingInstance(e){let t=O;return O=e,I=e&&e.type.__scopeId||null,t}function withCtx(e,t=O,n){if(!t||e._n)return e;let renderFnWithContext=(...n)=>{let a;renderFnWithContext._d&&setBlockTracking(-1);let l=setCurrentRenderingInstance(t);try{a=e(...n)}finally{setCurrentRenderingInstance(l);renderFnWithContext._d&&setBlockTracking(1)}return __VUE_PROD_DEVTOOLS__&&N(t),a};return renderFnWithContext._n=!0,renderFnWithContext._c=!0,renderFnWithContext._d=!0,renderFnWithContext}function withDirectives(e,t){if(null===O)return e;let n=getComponentPublicInstance(O),a=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[l,c,d,f=g.MZ]=t[e];if(l){(0,g.Tn)(l)&&(l={mounted:l,updated:l});l.deep&&(0,m.hV)(c);a.push({dir:l,instance:n,value:c,oldValue:void 0,arg:d,modifiers:f})}}return e}function invokeDirectiveHook(e,t,n,a){let l=e.dirs,c=t&&t.dirs;for(let d=0;d<l.length;d++){let f=l[d];c&&(f.oldValue=c[d].value);let g=f.dir[a];if(g){(0,m.C4)();callWithAsyncErrorHandling(g,n,8,[e.el,f,e,t]);(0,m.bl)()}}}let R=Symbol("_vte"),isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||""===e.disabled),isTeleportDeferred=e=>e&&(e.defer||""===e.defer),isTargetSVG=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,isTargetMathML=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,resolveTarget=(e,t)=>{let n=e&&e.to;return(0,g.Kg)(n)?t?t(n):null:n};function moveTeleport(e,t,n,{o:{insert:a},m:l},c=2){0===c&&a(e.targetAnchor,t,n);let{el:d,anchor:f,shapeFlag:m,children:g,props:_}=e,y=2===c;y&&a(d,t,n);if((!y||isTeleportDisabled(_))&&16&m)for(let e=0;e<g.length;e++)l(g[e],t,n,2);y&&a(f,t,n)}let B={name:"Teleport",__isTeleport:!0,process(e,t,n,a,l,c,d,f,m,g){let{mc:_,pc:y,pbc:b,o:{insert:A,querySelector:C,createText:w,createComment:k}}=g,S=isTeleportDisabled(t.props),{shapeFlag:T,children:M,dynamicChildren:P}=t;if(null==e){let e=t.el=w(""),g=t.anchor=w("");A(e,n,a);A(g,n,a);let mount=(e,t)=>{if(16&T){l&&l.isCE&&(l.ce._teleportTarget=e);_(M,e,t,l,c,d,f,m)}},mountToTarget=()=>{let e=t.target=resolveTarget(t.props,C),n=prepareAnchor(e,t,w,A);if(e){"svg"!==d&&isTargetSVG(e)?d="svg":"mathml"!==d&&isTargetMathML(e)&&(d="mathml");if(!S){mount(e,n);updateCssVars(t)}}};if(S){mount(n,g);updateCssVars(t)}isTeleportDeferred(t.props)?es(mountToTarget,c):mountToTarget()}else{t.el=e.el;t.targetStart=e.targetStart;let a=t.anchor=e.anchor,_=t.target=e.target,A=t.targetAnchor=e.targetAnchor,w=isTeleportDisabled(e.props),k=w?n:_;"svg"===d||isTargetSVG(_)?d="svg":("mathml"===d||isTargetMathML(_))&&(d="mathml");if(P){b(e.dynamicChildren,P,k,l,c,d,f);traverseStaticChildren(e,t,!0)}else m||y(e,t,k,w?a:A,l,c,d,f,!1);if(S)w?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):moveTeleport(t,n,a,g,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){let e=t.target=resolveTarget(t.props,C);e&&moveTeleport(t,e,null,g,0)}else w&&moveTeleport(t,_,A,g,1);updateCssVars(t)}},remove(e,t,n,{um:a,o:{remove:l}},c){let{shapeFlag:d,children:f,anchor:m,targetStart:g,targetAnchor:_,target:y,props:b}=e;if(y){l(g);l(_)}c&&l(m);if(16&d){let e=c||!isTeleportDisabled(b);for(let l=0;l<f.length;l++){let c=f[l];a(c,t,n,e,!!c.dynamicChildren)}}},move:moveTeleport,hydrate:function hydrateTeleport(e,t,n,a,l,c,{o:{nextSibling:d,parentNode:f,querySelector:m,insert:g,createText:_}},y){let b=t.target=resolveTarget(t.props,m);if(b){let m=b._lpa||b.firstChild;if(16&t.shapeFlag){if(isTeleportDisabled(t.props)){t.anchor=y(d(e),t,f(e),n,a,l,c);t.targetStart=m;t.targetAnchor=m&&d(m)}else{t.anchor=d(e);let f=m;for(;f;){if(f&&8===f.nodeType){if("teleport start anchor"===f.data)t.targetStart=f;else if("teleport anchor"===f.data){t.targetAnchor=f;b._lpa=t.targetAnchor&&d(t.targetAnchor);break}}f=d(f)}t.targetAnchor||prepareAnchor(b,t,_,g);y(m&&d(m),t,b,n,a,l,c)}}updateCssVars(t)}return t.anchor&&d(t.anchor)}};function updateCssVars(e){let t=e.ctx;if(t&&t.ut){let n=e.targetStart;for(;n&&n!==e.targetAnchor;){1===n.nodeType&&n.setAttribute("data-v-owner",t.uid);n=n.nextSibling}t.ut()}}function prepareAnchor(e,t,n,a){let l=t.targetStart=n(""),c=t.targetAnchor=n("");l[R]=c;if(e){a(l,e);a(c,e)}return c}let V=Symbol("_leaveCb"),H=Symbol("_enterCb");function useTransitionState(){let e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return W(()=>{e.isMounted=!0}),q(()=>{e.isUnmounting=!0}),e}let D=[Function,Array],F={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:D,onEnter:D,onAfterEnter:D,onEnterCancelled:D,onBeforeLeave:D,onLeave:D,onAfterLeave:D,onLeaveCancelled:D,onBeforeAppear:D,onAppear:D,onAfterAppear:D,onAppearCancelled:D},recursiveGetSubtree=e=>{let t=e.subTree;return t.component?recursiveGetSubtree(t.component):t};function findNonCommentChild(e){let t=e[0];if(e.length>1){for(let n of e)if(n.type!==ed){t=n;break}}return t}let $={name:"BaseTransition",props:F,setup(e,{slots:t}){let n=getCurrentInstance(),a=useTransitionState();return()=>{let l=t.default&&getTransitionRawChildren(t.default(),!0);if(!l||!l.length)return;let c=findNonCommentChild(l),d=(0,m.ux)(e),{mode:f}=d;if(a.isLeaving)return emptyPlaceholder(c);let g=getInnerChild$1(c);if(!g)return emptyPlaceholder(c);let _=resolveTransitionHooks(g,d,a,n,e=>_=e);g.type!==ed&&setTransitionHooks(g,_);let y=n.subTree,b=y&&getInnerChild$1(y);if(b&&b.type!==ed&&!isSameVNodeType(g,b)&&recursiveGetSubtree(n).type!==ed){let e=resolveTransitionHooks(b,d,a,n);setTransitionHooks(b,e);if("out-in"===f&&g.type!==ed)return a.isLeaving=!0,e.afterLeave=()=>{a.isLeaving=!1;8&n.job.flags||n.update();delete e.afterLeave},emptyPlaceholder(c);"in-out"===f&&g.type!==ed&&(e.delayLeave=(e,t,n)=>{getLeavingNodesForType(a,b)[String(b.key)]=b;e[V]=()=>{t();e[V]=void 0;delete _.delayedLeave};_.delayedLeave=n})}return c}}};function getLeavingNodesForType(e,t){let{leavingVNodes:n}=e,a=n.get(t.type);if(!a){a=Object.create(null);n.set(t.type,a)}return a}function resolveTransitionHooks(e,t,n,a,l){let{appear:c,mode:d,persisted:f=!1,onBeforeEnter:m,onEnter:_,onAfterEnter:y,onEnterCancelled:b,onBeforeLeave:A,onLeave:C,onAfterLeave:w,onLeaveCancelled:k,onBeforeAppear:S,onAppear:T,onAfterAppear:M,onAppearCancelled:P}=t,L=String(e.key),N=getLeavingNodesForType(n,e),callHook=(e,t)=>{e&&callWithAsyncErrorHandling(e,a,9,t)},callAsyncHook=(e,t)=>{let n=t[1];callHook(e,t);(0,g.cy)(e)?e.every(e=>e.length<=1)&&n():e.length<=1&&n()},x={mode:d,persisted:f,beforeEnter(t){let a=m;if(!n.isMounted){if(!c)return;a=S||m}t[V]&&t[V](!0);let l=N[L];l&&isSameVNodeType(e,l)&&l.el[V]&&l.el[V]();callHook(a,[t])},enter(e){let t=_,a=y,l=b;if(!n.isMounted){if(!c)return;t=T||_;a=M||y;l=P||b}let d=!1,f=e[H]=t=>{if(!d){d=!0;t?callHook(l,[e]):callHook(a,[e]);x.delayedLeave&&x.delayedLeave();e[H]=void 0}};t?callAsyncHook(t,[e,f]):f()},leave(t,a){let l=String(e.key);t[H]&&t[H](!0);if(n.isUnmounting)return a();callHook(A,[t]);let c=!1,d=t[V]=n=>{if(!c){c=!0;a();n?callHook(k,[t]):callHook(w,[t]);t[V]=void 0;N[l]===e&&delete N[l]}};N[l]=e;C?callAsyncHook(C,[t,d]):d()},clone(e){let c=resolveTransitionHooks(e,t,n,a,l);return l&&l(c),c}};return x}function emptyPlaceholder(e){if(isKeepAlive(e))return(e=cloneVNode(e)).children=null,e}function getInnerChild$1(e){if(!isKeepAlive(e))return isTeleport(e.type)&&e.children?findNonCommentChild(e.children):e;let{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&(0,g.Tn)(n.default))return n.default()}}function setTransitionHooks(e,t){if(6&e.shapeFlag&&e.component){e.transition=t;setTransitionHooks(e.component.subTree,t)}else if(128&e.shapeFlag){e.ssContent.transition=t.clone(e.ssContent);e.ssFallback.transition=t.clone(e.ssFallback)}else e.transition=t}function getTransitionRawChildren(e,t=!1,n){let a=[],l=0;for(let c=0;c<e.length;c++){let d=e[c],f=null==n?d.key:String(n)+String(null!=d.key?d.key:c);if(d.type===eu){128&d.patchFlag&&l++;a=a.concat(getTransitionRawChildren(d.children,t,f))}else(t||d.type!==ed)&&a.push(null!=f?cloneVNode(d,{key:f}):d)}if(l>1)for(let e=0;e<a.length;e++)a[e].patchFlag=-2;return a}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return(0,g.Tn)(e)?(()=>(0,g.X$)({name:e.name},t,{setup:e}))():e}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function useTemplateRef(e){let t=getCurrentInstance(),n=(0,m.IJ)(null);return t&&Object.defineProperty(t.refs===g.MZ?t.refs={}:t.refs,e,{enumerable:!0,get:()=>n.value,set:e=>n.value=e}),n}function setRef(e,t,n,a,l=!1){if((0,g.cy)(e)){e.forEach((e,c)=>setRef(e,t&&((0,g.cy)(t)?t[c]:t),n,a,l));return}if(isAsyncWrapper(a)&&!l)return;let c=4&a.shapeFlag?getComponentPublicInstance(a.component):a.el,d=l?null:c,{i:f,r:_}=e,y=t&&t.r,b=f.refs===g.MZ?f.refs={}:f.refs,A=f.setupState,C=(0,m.ux)(A),w=A===g.MZ?()=>!1:e=>(0,g.$3)(C,e);if(null!=y&&y!==_){if((0,g.Kg)(y)){b[y]=null;w(y)&&(A[y]=null)}else(0,m.i9)(y)&&(y.value=null)}if((0,g.Tn)(_))callWithErrorHandling(_,f,12,[d,b]);else{let t=(0,g.Kg)(_),a=(0,m.i9)(_);if(t||a){let doSet=()=>{if(e.f){let n=t?w(_)?A[_]:b[_]:_.value;if(l)(0,g.cy)(n)&&(0,g.TF)(n,c);else if((0,g.cy)(n))n.includes(c)||n.push(c);else if(t){b[_]=[c];w(_)&&(A[_]=b[_])}else{_.value=[c];e.k&&(b[e.k]=_.value)}}else if(t){b[_]=d;w(_)&&(A[_]=d)}else if(a){_.value=d;e.k&&(b[e.k]=d)}};if(d){doSet.id=-1;es(doSet,n)}else doSet()}}}let isComment=e=>8===e.nodeType;function forEachElement(e,t){if(isComment(e)&&"["===e.data){let n=1,a=e.nextSibling;for(;a;){if(1===a.nodeType){let e=t(a);if(!1===e)break}else if(isComment(a)){if("]"===a.data){if(0==--n)break}else"["===a.data&&n++}a=a.nextSibling}}else t(e)}let isAsyncWrapper=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(e){let t;(0,g.Tn)(e)&&(e={loader:e});let{loader:n,loadingComponent:a,errorComponent:l,delay:c=200,hydrate:d,timeout:f,suspensible:_=!0,onError:y}=e,b=null,A=0,retry=()=>(A++,b=null,load()),load=()=>{let e;return b||(e=b=n().catch(e=>{e=e instanceof Error?e:Error(String(e));if(y)return new Promise((t,n)=>{y(e,()=>t(retry()),()=>n(e),A+1)});throw e}).then(n=>e!==b&&b?b:(n&&(n.__esModule||"Module"===n[Symbol.toStringTag])&&(n=n.default),t=n,n)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:load,__asyncHydrate(e,n,a){let l=d?()=>{let t=d(a,t=>forEachElement(e,t));t&&(n.bum||(n.bum=[])).push(t)}:a;t?l():load().then(()=>!n.isUnmounted&&l())},get __asyncResolved(){return t},setup(){let e=ey;markAsyncBoundary(e);if(t)return()=>createInnerComp(t,e);let onError=t=>{b=null;handleError(t,e,13,!l)};if(_&&e.suspense||eb)return load().then(t=>()=>createInnerComp(t,e)).catch(e=>(onError(e),()=>l?eg(l,{error:e}):null));let n=(0,m.KR)(!1),d=(0,m.KR)(),g=(0,m.KR)(!!c);return c&&setTimeout(()=>{g.value=!1},c),null!=f&&setTimeout(()=>{if(!n.value&&!d.value){let e=Error(`Async component timed out after ${f}ms.`);onError(e);d.value=e}},f),load().then(()=>{n.value=!0;e.parent&&isKeepAlive(e.parent.vnode)&&e.parent.update()}).catch(e=>{onError(e);d.value=e}),()=>n.value&&t?createInnerComp(t,e):d.value&&l?eg(l,{error:d.value}):a&&!g.value?eg(a):void 0}})}function createInnerComp(e,t){let{ref:n,props:a,children:l,ce:c}=t.vnode,d=eg(e,a,l);return d.ref=n,d.ce=c,delete t.vnode.ce,d}let isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=ey){let a=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});injectHook(t,a,n);if(n){let e=n.parent;for(;e&&e.parent;){isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(a,t,n,e);e=e.parent}}}function injectToKeepAliveRoot(e,t,n,a){let l=injectHook(t,e,a,!0);Z(()=>{(0,g.TF)(a[t],l)},n)}function injectHook(e,t,n=ey,a=!1){if(n){let l=n[e]||(n[e]=[]),c=t.__weh||(t.__weh=(...a)=>{(0,m.C4)();let l=setCurrentInstance(n),c=callWithAsyncErrorHandling(t,n,e,a);return l(),(0,m.bl)(),c});return a?l.unshift(c):l.push(c),c}}let createHook=e=>(t,n=ey)=>{eb&&"sp"!==e||injectHook(e,(...e)=>t(...e),n)},U=createHook("bm"),W=createHook("m"),j=createHook("bu"),G=createHook("u"),q=createHook("bum"),Z=createHook("um"),z=createHook("sp"),K=createHook("rtg"),Q=createHook("rtc");function onErrorCaptured(e,t=ey){injectHook("ec",e,t)}let X="components";function resolveComponent(e,t){return resolveAsset(X,e,!0,t)||e}let Y=Symbol.for("v-ndc");function resolveDynamicComponent(e){return(0,g.Kg)(e)?resolveAsset(X,e,!1)||e:e||Y}function resolveDirective(e){return resolveAsset("directives",e)}function resolveAsset(e,t,n=!0,a=!1){let l=O||ey;if(l){let n=l.type;if(e===X){let e=getComponentName(n,!1);if(e&&(e===t||e===(0,g.PT)(t)||e===(0,g.ZH)((0,g.PT)(t))))return n}let c=resolve(l[e]||n[e],t)||resolve(l.appContext[e],t);return!c&&a?n:c}}function resolve(e,t){return e&&(e[t]||e[(0,g.PT)(t)]||e[(0,g.ZH)((0,g.PT)(t))])}function renderList(e,t,n,a){let l;let c=n&&n[a],d=(0,g.cy)(e);if(d||(0,g.Kg)(e)){let n=d&&(0,m.g8)(e),a=!1;if(n){a=!(0,m.fE)(e);e=(0,m.qA)(e)}l=Array(e.length);for(let n=0,d=e.length;n<d;n++)l[n]=t(a?(0,m.lJ)(e[n]):e[n],n,void 0,c&&c[n])}else if("number"==typeof e){l=Array(e);for(let n=0;n<e;n++)l[n]=t(n+1,n,void 0,c&&c[n])}else if((0,g.Gv)(e)){if(e[Symbol.iterator])l=Array.from(e,(e,n)=>t(e,n,void 0,c&&c[n]));else{let n=Object.keys(e);l=Array(n.length);for(let a=0,d=n.length;a<d;a++){let d=n[a];l[a]=t(e[d],d,a,c&&c[a])}}}else l=[];return n&&(n[a]=l),l}function createSlots(e,t){for(let n=0;n<t.length;n++){let a=t[n];if((0,g.cy)(a))for(let t=0;t<a.length;t++)e[a[t].name]=a[t].fn;else a&&(e[a.name]=a.key?(...e)=>{let t=a.fn(...e);return t&&(t.key=a.key),t}:a.fn)}return e}function renderSlot(e,t,n={},a,l){if(O.ce||O.parent&&isAsyncWrapper(O.parent)&&O.parent.ce)return"default"!==t&&(n.name=t),openBlock(),createBlock(eu,null,[eg("slot",n,a&&a())],64);let c=e[t];c&&c._c&&(c._d=!1);openBlock();let d=c&&ensureValidVNode(c(n)),f=createBlock(eu,{key:(n.key||d&&d.key||`_${t}`)+(!d&&a?"_fb":"")},d||(a?a():[]),d&&1===e._?64:-2);return!l&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),c&&c._c&&(c._d=!0),f}function ensureValidVNode(e){return e.some(e=>!isVNode(e)||!!(e.type!==ed&&(e.type!==eu||ensureValidVNode(e.children))))?e:null}function toHandlers(e,t){let n={};for(let a in e)n[t&&/[A-Z]/.test(a)?`on:${a}`:(0,g.rU)(a)]=e[a];return n}let getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,J=(0,g.X$)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?resolveMergedOptions(e):e.type,$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>__VUE_OPTIONS_API__?instanceWatch.bind(e):g.tE}),hasSetupBinding=(e,t)=>e!==g.MZ&&!e.__isScriptSetup&&(0,g.$3)(e,t),ee={get({_:e},t){let n,a,l;if("__v_skip"===t)return!0;let{ctx:c,setupState:d,data:f,props:_,accessCache:y,type:b,appContext:A}=e;if("$"!==t[0]){let a=y[t];if(void 0!==a)switch(a){case 1:return d[t];case 2:return f[t];case 4:return c[t];case 3:return _[t]}else{if(hasSetupBinding(d,t))return y[t]=1,d[t];if(f!==g.MZ&&(0,g.$3)(f,t))return y[t]=2,f[t];if((n=e.propsOptions[0])&&(0,g.$3)(n,t))return y[t]=3,_[t];if(c!==g.MZ&&(0,g.$3)(c,t))return y[t]=4,c[t];(!__VUE_OPTIONS_API__||et)&&(y[t]=0)}}let C=J[t];return C?("$attrs"===t&&(0,m.u4)(e.attrs,"get",""),C(e)):(a=b.__cssModules)&&(a=a[t])?a:c!==g.MZ&&(0,g.$3)(c,t)?(y[t]=4,c[t]):(l=A.config.globalProperties,(0,g.$3)(l,t))?l[t]:void 0},set({_:e},t,n){let{data:a,setupState:l,ctx:c}=e;return hasSetupBinding(l,t)?(l[t]=n,!0):a!==g.MZ&&(0,g.$3)(a,t)?(a[t]=n,!0):!(0,g.$3)(e.props,t)&&!("$"===t[0]&&t.slice(1) in e)&&(c[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:l,propsOptions:c}},d){let f;return!!n[d]||e!==g.MZ&&(0,g.$3)(e,d)||hasSetupBinding(t,d)||(f=c[0])&&(0,g.$3)(f,d)||(0,g.$3)(a,d)||(0,g.$3)(J,d)||(0,g.$3)(l.config.globalProperties,d)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,g.$3)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function normalizePropsOrEmits(e){return(0,g.cy)(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}function mergeDefaults(e,t){let n=normalizePropsOrEmits(e);for(let e in t){if(e.startsWith("__skip"))continue;let a=n[e];a?(0,g.cy)(a)||(0,g.Tn)(a)?a=n[e]={type:a,default:t[e]}:a.default=t[e]:null===a&&(a=n[e]={default:t[e]});a&&t[`__skip_${e}`]&&(a.skipFactory=!0)}return n}function mergeModels(e,t){return e&&t?(0,g.cy)(e)&&(0,g.cy)(t)?e.concat(t):(0,g.X$)({},normalizePropsOrEmits(e),normalizePropsOrEmits(t)):e||t}let et=!0;function applyOptions(e){let t=resolveMergedOptions(e),n=e.proxy,a=e.ctx;et=!1;t.beforeCreate&&callHook(t.beforeCreate,e,"bc");let{data:l,computed:c,methods:d,watch:f,provide:_,inject:y,created:b,beforeMount:A,mounted:C,beforeUpdate:w,updated:k,activated:S,deactivated:T,beforeDestroy:M,beforeUnmount:P,destroyed:L,unmounted:N,render:x,renderTracked:O,renderTriggered:I,errorCaptured:R,serverPrefetch:B,expose:V,inheritAttrs:H,components:D,directives:F,filters:$}=t;y&&resolveInjections(y,a,null);if(d)for(let e in d){let t=d[e];(0,g.Tn)(t)&&(a[e]=t.bind(n))}if(l){let t=l.call(n,n);(0,g.Gv)(t)&&(e.data=(0,m.Kh)(t))}et=!0;if(c)for(let e in c){let t=c[e],l=computed({get:(0,g.Tn)(t)?t.bind(n,n):(0,g.Tn)(t.get)?t.get.bind(n,n):g.tE,set:!(0,g.Tn)(t)&&(0,g.Tn)(t.set)?t.set.bind(n):g.tE});Object.defineProperty(a,e,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(f)for(let e in f)createWatcher(f[e],a,n,e);if(_){let e=(0,g.Tn)(_)?_.call(n):_;Reflect.ownKeys(e).forEach(t=>{provide(t,e[t])})}b&&callHook(b,e,"c");function registerLifecycleHook(e,t){(0,g.cy)(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}registerLifecycleHook(U,A);registerLifecycleHook(W,C);registerLifecycleHook(j,w);registerLifecycleHook(G,k);registerLifecycleHook(onActivated,S);registerLifecycleHook(onDeactivated,T);registerLifecycleHook(onErrorCaptured,R);registerLifecycleHook(Q,O);registerLifecycleHook(K,I);registerLifecycleHook(q,P);registerLifecycleHook(Z,N);registerLifecycleHook(z,B);if((0,g.cy)(V)){if(V.length){let t=e.exposed||(e.exposed={});V.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})})}else e.exposed||(e.exposed={})}x&&e.render===g.tE&&(e.render=x);null!=H&&(e.inheritAttrs=H);D&&(e.components=D);F&&(e.directives=F);B&&markAsyncBoundary(e)}function resolveInjections(e,t,n=g.tE){(0,g.cy)(e)&&(e=normalizeInject(e));for(let n in e){let a;let l=e[n];a=(0,g.Gv)(l)?"default"in l?inject(l.from||n,l.default,!0):inject(l.from||n):inject(l);(0,m.i9)(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[n]=a}}function callHook(e,t,n){callWithAsyncErrorHandling((0,g.cy)(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,a){let l=a.includes(".")?createPathGetter(n,a):()=>n[a];if((0,g.Kg)(e)){let n=t[e];(0,g.Tn)(n)&&watch(l,n)}else if((0,g.Tn)(e))watch(l,e.bind(n));else if((0,g.Gv)(e)){if((0,g.cy)(e))e.forEach(e=>createWatcher(e,t,n,a));else{let a=(0,g.Tn)(e.handler)?e.handler.bind(n):t[e.handler];(0,g.Tn)(a)&&watch(l,a,e)}}}function resolveMergedOptions(e){let t;let n=e.type,{mixins:a,extends:l}=n,{mixins:c,optionsCache:d,config:{optionMergeStrategies:f}}=e.appContext,m=d.get(n);if(m)t=m;else if(c.length||a||l){t={};c.length&&c.forEach(e=>mergeOptions(t,e,f,!0));mergeOptions(t,n,f)}else t=n;return(0,g.Gv)(n)&&d.set(n,t),t}function mergeOptions(e,t,n,a=!1){let{mixins:l,extends:c}=t;c&&mergeOptions(e,c,n,!0);l&&l.forEach(t=>mergeOptions(e,t,n,!0));for(let l in t)if(a&&"expose"===l);else{let a=en[l]||n&&n[l];e[l]=a?a(e[l],t[l]):t[l]}return e}let en={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function mergedDataFn(){return(0,g.X$)((0,g.Tn)(e)?e.call(this,this):e,(0,g.Tn)(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if((0,g.cy)(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?(0,g.X$)(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?(0,g.cy)(e)&&(0,g.cy)(t)?[...new Set([...e,...t])]:(0,g.X$)(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(null!=t?t:{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;let n=(0,g.X$)(Object.create(null),e);for(let a in t)n[a]=mergeAsArray(e[a],t[a]);return n}function createAppContext(){return{app:null,config:{isNativeTag:g.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eo=0;function createAppAPI(e,t){return function createApp(n,a=null){(0,g.Tn)(n)||(n=(0,g.X$)({},n));null==a||(0,g.Gv)(a)||(a=null);let l=createAppContext(),c=new WeakSet,d=[],f=!1,m=l.app={_uid:eo++,_component:n,_props:a,_container:null,_context:l,_instance:null,version:eC,get config(){return l.config},set config(v){},use(e,...t){if(c.has(e));else if(e&&(0,g.Tn)(e.install)){c.add(e);e.install(m,...t)}else if((0,g.Tn)(e)){c.add(e);e(m,...t)}return m},mixin:e=>(__VUE_OPTIONS_API__&&(l.mixins.includes(e)||l.mixins.push(e)),m),component:(e,t)=>t?(l.components[e]=t,m):l.components[e],directive:(e,t)=>t?(l.directives[e]=t,m):l.directives[e],mount(c,d,g){if(f);else{let _=m._ceVNode||eg(n,a);_.appContext=l;!0===g?g="svg":!1===g&&(g=void 0);d&&t?t(_,c):e(_,c,g);f=!0;m._container=c;c.__vue_app__=m;if(__VUE_PROD_DEVTOOLS__){m._instance=_.component;devtoolsInitApp(m,eC)}return getComponentPublicInstance(_.component)}},onUnmount(e){d.push(e)},unmount(){if(f){callWithAsyncErrorHandling(d,m._instance,16);e(null,m._container);if(__VUE_PROD_DEVTOOLS__){m._instance=null;devtoolsUnmountApp(m)}delete m._container.__vue_app__}},provide:(e,t)=>(l.provides[e]=t,m),runWithContext(e){let t=er;er=m;try{return e()}finally{er=t}}};return m}}let er=null;function provide(e,t){if(ey){let n=ey.provides,a=ey.parent&&ey.parent.provides;a===n&&(n=ey.provides=Object.create(a));n[e]=t}}function inject(e,t,n=!1){let a=ey||O;if(a||er){let l=er?er._context.provides:a?null==a.parent?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(l&&e in l)return l[e];if(arguments.length>1)return n&&(0,g.Tn)(t)?t.call(a&&a.proxy):t}}let ei={},createInternalObject=()=>Object.create(ei),isInternalObject=e=>Object.getPrototypeOf(e)===ei;function initProps(e,t,n,a=!1){let l={},c=createInternalObject();e.propsDefaults=Object.create(null);setFullProps(e,t,l,c);for(let t in e.propsOptions[0])t in l||(l[t]=void 0);n?e.props=a?l:(0,m.Gc)(l):e.type.props?e.props=l:e.props=c;e.attrs=c}function updateProps(e,t,n,a){let{props:l,attrs:c,vnode:{patchFlag:d}}=e,f=(0,m.ux)(l),[_]=e.propsOptions,y=!1;if((a||d>0)&&!(16&d)){if(8&d){let n=e.vnode.dynamicProps;for(let a=0;a<n.length;a++){let d=n[a];if(isEmitListener(e.emitsOptions,d))continue;let m=t[d];if(_){if((0,g.$3)(c,d)){if(m!==c[d]){c[d]=m;y=!0}}else{let t=(0,g.PT)(d);l[t]=resolvePropValue(_,f,t,m,e,!1)}}else if(m!==c[d]){c[d]=m;y=!0}}}}else{let a;setFullProps(e,t,l,c)&&(y=!0);for(let c in f)t&&((0,g.$3)(t,c)||(a=(0,g.Tg)(c))!==c&&(0,g.$3)(t,a))||(_?n&&(void 0!==n[c]||void 0!==n[a])&&(l[c]=resolvePropValue(_,f,c,void 0,e,!0)):delete l[c]);if(c!==f){for(let e in c)if(!t||!(0,g.$3)(t,e)){delete c[e];y=!0}}}y&&(0,m.hZ)(e.attrs,"set","")}function setFullProps(e,t,n,a){let l;let[c,d]=e.propsOptions,f=!1;if(t)for(let m in t){let _;if((0,g.SU)(m))continue;let y=t[m];if(c&&(0,g.$3)(c,_=(0,g.PT)(m)))d&&d.includes(_)?(l||(l={}))[_]=y:n[_]=y;else if(!isEmitListener(e.emitsOptions,m)&&(!(m in a)||y!==a[m])){a[m]=y;f=!0}}if(d){let t=(0,m.ux)(n),a=l||g.MZ;for(let l=0;l<d.length;l++){let f=d[l];n[f]=resolvePropValue(c,t,f,a[f],e,!(0,g.$3)(a,f))}}return f}function resolvePropValue(e,t,n,a,l,c){let d=e[n];if(null!=d){let e=(0,g.$3)(d,"default");if(e&&void 0===a){let e=d.default;if(d.type!==Function&&!d.skipFactory&&(0,g.Tn)(e)){let{propsDefaults:c}=l;if(n in c)a=c[n];else{let d=setCurrentInstance(l);a=c[n]=e.call(null,t);d()}}else a=e;l.ce&&l.ce._setProp(n,a)}d[0]&&(c&&!e?a=!1:d[1]&&(""===a||a===(0,g.Tg)(n))&&(a=!0))}return a}let ea=new WeakMap;function normalizePropsOptions(e,t,n=!1){let a=__VUE_OPTIONS_API__&&n?ea:t.propsCache,l=a.get(e);if(l)return l;let c=e.props,d={},f=[],m=!1;if(__VUE_OPTIONS_API__&&!(0,g.Tn)(e)){let extendProps=e=>{m=!0;let[n,a]=normalizePropsOptions(e,t,!0);(0,g.X$)(d,n);a&&f.push(...a)};!n&&t.mixins.length&&t.mixins.forEach(extendProps);e.extends&&extendProps(e.extends);e.mixins&&e.mixins.forEach(extendProps)}if(!c&&!m)return(0,g.Gv)(e)&&a.set(e,g.Oj),g.Oj;if((0,g.cy)(c))for(let e=0;e<c.length;e++){let t=(0,g.PT)(c[e]);validatePropName(t)&&(d[t]=g.MZ)}else if(c)for(let e in c){let t=(0,g.PT)(e);if(validatePropName(t)){let n=c[e],a=d[t]=(0,g.cy)(n)||(0,g.Tn)(n)?{type:n}:(0,g.X$)({},n),l=a.type,m=!1,_=!0;if((0,g.cy)(l))for(let e=0;e<l.length;++e){let t=l[e],n=(0,g.Tn)(t)&&t.name;if("Boolean"===n){m=!0;break}"String"===n&&(_=!1)}else m=(0,g.Tn)(l)&&"Boolean"===l.name;a[0]=m;a[1]=_;(m||(0,g.$3)(a,"default"))&&f.push(t)}}let _=[d,f];return(0,g.Gv)(e)&&a.set(e,_),_}function validatePropName(e){return!("$"===e[0]||(0,g.SU)(e))}let isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>(0,g.cy)(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,n)=>{if(t._n)return t;let a=withCtx((...e)=>normalizeSlotValue(t(...e)),n);return a._c=!1,a},normalizeObjectSlots=(e,t,n)=>{let a=e._ctx;for(let n in e){if(isInternalKey(n))continue;let l=e[n];if((0,g.Tn)(l))t[n]=normalizeSlot(n,l,a);else if(null!=l){let e=normalizeSlotValue(l);t[n]=()=>e}}},normalizeVNodeSlots=(e,t)=>{let n=normalizeSlotValue(t);e.slots.default=()=>n},assignSlots=(e,t,n)=>{for(let a in t)(n||"_"!==a)&&(e[a]=t[a])},initSlots=(e,t,n)=>{let a=e.slots=createInternalObject();if(32&e.vnode.shapeFlag){let e=t._;if(e){assignSlots(a,t,n);n&&(0,g.yQ)(a,"_",e,!0)}else normalizeObjectSlots(t,a)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,n)=>{let{vnode:a,slots:l}=e,c=!0,d=g.MZ;if(32&a.shapeFlag){let e=t._;if(e)n&&1===e?c=!1:assignSlots(l,t,n);else{c=!t.$stable;normalizeObjectSlots(t,l)}d=t}else if(t){normalizeVNodeSlots(e,t);d={default:1}}if(c)for(let e in l)isInternalKey(e)||null!=d[e]||delete l[e]};function initFeatureFlags(){"boolean"!=typeof __VUE_OPTIONS_API__&&((0,g.We)().__VUE_OPTIONS_API__=!0);"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&((0,g.We)().__VUE_PROD_DEVTOOLS__=!1);"boolean"!=typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,g.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}let es=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){let n,a;initFeatureFlags();let l=(0,g.We)();l.__VUE__=!0;__VUE_PROD_DEVTOOLS__&&setDevtoolsHook$1(l.__VUE_DEVTOOLS_GLOBAL_HOOK__,l);let{insert:c,remove:d,patchProp:f,createElement:_,createText:y,createComment:b,setText:A,setElementText:C,parentNode:w,nextSibling:k,setScopeId:S=g.tE,insertStaticContent:T}=e,patch=(e,t,n,a=null,l=null,c=null,d,f=null,m=!!t.dynamicChildren)=>{if(e===t)return;if(e&&!isSameVNodeType(e,t)){a=getNextHostNode(e);unmount(e,l,c,!0);e=null}if(-2===t.patchFlag){m=!1;t.dynamicChildren=null}let{type:g,ref:_,shapeFlag:y}=t;switch(g){case ec:processText(e,t,n,a);break;case ed:processCommentNode(e,t,n,a);break;case ef:null==e&&mountStaticNode(t,n,a,d);break;case eu:processFragment(e,t,n,a,l,c,d,f,m);break;default:1&y?processElement(e,t,n,a,l,c,d,f,m):6&y?processComponent(e,t,n,a,l,c,d,f,m):64&y?g.process(e,t,n,a,l,c,d,f,m,P):128&y&&g.process(e,t,n,a,l,c,d,f,m,P)}null!=_&&l&&setRef(_,e&&e.ref,c,t||e,!t)},processText=(e,t,n,a)=>{if(null==e)c(t.el=y(t.children),n,a);else{let n=t.el=e.el;t.children!==e.children&&A(n,t.children)}},processCommentNode=(e,t,n,a)=>{null==e?c(t.el=b(t.children||""),n,a):t.el=e.el},mountStaticNode=(e,t,n,a)=>{[e.el,e.anchor]=T(e.children,t,n,a,e.el,e.anchor)},moveStaticNode=({el:e,anchor:t},n,a)=>{let l;for(;e&&e!==t;){l=k(e);c(e,n,a);e=l}c(t,n,a)},removeStaticNode=({el:e,anchor:t})=>{let n;for(;e&&e!==t;){n=k(e);d(e);e=n}d(t)},processElement=(e,t,n,a,l,c,d,f,m)=>{"svg"===t.type?d="svg":"math"===t.type&&(d="mathml");null==e?mountElement(t,n,a,l,c,d,f,m):patchElement(e,t,l,c,d,f,m)},mountElement=(e,t,n,a,l,d,m,y)=>{let b,A;let{props:w,shapeFlag:k,transition:S,dirs:T}=e;b=e.el=_(e.type,d,w&&w.is,w);8&k?C(b,e.children):16&k&&mountChildren(e.children,b,null,a,l,resolveChildrenNamespace(e,d),m,y);T&&invokeDirectiveHook(e,null,a,"created");setScopeId(b,e,e.scopeId,m,a);if(w){for(let e in w)"value"===e||(0,g.SU)(e)||f(b,e,null,w[e],d,a);"value"in w&&f(b,"value",null,w.value,d);(A=w.onVnodeBeforeMount)&&invokeVNodeHook(A,a,e)}if(__VUE_PROD_DEVTOOLS__){(0,g.yQ)(b,"__vnode",e,!0);(0,g.yQ)(b,"__vueParentComponent",a,!0)}T&&invokeDirectiveHook(e,null,a,"beforeMount");let M=needTransition(l,S);M&&S.beforeEnter(b);c(b,t,n);((A=w&&w.onVnodeMounted)||M||T)&&es(()=>{A&&invokeVNodeHook(A,a,e);M&&S.enter(b);T&&invokeDirectiveHook(e,null,a,"mounted")},l)},setScopeId=(e,t,n,a,l)=>{n&&S(e,n);if(a)for(let t=0;t<a.length;t++)S(e,a[t]);if(l){let n=l.subTree;if(t===n||isSuspense(n.type)&&(n.ssContent===t||n.ssFallback===t)){let t=l.vnode;setScopeId(e,t,t.scopeId,t.slotScopeIds,l.parent)}}},mountChildren=(e,t,n,a,l,c,d,f,m=0)=>{for(let g=m;g<e.length;g++)patch(null,e[g]=f?cloneIfMounted(e[g]):normalizeVNode(e[g]),t,n,a,l,c,d,f)},patchElement=(e,t,n,a,l,c,d)=>{let m;let _=t.el=e.el;__VUE_PROD_DEVTOOLS__&&(_.__vnode=t);let{patchFlag:y,dynamicChildren:b,dirs:A}=t;y|=16&e.patchFlag;let w=e.props||g.MZ,k=t.props||g.MZ;n&&toggleRecurse(n,!1);(m=k.onVnodeBeforeUpdate)&&invokeVNodeHook(m,n,t,e);A&&invokeDirectiveHook(t,e,n,"beforeUpdate");n&&toggleRecurse(n,!0);(w.innerHTML&&null==k.innerHTML||w.textContent&&null==k.textContent)&&C(_,"");b?patchBlockChildren(e.dynamicChildren,b,_,n,a,resolveChildrenNamespace(t,l),c):d||patchChildren(e,t,_,null,n,a,resolveChildrenNamespace(t,l),c,!1);if(y>0){if(16&y)patchProps(_,w,k,n,l);else{2&y&&w.class!==k.class&&f(_,"class",null,k.class,l);4&y&&f(_,"style",w.style,k.style,l);if(8&y){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let a=e[t],c=w[a],d=k[a];(d!==c||"value"===a)&&f(_,a,c,d,l,n)}}}1&y&&e.children!==t.children&&C(_,t.children)}else d||null!=b||patchProps(_,w,k,n,l);((m=k.onVnodeUpdated)||A)&&es(()=>{m&&invokeVNodeHook(m,n,t,e);A&&invokeDirectiveHook(t,e,n,"updated")},a)},patchBlockChildren=(e,t,n,a,l,c,d)=>{for(let f=0;f<t.length;f++){let m=e[f],g=t[f],_=m.el&&(m.type===eu||!isSameVNodeType(m,g)||70&m.shapeFlag)?w(m.el):n;patch(m,g,_,null,a,l,c,d,!0)}},patchProps=(e,t,n,a,l)=>{if(t!==n){if(t!==g.MZ)for(let c in t)(0,g.SU)(c)||c in n||f(e,c,t[c],null,l,a);for(let c in n){if((0,g.SU)(c))continue;let d=n[c],m=t[c];d!==m&&"value"!==c&&f(e,c,m,d,l,a)}"value"in n&&f(e,"value",t.value,n.value,l)}},processFragment=(e,t,n,a,l,d,f,m,g)=>{let _=t.el=e?e.el:y(""),b=t.anchor=e?e.anchor:y(""),{patchFlag:A,dynamicChildren:C,slotScopeIds:w}=t;w&&(m=m?m.concat(w):w);if(null==e){c(_,n,a);c(b,n,a);mountChildren(t.children||[],n,b,l,d,f,m,g)}else if(A>0&&64&A&&C&&e.dynamicChildren){patchBlockChildren(e.dynamicChildren,C,n,l,d,f,m);(null!=t.key||l&&t===l.subTree)&&traverseStaticChildren(e,t,!0)}else patchChildren(e,t,n,b,l,d,f,m,g)},processComponent=(e,t,n,a,l,c,d,f,m)=>{t.slotScopeIds=f;null==e?512&t.shapeFlag?l.ctx.activate(t,n,a,d,m):mountComponent(t,n,a,l,c,d,m):updateComponent(e,t,m)},mountComponent=(e,t,n,a,l,c,d)=>{let f=e.component=createComponentInstance(e,a,l);isKeepAlive(e)&&(f.ctx.renderer=P);setupComponent(f,!1,d);if(f.asyncDep){l&&l.registerDep(f,setupRenderEffect,d);e.el||processCommentNode(null,f.subTree=eg(ed),t,n)}else setupRenderEffect(f,e,t,n,l,c,d)},updateComponent=(e,t,n)=>{let a=t.component=e.component;if(shouldUpdateComponent(e,t,n)){if(a.asyncDep&&!a.asyncResolved){updateComponentPreRender(a,t,n);return}a.next=t;a.update()}else{t.el=e.el;a.vnode=t}},setupRenderEffect=(e,t,n,l,c,d,f)=>{let componentUpdateFn=()=>{if(e.isMounted){let t,{next:n,bu:a,u:l,parent:m,vnode:_}=e;{let t=locateNonHydratedAsyncRoot(e);if(t){if(n){n.el=_.el;updateComponentPreRender(e,n,f)}t.asyncDep.then(()=>{e.isUnmounted||componentUpdateFn()});return}}let y=n;toggleRecurse(e,!1);if(n){n.el=_.el;updateComponentPreRender(e,n,f)}else n=_;a&&(0,g.DY)(a);(t=n.props&&n.props.onVnodeBeforeUpdate)&&invokeVNodeHook(t,m,n,_);toggleRecurse(e,!0);let b=renderComponentRoot(e),A=e.subTree;e.subTree=b;patch(A,b,w(A.el),getNextHostNode(A),e,c,d);n.el=b.el;null===y&&updateHOCHostEl(e,b.el);l&&es(l,c);(t=n.props&&n.props.onVnodeUpdated)&&es(()=>invokeVNodeHook(t,m,n,_),c);__VUE_PROD_DEVTOOLS__&&N(e)}else{let f;let{el:m,props:_}=t,{bm:y,m:b,parent:A,root:C,type:w}=e,k=isAsyncWrapper(t);toggleRecurse(e,!1);y&&(0,g.DY)(y);!k&&(f=_&&_.onVnodeBeforeMount)&&invokeVNodeHook(f,A,t);toggleRecurse(e,!0);if(m&&a){let hydrateSubTree=()=>{e.subTree=renderComponentRoot(e);a(m,e.subTree,e,c,null)};k&&w.__asyncHydrate?w.__asyncHydrate(m,e,hydrateSubTree):hydrateSubTree()}else{C.ce&&C.ce._injectChildStyle(w);let a=e.subTree=renderComponentRoot(e);patch(null,a,n,l,e,c,d);t.el=a.el}b&&es(b,c);if(!k&&(f=_&&_.onVnodeMounted)){let e=t;es(()=>invokeVNodeHook(f,A,e),c)}(256&t.shapeFlag||A&&isAsyncWrapper(A.vnode)&&256&A.vnode.shapeFlag)&&e.a&&es(e.a,c);e.isMounted=!0;__VUE_PROD_DEVTOOLS__&&L(e);t=n=l=null}};e.scope.on();let _=e.effect=new m.X2(componentUpdateFn);e.scope.off();let y=e.update=_.run.bind(_),b=e.job=_.runIfDirty.bind(_);b.i=e;b.id=e.uid;_.scheduler=()=>queueJob(b);toggleRecurse(e,!0);y()},updateComponentPreRender=(e,t,n)=>{t.component=e;let a=e.vnode.props;e.vnode=t;e.next=null;updateProps(e,t.props,a,n);updateSlots(e,t.children,n);(0,m.C4)();flushPreFlushCbs(e);(0,m.bl)()},patchChildren=(e,t,n,a,l,c,d,f,m=!1)=>{let g=e&&e.children,_=e?e.shapeFlag:0,y=t.children,{patchFlag:b,shapeFlag:A}=t;if(b>0){if(128&b){patchKeyedChildren(g,y,n,a,l,c,d,f,m);return}if(256&b){patchUnkeyedChildren(g,y,n,a,l,c,d,f,m);return}}if(8&A){16&_&&unmountChildren(g,l,c);y!==g&&C(n,y)}else if(16&_)16&A?patchKeyedChildren(g,y,n,a,l,c,d,f,m):unmountChildren(g,l,c,!0);else{8&_&&C(n,"");16&A&&mountChildren(y,n,a,l,c,d,f,m)}},patchUnkeyedChildren=(e,t,n,a,l,c,d,f,m)=>{let _;e=e||g.Oj;t=t||g.Oj;let y=e.length,b=t.length,A=Math.min(y,b);for(_=0;_<A;_++){let a=t[_]=m?cloneIfMounted(t[_]):normalizeVNode(t[_]);patch(e[_],a,n,null,l,c,d,f,m)}y>b?unmountChildren(e,l,c,!0,!1,A):mountChildren(t,n,a,l,c,d,f,m,A)},patchKeyedChildren=(e,t,n,a,l,c,d,f,m)=>{let _=0,y=t.length,b=e.length-1,A=y-1;for(;_<=b&&_<=A;){let a=e[_],g=t[_]=m?cloneIfMounted(t[_]):normalizeVNode(t[_]);if(isSameVNodeType(a,g))patch(a,g,n,null,l,c,d,f,m);else break;_++}for(;_<=b&&_<=A;){let a=e[b],g=t[A]=m?cloneIfMounted(t[A]):normalizeVNode(t[A]);if(isSameVNodeType(a,g))patch(a,g,n,null,l,c,d,f,m);else break;b--;A--}if(_>b){if(_<=A){let e=A+1,g=e<y?t[e].el:a;for(;_<=A;){patch(null,t[_]=m?cloneIfMounted(t[_]):normalizeVNode(t[_]),n,g,l,c,d,f,m);_++}}}else if(_>A)for(;_<=b;){unmount(e[_],l,c,!0);_++}else{let C;let w=_,k=_,S=new Map;for(_=k;_<=A;_++){let e=t[_]=m?cloneIfMounted(t[_]):normalizeVNode(t[_]);null!=e.key&&S.set(e.key,_)}let T=0,M=A-k+1,P=!1,L=0,N=Array(M);for(_=0;_<M;_++)N[_]=0;for(_=w;_<=b;_++){let a;let g=e[_];if(T>=M){unmount(g,l,c,!0);continue}if(null!=g.key)a=S.get(g.key);else for(C=k;C<=A;C++)if(0===N[C-k]&&isSameVNodeType(g,t[C])){a=C;break}if(void 0===a)unmount(g,l,c,!0);else{N[a-k]=_+1;a>=L?L=a:P=!0;patch(g,t[a],n,null,l,c,d,f,m);T++}}let x=P?getSequence(N):g.Oj;C=x.length-1;for(_=M-1;_>=0;_--){let e=k+_,g=t[e],b=e+1<y?t[e+1].el:a;0===N[_]?patch(null,g,n,b,l,c,d,f,m):P&&(C<0||_!==x[C]?move(g,n,b,2):C--)}}},move=(e,t,n,a,l=null)=>{let{el:d,type:f,transition:m,children:g,shapeFlag:_}=e;if(6&_){move(e.component.subTree,t,n,a);return}if(128&_){e.suspense.move(t,n,a);return}if(64&_){f.move(e,t,n,P);return}if(f===eu){c(d,t,n);for(let e=0;e<g.length;e++)move(g[e],t,n,a);c(e.anchor,t,n);return}if(f===ef){moveStaticNode(e,t,n);return}let y=2!==a&&1&_&&m;if(y){if(0===a){m.beforeEnter(d);c(d,t,n);es(()=>m.enter(d),l)}else{let{leave:e,delayLeave:a,afterLeave:l}=m,remove2=()=>c(d,t,n),performLeave=()=>{e(d,()=>{remove2();l&&l()})};a?a(d,remove2,performLeave):performLeave()}}else c(d,t,n)},unmount=(e,t,n,a=!1,l=!1)=>{let c;let{type:d,props:f,ref:m,children:g,dynamicChildren:_,shapeFlag:y,patchFlag:b,dirs:A,cacheIndex:C}=e;-2===b&&(l=!1);null!=m&&setRef(m,null,n,e,!0);null!=C&&(t.renderCache[C]=void 0);if(256&y){t.ctx.deactivate(e);return}let w=1&y&&A,k=!isAsyncWrapper(e);k&&(c=f&&f.onVnodeBeforeUnmount)&&invokeVNodeHook(c,t,e);if(6&y)unmountComponent(e.component,n,a);else{if(128&y){e.suspense.unmount(n,a);return}w&&invokeDirectiveHook(e,null,t,"beforeUnmount");64&y?e.type.remove(e,t,n,P,a):_&&!_.hasOnce&&(d!==eu||b>0&&64&b)?unmountChildren(_,t,n,!1,!0):(d===eu&&384&b||!l&&16&y)&&unmountChildren(g,t,n);a&&remove(e)}(k&&(c=f&&f.onVnodeUnmounted)||w)&&es(()=>{c&&invokeVNodeHook(c,t,e);w&&invokeDirectiveHook(e,null,t,"unmounted")},n)},remove=e=>{let{type:t,el:n,anchor:a,transition:l}=e;if(t===eu){removeFragment(n,a);return}if(t===ef){removeStaticNode(e);return}let performRemove=()=>{d(n);l&&!l.persisted&&l.afterLeave&&l.afterLeave()};if(1&e.shapeFlag&&l&&!l.persisted){let{leave:t,delayLeave:a}=l,performLeave=()=>t(n,performRemove);a?a(e.el,performRemove,performLeave):performLeave()}else performRemove()},removeFragment=(e,t)=>{let n;for(;e!==t;){n=k(e);d(e);e=n}d(t)},unmountComponent=(e,t,n)=>{let{bum:a,scope:l,job:c,subTree:d,um:f,m,a:_}=e;invalidateMount(m);invalidateMount(_);a&&(0,g.DY)(a);l.stop();if(c){c.flags|=8;unmount(d,e,t,n)}f&&es(f,t);es(()=>{e.isUnmounted=!0},t);if(t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId){t.deps--;0===t.deps&&t.resolve()}__VUE_PROD_DEVTOOLS__&&devtoolsComponentRemoved(e)},unmountChildren=(e,t,n,a=!1,l=!1,c=0)=>{for(let d=c;d<e.length;d++)unmount(e[d],t,n,a,l)},getNextHostNode=e=>{if(6&e.shapeFlag)return getNextHostNode(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();let t=k(e.anchor||e.el),n=t&&t[R];return n?k(n):t},M=!1,render=(e,t,n)=>{null==e?t._vnode&&unmount(t._vnode,null,null,!0):patch(t._vnode||null,e,t,null,null,null,n);t._vnode=e;if(!M){M=!0;flushPreFlushCbs();flushPostFlushCbs();M=!1}},P={p:patch,um:unmount,m:move,r:remove,mt:mountComponent,mc:mountChildren,pc:patchChildren,pbc:patchBlockChildren,n:getNextHostNode,o:e};return t&&([n,a]=t(P)),{render,hydrate:n,createApp:createAppAPI(render,n)}}function resolveChildrenNamespace({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function toggleRecurse({effect:e,job:t},n){if(n){e.flags|=32;t.flags|=4}else{e.flags&=-33;t.flags&=-5}}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,n=!1){let a=e.children,l=t.children;if((0,g.cy)(a)&&(0,g.cy)(l))for(let e=0;e<a.length;e++){let t=a[e],c=l[e];if(1&c.shapeFlag&&!c.dynamicChildren){(c.patchFlag<=0||32===c.patchFlag)&&((c=l[e]=cloneIfMounted(l[e])).el=t.el);n||-2===c.patchFlag||traverseStaticChildren(t,c)}c.type===ec&&(c.el=t.el)}}function getSequence(e){let t,n,a,l,c;let d=e.slice(),f=[0],m=e.length;for(t=0;t<m;t++){let m=e[t];if(0!==m){n=f[f.length-1];if(e[n]<m){d[t]=n;f.push(t);continue}a=0;l=f.length-1;for(;a<l;)e[f[c=a+l>>1]]<m?a=c+1:l=c;if(m<e[f[a]]){a>0&&(d[t]=f[a-1]);f[a]=t}}}a=f.length;l=f[a-1];for(;a-- >0;){f[a]=l;l=d[l]}return f}function locateNonHydratedAsyncRoot(e){let t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}let el=Symbol.for("v-scx"),useSSRContext=()=>inject(el);function watchEffect(e,t){return doWatch(e,null,t)}function watchPostEffect(e,t){return doWatch(e,null,{flush:"post"})}function watchSyncEffect(e,t){return doWatch(e,null,{flush:"sync"})}function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,n=g.MZ){let a;let{immediate:l,deep:c,flush:d,once:f}=n,_=(0,g.X$)({},n);if(eb){if("sync"===d){let e=useSSRContext();a=e.__watcherHandles||(e.__watcherHandles=[])}else if(!t||l)_.once=!0;else{let watchStopHandle=()=>{};return watchStopHandle.stop=g.tE,watchStopHandle.resume=g.tE,watchStopHandle.pause=g.tE,watchStopHandle}}let y=ey;_.call=(e,t,n)=>callWithAsyncErrorHandling(e,y,t,n);let b=!1;if("post"===d)_.scheduler=e=>{es(e,y&&y.suspense)};else if("sync"!==d){b=!0;_.scheduler=(e,t)=>{t?e():queueJob(e)}}_.augmentJob=e=>{t&&(e.flags|=4);if(b){e.flags|=2;if(y){e.id=y.uid;e.i=y}}};let A=(0,m.wB)(e,t,_);return a&&a.push(A),A}function instanceWatch(e,t,n){let a;let l=this.proxy,c=(0,g.Kg)(e)?e.includes(".")?createPathGetter(l,e):()=>l[e]:e.bind(l,l);if((0,g.Tn)(t))a=t;else{a=t.handler;n=t}let d=setCurrentInstance(this),f=doWatch(c,a.bind(l),n);return d(),f}function createPathGetter(e,t){let n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function useModel(e,t,n=g.MZ){let a=getCurrentInstance(),l=(0,g.PT)(t),c=(0,g.Tg)(t),d=getModelModifiers(e,t),f=(0,m.rY)((d,f)=>{let m,_;let y=g.MZ;return watchSyncEffect(()=>{let n=e[t];if((0,g.$H)(m,n)){m=n;f()}}),{get:()=>(d(),n.get?n.get(m):m),set(e){let d=n.set?n.set(e):e;if(!(0,g.$H)(d,m)&&!(y!==g.MZ&&(0,g.$H)(e,y)))return;let b=a.vnode.props;if(!(b&&(t in b||l in b||c in b)&&(`onUpdate:${t}` in b||`onUpdate:${l}` in b||`onUpdate:${c}` in b))){m=e;f()}a.emit(`update:${t}`,d);(0,g.$H)(e,d)&&(0,g.$H)(e,y)&&!(0,g.$H)(d,_)&&f();y=e;_=d}}});return f[Symbol.iterator]=()=>{let e=0;return{next:()=>e<2?{value:e++?d||g.MZ:f,done:!1}:{done:!0}}},f}let getModelModifiers=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${(0,g.PT)(t)}Modifiers`]||e[`${(0,g.Tg)(t)}Modifiers`];function emit(e,t,...n){let a;if(e.isUnmounted)return;let l=e.vnode.props||g.MZ,c=n,d=t.startsWith("update:"),f=d&&getModelModifiers(l,t.slice(7));if(f){f.trim&&(c=n.map(e=>(0,g.Kg)(e)?e.trim():e));f.number&&(c=n.map(g.bB))}__VUE_PROD_DEVTOOLS__&&devtoolsComponentEmit(e,t,c);let m=l[a=(0,g.rU)(t)]||l[a=(0,g.rU)((0,g.PT)(t))];!m&&d&&(m=l[a=(0,g.rU)((0,g.Tg)(t))]);m&&callWithAsyncErrorHandling(m,e,6,c);let _=l[a+"Once"];if(_){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0;callWithAsyncErrorHandling(_,e,6,c)}}function normalizeEmitsOptions(e,t,n=!1){let a=t.emitsCache,l=a.get(e);if(void 0!==l)return l;let c=e.emits,d={},f=!1;if(__VUE_OPTIONS_API__&&!(0,g.Tn)(e)){let extendEmits=e=>{let n=normalizeEmitsOptions(e,t,!0);if(n){f=!0;(0,g.X$)(d,n)}};!n&&t.mixins.length&&t.mixins.forEach(extendEmits);e.extends&&extendEmits(e.extends);e.mixins&&e.mixins.forEach(extendEmits)}return c||f?((0,g.cy)(c)?c.forEach(e=>d[e]=null):(0,g.X$)(d,c),(0,g.Gv)(e)&&a.set(e,d),d):((0,g.Gv)(e)&&a.set(e,null),null)}function isEmitListener(e,t){return!!(e&&(0,g.Mp)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,g.$3)(e,t[0].toLowerCase()+t.slice(1))||(0,g.$3)(e,(0,g.Tg)(t))||(0,g.$3)(e,t))}function renderComponentRoot(e){let t,n;let{type:a,vnode:l,proxy:c,withProxy:d,propsOptions:[f],slots:m,attrs:_,emit:y,render:b,renderCache:A,props:C,data:w,setupState:k,ctx:S,inheritAttrs:T}=e,M=setCurrentRenderingInstance(e);try{if(4&l.shapeFlag){let e=d||c;t=normalizeVNode(b.call(e,e,A,C,k,w,S));n=_}else{let e=a;t=normalizeVNode(e.length>1?e(C,{attrs:_,slots:m,emit:y}):e(C,null));n=a.props?_:getFunctionalFallthrough(_)}}catch(n){ep.length=0;handleError(n,e,1);t=eg(ed)}let P=t;if(n&&!1!==T){let e=Object.keys(n),{shapeFlag:t}=P;if(e.length&&7&t){f&&e.some(g.CP)&&(n=filterModelListeners(n,f));P=cloneVNode(P,n,!1,!0)}}return l.dirs&&((P=cloneVNode(P,null,!1,!0)).dirs=P.dirs?P.dirs.concat(l.dirs):l.dirs),l.transition&&setTransitionHooks(P,l.transition),t=P,setCurrentRenderingInstance(M),t}let getFunctionalFallthrough=e=>{let t;for(let n in e)("class"===n||"style"===n||(0,g.Mp)(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{let n={};for(let a in e)(0,g.CP)(a)&&a.slice(9) in t||(n[a]=e[a]);return n};function shouldUpdateComponent(e,t,n){let{props:a,children:l,component:c}=e,{props:d,children:f,patchFlag:m}=t,g=c.emitsOptions;if(t.dirs||t.transition)return!0;if(!n||!(m>=0))return(!!l||!!f)&&(!f||!f.$stable)||a!==d&&(a?!d||hasPropsChanged(a,d,g):!!d);if(1024&m)return!0;if(16&m)return a?hasPropsChanged(a,d,g):!!d;if(8&m){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t];if(d[n]!==a[n]&&!isEmitListener(g,n))return!0}}return!1}function hasPropsChanged(e,t,n){let a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let l=0;l<a.length;l++){let c=a[l];if(t[c]!==e[c]&&!isEmitListener(n,c))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t;){let a=t.subTree;a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el);if(a===e){(e=t.vnode).el=n;t=t.parent}else break}}let isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?(0,g.cy)(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}let eu=Symbol.for("v-fgt"),ec=Symbol.for("v-txt"),ed=Symbol.for("v-cmt"),ef=Symbol.for("v-stc"),ep=[],em=null;function openBlock(e=!1){ep.push(em=e?null:[])}function closeBlock(){ep.pop();em=ep[ep.length-1]||null}let eh=1;function setBlockTracking(e){eh+=e;e<0&&em&&(em.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=eh>0?em||g.Oj:null,closeBlock(),eh>0&&em&&em.push(e),e}function createElementBlock(e,t,n,a,l,c){return setupBlock(createBaseVNode(e,t,n,a,l,c,!0))}function createBlock(e,t,n,a,l){return setupBlock(eg(e,t,n,a,l,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}let normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?(0,g.Kg)(e)||(0,m.i9)(e)||(0,g.Tn)(e)?{i:O,r:e,k:t,f:!!n}:e:null);function createBaseVNode(e,t=null,n=null,a=0,l=null,c=e===eu?0:1,d=!1,f=!1){let m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:I,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:a,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:O};if(f){normalizeChildren(m,n);128&c&&e.normalize(m)}else n&&(m.shapeFlag|=(0,g.Kg)(n)?8:16);return eh>0&&!d&&em&&(m.patchFlag>0||6&c)&&32!==m.patchFlag&&em.push(m),m}let eg=_createVNode;function _createVNode(e,t=null,n=null,a=0,l=null,c=!1){e&&e!==Y||(e=ed);if(isVNode(e)){let a=cloneVNode(e,t,!0);return n&&normalizeChildren(a,n),eh>0&&!c&&em&&(6&a.shapeFlag?em[em.indexOf(e)]=a:em.push(a)),a.patchFlag=-2,a}isClassComponent(e)&&(e=e.__vccOpts);if(t){let{class:e,style:n}=t=guardReactiveProps(t);e&&!(0,g.Kg)(e)&&(t.class=(0,g.C4)(e));if((0,g.Gv)(n)){(0,m.ju)(n)&&!(0,g.cy)(n)&&(n=(0,g.X$)({},n));t.style=(0,g.Tr)(n)}}let d=(0,g.Kg)(e)?1:isSuspense(e)?128:isTeleport(e)?64:(0,g.Gv)(e)?4:(0,g.Tn)(e)?2:0;return createBaseVNode(e,t,n,a,l,d,c,!0)}function guardReactiveProps(e){return e?(0,m.ju)(e)||isInternalObject(e)?(0,g.X$)({},e):e:null}function cloneVNode(e,t,n=!1,a=!1){let{props:l,ref:c,patchFlag:d,children:f,transition:m}=e,_=t?mergeProps(l||{},t):l,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&normalizeKey(_),ref:t&&t.ref?n&&c?(0,g.cy)(c)?c.concat(normalizeRef(t)):[c,normalizeRef(t)]:normalizeRef(t):c,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==eu?-1===d?16:16|d:d,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&a&&setTransitionHooks(y,m.clone(y)),y}function createTextVNode(e=" ",t=0){return eg(ec,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(ed,null,e)):eg(ed,null,e)}function normalizeVNode(e){return null==e||"boolean"==typeof e?eg(ed):(0,g.cy)(e)?eg(eu,null,e.slice()):"object"==typeof e?cloneIfMounted(e):eg(ec,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0,{shapeFlag:a}=e;if(null==t)t=null;else if((0,g.cy)(t))n=16;else if("object"==typeof t){if(65&a){let n=t.default;if(n){n._c&&(n._d=!1);normalizeChildren(e,n());n._c&&(n._d=!0)}return}{n=32;let a=t._;if(a||isInternalObject(t)){if(3===a&&O){if(1===O.slots._)t._=1;else{t._=2;e.patchFlag|=1024}}}else t._ctx=O}}else if((0,g.Tn)(t)){t={default:t,_ctx:O};n=32}else{t=String(t);if(64&a){n=16;t=[createTextVNode(t)]}else n=8}e.children=t;e.shapeFlag|=n}function mergeProps(...e){let t={};for(let n=0;n<e.length;n++){let a=e[n];for(let e in a)if("class"===e)t.class!==a.class&&(t.class=(0,g.C4)([t.class,a.class]));else if("style"===e)t.style=(0,g.Tr)([t.style,a.style]);else if((0,g.Mp)(e)){let n=t[e],l=a[e];l&&n!==l&&!((0,g.cy)(n)&&n.includes(l))&&(t[e]=n?[].concat(n,l):l)}else""!==e&&(t[e]=a[e])}return t}function invokeVNodeHook(e,t,n,a=null){callWithAsyncErrorHandling(e,t,7,[n,a])}let ev=createAppContext(),e_=0;function createComponentInstance(e,t,n){let a=e.type,l=(t?t.appContext:e.appContext)||ev,c={uid:e_++,vnode:e,type:a,parent:t,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new m.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(l.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,l),emitsOptions:normalizeEmitsOptions(a,l),emit:null,emitted:null,propsDefaults:g.MZ,inheritAttrs:a.inheritAttrs,ctx:g.MZ,data:g.MZ,props:g.MZ,attrs:g.MZ,slots:g.MZ,refs:g.MZ,setupState:g.MZ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=t?t.root:c,c.emit=emit.bind(null,c),e.ce&&e.ce(c),c}let ey=null,getCurrentInstance=()=>ey||O;{let e=(0,g.We)(),registerGlobalSetter=(t,n)=>{let a;return(a=e[t])||(a=e[t]=[]),a.push(n),e=>{a.length>1?a.forEach(t=>t(e)):a[0](e)}};l=registerGlobalSetter("__VUE_INSTANCE_SETTERS__",e=>ey=e);c=registerGlobalSetter("__VUE_SSR_SETTERS__",e=>eb=e)}let setCurrentInstance=e=>{let t=ey;return l(e),e.scope.on(),()=>{e.scope.off();l(t)}},unsetCurrentInstance=()=>{ey&&ey.scope.off();l(null)};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let eb=!1;function setupComponent(e,t=!1,n=!1){t&&c(t);let{props:a,children:l}=e.vnode,d=isStatefulComponent(e);initProps(e,a,d,t);initSlots(e,l,n);let f=d?setupStatefulComponent(e,t):void 0;return t&&c(!1),f}function setupStatefulComponent(e,t){let n=e.type;e.accessCache=Object.create(null);e.proxy=new Proxy(e.ctx,ee);let{setup:a}=n;if(a){let n=e.setupContext=a.length>1?createSetupContext(e):null,l=setCurrentInstance(e);(0,m.C4)();let c=callWithErrorHandling(a,e,0,[e.props,n]);(0,m.bl)();l();if((0,g.yL)(c)){isAsyncWrapper(e)||markAsyncBoundary(e);c.then(unsetCurrentInstance,unsetCurrentInstance);if(t)return c.then(n=>{handleSetupResult(e,n,t)}).catch(t=>{handleError(t,e,0)});e.asyncDep=c}else handleSetupResult(e,c,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){if((0,g.Tn)(t))e.type.__ssrInlineRender?e.ssrRender=t:e.render=t;else if((0,g.Gv)(t)){__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t);e.setupState=(0,m.Pr)(t)}finishComponentSetup(e,n)}function finishComponentSetup(e,t,n){let a=e.type;if(!e.render){if(!t&&d&&!a.render){let t=a.template||resolveMergedOptions(e).template;if(t){let{isCustomElement:n,compilerOptions:l}=e.appContext.config,{delimiters:c,compilerOptions:f}=a,m=(0,g.X$)((0,g.X$)({isCustomElement:n,delimiters:c},l),f);a.render=d(t,m)}}e.render=a.render||g.tE;f&&f(e)}if(__VUE_OPTIONS_API__){let t=setCurrentInstance(e);(0,m.C4)();try{applyOptions(e)}finally{(0,m.bl)();t()}}}let eA={get:(e,t)=>((0,m.u4)(e,"get",""),e[t])};function createSetupContext(e){return{attrs:new Proxy(e.attrs,eA),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy((0,m.Pr)((0,m.IG)(e.exposed)),{get:(t,n)=>n in t?t[n]:n in J?J[n](e):void 0,has:(e,t)=>t in e||t in J})):e.proxy}function getComponentName(e,t=!0){return(0,g.Tn)(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return(0,g.Tn)(e)&&"__vccOpts"in e}let computed=(e,t)=>(0,m.EW)(e,t,eb);function h(e,t,n){let a=arguments.length;return 2===a?!(0,g.Gv)(t)||(0,g.cy)(t)?eg(e,null,t):isVNode(t)?eg(e,null,[t]):eg(e,t):(a>3?n=Array.prototype.slice.call(arguments,2):3===a&&isVNode(n)&&(n=[n]),eg(e,t,n))}let eC="3.5.8"},53751:function(e,t,n){"use strict";let a,l;n.d(t,{$9:function(){return useCssVars},D:function(){return useCssModule},D$:function(){return withModifiers},Ef:function(){return createApp},F:function(){return G},Jo:function(){return Z},aG:function(){return L},eB:function(){return S},jR:function(){return withKeys},lH:function(){return z}});var c=n(20641),d=n(90033),f=n(50953);let m="undefined"!=typeof window&&window.trustedTypes;if(m)try{l=m.createPolicy("vue",{createHTML:e=>e})}catch(e){}let g=l?e=>l.createHTML(e):e=>e,_="undefined"!=typeof document?document:null,y=_&&_.createElement("template"),b="transition",A="animation",C=Symbol("_vtc"),w={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},k=(0,d.X$)({},c.QP,w),S=(e=>(e.displayName="Transition",e.props=k,e))((e,{slots:t})=>(0,c.h)(c.pR,resolveTransitionProps(e),t)),callHook=(e,t=[])=>{(0,d.cy)(e)?e.forEach(e=>e(...t)):e&&e(...t)},hasExplicitCallback=e=>!!e&&((0,d.cy)(e)?e.some(e=>e.length>1):e.length>1);function resolveTransitionProps(e){let t={};for(let n in e)n in w||(t[n]=e[n]);if(!1===e.css)return t;let{name:n="v",type:a,duration:l,enterFromClass:c=`${n}-enter-from`,enterActiveClass:f=`${n}-enter-active`,enterToClass:m=`${n}-enter-to`,appearFromClass:g=c,appearActiveClass:_=f,appearToClass:y=m,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:A=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=e,k=normalizeDuration(l),S=k&&k[0],T=k&&k[1],{onBeforeEnter:M,onEnter:P,onEnterCancelled:L,onLeave:N,onLeaveCancelled:x,onBeforeAppear:O=M,onAppear:I=P,onAppearCancelled:R=L}=t,finishEnter=(e,t,n)=>{removeTransitionClass(e,t?y:m);removeTransitionClass(e,t?_:f);n&&n()},finishLeave=(e,t)=>{e._isLeaving=!1;removeTransitionClass(e,b);removeTransitionClass(e,C);removeTransitionClass(e,A);t&&t()},makeEnterHook=e=>(t,n)=>{let l=e?I:P,resolve=()=>finishEnter(t,e,n);callHook(l,[t,resolve]);nextFrame(()=>{removeTransitionClass(t,e?g:c);addTransitionClass(t,e?y:m);hasExplicitCallback(l)||whenTransitionEnds(t,a,S,resolve)})};return(0,d.X$)(t,{onBeforeEnter(e){callHook(M,[e]);addTransitionClass(e,c);addTransitionClass(e,f)},onBeforeAppear(e){callHook(O,[e]);addTransitionClass(e,g);addTransitionClass(e,_)},onEnter:makeEnterHook(!1),onAppear:makeEnterHook(!0),onLeave(e,t){e._isLeaving=!0;let resolve=()=>finishLeave(e,t);addTransitionClass(e,b);addTransitionClass(e,A);forceReflow();nextFrame(()=>{if(e._isLeaving){removeTransitionClass(e,b);addTransitionClass(e,C);hasExplicitCallback(N)||whenTransitionEnds(e,a,T,resolve)}});callHook(N,[e,resolve])},onEnterCancelled(e){finishEnter(e,!1);callHook(L,[e])},onAppearCancelled(e){finishEnter(e,!0);callHook(R,[e])},onLeaveCancelled(e){finishLeave(e);callHook(x,[e])}})}function normalizeDuration(e){if(null==e)return null;if((0,d.Gv)(e))return[NumberOf(e.enter),NumberOf(e.leave)];{let t=NumberOf(e);return[t,t]}}function NumberOf(e){return(0,d.Ro)(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t));(e[C]||(e[C]=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));let n=e[C];if(n){n.delete(t);n.size||(e[C]=void 0)}}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let T=0;function whenTransitionEnds(e,t,n,a){let l=e._endId=++T,resolveIfNotStale=()=>{l===e._endId&&a()};if(null!=n)return setTimeout(resolveIfNotStale,n);let{type:c,timeout:d,propCount:f}=getTransitionInfo(e,t);if(!c)return a();let m=c+"end",g=0,end=()=>{e.removeEventListener(m,onEnd);resolveIfNotStale()},onEnd=t=>{t.target===e&&++g>=f&&end()};setTimeout(()=>{g<f&&end()},d+1);e.addEventListener(m,onEnd)}function getTransitionInfo(e,t){let n=window.getComputedStyle(e),getStyleProperties=e=>(n[e]||"").split(", "),a=getStyleProperties(`${b}Delay`),l=getStyleProperties(`${b}Duration`),c=getTimeout(a,l),d=getStyleProperties(`${A}Delay`),f=getStyleProperties(`${A}Duration`),m=getTimeout(d,f),g=null,_=0,y=0;if(t===b){if(c>0){g=b;_=c;y=l.length}}else if(t===A){if(m>0){g=A;_=m;y=f.length}}else y=(g=(_=Math.max(c,m))>0?c>m?b:A:null)?g===b?l.length:f.length:0;let C=g===b&&/\b(transform|all)(,|$)/.test(getStyleProperties(`${b}Property`).toString());return{type:g,timeout:_,propCount:y,hasTransform:C}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((t,n)=>toMs(t)+toMs(e[n])))}function toMs(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function forceReflow(){return document.body.offsetHeight}function patchClass(e,t,n){let a=e[C];a&&(t=(t?[t,...a]:[...a]).join(" "));null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}let M=Symbol("_vod"),P=Symbol("_vsh"),L={beforeMount(e,{value:t},{transition:n}){e[M]="none"===e.style.display?"":e.style.display;n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){if(!t!=!n){if(a){if(t){a.beforeEnter(e);setDisplay(e,!0);a.enter(e)}else a.leave(e,()=>{setDisplay(e,!1)})}else setDisplay(e,t)}},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[M]:"none";e[P]=!t}let N=Symbol("");function useCssVars(e){let t=(0,c.nI)();if(!t)return;let n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(e=>setVarsOnNode(e,n))},setVars=()=>{let a=e(t.proxy);t.ce?setVarsOnNode(t.ce,a):setVarsOnVNode(t.subTree,a);n(a)};(0,c.KC)(()=>{(0,c.p9)(setVars)});(0,c.sV)(()=>{let e=new MutationObserver(setVars);e.observe(t.subTree.el.parentNode,{childList:!0});(0,c.hi)(()=>e.disconnect())})}function setVarsOnVNode(e,t){if(128&e.shapeFlag){let n=e.suspense;e=n.activeBranch;n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{setVarsOnVNode(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)setVarsOnNode(e.el,t);else if(e.type===c.FK)e.children.forEach(e=>setVarsOnVNode(e,t));else if(e.type===c.jC){let{el:n,anchor:a}=e;for(;n;){setVarsOnNode(n,t);if(n===a)break;n=n.nextSibling}}}function setVarsOnNode(e,t){if(1===e.nodeType){let n=e.style,a="";for(let e in t){n.setProperty(`--${e}`,t[e]);a+=`--${e}: ${t[e]};`}n[N]=a}}let x=/(^|;)\s*display\s*:/;function patchStyle(e,t,n){let a=e.style,l=(0,d.Kg)(n),c=!1;if(n&&!l){if(t){if((0,d.Kg)(t))for(let e of t.split(";")){let t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&setStyle(a,t,"")}else for(let e in t)null==n[e]&&setStyle(a,e,"")}for(let e in n){"display"===e&&(c=!0);setStyle(a,e,n[e])}}else if(l){if(t!==n){let e=a[N];e&&(n+=";"+e);a.cssText=n;c=x.test(n)}}else t&&e.removeAttribute("style");if(M in e){e[M]=c?a.display:"";e[P]&&(a.display="none")}}let O=/\s*!important$/;function setStyle(e,t,n){if((0,d.cy)(n))n.forEach(n=>setStyle(e,t,n));else{null==n&&(n="");if(t.startsWith("--"))e.setProperty(t,n);else{let a=autoPrefix(e,t);O.test(n)?e.setProperty((0,d.Tg)(a),n.replace(O,""),"important"):e[a]=n}}}let I=["Webkit","Moz","ms"],R={};function autoPrefix(e,t){let n=R[t];if(n)return n;let a=(0,d.PT)(t);if("filter"!==a&&a in e)return R[t]=a;a=(0,d.ZH)(a);for(let n=0;n<I.length;n++){let l=I[n]+a;if(l in e)return R[t]=l}return t}let B="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,a,l,c=(0,d.J$)(t)){a&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(B,t.slice(6,t.length)):e.setAttributeNS(B,t,n):null==n||c&&!(0,d.Y2)(n)?e.removeAttribute(t):e.setAttribute(t,c?"":(0,d.Bm)(n)?String(n):n)}function patchDOMProp(e,t,n,a){if("innerHTML"===t||"textContent"===t){null!=n&&(e[t]="innerHTML"===t?g(n):n);return}let l=e.tagName;if("value"===t&&"PROGRESS"!==l&&!l.includes("-")){let a="OPTION"===l?e.getAttribute("value")||"":e.value,c=null==n?"checkbox"===e.type?"on":"":String(n);a===c&&"_value"in e||(e.value=c);null==n&&e.removeAttribute(t);e._value=n;return}let c=!1;if(""===n||null==n){let a=typeof e[t];if("boolean"===a)n=(0,d.Y2)(n);else if(null==n&&"string"===a){n="";c=!0}else if("number"===a){n=0;c=!0}}try{e[t]=n}catch(e){}c&&e.removeAttribute(t)}function addEventListener(e,t,n,a){e.addEventListener(t,n,a)}function removeEventListener(e,t,n,a){e.removeEventListener(t,n,a)}let V=Symbol("_vei");function patchEvent(e,t,n,a,l=null){let c=e[V]||(e[V]={}),d=c[t];if(a&&d)d.value=a;else{let[n,f]=parseName(t);if(a)addEventListener(e,n,c[t]=createInvoker(a,l),f);else if(d){removeEventListener(e,n,d,f);c[t]=void 0}}}let H=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(H.test(e)){let n;t={};for(;n=e.match(H);){e=e.slice(0,e.length-n[0].length);t[n[0].toLowerCase()]=!0}}return[":"===e[2]?e.slice(3):(0,d.Tg)(e.slice(2)),t]}let D=0,F=Promise.resolve(),getNow=()=>D||(F.then(()=>D=0),D=Date.now());function createInvoker(e,t){let invoker=e=>{if(e._vts){if(e._vts<=invoker.attached)return}else e._vts=Date.now();(0,c.qL)(patchStopImmediatePropagation(e,invoker.value),t,5,[e])};return invoker.value=e,invoker.attached=getNow(),invoker}function patchStopImmediatePropagation(e,t){if(!(0,d.cy)(t))return t;{let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e);e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}}let isNativeOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&123>e.charCodeAt(2);function shouldSetAsProp(e,t,n,a){if(a)return!!("innerHTML"===t||"textContent"===t||t in e&&isNativeOn(t)&&(0,d.Tn)(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"form"===t||"list"===t&&"INPUT"===e.tagName||"type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){let t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return!(isNativeOn(t)&&(0,d.Kg)(n))&&!!(t in e||e._isVueCE&&(/[A-Z]/.test(t)||!(0,d.Kg)(n)))}"undefined"!=typeof HTMLElement&&HTMLElement;function useCssModule(e="$style"){{let t=(0,c.nI)();if(!t)return d.MZ;let n=t.type.__cssModules;return n&&n[e]||d.MZ}}let $=new WeakMap,U=new WeakMap,W=Symbol("_moveCb"),j=Symbol("_enterCb"),G=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:(0,d.X$)({},k,{tag:String,moveClass:String}),setup(e,{slots:t}){let n,a;let l=(0,c.nI)(),d=(0,c.Gy)();return(0,c.$u)(()=>{if(!n.length)return;let t=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(n[0].el,l.vnode.el,t))return;n.forEach(callPendingCbs);n.forEach(recordPosition);let a=n.filter(applyTranslation);forceReflow();a.forEach(e=>{let n=e.el,a=n.style;addTransitionClass(n,t);a.transform=a.webkitTransform=a.transitionDuration="";let l=n[W]=e=>{if((!e||e.target===n)&&(!e||/transform$/.test(e.propertyName))){n.removeEventListener("transitionend",l);n[W]=null;removeTransitionClass(n,t)}};n.addEventListener("transitionend",l)})}),()=>{let m=(0,f.ux)(e),g=resolveTransitionProps(m),_=m.tag||c.FK;n=[];if(a)for(let e=0;e<a.length;e++){let t=a[e];if(t.el&&t.el instanceof Element){n.push(t);(0,c.MZ)(t,(0,c.OW)(t,g,d,l));$.set(t,t.el.getBoundingClientRect())}}a=t.default?(0,c.Df)(t.default()):[];for(let e=0;e<a.length;e++){let t=a[e];null!=t.key&&(0,c.MZ)(t,(0,c.OW)(t,g,d,l))}return(0,c.bF)(_,null,a)}}});function callPendingCbs(e){let t=e.el;t[W]&&t[W]();t[j]&&t[j]()}function recordPosition(e){U.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){let t=$.get(e),n=U.get(e),a=t.left-n.left,l=t.top-n.top;if(a||l){let t=e.el.style;return t.transform=t.webkitTransform=`translate(${a}px,${l}px)`,t.transitionDuration="0s",e}}function hasCSSTransform(e,t,n){let a=e.cloneNode(),l=e[C];l&&l.forEach(e=>{e.split(/\s+/).forEach(e=>e&&a.classList.remove(e))});n.split(/\s+/).forEach(e=>e&&a.classList.add(e));a.style.display="none";let c=1===t.nodeType?t:t.parentNode;c.appendChild(a);let{hasTransform:d}=getTransitionInfo(a);return c.removeChild(a),d}let getModelAssigner=e=>{let t=e.props["onUpdate:modelValue"]||!1;return(0,d.cy)(t)?e=>(0,d.DY)(t,e):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){let t=e.target;if(t.composing){t.composing=!1;t.dispatchEvent(new Event("input"))}}let q=Symbol("_assign"),Z={created(e,{modifiers:{lazy:t,trim:n,number:a}},l){e[q]=getModelAssigner(l);let c=a||l.props&&"number"===l.props.type;addEventListener(e,t?"change":"input",t=>{if(t.target.composing)return;let a=e.value;n&&(a=a.trim());c&&(a=(0,d.bB)(a));e[q](a)});n&&addEventListener(e,"change",()=>{e.value=e.value.trim()});if(!t){addEventListener(e,"compositionstart",onCompositionStart);addEventListener(e,"compositionend",onCompositionEnd);addEventListener(e,"change",onCompositionEnd)}},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:a,trim:l,number:c}},f){e[q]=getModelAssigner(f);if(e.composing)return;let m=(c||"number"===e.type)&&!/^0\d/.test(e.value)?(0,d.bB)(e.value):e.value,g=null==t?"":t;m===g||document.activeElement===e&&"range"!==e.type&&(a&&t===n||l&&e.value.trim()===g)||(e.value=g)}},z={deep:!0,created(e,t,n){e[q]=getModelAssigner(n);addEventListener(e,"change",()=>{let t=e._modelValue,n=getValue(e),a=e.checked,l=e[q];if((0,d.cy)(t)){let e=(0,d.u3)(t,n),c=-1!==e;if(a&&!c)l(t.concat(n));else if(!a&&c){let n=[...t];n.splice(e,1);l(n)}}else if((0,d.vM)(t)){let e=new Set(t);a?e.add(n):e.delete(n);l(e)}else l(getCheckboxValue(e,a))})},mounted:setChecked,beforeUpdate(e,t,n){e[q]=getModelAssigner(n);setChecked(e,t,n)}};function setChecked(e,{value:t,oldValue:n},a){let l;e._modelValue=t;l=(0,d.cy)(t)?(0,d.u3)(t,a.props.value)>-1:(0,d.vM)(t)?t.has(a.props.value):(0,d.BX)(t,getCheckboxValue(e,!0));e.checked!==l&&(e.checked=l)}function getValue(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){let n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}let K=["ctrl","shift","alt","meta"],Q={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>K.some(n=>e[`${n}Key`]&&!t.includes(n))},withModifiers=(e,t)=>{let n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=(n,...a)=>{for(let e=0;e<t.length;e++){let a=Q[t[e]];if(a&&a(n,t))return}return e(n,...a)})},X={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>{let n=e._withKeys||(e._withKeys={}),a=t.join(".");return n[a]||(n[a]=n=>{if(!("key"in n))return;let a=(0,d.Tg)(n.key);if(t.some(e=>e===a||X[e]===a))return e(n)})},Y=(0,d.X$)({patchProp:(e,t,n,a,l,c)=>{let f="svg"===l;if("class"===t)patchClass(e,a,f);else if("style"===t)patchStyle(e,n,a);else if((0,d.Mp)(t))(0,d.CP)(t)||patchEvent(e,t,n,a,c);else if("."===t[0]?(t=t.slice(1),0):"^"===t[0]?(t=t.slice(1),1):!shouldSetAsProp(e,t,a,f)){"true-value"===t?e._trueValue=a:"false-value"===t&&(e._falseValue=a);patchAttr(e,t,a,f)}else{patchDOMProp(e,t,a);e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||patchAttr(e,t,a,f,c,"value"!==t)}}},{insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{let l="svg"===t?_.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?_.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?_.createElement(e,{is:n}):_.createElement(e);return"select"===e&&a&&null!=a.multiple&&l.setAttribute("multiple",a.multiple),l},createText:e=>_.createTextNode(e),createComment:e=>_.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,l,c){let d=n?n.previousSibling:t.lastChild;if(l&&(l===c||l.nextSibling))for(;;){t.insertBefore(l.cloneNode(!0),n);if(l===c||!(l=l.nextSibling))break}else{y.innerHTML=g("svg"===a?`<svg>${e}</svg>`:"mathml"===a?`<math>${e}</math>`:e);let l=y.content;if("svg"===a||"mathml"===a){let e=l.firstChild;for(;e.firstChild;)l.appendChild(e.firstChild);l.removeChild(e)}t.insertBefore(l,n)}return[d?d.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}});function ensureRenderer(){return a||(a=(0,c.K9)(Y))}let createApp=(...e)=>{let t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=e=>{let a=normalizeContainer(e);if(!a)return;let l=t._component;(0,d.Tn)(l)||l.render||l.template||(l.template=a.innerHTML);1===a.nodeType&&(a.textContent="");let c=n(a,!1,resolveRootNamespace(a));if(a instanceof Element){a.removeAttribute("v-cloak");a.setAttribute("data-v-app","")}return c},t};function resolveRootNamespace(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function normalizeContainer(e){return(0,d.Kg)(e)?document.querySelector(e):e}},90033:function(e,t,n){"use strict";let a;n.d(t,{$3:function(){return hasOwn},$H:function(){return hasChanged},BH:function(){return S},BX:function(){return looseEqual},Bm:function(){return isSymbol},C4:function(){return normalizeClass},CE:function(){return isMap},CP:function(){return isModelListener},DY:function(){return invokeArrayFns},Gv:function(){return isObject},J$:function(){return L},Kg:function(){return isString},MZ:function(){return l},Mp:function(){return isOn},NO:function(){return NO},Oj:function(){return c},PT:function(){return b},Qd:function(){return isPlainObject},Ro:function(){return toNumber},SU:function(){return _},TF:function(){return remove},Tg:function(){return C},Tn:function(){return isFunction},Tr:function(){return normalizeStyle},We:function(){return getGlobalThis},X$:function(){return d},Y2:function(){return includeBooleanAttr},ZH:function(){return w},Zf:function(){return toRawType},bB:function(){return looseToNumber},cy:function(){return m},gd:function(){return isRegExp},pD:function(){return makeMap},rU:function(){return k},tE:function(){return NOOP},u3:function(){return looseIndexOf},vM:function(){return isSet},v_:function(){return toDisplayString},yI:function(){return isIntegerKey},yL:function(){return isPromise},yQ:function(){return def}});/**
* @vue/shared v3.5.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e){let t=Object.create(null);for(let n of e.split(","))t[n]=1;return e=>e in t}let l={},c=[],NOOP=()=>{},NO=()=>!1,isOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||97>e.charCodeAt(2)),isModelListener=e=>e.startsWith("onUpdate:"),d=Object.assign,remove=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},f=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>f.call(e,t),m=Array.isArray,isMap=e=>"[object Map]"===toTypeString(e),isSet=e=>"[object Set]"===toTypeString(e),isDate=e=>"[object Date]"===toTypeString(e),isRegExp=e=>"[object RegExp]"===toTypeString(e),isFunction=e=>"function"==typeof e,isString=e=>"string"==typeof e,isSymbol=e=>"symbol"==typeof e,isObject=e=>null!==e&&"object"==typeof e,isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),g=Object.prototype.toString,toTypeString=e=>g.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>"[object Object]"===toTypeString(e),isIntegerKey=e=>isString(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,_=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},y=/-(\w)/g,b=cacheStringFunction(e=>e.replace(y,(e,t)=>t?t.toUpperCase():"")),A=/\B([A-Z])/g,C=cacheStringFunction(e=>e.replace(A,"-$1").toLowerCase()),w=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),k=cacheStringFunction(e=>e?`on${w(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},def=(e,t,n,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:n})},looseToNumber=e=>{let t=parseFloat(e);return isNaN(t)?e:t},toNumber=e=>{let t=isString(e)?Number(e):NaN;return isNaN(t)?e:t},getGlobalThis=()=>a||(a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{}),S=makeMap("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol");function normalizeStyle(e){if(m(e)){let t={};for(let n=0;n<e.length;n++){let a=e[n],l=isString(a)?parseStringStyle(a):normalizeStyle(a);if(l)for(let e in l)t[e]=l[e]}return t}if(isString(e)||isObject(e))return e}let T=/;(?![^(]*\))/g,M=/:([^]+)/,P=/\/\*[^]*?\*\//g;function parseStringStyle(e){let t={};return e.replace(P,"").split(T).forEach(e=>{if(e){let n=e.split(M);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(m(e))for(let n=0;n<e.length;n++){let a=normalizeClass(e[n]);a&&(t+=a+" ")}else if(isObject(e))for(let n in e)e[n]&&(t+=n+" ");return t.trim()}let L=makeMap("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function includeBooleanAttr(e){return!!e||""===e}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=looseEqual(e[a],t[a]);return n}function looseEqual(e,t){if(e===t)return!0;let n=isDate(e),a=isDate(t);if(n||a)return!!n&&!!a&&e.getTime()===t.getTime();n=isSymbol(e);a=isSymbol(t);if(n||a)return e===t;n=m(e);a=m(t);if(n||a)return!!n&&!!a&&looseCompareArrays(e,t);n=isObject(e);a=isObject(t);if(n||a){if(!n||!a)return!1;let l=Object.keys(e).length,c=Object.keys(t).length;if(l!==c)return!1;for(let n in e){let a=e.hasOwnProperty(n),l=t.hasOwnProperty(n);if(a&&!l||!a&&l||!looseEqual(e[n],t[n]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex(e=>looseEqual(e,t))}let isRef=e=>!!(e&&!0===e.__v_isRef),toDisplayString=e=>isString(e)?e:null==e?"":m(e)||isObject(e)&&(e.toString===g||!isFunction(e.toString))?isRef(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],a)=>(e[stringifySymbol(t,a)+" =>"]=n,e),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>stringifySymbol(e))}:isSymbol(t)?stringifySymbol(t):!isObject(t)||m(t)||isPlainObject(t)?t:String(t),stringifySymbol=(e,t="")=>{var n;return isSymbol(e)?`Symbol(${null!=(n=e.description)?n:t})`:e}},72505:function(e,t,n){e.exports=n(18015)},35592:function(e,t,n){"use strict";var a=n(9516),l=n(7522),c=n(33948),d=n(79106),f=n(99615),m=n(62012),g=n(64202),_=n(47763),y=n(96987),b=n(31928);e.exports=function xhrAdapter(e){return new Promise(function dispatchXhrRequest(t,n){var A,C=e.data,w=e.headers,k=e.responseType;function done(){e.cancelToken&&e.cancelToken.unsubscribe(A);e.signal&&e.signal.removeEventListener("abort",A)}a.isFormData(C)&&delete w["Content-Type"];var S=new XMLHttpRequest;if(e.auth){var T=e.auth.username||"",M=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";w.Authorization="Basic "+btoa(T+":"+M)}var P=f(e.baseURL,e.url);S.open(e.method.toUpperCase(),d(P,e.params,e.paramsSerializer),!0);S.timeout=e.timeout;function onloadend(){if(S){var a="getAllResponseHeaders"in S?m(S.getAllResponseHeaders()):null;l(function _resolve(e){t(e);done()},function _reject(e){n(e);done()},{data:k&&"text"!==k&&"json"!==k?S.response:S.responseText,status:S.status,statusText:S.statusText,headers:a,config:e,request:S});S=null}}"onloadend"in S?S.onloadend=onloadend:S.onreadystatechange=function handleLoad(){S&&4===S.readyState&&(0!==S.status||S.responseURL&&0===S.responseURL.indexOf("file:"))&&setTimeout(onloadend)};S.onabort=function handleAbort(){if(S){n(_("Request aborted",e,"ECONNABORTED",S));S=null}};S.onerror=function handleError(){n(_("Network Error",e,null,S));S=null};S.ontimeout=function handleTimeout(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",a=e.transitional||y.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage);n(_(t,e,a.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S));S=null};if(a.isStandardBrowserEnv()){var L=(e.withCredentials||g(P))&&e.xsrfCookieName?c.read(e.xsrfCookieName):void 0;L&&(w[e.xsrfHeaderName]=L)}"setRequestHeader"in S&&a.forEach(w,function setRequestHeader(e,t){void 0===C&&"content-type"===t.toLowerCase()?delete w[t]:S.setRequestHeader(t,e)});a.isUndefined(e.withCredentials)||(S.withCredentials=!!e.withCredentials);k&&"json"!==k&&(S.responseType=e.responseType);"function"==typeof e.onDownloadProgress&&S.addEventListener("progress",e.onDownloadProgress);"function"==typeof e.onUploadProgress&&S.upload&&S.upload.addEventListener("progress",e.onUploadProgress);if(e.cancelToken||e.signal){A=function(e){if(S){n(!e||e&&e.type?new b("canceled"):e);S.abort();S=null}};e.cancelToken&&e.cancelToken.subscribe(A);e.signal&&(e.signal.aborted?A():e.signal.addEventListener("abort",A))}C||(C=null);S.send(C)})}},18015:function(e,t,n){"use strict";var a=n(9516),l=n(69012),c=n(35155),d=n(85343);function createInstance(e){var t=new c(e),n=l(c.prototype.request,t);return a.extend(n,c.prototype,t),a.extend(n,t),n.create=function create(t){return createInstance(d(e,t))},n}var f=createInstance(n(96987));f.Axios=c;f.Cancel=n(31928);f.CancelToken=n(3191);f.isCancel=n(93864);f.VERSION=n(49641).version;f.all=function all(e){return Promise.all(e)};f.spread=n(17980);f.isAxiosError=n(45019);e.exports=f;e.exports.default=f},31928:function(e){"use strict";function Cancel(e){this.message=e}Cancel.prototype.toString=function toString(){return"Cancel"+(this.message?": "+this.message:"")};Cancel.prototype.__CANCEL__=!0;e.exports=Cancel},3191:function(e,t,n){"use strict";var a=n(31928);function CancelToken(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function promiseExecutor(e){t=e});var t,n=this;this.promise.then(function(e){if(n._listeners){var t,a=n._listeners.length;for(t=0;t<a;t++)n._listeners[t](e);n._listeners=null}});this.promise.then=function(e){var t,a=new Promise(function(e){n.subscribe(e);t=e}).then(e);return a.cancel=function reject(){n.unsubscribe(t)},a};e(function cancel(e){if(!n.reason){n.reason=new a(e);t(n.reason)}})}CancelToken.prototype.throwIfRequested=function throwIfRequested(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};CancelToken.prototype.unsubscribe=function unsubscribe(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}};CancelToken.source=function source(){var e;return{token:new CancelToken(function executor(t){e=t}),cancel:e}};e.exports=CancelToken},93864:function(e){"use strict";e.exports=function isCancel(e){return!!(e&&e.__CANCEL__)}},35155:function(e,t,n){"use strict";var a=n(9516),l=n(79106),c=n(83471),d=n(64490),f=n(85343),m=n(34841),g=m.validators;function Axios(e){this.defaults=e;this.interceptors={request:new c,response:new c}}Axios.prototype.request=function request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};if(!t.url)throw Error("Provided config url is not valid");(t=f(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n,a=t.transitional;void 0!==a&&m.assertOptions(a,{silentJSONParsing:g.transitional(g.boolean),forcedJSONParsing:g.transitional(g.boolean),clarifyTimeoutError:g.transitional(g.boolean)},!1);var l=[],c=!0;this.interceptors.request.forEach(function unshiftRequestInterceptors(e){if("function"!=typeof e.runWhen||!1!==e.runWhen(t)){c=c&&e.synchronous;l.unshift(e.fulfilled,e.rejected)}});var _=[];this.interceptors.response.forEach(function pushResponseInterceptors(e){_.push(e.fulfilled,e.rejected)});if(!c){var y=[d,void 0];Array.prototype.unshift.apply(y,l);y=y.concat(_);n=Promise.resolve(t);for(;y.length;)n=n.then(y.shift(),y.shift());return n}for(var b=t;l.length;){var A=l.shift(),C=l.shift();try{b=A(b)}catch(e){C(e);break}}try{n=d(b)}catch(e){return Promise.reject(e)}for(;_.length;)n=n.then(_.shift(),_.shift());return n};Axios.prototype.getUri=function getUri(e){if(!e.url)throw Error("Provided config url is not valid");return l((e=f(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")};a.forEach(["delete","get","head","options"],function forEachMethodNoData(e){Axios.prototype[e]=function(t,n){return this.request(f(n||{},{method:e,url:t,data:(n||{}).data}))}});a.forEach(["post","put","patch"],function forEachMethodWithData(e){Axios.prototype[e]=function(t,n,a){return this.request(f(a||{},{method:e,url:t,data:n}))}});e.exports=Axios},83471:function(e,t,n){"use strict";var a=n(9516);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1};InterceptorManager.prototype.eject=function eject(e){this.handlers[e]&&(this.handlers[e]=null)};InterceptorManager.prototype.forEach=function forEach(e){a.forEach(this.handlers,function forEachHandler(t){null!==t&&e(t)})};e.exports=InterceptorManager},99615:function(e,t,n){"use strict";var a=n(29137),l=n(84680);e.exports=function buildFullPath(e,t){return e&&!a(t)?l(e,t):t}},47763:function(e,t,n){"use strict";var a=n(5449);e.exports=function createError(e,t,n,l,c){return a(Error(e),t,n,l,c)}},64490:function(e,t,n){"use strict";var a=n(9516),l=n(82881),c=n(93864),d=n(96987),f=n(31928);function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested();if(e.signal&&e.signal.aborted)throw new f("canceled")}e.exports=function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=l.call(e,e.data,e.headers,e.transformRequest),e.headers=a.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),a.forEach(["delete","get","head","post","put","patch","common"],function cleanHeaderConfig(t){delete e.headers[t]}),(e.adapter||d.adapter)(e).then(function onAdapterResolution(t){return throwIfCancellationRequested(e),t.data=l.call(e,t.data,t.headers,e.transformResponse),t},function onAdapterRejection(t){if(!c(t)){throwIfCancellationRequested(e);t&&t.response&&(t.response.data=l.call(e,t.response.data,t.response.headers,e.transformResponse))}return Promise.reject(t)})}},5449:function(e){"use strict";e.exports=function enhanceError(e,t,n,a,l){return e.config=t,n&&(e.code=n),e.request=a,e.response=l,e.isAxiosError=!0,e.toJSON=function toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},85343:function(e,t,n){"use strict";var a=n(9516);e.exports=function mergeConfig(e,t){t=t||{};var n={};function getMergedValue(e,t){return a.isPlainObject(e)&&a.isPlainObject(t)?a.merge(e,t):a.isPlainObject(t)?a.merge({},t):a.isArray(t)?t.slice():t}function mergeDeepProperties(n){return a.isUndefined(t[n])?a.isUndefined(e[n])?void 0:getMergedValue(void 0,e[n]):getMergedValue(e[n],t[n])}function valueFromConfig2(e){if(!a.isUndefined(t[e]))return getMergedValue(void 0,t[e])}function defaultToConfig2(n){return a.isUndefined(t[n])?a.isUndefined(e[n])?void 0:getMergedValue(void 0,e[n]):getMergedValue(void 0,t[n])}function mergeDirectKeys(n){return n in t?getMergedValue(e[n],t[n]):n in e?getMergedValue(void 0,e[n]):void 0}var l={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};return a.forEach(Object.keys(e).concat(Object.keys(t)),function computeConfigValue(e){var t=l[e]||mergeDeepProperties,c=t(e);a.isUndefined(c)&&t!==mergeDirectKeys||(n[e]=c)}),n}},7522:function(e,t,n){"use strict";var a=n(47763);e.exports=function settle(e,t,n){var l=n.config.validateStatus;!n.status||!l||l(n.status)?e(n):t(a("Request failed with status code "+n.status,n.config,null,n.request,n))}},82881:function(e,t,n){"use strict";var a=n(9516),l=n(96987);e.exports=function transformData(e,t,n){var c=this||l;return a.forEach(n,function transform(n){e=n.call(c,e,t)}),e}},96987:function(e,t,n){"use strict";var a=n(65606),l=n(9516),c=n(7018),d=n(5449),f={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!l.isUndefined(e)&&l.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function stringifySafely(e,t,n){if(l.isString(e))try{(t||JSON.parse)(e);return l.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}var m={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function getDefaultAdapter(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(35592):void 0!==a&&"[object process]"===Object.prototype.toString.call(a)&&(e=n(35592)),e}(),transformRequest:[function transformRequest(e,t){return(c(t,"Accept"),c(t,"Content-Type"),l.isFormData(e)||l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e))?e:l.isArrayBufferView(e)?e.buffer:l.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):l.isObject(e)||t&&"application/json"===t["Content-Type"]?(setContentTypeIfUnset(t,"application/json"),stringifySafely(e)):e}],transformResponse:[function transformResponse(e){var t=this.transitional||m.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,c=!n&&"json"===this.responseType;if(c||a&&l.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(c){if("SyntaxError"===e.name)throw d(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function validateStatus(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};l.forEach(["delete","get","head"],function forEachMethodNoData(e){m.headers[e]={}});l.forEach(["post","put","patch"],function forEachMethodWithData(e){m.headers[e]=l.merge(f)});e.exports=m},49641:function(e){e.exports={version:"0.25.0"}},69012:function(e){"use strict";e.exports=function bind(e,t){return function wrap(){for(var n=Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];return e.apply(t,n)}}},79106:function(e,t,n){"use strict";var a=n(9516);function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function buildURL(e,t,n){if(!t)return e;if(n)l=n(t);else if(a.isURLSearchParams(t))l=t.toString();else{var l,c=[];a.forEach(t,function serialize(e,t){if(null!=e){a.isArray(e)?t+="[]":e=[e];a.forEach(e,function parseValue(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e));c.push(encode(t)+"="+encode(e))})}});l=c.join("&")}if(l){var d=e.indexOf("#");-1!==d&&(e=e.slice(0,d));e+=(-1===e.indexOf("?")?"?":"&")+l}return e}},84680:function(e){"use strict";e.exports=function combineURLs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},33948:function(e,t,n){"use strict";var a=n(9516);e.exports=a.isStandardBrowserEnv()?function standardBrowserEnv(){return{write:function write(e,t,n,l,c,d){var f=[];f.push(e+"="+encodeURIComponent(t));a.isNumber(n)&&f.push("expires="+new Date(n).toGMTString());a.isString(l)&&f.push("path="+l);a.isString(c)&&f.push("domain="+c);!0===d&&f.push("secure");document.cookie=f.join("; ")},read:function read(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function remove(e){this.write(e,"",Date.now()-864e5)}}}():function nonStandardBrowserEnv(){return{write:function write(){},read:function read(){return null},remove:function remove(){}}}()},29137:function(e){"use strict";e.exports=function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},45019:function(e,t,n){"use strict";var a=n(9516);e.exports=function isAxiosError(e){return a.isObject(e)&&!0===e.isAxiosError}},64202:function(e,t,n){"use strict";var a=n(9516);e.exports=a.isStandardBrowserEnv()?function standardBrowserEnv(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function resolveURL(e){var a=e;if(t){n.setAttribute("href",a);a=n.href}return n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=resolveURL(window.location.href),function isURLSameOrigin(t){var n=a.isString(t)?resolveURL(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function nonStandardBrowserEnv(){return function isURLSameOrigin(){return!0}}()},7018:function(e,t,n){"use strict";var a=n(9516);e.exports=function normalizeHeaderName(e,t){a.forEach(e,function processHeader(n,a){if(a!==t&&a.toUpperCase()===t.toUpperCase()){e[t]=n;delete e[a]}})}},62012:function(e,t,n){"use strict";var a=n(9516),l=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function parseHeaders(e){var t,n,c,d={};return e&&a.forEach(e.split("\n"),function parser(e){c=e.indexOf(":");t=a.trim(e.substr(0,c)).toLowerCase();n=a.trim(e.substr(c+1));if(t){if(d[t]&&l.indexOf(t)>=0)return;"set-cookie"===t?d[t]=(d[t]?d[t]:[]).concat([n]):d[t]=d[t]?d[t]+", "+n:n}}),d}},17980:function(e){"use strict";e.exports=function spread(e){return function wrap(t){return e.apply(null,t)}}},34841:function(e,t,n){"use strict";var a=n(49641).version,l={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){l[e]=function validator(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var c={};l.transitional=function transitional(e,t,n){function formatMessage(e,t){return"[Axios v"+a+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,a,l){if(!1===e)throw Error(formatMessage(a," has been removed"+(t?" in "+t:"")));if(t&&!c[a]){c[a]=!0;console.warn(formatMessage(a," has been deprecated since v"+t+" and will be removed in the near future"))}return!e||e(n,a,l)}};function assertOptions(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var a=Object.keys(e),l=a.length;l-- >0;){var c=a[l],d=t[c];if(d){var f=e[c],m=void 0===f||d(f,c,e);if(!0!==m)throw TypeError("option "+c+" must be "+m);continue}if(!0!==n)throw Error("Unknown option "+c)}}e.exports={assertOptions:assertOptions,validators:l}},9516:function(e,t,n){"use strict";var a=n(69012),l=Object.prototype.toString;function isArray(e){return Array.isArray(e)}function isUndefined(e){return void 0===e}function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===l.call(e)}function isFormData(e){return"[object FormData]"===l.call(e)}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer)}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return null!==e&&"object"==typeof e}function isPlainObject(e){if("[object Object]"!==l.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function isDate(e){return"[object Date]"===l.call(e)}function isFile(e){return"[object File]"===l.call(e)}function isBlob(e){return"[object Blob]"===l.call(e)}function isFunction(e){return"[object Function]"===l.call(e)}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return"[object URLSearchParams]"===l.call(e)}function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document}function forEach(e,t){if(null!=e){"object"!=typeof e&&(e=[e]);if(isArray(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}}function merge(){var e={};function assignValue(t,n){isPlainObject(e[n])&&isPlainObject(t)?e[n]=merge(e[n],t):isPlainObject(t)?e[n]=merge({},t):isArray(t)?e[n]=t.slice():e[n]=t}for(var t=0,n=arguments.length;t<n;t++)forEach(arguments[t],assignValue);return e}function extend(e,t,n){return forEach(t,function assignValue(t,l){n&&"function"==typeof t?e[l]=a(t,n):e[l]=t}),e}function stripBOM(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM}},57660:function(e,t,n){var a,l;/**
 * @author William DURAND <william.durand1@gmail.com>
 * @license MIT Licensed
 */!function(c,d){void 0!==(l="function"==typeof(a=d)?a.call(t,n,t,e):a)&&(e.exports=l)}(0,function(){"use strict";var e={},t="en",n=[],a=new RegExp(/^\w+\: +(.+)$/),l=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),c=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/),d={locale:get_current_locale(),fallback:t,placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomain:"messages",pluralSeparator:"|",add:function(t,a,l,c){var d=c||this.locale||this.fallback,f=l||this.defaultDomain;return e[d]||(e[d]={}),e[d][f]||(e[d][f]={}),e[d][f][t]=a,!1===exists(n,f)&&n.push(f),this},trans:function(e,t,n,a){return replace_placeholders(get_message(e,n,a,this.locale,this.fallback),t||{})},transChoice:function(e,t,n,a,l){var c=get_message(e,a,l,this.locale,this.fallback),d=parseInt(t,10);return void 0===(n=n||{}).count&&(n.count=t),void 0===c||isNaN(d)||(c=pluralize(c,d,l||this.locale||this.fallback)),replace_placeholders(c,n)},fromJSON:function(e){"string"==typeof e&&(e=JSON.parse(e));e.locale&&(this.locale=e.locale);e.fallback&&(this.fallback=e.fallback);e.defaultDomain&&(this.defaultDomain=e.defaultDomain);if(e.translations)for(var t in e.translations)for(var n in e.translations[t])for(var a in e.translations[t][n])this.add(a,e.translations[t][n][a],n,t);return this},reset:function(){e={};n=[];this.locale=get_current_locale()}};function replace_placeholders(e,t){var n,a=d.placeHolderPrefix,l=d.placeHolderSuffix;for(n in t){var c=RegExp(a+n+l,"g");if(c.test(e)){var f=String(t[n]).replace(RegExp("\\$","g"),"$$$$");e=e.replace(c,f)}}return e}function get_message(t,a,l,c,d){var f,m,g,_=l||c||d,y=a,b=_.split("_")[0];if(!(_ in e)){if(b in e)_=b;else{if(!(d in e))return t;_=d}}if(null==y){for(var A=0;A<n.length;A++)if(has_message(_,n[A],t)||has_message(b,n[A],t)||has_message(d,n[A],t)){y=n[A];break}}if(has_message(_,y,t))return e[_][y][t];for(;_.length>2;){f=_.length;g=(m=_.split(/[\s_]+/))[m.length-1].length;if(1===m.length)break;_=_.substring(0,f-(g+1));if(has_message(_,y,t))return e[_][y][t]}return has_message(d,y,t)?e[d][y][t]:t}function has_message(t,n,a){return t in e&&n in e[t]&&a in e[t][n]}function pluralize(e,t,n){var f,m,g=[],_=[],y=e.split(d.pluralSeparator),b=[];for(f=0;f<y.length;f++){var A=y[f];if(l.test(A))g[(b=A.match(l))[0]]=b[b.length-1];else if(a.test(A)){b=A.match(a);_.push(b[1])}else _.push(A)}for(m in g)if(c.test(m)){b=m.match(c);if(b[1]){var C,w=b[2].split(",");for(C in w)if(t==w[C])return g[m]}else{var k=convert_number(b[4]),S=convert_number(b[5]);if(("["===b[3]?t>=k:t>k)&&("]"===b[6]?t<=S:t<S))return g[m]}}return _[plural_position(t,n)]||_[0]||void 0}function convert_number(e){return"-Inf"===e?Number.NEGATIVE_INFINITY:"+Inf"===e||"Inf"===e?Number.POSITIVE_INFINITY:parseInt(e,10)}function plural_position(e,t){var n=t;"pt_BR"===n&&(n="xbr");n.length>3&&(n=n.split("_")[0]);switch(n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":default:return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1==e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&e<=4?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1==e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5}}function exists(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return!0;return!1}function get_current_locale(){return"undefined"!=typeof document?document.documentElement.lang.replace("-","_"):t}return d})},65606:function(e){var t,n,a,l=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var c=[],d=!1,f=-1;function cleanUpNextTick(){if(d&&a){d=!1;a.length?c=a.concat(c):f=-1;c.length&&drainQueue()}}function drainQueue(){if(!d){var e=runTimeout(cleanUpNextTick);d=!0;for(var t=c.length;t;){a=c;c=[];for(;++f<t;)a&&a[f].run();f=-1;t=c.length}a=null;d=!1;runClearTimeout(e)}}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new Item(e,t));1!==c.length||d||runTimeout(drainQueue)};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};l.title="browser";l.browser=!0;l.env={};l.argv=[];l.version="";l.versions={};function noop(){}l.on=noop;l.addListener=noop;l.once=noop;l.off=noop;l.removeListener=noop;l.removeAllListeners=noop;l.emit=noop;l.prependListener=noop;l.prependOnceListener=noop;l.listeners=function(e){return[]};l.binding=function(e){throw Error("process.binding is not supported")};l.cwd=function(){return"/"};l.chdir=function(e){throw Error("process.chdir is not supported")};l.umask=function(){return 0}},75974:function(e,t){"use strict";t.A="1.105.0"},51504:function(e){function E(){}E.prototype={on:function(e,t,n){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var a=this;function listener(){a.off(e,listener);t.apply(n,arguments)}return listener._=t,this.on(e,listener,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,l=n.length;a<l;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),a=n[e],l=[];if(a&&t)for(var c=0,d=a.length;c<d;c++)a[c].fn!==t&&a[c].fn._!==t&&l.push(a[c]);return l.length?n[e]=l:delete n[e],this}};e.exports=E;e.exports.TinyEmitter=E},37901:function(e){e.exports=uid;function uid(e){return e=e||7,Math.random().toString(35).substr(2,e)}},42302:function(e,t,n){"use strict";let a;n.d(t,{A:function(){return esm_browser_v4}});var l={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c=new Uint8Array(16);function rng(){if(!a){a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto);if(!a)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}return a(c)}let d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));function unsafeStringify(e,t=0){return d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]}var esm_browser_v4=function(e,t,n){if(l.randomUUID&&!t&&!e)return l.randomUUID();let a=(e=e||{}).random||(e.rng||rng)();a[6]=15&a[6]|64;a[8]=63&a[8]|128;if(t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return unsafeStringify(a)}},66262:function(e,t){"use strict";t.A=(e,t)=>{let n=e.__vccOpts||e;for(let[e,a]of t)n[e]=a;return n}},68271:function(e,t,n){"use strict";n.d(t,{l:function(){return pipeConditions}});function pipeConditions(...e){return function checkMultipleConditions(t,n){return e.every(e=>e(t,n))}}},41906:function(e,t,n){"use strict";n.d(t,{q:function(){return isMark}});var a=n(32831),l=n(47176);function isMark(e){return function isMarkingOfType(t){var n,c;return(0,l.is)(a.i.APIEvents.Mark)(t)&&(null==(c=(n=t.data).find)?void 0:c.call(n,t=>t.type===e))}}},23572:function(e,t,n){"use strict";n.d(t,{Or:function(){return d},hm:function(){return a},iX:function(){return l},xF:function(){return c}});(e=>{(e=>{e.Name="custom-items"})(e.Plugin||(e.Plugin={}));(e=>{e.Root="custom-item"})(e.Classes||(e.Classes={}))})(l||(l={}));let a="customItem";(e=>{(e=>{e.Arrows="arrows";e.Effects="effects";e.Pieces="pieces"})(e.Targets||(e.Targets={}));(e=>{e.Above="above";e.Below="below"})(e.Positions||(e.Positions={}))})(c||(c={}));var l,c,d=(e=>(e.Image="Image",e.Star="Star",e.TextBox="TextBox",e))(d||{})},73707:function(e,t,n){"use strict";n.d(t,{t:function(){return createKeyedHighlight}});function createKeyedHighlight({color:e,type:t,opacity:n,square:a,turn:l}){return{data:{color:e,opacity:n,square:a,turn:l,type:t},key:`${t}|${a}`,type:"highlight"}}},67868:function(e,t,n){"use strict";var a;n.d(t,{V:function(){return a}});(e=>{(e=>{e.EntryAdded="EntryAdded"})(e.Events||(e.Events={}));(e=>{e.Debug="Debug";e.Error="Error";e.None="None"})(e.Levels||(e.Levels={}))})(a||(a={}))},46204:function(e,t,n){"use strict";n.r(t);n.d(t,{create:function(){return _}});var a,l=n(78048),c=n(80606);function handleMoveOnPreviousNodeFactory(e){let{api:t}=e;return function handleMoveOnPreviousNode(){if(!t.isAtEndOfLine()){if(t.getMode().getOptions().canModifyExistingMovesOnMainLine){let{line:e,move:n}=(0,c.t)(t.getRelativeNode());t.deletePosition(n,e)}else t.selectLineEnd()}}}var d=n(17084);function createBeforeMoveLogic(e){let{api:t}=e,n=handleMoveOnPreviousNodeFactory(e);return function beforeMove(){t.isGameOver()&&t.getMode().getOptions().canMoveWhenGameIsOver&&t.setResult(d.Z.Results.None);n()}}(e=>{(e=>{e.Name="playing"})(e.Plugin||(e.Plugin={}))})(a||(a={}));function createPlayingModePlugin(){return{apiOverrides:{move:{handler:createBeforeMoveLogic,run:"before",order:9}},name:a.Plugin.Name}}var f=n(34592),m=n(12507),g=n(8246);function base({api:e}){return{handleIllegalMove:(0,g.I)(e),isAllowedToMove,name:f.d.Types.Playing,plugins:[createPlayingModePlugin()],overridableMethods:["isAllowedToMove"],usePlayingAs:!0};function isAllowedToMove(){return(0,m.j)({api:e,canMoveWhenNotPlayerTurn:!1,modeOptions:e.getMode().getOptions()})}}let _=(0,l.k)(base,{canAddMovesToMainLine:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!1,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canModifyExistingMovesOnMainLine:{default:!1,editable:!0}})},72254:function(e,t,n){"use strict";var a;n.d(t,{b:function(){return a}});(e=>{(e=>{e.PIECE_PERSPECTIVE_UNSPECIFIED="PIECE_PERSPECTIVE_UNSPECIFIED";e.TOP_DOWN="TOP_DOWN";e.PSEUDO_3D="PSEUDO_3D";e.REAL_3D="REAL_3D"})(e.Perspective||(e.Perspective={}))})(a||(a={}))},5700:function(e,t,n){"use strict";var a;n.d(t,{d:function(){return a}});(e=>{(e=>{e.Background="icon-background";e.Component="icon-component";e.ComponentShadow="icon-component-shadow";e.Shadow="icon-shadow"})(e.ClassNames||(e.ClassNames={}))})(a||(a={}))},72520:function(e,t,n){"use strict";n.d(t,{$:function(){return toArray}});function toArray(e){return Array.isArray(e)?e:[e]}},45996:function(e,t,n){"use strict";var a;n.d(t,{M:function(){return l},T:function(){return a}});(e=>{(e=>{e.Name="arrows"})(e.Plugin||(e.Plugin={}))})(a||(a={}));let l="arrow"},39754:function(e,t,n){"use strict";n.d(t,{h:function(){return createClocksPlugin}});var a=n(49923),l=n(32831),c=n(17084);function createClocksAPI({timers:e}){let t=!0;return{activate,deactivate,isActive,resetClocks,stopClocks,...e};function activate(){t=!0}function deactivate(){t=!1}function isActive(){return t}function resetClocks(t){let{baseTime:n}=t;e[c.Z.ColorsAsNumbers.Black].reset(n);e[c.Z.ColorsAsNumbers.White].reset(n)}function stopClocks(){e[c.Z.ColorsAsNumbers.Black].stop();e[c.Z.ColorsAsNumbers.White].stop()}}var d=n(74371);function createTimerListeners(e,t){let n=[c.Z.ColorsAsNumbers.Black,c.Z.ColorsAsNumbers.White].reduce((t,n)=>{e[n].on(d.M.Events.End,outOfTime);t.push(destroyListenersForColor);return t;function destroyListenersForColor(){e[n].off({handler:outOfTime,type:d.M.Events.End})}},[]);return function destroyListeners(){n.forEach(e=>e())};function outOfTime(e){e.color&&t.outOfTime(e.color)}}var f=n(17229);let{createStateMachine:m}=f.jd;function createTimerStateMachine(e){return m({initialState:d.M.States.Initial,states:{[d.M.States.Ended]:{[d.M.Actions.Reset]:reset},[d.M.States.Going]:{[d.M.Actions.Reset]:reset,[d.M.Actions.Stop]:()=>(e.timeSpent=Date.now()-e.startTimestamp,d.M.States.Stopped),[d.M.Actions.Tick]:()=>(e.timeSpent=Date.now()-e.startTimestamp,e.currentTime=e.resetTime-e.timeSpent,e.currentTime<=0)?d.M.States.Ended:d.M.States.Going},[d.M.States.Initial]:{[d.M.Actions.Reset]:reset,[d.M.Actions.Start]:()=>(e.startTimestamp=Date.now(),d.M.States.Going),[d.M.Actions.Stop]:()=>d.M.States.Stopped},[d.M.States.Stopped]:{[d.M.Actions.Reset]:reset,[d.M.Actions.Start]:()=>(e.startTimestamp=Date.now()-e.timeSpent,d.M.States.Going)}}});function reset(t){return Object.assign(e,{currentTime:t,resetTime:t,timeSpent:0}),d.M.States.Initial}}let g=1e3,{createEventEmitter:_}=f.rG,{StateMachine:y}=f.jd;function createTimer({color:e,decisecondThreshold:t=20*g,emitter:n=_(),initialTime:a,interval:l=g}={}){let c={color:e,currentTime:a||0,lastTickTimestamp:0,resetTime:a||0,startTimestamp:0,state:d.M.States.Initial,timeSpent:0},f=createTimerStateMachine(c);f.on(y.Event.Types.OnEnter,handleEnter);f.on(y.Event.Types.OnReEnter,handleReEnter);return{...n,add,destroy,get,reset,start,stop};function add(e){c.startTimestamp-=e;c.timeSpent-=e;c.currentTime+=e;emitEvent(d.M.Events.TimeAdded)}function emitEvent(e){n.emit(e,{...get(),type:e})}function destroy(){f.off({handler:handleEnter,type:y.Event.Types.OnEnter});f.off({handler:handleReEnter,type:y.Event.Types.OnReEnter})}function get(){return f.getCurrentState()===d.M.States.Going&&(c.timeSpent=c.startTimestamp?Date.now()-c.startTimestamp:0),c.currentTime=c.resetTime-c.timeSpent,c}function handleEnter(e){let t;switch(e.nextState){case d.M.States.Ended:t=d.M.Events.End;break;case d.M.States.Going:setNextTick();t=d.M.Events.Start;break;case d.M.States.Initial:t=d.M.Events.Reset;break;case d.M.States.Stopped:t=d.M.Events.Stop}c.state=e.nextState;t&&emitEvent(t)}function handleReEnter(e){let t;switch(e.nextState){case d.M.States.Going:setNextTick();t=d.M.Events.Tick;break;case d.M.States.Initial:t=d.M.Events.Reset;case d.M.States.Stopped:}t&&emitEvent(t)}function reset(e){f.transition(d.M.Actions.Stop);f.transition(d.M.Actions.Reset,e||c.resetTime)}function setNextTick(){let e=Math.round(c.currentTime/l)*l;t&&e<=t?setTimeout(()=>{f.transition(d.M.Actions.Tick)},100):setTimeout(()=>{f.transition(d.M.Actions.Tick)},l)}function start(){f.transition(d.M.Actions.Start)}function stop(){f.transition(d.M.Actions.Stop)}}function createTimers(e){return{[c.Z.ColorsAsNumbers.White]:createTimer({color:c.Z.ColorsAsNumbers.White,initialTime:e.baseTime}),[c.Z.ColorsAsNumbers.Black]:createTimer({color:c.Z.ColorsAsNumbers.Black,initialTime:e.baseTime})}}var b=n(12062);function extendLoadFactory(e){let t=e.api.load;return function extendLoad(n){let{api:a}=e,l=a.getHeaders().TimeControl,c=t(n);return a.setGameDetails({TimeControl:l}),c}}var A=n(52929);function getClockTime(e,t){let n=t||e.getTurn(),a=e.clocks[n],l=e.timeControl.get(),c=null==l?void 0:l.increment;return{clock:a,increment:c,moveTime:(0,A.y)(a.get().currentTime+c)}}var C=n(18792);function extendMoveFactoryWithTimers(){return[{condition:clocksActive,handler:createAppendTime,changeArgs:!0,run:"before"},{condition:clocksActive,handler:createIncrementClock,run:"after"}]}function clocksActive({api:e}){return e.clocks.isActive()&&e.timeControl.get()}function createAppendTime({api:e}){return function appendTime(t){let{moveTime:n}=getClockTime(e),a=(0,C.B)(t,e.getFEN(),e.getVariant())||{};return a.time=n,[a]}}function createIncrementClock({api:e}){return function incrementClock(t){var n,a;let c=null==(a=null==(n=null==t?void 0:t.data)?void 0:n.move)?void 0:a.color;if(!c||(null==t?void 0:t.type)!==l.i.APIEvents.Move)return t;let{clock:d,increment:f}=getClockTime(e,c);return f&&d.add(f),t}}var w=n(47176),k=n(49165);function createClocksPlugin(){let e;let t=createTimers(b.W);return{api:()=>createClocksAPI({timers:t}),apiOverrides:{load:extendLoadFactory,move:extendMoveFactoryWithTimers()},create,destroy,match:[{condition:(0,w.is)(l.i.APIEvents.Move),handler:handleMove},{condition:timeControlUpdated,handler:resetClocks}],name:a.O.Plugin.Name};function handleMove(e,t){var n;let{api:a,queue:l}=t,c=null==(n=e.data.move)?void 0:n.color,d=a.timeControl.get();if(!d||!a.clocks.isActive()||!c)return;let{clock:f,increment:m}=getClockTime(a,c);e.data.consumedPremove&&m&&l.add(f.add,m);a.clocks[c].stop();a.clocks[(0,k.T)(c)].start()}function create(n){let{api:a}=n;e=createTimerListeners(t,a)}function destroy(){e()}function resetClocks(e,t){let{api:n}=t,a=n.timeControl.get();a?n.clocks.resetClocks(a):n.clocks.stopClocks()}function timeControlUpdated(e){return(0,w.is)(l.i.APIEvents.UpdatePGNHeaders)(e)&&e.data.TimeControl}}},90760:function(e,t,n){"use strict";n.d(t,{y:function(){return createQueue}});let noop=()=>{};function createQueue(e=!0){let t=[],n=!1;return{add,clear,flush,syncFlush,getEntries};function add(a,...l){let c,d;let f={};if("function"==typeof a){c=a;d=l}else{c=l[0];d=l.slice(1);f=a}let m=noop,g=noop,_=new Promise((e,t)=>{g=e;m=t});return t.push({fn:c,params:d,reject:m,resolve:g,preserved:f.preserved??!1}),e&&!1===n&&flush(),_}function clear(e={}){n=!1;t=e.persistPreserved?t.filter(e=>e.preserved):[]}async function flush(){let e=t.shift();if(!e){n=!1;return}n=!0;try{let t=await e.fn(...e.params);e.resolve(t);return flush()}catch(t){e.reject(t)}}function syncFlush(){let e=t.shift();if(!e){n=!1;return}n=!0;try{let t=e.fn(...e.params);t instanceof Promise?t.then(t=>e.resolve(t)).catch(t=>e.reject(t)):e.resolve(t);syncFlush()}catch(t){e.reject(t)}}function getEntries(){return t}}},5850:function(e,t,n){"use strict";n.d(t,{B:function(){return getMoveHighlights},C:function(){return f}});var a=n(27112),l=n(73707),c=n(57322),d=n(16080);let f="move";function getMoveHighlights(e,t){let{api:n,options:m}=t,g=[];if(!m||!m.highlightMoves)return g;let _=n.getSelectedNode();return _&&[_.from,(0,d.v)(_)].forEach(e=>{var t,n;if(!e)return;let d=(0,l.t)({color:(null==(t=m.themeAssets)?void 0:t.board.config.highlightSquareHex)??m.highlightColor??(null==(n=(0,c.dn)(m.boardStyle))?void 0:n.highlightColor)??a.b.HighlightColors.Selected,opacity:m.highlightOpacity,square:e,turn:_.color,type:f});g.push(d)}),g}},59074:function(e,t,n){"use strict";n.d(t,{g:function(){return getDefaultExportFromCjs},i:function(){return a}});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},78339:function(e,t,n){"use strict";n.d(t,{ER:function(){return moveListNodesContainsNode},Ms:function(){return getWholeMoveNumber},Q4:function(){return rebuildMoveListNodesWithNode}});var a=n(17084),l=n(22367);function getWholeMoveNumber(e,t=1){let n=(null==e?void 0:e.moveNumber)??0,l=null==e?void 0:e.color,c=n%2==0&&l===a.Z.ColorsAsNumbers.Black||n%2!=0&&l===a.Z.ColorsAsNumbers.White;return t+Math.floor(n/2)+(c&&l===a.Z.ColorsAsNumbers.White?1:0)}function moveListNodesContainsNode(e,t){return t.some(t=>{var n;return(0,l.M)(e,t.node)||(null==(n=t.inlineVariations)?void 0:n.some(t=>moveListNodesContainsNode(e,t)))})}function rebuildMoveListNodesWithNode(e,t){return t.map(t=>{let n={...t,node:(0,l.M)(e,t.node)?e:t.node};return t.inlineVariations&&(n.inlineVariations=t.inlineVariations.map(t=>rebuildMoveListNodesWithNode(e,t))),n})}},64936:function(e,t,n){"use strict";n.d(t,{V:function(){return createArrowKeysPlugin}});var a=n(85705);function createArrowKeysPlugin(e){let t;let n={[a.I.Arrow.Up]:"selectLineStart",[a.I.Arrow.NumUp]:"selectLineStart",[a.I.Arrow.Down]:"selectLineEnd",[a.I.Arrow.NumDown]:"selectLineEnd",[a.I.Arrow.Left]:"moveBackward",[a.I.Arrow.NumLeft]:"moveBackward",[a.I.Arrow.Right]:"moveForward",[a.I.Arrow.NumRight]:"moveForward"};return{api:()=>({setKeys,resetKeys}),create,destroy,name:a.I.Plugin.Name};function create(n){t=n;setKeys(e)}function setKeys(e){let n=getOverrides(e);t.api.keys.setOverrides(n)}function resetKeys(){let e=getOverrides();t.api.keys.setOverrides(e)}function getOverrides(e={}){return Object.entries(n).map(([t,n])=>({key:t,callback:a=>a.getOptions().disableUserNavigation?()=>{}:e[t]??a[n]}))}function destroy(){t.api.keys.removeOverrides(Object.keys(n).map(e=>({key:e})))}}},94231:function(e,t,n){"use strict";n.d(t,{gt:function(){return createMarkingsService},xR:function(){return generatePrimaryKey},Qy:function(){return getNodeIdsFromMarking}});function intersection(...e){if(1===e.length)return e[0];let t=new Set;for(let n of e)for(let a of n)e.every(e=>e.has(a))&&t.add(a);return t}function union(...e){let t=new Set;for(let n of e)for(let e of n)t.add(e);return t}function createTaggedMap({batchCallbacks:e=!0,onEntryAdded:t,onEntryRemoved:n,primaryKey:a="id"}={primaryKey:"id"}){let l=new Map,c=new Map,{flush:d,isBatching:f,stack:m,startBatching:g}=createStacks({added:t,removed:n});function entryAddedCallback(n){return e&&f()?m("added")(n):null==t?void 0:t(n)}function entryRemovedCallback(t){return e&&f()?m("removed")(t):null==n?void 0:n(t)}return{addOne,addMany:batch(addMany),batch,getAll,getManyByTags,getMatchingKeys,getMap,getMany,getOne,removeAll:batch(removeAll),removeMany:batch(removeMany),removeManyByTags:batch(removeManyByTags),removeOne};function batch(e){return(...t)=>{g();let n=e(...t);return d(),n}}function addMany(e,t){return e.map((e,n)=>addOne(e,null==t?void 0:t[n]))}function addOne(e,t){let n=e[a],d=l.get(n);if(d){l.delete(n);null==entryRemovedCallback||entryRemovedCallback(d)}return null==t||t.forEach(e=>{var t;c.get(e)||c.set(e,new Set);null==(t=c.get(e))||t.add(n)}),l.set(n,e),null==entryAddedCallback||entryAddedCallback(e),n}function createStacks(e){let t=!1,n=new Map;Object.entries(e).forEach(([e,t])=>{t&&n.set(e,{callback:t,entries:new Set})});return{flush:flushEntries,isBatching:()=>t,stack:stackEntry,startBatching:startBatchingEntries};function stackEntry(e){return function entryModified(t){var a;null==(a=n.get(e))||a.entries.add(t)}}function startBatchingEntries(){t=!0}function flushEntries(){n.forEach(e=>{var n;let a=Array.from(e.entries.values());if(a.length){null==(n=e.callback)||n.call(e,a);e.entries.clear()}t=!1})}}function getAll(){return Array.from(l.values())}function getMany(e){return e.map(e=>l.get(e)).filter(e=>void 0!==e)}function getMap(){return l}function getOne(e){return l.get(e)}function getManyByTags(e,t={}){return getMatchingKeys(e,t).map(e=>l.get(e)).filter(e=>void 0!==e)}function getMatchingKeys(e,t={}){let{matchAll:n}=t,a=e.map(e=>c.get(e)).filter(e=>void 0!==e);return n?Array.from(intersection(...a)):Array.from(union(...a))}function removeAll(){for(let[e,t]of l.entries())null==entryRemovedCallback||entryRemovedCallback(t);return l.clear(),c.clear(),!0}function removeMany(e){return e.every(removeOne)}function removeManyByTags(e,t={}){return getMatchingKeys(e,t).every(e=>removeOne(e))}function removeOne(e){var t;let n=l.get(e);if(n){l.delete(e);null==entryRemovedCallback||entryRemovedCallback(n)}let a=c.entries();for(let[n,l]of a){l.has(e)&&l.delete(e);(null==(t=c.get(n))?void 0:t.size)===0&&c.delete(n)}return!0}}function getMarkingTags(e){let{node:t,persistent:n,tags:a=[],type:l}=e;return[t?"node":"board",n?"persistent":"temporary",...a,l]}function markingHasValidSquareOrFromTo(e){let{from:t,square:n,to:a}=e.data;for(let e of n?[n]:[t,a])if(!isBoardSquare(e))return!1;return!0}function isBoardSquare(e){return/^([a-h][1-8])$/.test(e)}function objectsAreShallowEqual(e,t){let n={a:Object.getOwnPropertyNames(e),b:Object.getOwnPropertyNames(t)};return n.a.length===n.b.length&&n.a.every(n=>e[n]===t[n])}var a=n(72520),l=n(7948),c=n(45996),d=n(77751),f=n(93160);function createMarkingsService({generateKey:e=generatePrimaryKey,context:t,onMarkingAdded:n,onMarkingRemoved:m,onMarkingAddedToAlternateNode:g,onMarkingRemovedFromAlternateNode:_}={}){let y=createTaggedMap({batchCallbacks:!0,onEntryAdded:n,onEntryRemoved:m,primaryKey:"key"}),b=createTaggedMap({batchCallbacks:!0,primaryKey:"id",onEntryAdded:e=>onModifyAlternateNode(e,g),onEntryRemoved:e=>onModifyAlternateNode(e,_)});function onModifyAlternateNode(e,n){let l=(0,a.$)(e),c=null==t?void 0:t.api.getPosition();(null==c?void 0:c.ids)||null==n||n(l);let d=l.filter(e=>{let t=getNodeIdsFromMarking(e);return(null==t?void 0:t.move)!==(null==c?void 0:c.ids.move)||(null==t?void 0:t.line)!==(null==c?void 0:c.ids.line)});d.length&&(null==n||n(d))}return{addOne,addMany,getMany:y.getMany,getAll:y.getAll,getAllWhere,getOne:y.getOne,removeAll:y.removeAll,removeAllWhere,removeOne,removeMany,toggleMany,toggleOne,factory:{buildStandardAnalysisHighlight,buildStandardArrow}};function addMany(e){return addManyWithoutBatching(e)}function addManyWithoutBatching(e){return e.map(addOne)}function addOne(e){if(!markingHasValidSquareOrFromTo(e))return null;let n=getMarkingTags(e),a=null==t?void 0:t.api.getPosition();if(e.node&&"object"==typeof e.node){let{move:t,line:l}=e.node,c=withId(withKey(e),{move:t,line:l});b.addOne(c,n);let d=(null==a?void 0:a.ids.move)===e.node.move&&(null==a?void 0:a.ids.line)===e.node.line;if(!d)return c.key;e.node=!0}let l=e.node?null==a?void 0:a.ids:void 0;return y.addOne(withId(withKey(e),l),n)}function removeMany(e){return e.every(removeOne)}function removeOne(e,t){if("string"!=typeof e&&e.node&&"object"==typeof e.node)return removeOne(e.key,e.node),!1;if(t&&"object"==typeof t){let{move:n,line:a}=t;b.removeOne(`${e}-(${n})|(${a})`)}return"string"==typeof e&&y.removeOne(e)}function getAllWhere(e={}){return getKeysWhere(e).map(e=>y.getMap().get(e)).filter(Boolean)}function getKeysWhere(e={}){let t,n;let{node:l,persistent:c,tags:d,types:f}=e;void 0!==l&&(t=l?"node":"board");void 0!==c&&(n=c?"persistent":"temporary");let m=[t,n,d,f].filter(e=>void 0!==e);return m.length?Array.from(intersection(...m.map(a.$).map(e=>new Set(y.getMatchingKeys(e))))):Array.from(y.getMap().keys())}function removeAllWhere(e={}){var t;return(null==(t=e.types)?void 0:t.length)===0&&(e.types=void 0),y.removeMany(getKeysWhere(e))}function toggleMany(e){return e.map(toggleOne)}function toggleOne(e){let t=withKey(e),n=y.getOne(t.key);return n&&objectsAreShallowEqual(n.data,t.data)?y.removeOne(t.key):addOne(t)}function withKey(t){return{...t,key:t.key||e(t)}}function withId(e,t){return{...e,id:t?`${e.key}-(${t.move})|(${t.line})`:e.key}}function buildStandardAnalysisHighlight(e,n=l.U.None){return{data:{keyPressed:n,opacity:((null==t?void 0:t.api.getOptions)?null==t?void 0:t.api.getOptions():(0,d.q)()).analysisHighlightOpacity,square:e},node:!0,persistent:!1,type:f.R}}function buildStandardArrow(e,n,a=l.U.None){return{data:{keyPressed:a,from:e,opacity:((null==t?void 0:t.api.getOptions)?null==t?void 0:t.api.getOptions():(0,d.q)()).analysisHighlightOpacity,to:n},node:!0,persistent:!1,type:c.M}}}function generatePrimaryKey(e){let{data:{from:t,square:n,to:a},type:l}=e;if(!n&&!(t&&a))throw Error('Markings that do not have a "square" property must provide a "from" and "to"');let c=n||`${t}${a}`;return`${l}|${c}`}function getNodeIdsFromMarking(e){var t;if(e.node&&"object"==typeof e.node)return e.node;if(e.id){let n=(null==(t=e.id.match(/-\((-?\d+)\)\|\((-?\d+)\)$/))?void 0:t.slice(1,3).map(Number))??[];if(2===n.length)return{move:n[0],line:n[1]}}}},4062:function(e,t,n){"use strict";n.d(t,{p:function(){return isCastle}});var a=n(17084);function isCastle(e){return e.flags===a.Z.Move.Flags.AnyCastle||e.flags===a.Z.Move.Flags.KingsideCastle||e.flags===a.Z.Move.Flags.QueensideCastle}},42589:function(e,t,n){"use strict";n.d(t,{L:function(){return getAssetBasePath}});function getAssetBasePath(e){var t;return(null==(t=null==e?void 0:e.assetPaths)?void 0:t.basePath)||"https://www.chess.com"}},32447:function(e,t,n){"use strict";var a;n.d(t,{t:function(){return a}});(e=>{e.DefaultKeyToOpenWindow="e";(e=>{e.Name="boardImages"})(e.Plugin||(e.Plugin={}))})(a||(a={}))},27071:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});let a={AddAnnotation:"AddAnnotation",AddComment:"AddComment",AddCommentBefore:"AddCommentBefore",DeleteCommentAfter:"DeleteCommentAfter",DeleteCommentBefore:"DeleteCommentBefore",AddAdditionalAnnotation:"AddAdditionalAnnotation",HideAllAnnotations:"HideAllAnnotations",ShowAllAnnotations:"ShowAllAnnotations",RemoveAnnotation:"RemoveAnnotation",DeleteVariation:"DeleteVariation",PromoteVariation:"PromoteVariation",DeleteMove:"DeleteMove",ClearAnalysis:"ClearAnalysis",InsertContinuation:"InsertContinuation",MoveVariationUp:"MoveVariationUp",MoveVariationDown:"MoveVariationDown",RemoveBegin:"RemoveBegin",RemoveEnd:"RemoveEnd",RemoveFocus:"RemoveFocus",SetBegin:"SetBegin",SetEnd:"SetEnd",SetFocus:"SetFocus"}},65960:function(e,t,n){"use strict";n.d(t,{Z:function(){return getFileRankFromSan}});function getFileRankFromSan(e){return{file:e.toLowerCase().charCodeAt(0)-96,rank:Number(e.charAt(1))}}},20146:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var a=n(32831);let l=[a.i.APIEvents.CreateGame,a.i.APIEvents.CreateContinuation,a.i.APIEvents.DeletePosition,a.i.APIEvents.Load,a.i.APIEvents.Move,a.i.APIEvents.MoveBackward,a.i.APIEvents.MoveForward,a.i.APIEvents.MoveVariation,a.i.APIEvents.PromoteVariation,a.i.APIEvents.SelectLineEnd,a.i.APIEvents.SelectLineStart,a.i.APIEvents.SelectNode,a.i.APIEvents.Reload,a.i.APIEvents.ResetToMainLine,a.i.APIEvents.Undo]},78048:function(e,t,n){"use strict";n.d(t,{k:function(){return createModeFactory}});var a=n(32831),l=n(88370);function createExtendMode(e,t){return function extendMode(n){let a=Object.entries(n).map(([n,a])=>{var l;if(!a||!(null==(l=e.overridableMethods)?void 0:l.includes(n)))return;let c=e[n];return e[n]=a(e,t),function destroyOverride(){e[n]=c}});return function destroyOverride(){a.map(e=>null==e?void 0:e())}}}function buildMode({base:e,initialOptions:t}){return function getBoundMode(n){let c=Object.keys(t).reduce((e,n)=>(e[n]=t[n].default,e),{}),d=e({api:n,options:c}),f=createExtendMode(d,n);return Object.assign(d,{extendMode:f,getOptions,setOption});function getOptions(){return c}function setOption(e,d){var f;if(!(null==(f=t[e])?void 0:f.editable)){warnOptionNotEditable(e);return}c[e]=d;n.emit(a.i.OptionsEvents.UpdateMode,(0,l.e)(a.i.OptionsEvents.UpdateMode,{[e]:d}))}}}function createModeFactory(e,t){return function createMode(n={}){return buildMode({base:e,initialOptions:Object.keys(n).reduce((e,a)=>{var l;return(null==(l=t[a])?void 0:l.editable)?Object.assign(e,{[a]:{default:n[a],editable:!0}}):warnOptionNotEditable(a),e},t)})}}function warnOptionNotEditable(e){console.warn(`${e} is not an editable option in this mode.`)}},94313:function(e,t,n){"use strict";n.d(t,{w:function(){return createEffectsPlugin}});var a=n(32831),l=n(15388),c=n(47176),d=n(41906),f=n(62230),m=n(17949),g=n(67234),_=n(68007),y=n(60527),b=n(4317),A=n(13410),C=n(70994),w=n(45659);function createEffectElement(e,t,n){let{data:{square:a,type:l,path:c,size:d}}=e,f=document.createElement("div");return f.classList.add("effect"),f.innerHTML=(0,_.i)({path:c&&"Custom"===l?c:b.u[l],size:d??"100%"}),(0,y.a)({el:f,square:a}),n.test&&(0,C.P_)(f,{[C.fd.Element]:C.mm.Effect,[C.fd.Square]:a,[C.fd.Type]:l,[C.fd.Animated]:!1}),(0,A.Z)(a)&&(0,w.k)({square:a,isFlipped:t.el.classList.contains("flipped"),effectEl:f}),f}var k=n(40986),S=n(65960),T=n(25495),M=n(7215);function createIconTextSVG(e){if(e)return`
    <text style="font-family: var(--font-family-heading, system-ui); font-weight: 800;" fill="#fff" text-anchor="middle" dominant-baseline="central" x="50%" y="50%" >${e}</text>
  `}function getSVGBBox(e){if(void 0===e)return{width:0,height:0};let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.innerHTML=e;document.body.appendChild(t);let n=t.getBBox();return document.body.removeChild(t),{width:n.width,height:n.height}}function fillSVGChildren(e,t){Array.from(e.getElementsByTagName("svg")[0].querySelectorAll("path, text")).forEach(e=>{e.setAttribute("fill",t)})}function createFlyingPoints(e,t,n){let{square:a,type:c,pillBackgroundColor:d,backgroundColor:f,foregroundColor:m,badgeSize:g}=e.data,{squareSize:y,target:b,svgString:A,hasCustomIcon:C}=n,k=(0,S.Z)(a),T=(0,w.T)(a,t.flipped),M=document.createElement("div");M.classList.add("flying-points");let{width:P,height:L}=getSVGBBox(A);M.innerHTML=(0,_.i)({className:"icon",path:A,size:`${.385*y}px`,viewBox:C?`0 0 ${P} ${L}`:void 0});m&&fillSVGChildren(M,m);f&&(M.style.backgroundColor=f);d&&(M.style.backgroundColor=d);let N=(k.file-1)*y,x=T.right?0:-.05,O=t.flipped?k.rank*y:8*y-k.rank*y,I=T.top?0:.05;return M.classList.add(c.toLocaleLowerCase()),M.style.setProperty("--absolute-x",`${N+y+y*x}px`),M.style.setProperty("--absolute-y",`${O+y*I}px`),M.style.setProperty("--target-x",`${b.x}px`),M.style.setProperty("--target-y",`${b.y}px`),M.style.setProperty("--target-icon-size",g??l.dc.BadgeSize.Normal),M}function chessboard_bab482f_createEffectElement(e,t,n,a,c){var d,f;let m=e.data,{square:g,type:y,path:b,flyOut:A,pillText:P,iconText:L,backgroundColor:N,foregroundColor:x,pillBackgroundColor:O,pillForegroundColor:I,badgeSize:R}=m,B=(0,S.Z)(g),V=(0,w.T)(g,n.flipped),H=document.createElement("div");H.classList.add("animated-effect",y.toLocaleLowerCase());H.classList.add(`square-${B.file}${B.rank}`);let D=t.el.offsetHeight/8;H.style.setProperty("--square-size",`${D}px`);H.style.setProperty("--target-icon-size",R??l.dc.BadgeSize.Normal);V.top&&H.classList.add("tucked-top");V.right&&H.classList.add("tucked-right");let F=document.createElement("div");F.classList.add("square",y.toLocaleLowerCase());if(N){F.style.backgroundColor=N;H.style.setProperty("--target-opacity","0.8")}let $=document.createElement("div"),U=null==(d=a[k.d.Translation.EffectLabels[y]])?void 0:d.call(a),W=P??U??y;$.innerText=W;$.classList.add("text");N&&($.style.color=N);I&&($.style.color=I);x&&($.style.backgroundColor=x);O&&($.style.backgroundColor=O);let j=createIconTextSVG(L)||b,{width:G,height:q}=getSVGBBox(j),Z=document.createElement("div"),z=void 0!==j&&"Custom"===y,K=j??(null==(f=T.l[y])?void 0:f.icon)??M.R;Z.innerHTML=(0,_.i)({className:"icon slide",path:K,size:"70%",viewBox:z?`0 0 ${G} ${q}`:void 0});x&&fillSVGChildren(Z,x);let Q=document.createElement("div");return Q.classList.add("icon-background",y.toLocaleLowerCase()),N&&(Q.style.backgroundColor=N),O&&(Q.style.backgroundColor=O),H.appendChild(F),H.appendChild($),H.appendChild(Z),H.appendChild(Q),n.test&&(0,C.P_)(H,{[C.fd.Element]:C.mm.Effect,[C.fd.Square]:g,[C.fd.Type]:y,[C.fd.Animated]:!0,[C.fd.TextValue]:W,[C.fd.IconTextValue]:L}),H.addEventListener("animationend",function(a){"iconbackground"===a.animationName&&A&&A.target&&setTimeout(()=>{let a=createFlyingPoints(e,n,{squareSize:D,target:A.target,svgString:K,hasCustomIcon:z});a.addEventListener("animationend",function(e){if("flyingpointsout"===e.animationName){t.el.removeChild(a);c.respond(l.dc.Events.FlyoutEffectEnd,m)}});t.el.appendChild(a);c.api.markings.removeOne(e.key);c.respond(l.dc.Events.FlyoutEffectBegin,m)},50)}),H}function createEffectsMethods(e,t){let{board:n,el:a,options:l}=e,c=document.createComment("/Effects");n.addToDom({el:c,insertAfter:!0,type:g.R.HoverSquare});let d=new Map;return{addEffects,getEffectElements,removeEffects};function addEffects({effects:e,translations:f}){e.forEach(e=>{let m=d.get(e.key);m&&n.el.removeChild(m);let g=(e.data.animated?chessboard_bab482f_createEffectElement:createEffectElement)(e,n,l,f,t);a.insertBefore(g,c);d.set(e.key,g)})}function removeEffects(e){e.forEach(e=>{let{key:t}=e,a=d.get(t);if(a){n.el.removeChild(a);d.delete(t)}})}function getEffectElements(){return d}}function init(e,t){let{api:n,options:a,renderer:c}=e,d=n.getContext();null==c||c.extendRenderer(e=>createEffectsMethods(e,d));if(!n.markings)return;let f=n.markings,m=a.allowMarkings?f.getAllWhere({types:[l.kx]}):[];null==c||c.addEffects({effects:m,translations:t},e)}function createEffectsEventHandlers(e){return[{condition:(0,d.q)(l.kx),handler:markEffect},{condition:(0,f.b)(l.kx),handler:unmarkEffect},{condition:(0,c.is)(a.i.InstanceEvents.RendererSet),handler:onRendererSet}];function onRendererSet(t,n){init(n,e)}function markEffect(t,n){let{renderer:a}=n,c=t.data.filter((0,m.X)(l.kx));null==a||a.addEffects({effects:c,translations:e},n)}function unmarkEffect(e,t){let{renderer:n}=t,a=e.data.filter((0,m.X)(l.kx));null==n||n.removeEffects(a,t)}}let P={[k.d.Translation.EffectLabels.Brilliant]:()=>k.d.Translation.EffectLabels.Brilliant,[k.d.Translation.EffectLabels.Abandon]:()=>k.d.Translation.EffectLabels.Abandon,[k.d.Translation.EffectLabels.BestMove]:()=>k.d.Translation.EffectLabels.BestMove,[k.d.Translation.EffectLabels.Blunder]:()=>k.d.Translation.EffectLabels.Blunder,[k.d.Translation.EffectLabels.Inaccuracy]:()=>k.d.Translation.EffectLabels.Inaccuracy,[k.d.Translation.EffectLabels.Mistake]:()=>k.d.Translation.EffectLabels.Mistake,[k.d.Translation.EffectLabels.Stalemate]:()=>k.d.Translation.EffectLabels.Stalemate,[k.d.Translation.EffectLabels.GreatFind]:()=>k.d.Translation.EffectLabels.GreatFind,[k.d.Translation.EffectLabels.Miss]:()=>k.d.Translation.EffectLabels.Miss,[k.d.Translation.EffectLabels.CheckmateBlack]:()=>k.d.Translation.EffectLabels.CheckmateBlack,[k.d.Translation.EffectLabels.DrawBlack]:()=>k.d.Translation.EffectLabels.DrawBlack,[k.d.Translation.EffectLabels.ResignBlack]:()=>k.d.Translation.EffectLabels.ResignBlack,[k.d.Translation.EffectLabels.Winner]:()=>k.d.Translation.EffectLabels.Winner,[k.d.Translation.EffectLabels.TimeoutBlack]:()=>k.d.Translation.EffectLabels.TimeoutBlack};function createEffectsPlugin(e=P){return{create:t=>{init(t,e)},match:createEffectsEventHandlers(e),name:l.dc.Plugin.Name,destroy};function destroy(e){let{api:t,renderer:n}=e;if(!t.markings)return;let a=t.markings.getAllWhere({types:[l.kx]});null==n||n.removeEffects(a,e)}}},16080:function(e,t,n){"use strict";n.d(t,{v:function(){return nodeTargetSquare}});function nodeTargetSquare(e){return e.kingTo??e.to}},75871:function(e,t,n){"use strict";let a,l,c;n.d(t,{N:function(){return createMoveListPlugin}});var d,f,m,g,_=n(32831);function isCommentRowContent(e){return"comment"in e}function isMovesRowContent(e){var t;return Array.isArray(e)&&((null==(t=e[0])?void 0:t.node)!==void 0||0===e.length)}function isCommentRow(e){return isCommentRowContent(e.content)}function isDataCommentRow(e){return isCommentRow(e.get())}function isMovesRow(e){return isMovesRowContent(e.content)}function isDataMovesRow(e){return isMovesRow(e.get())}(e=>{(e=>{e.All="all";e.None="none";e.Active="active"})(e.VariationVisibility||(e.VariationVisibility={}));(e=>{e.Component="move-list"})(e.Classes||(e.Classes={}));(e=>{e.TimeBarWidth="--timeBarWidth";e.TimeValue="--timeValue";e.MaxMoveTimeTaken="--timeMaxValue";e.TimestampWidth="--timestampWidth"})(e.CSSVariables||(e.CSSVariables={}));(e=>{e.WithBaseTime="timestamps-with-base-time";e.ToggleTimestamps="toggle-timestamps"})(e.ClassNames||(e.ClassNames={}));(e=>{e.Node="data-node";e.Time="data-time";e.WholeMoveNumber="data-whole-move-number";e.VMLElement="data-vml-element"})(e.Attributes||(e.Attributes={}));e.Constants={CommentUpdateDelay:500}})(d||(d={}));var y=n(66548);let b={[y.k.Translation.Prompt.AddComment]:()=>y.k.Translation.Prompt.AddComment,[y.k.Translation.Annotations.BadMove]:()=>y.k.Translation.Annotations.BadMove,[y.k.Translation.Annotations.BlackHasDecisiveAdvantage]:()=>y.k.Translation.Annotations.BlackHasDecisiveAdvantage,[y.k.Translation.Annotations.BlackHasModerateAdvantage]:()=>y.k.Translation.Annotations.BlackHasModerateAdvantage,[y.k.Translation.Annotations.BlackHasSlightAdvantage]:()=>y.k.Translation.Annotations.BlackHasSlightAdvantage,[y.k.Translation.Annotations.Blunder]:()=>y.k.Translation.Annotations.Blunder,[y.k.Translation.Actions.ClearAllAnalysis]:()=>y.k.Translation.Actions.ClearAllAnalysis,[y.k.Translation.Actions.DeleteCommentAfter]:()=>y.k.Translation.Actions.DeleteCommentAfter,[y.k.Translation.Actions.DeleteCommentBefore]:()=>y.k.Translation.Actions.DeleteCommentBefore,[y.k.Translation.Actions.DeleteComment]:()=>y.k.Translation.Actions.DeleteComment,[y.k.Translation.Actions.DeleteLine]:()=>y.k.Translation.Actions.DeleteLine,[y.k.Translation.Actions.DeleteMove]:()=>y.k.Translation.Actions.DeleteMove,[y.k.Translation.Annotations.Drawish]:()=>y.k.Translation.Annotations.Drawish,[y.k.Translation.Annotations.DubiousMove]:()=>y.k.Translation.Annotations.DubiousMove,[y.k.Translation.Annotations.ExcellentMove]:()=>y.k.Translation.Annotations.ExcellentMove,[y.k.Translation.Tooltips.EnPassant]:()=>y.k.Translation.Tooltips.EnPassant,[y.k.Translation.Tooltips.Stalemate]:()=>y.k.Translation.Tooltips.Stalemate,[y.k.Translation.Tooltips.InsufficientMaterial]:()=>y.k.Translation.Tooltips.InsufficientMaterial,[y.k.Translation.Tooltips.FiftyMove]:()=>y.k.Translation.Tooltips.FiftyMove,[y.k.Translation.Tooltips.WhiteTimeoutVsInsufficientMaterial]:()=>y.k.Translation.Tooltips.WhiteTimeoutVsInsufficientMaterial,[y.k.Translation.Tooltips.BlackTimeoutVsInsufficientMaterial]:()=>y.k.Translation.Tooltips.BlackTimeoutVsInsufficientMaterial,[y.k.Translation.Tooltips.DrawByAgreement]:()=>y.k.Translation.Tooltips.DrawByAgreement,[y.k.Translation.Annotations.GoodMove]:()=>y.k.Translation.Annotations.GoodMove,[y.k.Translation.Actions.InsertCommentAfter]:()=>y.k.Translation.Actions.InsertCommentAfter,[y.k.Translation.Actions.InsertCommentBefore]:()=>y.k.Translation.Actions.InsertCommentBefore,[y.k.Translation.Actions.InsertComment]:()=>y.k.Translation.Actions.InsertComment,[y.k.Translation.Actions.InsertContinuation]:()=>y.k.Translation.Actions.InsertContinuation,[y.k.Translation.Annotations.Miss]:()=>y.k.Translation.Annotations.Miss,[y.k.Translation.Actions.MoveVariationDown]:()=>y.k.Translation.Actions.MoveVariationDown,[y.k.Translation.Actions.MoveVariationUp]:()=>y.k.Translation.Actions.MoveVariationUp,[y.k.Translation.Actions.ShowAllAnnotations]:()=>y.k.Translation.Actions.ShowAllAnnotations,[y.k.Translation.Actions.HideAllAnnotations]:()=>y.k.Translation.Actions.HideAllAnnotations,[y.k.Translation.Annotations.Novelty]:()=>y.k.Translation.Annotations.Novelty,[y.k.Translation.Pieces.B]:()=>y.k.Translation.Pieces.B,[y.k.Translation.Pieces.K]:()=>y.k.Translation.Pieces.K,[y.k.Translation.Pieces.N]:()=>y.k.Translation.Pieces.N,[y.k.Translation.Pieces.P]:()=>y.k.Translation.Pieces.P,[y.k.Translation.Pieces.Q]:()=>y.k.Translation.Pieces.Q,[y.k.Translation.Pieces.R]:()=>y.k.Translation.Pieces.R,[y.k.Translation.Actions.Promote]:()=>y.k.Translation.Actions.Promote,[y.k.Translation.Actions.RemoveAnnotation]:()=>y.k.Translation.Actions.RemoveAnnotation,[y.k.Translation.Actions.RemoveBegin]:()=>y.k.Translation.Actions.RemoveBegin,[y.k.Translation.Actions.RemoveEnd]:()=>y.k.Translation.Actions.RemoveEnd,[y.k.Translation.Actions.RemoveEvaluationAnnotation]:()=>y.k.Translation.Actions.RemoveEvaluationAnnotation,[y.k.Translation.Actions.RemoveFocus]:()=>y.k.Translation.Actions.RemoveFocus,[y.k.Translation.Actions.SetBegin]:()=>y.k.Translation.Actions.SetBegin,[y.k.Translation.Actions.SetEnd]:()=>y.k.Translation.Actions.SetEnd,[y.k.Translation.Actions.SetFocus]:()=>y.k.Translation.Actions.SetFocus,[y.k.Translation.Annotations.Counterplay]:()=>y.k.Translation.Annotations.Counterplay,[y.k.Translation.Annotations.DevelopmentLead]:()=>y.k.Translation.Annotations.DevelopmentLead,[y.k.Translation.Annotations.TimeTrouble]:()=>y.k.Translation.Annotations.TimeTrouble,[y.k.Translation.Annotations.SpeculativeMove]:()=>y.k.Translation.Annotations.SpeculativeMove,[y.k.Translation.Tooltips.ThreeFoldRepetition]:()=>y.k.Translation.Tooltips.ThreeFoldRepetition,[y.k.Translation.Annotations.PositionInZuqZwang]:()=>y.k.Translation.Annotations.PositionInZuqZwang,[y.k.Translation.Annotations.Unclear]:()=>y.k.Translation.Annotations.Unclear,[y.k.Translation.Annotations.WhiteHasDecisiveAdvantage]:()=>y.k.Translation.Annotations.WhiteHasDecisiveAdvantage,[y.k.Translation.Annotations.WhiteHasModerateAdvantage]:()=>y.k.Translation.Annotations.WhiteHasModerateAdvantage,[y.k.Translation.Annotations.WhiteHasSlightAdvantage]:()=>y.k.Translation.Annotations.WhiteHasSlightAdvantage,[y.k.Translation.Annotations.WithAttack]:()=>y.k.Translation.Annotations.WithAttack,[y.k.Translation.Annotations.WithCompensation]:()=>y.k.Translation.Annotations.WithCompensation,[y.k.Translation.Annotations.WithInitiative]:()=>y.k.Translation.Annotations.WithInitiative,[y.k.Translation.Plural.NumberOfDays]:e=>1===e?`${e} day`:`${e} days`,[y.k.Translation.Plural.NumberOfHours]:e=>1===e?`${e} hr`:`${e} hrs`,[y.k.Translation.Plural.NumberOfMinutes]:e=>1===e?`${e} min`:`${e} mins`,[y.k.Translation.GameTerminationMessages.DrawByAgreement]:()=>y.k.Translation.GameTerminationMessages.DrawByAgreement,[y.k.Translation.GameTerminationMessages.TimeoutVsInsufficientMaterial]:()=>y.k.Translation.GameTerminationMessages.TimeoutVsInsufficientMaterial};function noop(){}function internal_assign(e,t){for(let n in t)e[n]=t[n];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function not_equal(e,t){return e!=e?t==t:e!==t}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop;let n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(e,t,n){e.$$.on_destroy.push(subscribe(t,n))}function null_to_empty(e){return null==e?"":e}let A=["",!0,1,"true","contenteditable"];function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function internal_element(e){return document.createElement(e)}function internal_text(e){return document.createTextNode(e)}function space(){return internal_text(" ")}function empty(){return internal_text("")}function listen(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t;e.data!==t&&(e.data=t)}function set_data_contenteditable(e,t){t=""+t;e.wholeText!==t&&(e.data=t)}function set_data_maybe_contenteditable(e,t,n){~A.indexOf(n)?set_data_contenteditable(e,t):set_data(e,t)}function is_crossorigin(){if(void 0===a){a=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){a=!0}}return a}function add_resize_listener(e,t){let n;"static"===getComputedStyle(e).position&&(e.style.position="relative");let a=internal_element("iframe");a.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;");a.setAttribute("aria-hidden","true");a.tabIndex=-1;let l=is_crossorigin();if(l){a.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>";n=listen(window,"message",e=>{e.source===a.contentWindow&&t()})}else{a.src="about:blank";a.onload=()=>{n=listen(a.contentWindow,"resize",t);t()}}return append(e,a),()=>{l?n():n&&a.contentWindow&&n();detach(a)}}function toggle_class(e,t,n){e.classList[n?"add":"remove"](t)}function set_current_component(e){l=e}function get_current_component(){if(!l)throw Error("Function called outside component initialization");return l}function onMount(e){get_current_component().$$.on_mount.push(e)}function setContext(e,t){return get_current_component().$$.context.set(e,t),t}function getContext(e){return get_current_component().$$.context.get(e)}let C=[],w=[],k=[],S=[],T=Promise.resolve(),M=!1;function schedule_update(){if(!M){M=!0;T.then(flush)}}function tick(){return schedule_update(),T}function add_render_callback(e){k.push(e)}let P=new Set,L=0;function flush(){if(0!==L)return;let e=l;do{try{for(;L<C.length;){let e=C[L];L++;set_current_component(e);update(e.$$)}}catch(e){C.length=0;L=0;throw e}set_current_component(null);C.length=0;L=0;for(;w.length;)w.pop()();for(let e=0;e<k.length;e+=1){let t=k[e];if(!P.has(t)){P.add(t);t()}}k.length=0}while(C.length);for(;S.length;)S.pop()();M=!1;P.clear();set_current_component(e)}function update(e){if(null!==e.fragment){e.update();run_all(e.before_update);let t=e.dirty;e.dirty=[-1];e.fragment&&e.fragment.p(e.ctx,t);e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){let t=[],n=[];k.forEach(a=>-1===e.indexOf(a)?t.push(a):n.push(a));n.forEach(e=>e());k=t}let N=new Set;function group_outros(){c={r:0,c:[],p:c}}function check_outros(){c.r||run_all(c.c);c=c.p}function transition_in(e,t){if(e&&e.i){N.delete(e);e.i(t)}}function transition_out(e,t,n,a){if(e&&e.o){if(!N.has(e)){N.add(e);c.c.push(()=>{N.delete(e);if(a){n&&e.d(1);a()}});e.o(t)}}else a&&a()}function outro_and_destroy_block(e,t){transition_out(e,1,1,()=>{t.delete(e.key)})}function update_keyed_each(e,t,n,a,l,c,d,f,m,g,_,y){let b=e.length,A=c.length,C=b,w={};for(;C--;)w[e[C].key]=C;let k=[],S=new Map,T=new Map,M=[];C=A;for(;C--;){let e=y(l,c,C),f=n(e),m=d.get(f);m?a&&M.push(()=>m.p(e,t)):(m=g(f,e)).c();S.set(f,k[C]=m);f in w&&T.set(f,Math.abs(C-w[f]))}let P=new Set,L=new Set;function insert2(e){transition_in(e,1);e.m(f,_);d.set(e.key,e);_=e.first;A--}for(;b&&A;){let t=k[A-1],n=e[b-1],a=t.key,l=n.key;if(t===n){_=t.first;b--;A--}else if(S.has(l)){if(!d.has(a)||P.has(a))insert2(t);else if(L.has(l))b--;else if(T.get(a)>T.get(l)){L.add(a);insert2(t)}else{P.add(l);b--}}else{m(n,d);b--}}for(;b--;){let t=e[b];S.has(t.key)||m(t,d)}for(;A;)insert2(k[A-1]);return run_all(M),k}function get_spread_update(e,t){let n={},a={},l={$$scope:1},c=e.length;for(;c--;){let d=e[c],f=t[c];if(f){for(let e in d)e in f||(a[e]=1);for(let e in f)if(!l[e]){n[e]=f[e];l[e]=1}e[c]=f}else for(let e in d)l[e]=1}for(let e in a)e in n||(n[e]=void 0);return n}function get_spread_object(e){return"object"==typeof e&&null!==e?e:{}}function create_component(e){e&&e.c()}function mount_component(e,t,n,a){let{fragment:l,after_update:c}=e.$$;l&&l.m(t,n);a||add_render_callback(()=>{let t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t);e.$$.on_mount=[]});c.forEach(add_render_callback)}function destroy_component(e,t){let n=e.$$;if(null!==n.fragment){flush_render_callbacks(n.after_update);run_all(n.on_destroy);n.fragment&&n.fragment.d(t);n.on_destroy=n.fragment=null;n.ctx=[]}}function make_dirty(e,t){if(-1===e.$$.dirty[0]){C.push(e);schedule_update();e.$$.dirty.fill(0)}e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,a,c,d,f,m=[-1]){let g=l;set_current_component(e);let _=e.$$={fragment:null,ctx:[],props:d,update:noop,not_equal:c,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:blank_object(),dirty:m,skip_bound:!1,root:t.target||g.$$.root};f&&f(_.root);let y=!1;_.ctx=n?n(e,t.props||{},(t,n,...a)=>{let l=a.length?a[0]:n;if(_.ctx&&c(_.ctx[t],_.ctx[t]=l)){!_.skip_bound&&_.bound[t]&&_.bound[t](l);y&&make_dirty(e,t)}return n}):[];_.update();y=!0;run_all(_.before_update);_.fragment=!!a&&a(_.ctx);if(t.target){if(t.hydrate){let e=children(t.target);_.fragment&&_.fragment.l(e);e.forEach(detach)}else _.fragment&&_.fragment.c();t.intro&&transition_in(e.$$.fragment);mount_component(e,t.target,t.anchor,t.customElement);flush()}set_current_component(g)}class x{$destroy(){destroy_component(this,1);this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){if(this.$$set&&!is_empty(e)){this.$$.skip_bound=!0;this.$$set(e);this.$$.skip_bound=!1}}}function is(e,t){return e===t}function appendIf(e){return Object.entries(e).reduce((e,[t,n])=>(n&&e.push(t),e),[]).join(" ")}var O=n(17084);function formatText({showFigurine:e=!1,san:t="",annotation:n="",translations:a}){return`${t.split("").map(t=>"NBRQK".includes(t)&&e?void 0:"NBRQK".includes(t)&&a?null==a?void 0:a[t]():t).join("")}${n}`}function getPieceIconNameFromSan(e){let t=e[0].toLowerCase();return t===e[0]?null:O.Z.Piece.Names[t]??null}(e=>{(e=>{e.CircleInfo="circle-info";e.MoveInfoIcon="move-info-icon";e.ThreeFoldIcon="redo";e.IconFont="icon-font-chess";e.MoveList="move-list"})(e.Classes||(e.Classes={}));(e=>{e.EnPassantIcon="span"})(e.Tags||(e.Tags={}));(e=>{e.Color="--nodeCustomColor";e.TooltipTop="--tooltip-top"})(e.CssVariables||(e.CssVariables={}))})(f||(f={}));var I=n(7170);function create_else_block(e){let t,n=formatText({san:e[1],translations:e[7],annotation:e[3]})+"";return{c(){t=internal_text(n)},m(e,n){insert(e,t,n)},p(e,a){138&a&&n!==(n=formatText({san:e[1],translations:e[7],annotation:e[3]})+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_if_block(e){let t,n,a,l,c;let d=formatText({san:e[1],translations:e[7],showFigurine:!0,annotation:e[3]})+"";return{c(){t=internal_element("span");l=space();c=internal_text(d);attr(t,"class",n=`${f.Classes.IconFont} ${e[5]}-${e[0]} ${e[4]}`);attr(t,"data-figurine",a=e[1][0])},m(e,n){insert(e,t,n);insert(e,l,n);insert(e,c,n)},p(e,l){49&l&&n!==(n=`${f.Classes.IconFont} ${e[5]}-${e[0]} ${e[4]}`)&&attr(t,"class",n);2&l&&a!==(a=e[1][0])&&attr(t,"data-figurine",a);138&l&&d!==(d=formatText({san:e[1],translations:e[7],showFigurine:!0,annotation:e[3]})+"")&&set_data(c,d)},d(e){e&&detach(t);e&&detach(l);e&&detach(c)}}}function create_fragment(e){let t,n;function select_block_type(e,n){return(96&n&&(t=null),null==t&&(t=!!(e[9](e[6])&&e[5])),t)?create_if_block:create_else_block}let a=select_block_type(e,-1),l=a(e);return{c(){l.c();n=empty()},m(e,t){l.m(e,t);insert(e,n,t)},p(e,[t]){if(a===(a=select_block_type(e,t))&&l)l.p(e,t);else{l.d(1);l=a(e);if(l){l.c();l.m(n.parentNode,n)}}},i:noop,o:noop,d(e){l.d(e);e&&detach(n)}}}function instance(e,t,n){let a,l;let c,d=noop,$$subscribe_textType=()=>(d(),d=subscribe(g,e=>n(6,c=e)),g);e.$$.on_destroy.push(()=>d());let{color:f}=t,{san:m}=t,{textType:g}=t;$$subscribe_textType();let{annotation:_=""}=t,{figurineClassName:y=""}=t,{store:b}=getContext(I.V.Name),{translations:A}=b;return component_subscribe(e,A,e=>n(7,l=e)),e.$$set=e=>{"color"in e&&n(0,f=e.color);"san"in e&&n(1,m=e.san);"textType"in e&&$$subscribe_textType(n(2,g=e.textType));"annotation"in e&&n(3,_=e.annotation);"figurineClassName"in e&&n(4,y=e.figurineClassName)},e.$$.update=()=>{2&e.$$.dirty&&n(5,a=getPieceIconNameFromSan(m))},[f,m,g,_,y,a,c,l,A,e=>"figurine"===e]}class R extends x{constructor(e){super();init(this,e,instance,create_fragment,safe_not_equal,{color:0,san:1,textType:2,annotation:3,figurineClassName:4})}}var B=n(91548);function getPositionTop(e,t){if(!t)return 0;let n=t.y+t.height,a=t.y-e.height,l=n<=window.innerHeight-e.height;return l||a>=0?l?n:a:0}function getPositionLeft(e,t){if(!t)return 0;let n=t.x,a=t.x+t.width-e.width,l=n<=window.innerWidth-e.width;return l||a>=0?l?n:a:0}var V=n(49165);function get_each_context(e,t,n){let a=e.slice();return a[15]=t[n],a[17]=n,a}function create_if_block_2(e){let t;return{c(){attr(t=internal_element("div"),"class","icon-font-chess move-arrow-right icon svelte-16oqhms")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function chessboard_633f5e4_create_if_block(e){let t,n,a,l;t=new R({props:{san:e[15].move.san,color:(0,B.O)(e[15].move.color),textType:e[3]}});let c=e[15].trailingSan&&create_if_block_1(e);return{c(){create_component(t.$$.fragment);n=space();c&&c.c();a=empty()},m(e,d){mount_component(t,e,d);insert(e,n,d);c&&c.m(e,d);insert(e,a,d);l=!0},p(e,n){let l={};16&n&&(l.san=e[15].move.san);16&n&&(l.color=(0,B.O)(e[15].move.color));8&n&&(l.textType=e[3]);t.$set(l);if(e[15].trailingSan){if(c){c.p(e,n);16&n&&transition_in(c,1)}else{(c=create_if_block_1(e)).c();transition_in(c,1);c.m(a.parentNode,a)}}else if(c){group_outros();transition_out(c,1,1,()=>{c=null});check_outros()}},i(e){if(!l){transition_in(t.$$.fragment,e);transition_in(c);l=!0}},o(e){transition_out(t.$$.fragment,e);transition_out(c);l=!1},d(e){destroy_component(t,e);e&&detach(n);c&&c.d(e);e&&detach(a)}}}function create_if_block_1(e){let t,n;return t=new R({props:{san:e[15].trailingSan,color:(0,B.O)((0,V.T)(e[15].move.color)),textType:e[3],figurineClassName:"trailing-san-figurine"}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};16&n&&(a.san=e[15].trailingSan);16&n&&(a.color=(0,B.O)((0,V.T)(e[15].move.color)));8&n&&(a.textType=e[3]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function create_each_block(e){let t,n,a,l,c,d,f,m;let g=is(e[17],e[4].selectedIndex),_=g&&create_if_block_2(),y=e[15].move&&chessboard_633f5e4_create_if_block(e);function mouseenter_handler(){return e[10](e[17])}function click_handler(){return e[11](e[15])}return{c(){t=internal_element("div");n=internal_element("span");_&&_.c();a=space();y&&y.c();l=space();attr(n,"class","icon-wrap svelte-16oqhms");attr(t,"class",c=null_to_empty(`row ${is(e[17],e[4].selectedIndex)?"selected":""}`)+" svelte-16oqhms")},m(e,c){insert(e,t,c);append(t,n);_&&_.m(n,null);append(t,a);y&&y.m(t,null);append(t,l);d=!0;if(!f){m=[listen(t,"mouseenter",mouseenter_handler),listen(t,"click",click_handler),listen(t,"keydown",keydown_handler)];f=!0}},p(a,f){e=a;16&f&&(g=is(e[17],e[4].selectedIndex));if(g){if(_);else{(_=create_if_block_2()).c();_.m(n,null)}}else if(_){_.d(1);_=null}if(e[15].move){if(y){y.p(e,f);16&f&&transition_in(y,1)}else{(y=chessboard_633f5e4_create_if_block(e)).c();transition_in(y,1);y.m(t,l)}}else if(y){group_outros();transition_out(y,1,1,()=>{y=null});check_outros()}(!d||16&f&&c!==(c=null_to_empty(`row ${is(e[17],e[4].selectedIndex)?"selected":""}`)+" svelte-16oqhms"))&&attr(t,"class",c)},i(e){if(!d){transition_in(y);d=!0}},o(e){transition_out(y);d=!1},d(e){e&&detach(t);_&&_.d();y&&y.d();f=!1;run_all(m)}}}function chessboard_633f5e4_create_fragment(e){let t,n,a,l,c,d;let f=e[4].entries,m=[];for(let t=0;t<f.length;t+=1)m[t]=create_each_block(get_each_context(e,f,t));let out=e=>transition_out(m[e],1,1,()=>{m[e]=null});return{c(){t=internal_element("div");for(let e=0;e<m.length;e+=1)m[e].c();attr(t,"tabindex","-1");attr(t,"class","variations-popover svelte-16oqhms");attr(t,"style",n=`
    top: ${getPositionTop(e[6],e[2])}px; 
    left: ${getPositionLeft(e[6],e[2])}px;`);add_render_callback(()=>e[13].call(t))},m(n,f){insert(n,t,f);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(t,null);e[12](t);a=add_resize_listener(t,e[13].bind(t));l=!0;if(!c){d=listen(t,"keydown",e[7]);c=!0}},p(e,[a]){if(281&a){let n;f=e[4].entries;for(n=0;n<f.length;n+=1){let l=get_each_context(e,f,n);if(m[n]){m[n].p(l,a);transition_in(m[n],1)}else{m[n]=create_each_block(l);m[n].c();transition_in(m[n],1);m[n].m(t,null)}}group_outros();for(n=f.length;n<m.length;n+=1)out(n);check_outros()}(!l||68&a&&n!==(n=`
    top: ${getPositionTop(e[6],e[2])}px; 
    left: ${getPositionLeft(e[6],e[2])}px;`))&&attr(t,"style",n)},i(e){if(!l){for(let e=0;e<f.length;e+=1)transition_in(m[e]);l=!0}},o(e){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)transition_out(m[e]);l=!1},d(n){n&&detach(t);destroy_each(m,n);e[12](null);a();c=!1;d()}}}let keydown_handler=()=>{};function chessboard_633f5e4_instance(e,t,n){let a;let l,c=noop,$$subscribe_variationPopover=()=>(c(),c=subscribe(f,e=>n(4,l=e)),f);e.$$.on_destroy.push(()=>c());let{eventHandlers:d}=t,{variationPopover:f}=t;$$subscribe_variationPopover();let{selectedNodeRect:m}=t,{textType:g}=t,_=null,y={width:0,height:0};onMount(()=>(document.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick);document.removeEventListener("keydown",onKeyDown,{capture:!0})}));function onKeyDown(e){var t,n,a,c,f,m;e.preventDefault();let g={DOWN:40,ENTER:13,RIGHT:39,UP:38};if(!l.isOpen||-1===Object.values(g).indexOf(e.keyCode))return;e.stopImmediatePropagation();let _=null!==(t=l.selectedIndex)&&void 0!==t?t:0;switch(e.keyCode){case g.UP:(null===(n=l.entries)||void 0===n?void 0:n[_-1])&&d.selectPopoverMove(_-1);break;case g.DOWN:(null===(a=l.entries)||void 0===a?void 0:a[_+1])&&d.selectPopoverMove(_+1);break;case g.ENTER:case g.RIGHT:{let e=null===(m=null===(f=null===(c=l.entries)||void 0===c?void 0:c[_])||void 0===f?void 0:f.move)||void 0===m?void 0:m.ids;e&&d.selectNode(e)}}}function handleOutsideClick(e){null===_||_.contains(e.target)||d.closeVariationsPopover()}function changeSelectedNode(e){d.selectNode(e.ids)}function div_binding(e){w[e?"unshift":"push"](()=>{n(5,_=e)})}function div_elementresize_handler(){y.width=this.clientWidth;y.height=this.clientHeight;n(6,y)}return e.$$set=e=>{"eventHandlers"in e&&n(0,d=e.eventHandlers);"variationPopover"in e&&$$subscribe_variationPopover(n(1,f=e.variationPopover));"selectedNodeRect"in e&&n(2,m=e.selectedNodeRect);"textType"in e&&n(3,g=e.textType)},e.$$.update=()=>{16&e.$$.dirty&&n(9,a=l.isOpen);512&e.$$.dirty&&(a?document.addEventListener("keydown",onKeyDown,{capture:!0}):document.removeEventListener("keydown",onKeyDown,{capture:!0}))},[d,f,m,g,l,_,y,onKeyDown,changeSelectedNode,a,e=>d.selectPopoverMove(e),e=>changeSelectedNode(e.move),div_binding,div_elementresize_handler]}class H extends x{constructor(e){super();init(this,e,chessboard_633f5e4_instance,chessboard_633f5e4_create_fragment,safe_not_equal,{eventHandlers:0,variationPopover:1,selectedNodeRect:2,textType:3})}}function isEPCapture(e){return e===O.Z.Move.Flags.EPCapture}function getTooltipProps({node:e,translations:t,gameMetadata:n,game:a}){var l;return e?e.ply&&(null==(l=null==n?void 0:n.threefoldIndexes)?void 0:l.includes(e.ply-1))?{tooltipMessage:t[y.k.Translation.Tooltips.ThreeFoldRepetition](),iconClassName:f.Classes.ThreeFoldIcon}:e.flags&&isEPCapture(e.flags)?{tooltipMessage:t[y.k.Translation.Tooltips.EnPassant](),handleClick:e=>{var t;let n=null==(t=null==a?void 0:a.getOptions().assetPaths)?void 0:t.enPassant;if(n){e.stopPropagation();window.open(n,"_blank")}},iconClassName:f.Classes.CircleInfo}:null:null}function getResultTooltipProps({translations:e,gameMetadata:t}){let n=null==t?void 0:t.resultPositionInfo;return n?n.fiftyMoveRule?{tooltipMessage:e[y.k.Translation.Tooltips.FiftyMove](),iconClassName:f.Classes.CircleInfo}:n.insufficient?{tooltipMessage:e[y.k.Translation.Tooltips.InsufficientMaterial](),iconClassName:f.Classes.CircleInfo}:n.timeoutVsInsufficientMaterial&&n.lastMoveColor?{tooltipMessage:n.lastMoveColor===O.Z.ColorsAsNumbers.White?e[y.k.Translation.Tooltips.BlackTimeoutVsInsufficientMaterial]():e[y.k.Translation.Tooltips.WhiteTimeoutVsInsufficientMaterial](),iconClassName:f.Classes.CircleInfo}:n.drawByAgreement?{tooltipMessage:e[y.k.Translation.Tooltips.DrawByAgreement](),iconClassName:f.Classes.CircleInfo}:n.stalemate?{tooltipMessage:e[y.k.Translation.Tooltips.Stalemate](),iconClassName:f.Classes.CircleInfo}:null:null}var D=n(42839);(e=>{(e=>{e.Actions="actions";e.Translations="translations"})(e.Keys||(e.Keys={}));(e=>{e.Name="contextMenu"})(e.Plugin||(e.Plugin={}))})(m||(m={}));(e=>{(e=>{e.ActionName="action-name";e.Annotation="annotation";e.ActionsContainer="actions-container";e.AnnotationsContainer="annotations-container";e.Component="move-node-context-menu";e.Divider="divider"})(e.Classes||(e.Classes={}))})(g||(g={}));function chessboard_5e07e72_get_each_context(e,t,n){let a=e.slice();return a[18]=t[n],a}function get_each_context_1(e,t,n){let a=e.slice();return a[21]=t[n],a}function chessboard_5e07e72_create_if_block(e){let t;let n=Object.values(e[4].actions),a=[];for(let t=0;t<n.length;t+=1)a[t]=create_each_block_1(get_each_context_1(e,n,t));return{c(){for(let e=0;e<a.length;e+=1)a[e].c();t=empty()},m(e,n){for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,n);insert(e,t,n)},p(e,l){if(816&l){let c;n=Object.values(e[4].actions);for(c=0;c<n.length;c+=1){let d=get_each_context_1(e,n,c);if(a[c])a[c].p(d,l);else{a[c]=create_each_block_1(d);a[c].c();a[c].m(t.parentNode,t)}}for(;c<a.length;c+=1)a[c].d(1);a.length=n.length}},d(e){destroy_each(a,e);e&&detach(t)}}}function chessboard_5e07e72_create_if_block_1(e){let t,n,a,l,c;let d=e[9](e[21].action)+"";function click_handler(){return e[12](e[21])}return{c(){t=internal_element("span");n=internal_text(d);a=space();attr(t,"class",null_to_empty(g.Classes.ActionName)+" svelte-1vk4xkn")},m(e,d){insert(e,t,d);append(t,n);append(t,a);if(!l){c=listen(t,"click",click_handler);l=!0}},p(t,a){e=t;16&a&&d!==(d=e[9](e[21].action)+"")&&set_data(n,d)},d(e){e&&detach(t);l=!1;c()}}}function create_each_block_1(e){let t,n=e[8](e[21].action),a=n&&chessboard_5e07e72_create_if_block_1(e);return{c(){a&&a.c();t=empty()},m(e,n){a&&a.m(e,n);insert(e,t,n)},p(e,l){16&l&&(n=e[8](e[21].action));if(n){if(a)a.p(e,l);else{(a=chessboard_5e07e72_create_if_block_1(e)).c();a.m(t.parentNode,t)}}else if(a){a.d(1);a=null}},d(e){a&&a.d(e);e&&detach(t)}}}function chessboard_5e07e72_create_each_block(e){let t,n,a,l,c;let d=e[18].display+"";function click_handler_1(){return e[13](e[18])}return{c(){t=internal_element("span");n=internal_text(d);a=space();attr(t,"class",null_to_empty(`${g.Classes.Annotation} ${appendIf({blank:void 0===e[18].action})}`)+" svelte-1vk4xkn");attr(t,"title",e[18].meaning)},m(e,d){insert(e,t,d);append(t,n);append(t,a);if(!l){c=listen(t,"click",click_handler_1);l=!0}},p(t,n){e=t},d(e){e&&detach(t);l=!1;c()}}}function chessboard_5e07e72_create_fragment(e){let t,n,a,l,c,d,f,m,_;let y=e[4].actions&&chessboard_5e07e72_create_if_block(e),b=D.lv,A=[];for(let t=0;t<b.length;t+=1)A[t]=chessboard_5e07e72_create_each_block(chessboard_5e07e72_get_each_context(e,b,t));return{c(){t=internal_element("div");n=internal_element("div");y&&y.c();a=space();l=internal_element("div");for(let e=0;e<A.length;e+=1)A[e].c();f=space();attr(n,"class",null_to_empty(g.Classes.ActionsContainer)+" svelte-1vk4xkn");attr(l,"class",null_to_empty(g.Classes.AnnotationsContainer)+" svelte-1vk4xkn");attr(t,"class",null_to_empty(g.Classes.Component)+" svelte-1vk4xkn");attr(t,"style",c=`
    left: ${getPositionLeft(e[2],e[0])}px; 
    top: ${getPositionTop(e[2],e[0])}px;
  `);add_render_callback(()=>e[15].call(t))},m(c,g){insert(c,t,g);append(t,n);y&&y.m(n,null);append(t,a);append(t,l);for(let e=0;e<A.length;e+=1)A[e]&&A[e].m(l,null);e[14](t);d=add_resize_listener(t,e[15].bind(t));insert(c,f,g);if(!m){_=listen(document.body,"click",e[7]);m=!0}},p(e,[a]){if(e[4].actions){if(y)y.p(e,a);else{(y=chessboard_5e07e72_create_if_block(e)).c();y.m(n,null)}}else if(y){y.d(1);y=null}if(32&a){let t;b=D.lv;for(t=0;t<b.length;t+=1){let n=chessboard_5e07e72_get_each_context(e,b,t);if(A[t])A[t].p(n,a);else{A[t]=chessboard_5e07e72_create_each_block(n);A[t].c();A[t].m(l,null)}}for(;t<A.length;t+=1)A[t].d(1);A.length=b.length}5&a&&c!==(c=`
    left: ${getPositionLeft(e[2],e[0])}px; 
    top: ${getPositionTop(e[2],e[0])}px;
  `)&&attr(t,"style",c)},i:noop,o:noop,d(n){n&&detach(t);y&&y.d();destroy_each(A,n);e[14](null);d();n&&detach(f);m=!1;_()}}}function chessboard_5e07e72_instance(e,t,n){let a;let l,c=noop,$$subscribe_menuProps=()=>(c(),c=subscribe(m,e=>n(4,l=e)),m);e.$$.on_destroy.push(()=>c());let{selectedNodeKeys:d}=t,{selectedNodeRect:f}=t,{menuProps:m}=t;$$subscribe_menuProps();let{game:g}=t,{store:_,eventHandlers:y}=getContext(I.V.Name),{translations:b}=_;component_subscribe(e,b,e=>n(16,a=e));let A={width:0,height:0},C=null;function handleOutsideClick(e){null===C||C.contains(e.target)||y.closeContextMenu()}function contextMenuActionIsVisible(e){var t;let n=m.get().actions,a=d.get(),l=null===(t=null==n?void 0:n[e])||void 0===t?void 0:t.isVisible;if(!a||!l)return!1;let c=g.getNodeByIds(a.ids);return!!c&&l({node:c,game:g})}function contextMenuActionName(e){var t;let n=m.get().actions,l=d.get(),c=null===(t=null==n?void 0:n[e])||void 0===t?void 0:t.getDisplayName;if(!l||!c)return"";let f=g.getNodeByIds(l.ids);if(!f)return"";let _=c({node:f,game:g});return a[_]?a[_]():_}function div2_binding(e){w[e?"unshift":"push"](()=>{n(3,C=e)})}function div2_elementresize_handler(){A.width=this.clientWidth;A.height=this.clientHeight;n(2,A)}return e.$$set=e=>{"selectedNodeKeys"in e&&n(10,d=e.selectedNodeKeys);"selectedNodeRect"in e&&n(0,f=e.selectedNodeRect);"menuProps"in e&&$$subscribe_menuProps(n(1,m=e.menuProps));"game"in e&&n(11,g=e.game)},[f,m,A,C,l,y,b,handleOutsideClick,contextMenuActionIsVisible,contextMenuActionName,d,g,e=>y.handleContextMenuAction(e.action),e=>void 0!==e.action&&y.handleContextMenuAction(e.action,{data:{annotation:e.display}}),div2_binding,div2_elementresize_handler]}class F extends x{constructor(e){super();init(this,e,chessboard_5e07e72_instance,chessboard_5e07e72_create_fragment,safe_not_equal,{selectedNodeKeys:10,selectedNodeRect:0,menuProps:1,game:11})}}function chessboard_493b097_create_fragment(e){let t,n,a,l,c,d,m;return{c(){t=internal_element("div");attr(n=internal_element("span"),"class",a=`${f.Classes.IconFont} ${e[2]}`);attr(t,"class",f.Classes.MoveInfoIcon);attr(t,"data-tooltip",e[0]);attr(t,"data-tooltip-position",l=e[4]&&e[6]());attr(t,"style",c=`--tooltip-top:${e[4]&&e[4].y||1}px`)},m(a,l){insert(a,t,l);append(t,n);e[7](t);if(!d){m=[listen(t,"click",function(){is_function(e[1])&&e[1].apply(this,arguments)}),listen(t,"mouseover",e[5])];d=!0}},p(d,[m]){e=d;4&m&&a!==(a=`${f.Classes.IconFont} ${e[2]}`)&&attr(n,"class",a);1&m&&attr(t,"data-tooltip",e[0]);16&m&&l!==(l=e[4]&&e[6]())&&attr(t,"data-tooltip-position",l);16&m&&c!==(c=`--tooltip-top:${e[4]&&e[4].y||1}px`)&&attr(t,"style",c)},i:noop,o:noop,d(n){n&&detach(t);e[7](null);d=!1;run_all(m)}}}function chessboard_493b097_instance(e,t,n){let a,l,{tooltipMessage:c}=t,{handleClick:d=()=>{}}=t,{iconClassName:f}=t;function positionTooltip(){n(4,l=a.getBoundingClientRect())}function tooltipTop(){if(l.y>window.innerHeight/2)return"top"}function div_binding(e){w[e?"unshift":"push"](()=>{n(3,a=e)})}return e.$$set=e=>{"tooltipMessage"in e&&n(0,c=e.tooltipMessage);"handleClick"in e&&n(1,d=e.handleClick);"iconClassName"in e&&n(2,f=e.iconClassName)},[c,d,f,a,l,positionTooltip,tooltipTop,div_binding]}class $ extends x{constructor(e){super();init(this,e,chessboard_493b097_instance,chessboard_493b097_create_fragment,safe_not_equal,{tooltipMessage:0,handleClick:1,iconClassName:2})}}function chessboard_674ed83_create_else_block(e){let t,n;return{c(){t=internal_element("span");n=internal_text(e[2]);attr(t,"class","comment svelte-jlybuf");attr(t,"contenteditable","false");attr(t,"data-comment-node",e[5]?`${e[5].ids.line}-${e[5].ids.move}`:"0-0")},m(e,a){insert(e,t,a);append(t,n)},p(e,t){4&t&&set_data_maybe_contenteditable(n,e[2],"false")},d(e){e&&detach(t)}}}function chessboard_674ed83_create_if_block(e){let t,n,a,l;return{c(){attr(t=internal_element("span"),"class","comment svelte-jlybuf");attr(t,"placeholder",n=e[4][y.k.Translation.Prompt.AddComment]());attr(t,"data-comment-node",e[5]?`${e[5].ids.line}-${e[5].ids.move}`:"0-0");attr(t,"contenteditable","true");void 0===e[2]&&add_render_callback(()=>e[19].call(t))},m(n,c){insert(n,t,c);e[18](t);void 0!==e[2]&&(t.innerText=e[2]);if(!a){l=[listen(t,"keydown",e[11]),listen(t,"focusout",e[13]),listen(t,"input",e[19])];a=!0}},p(e,a){16&a&&n!==(n=e[4][y.k.Translation.Prompt.AddComment]())&&attr(t,"placeholder",n);4&a&&e[2]!==t.innerText&&(t.innerText=e[2])},d(n){n&&detach(t);e[18](null);a=!1;run_all(l)}}}function chessboard_674ed83_create_fragment(e){let t,n,a,l;function select_block_type(e,t){return e[3]?chessboard_674ed83_create_if_block:chessboard_674ed83_create_else_block}let c=select_block_type(e),d=c(e);return{c(){t=internal_element("span");d.c();attr(t,"class",n=null_to_empty(`${e[0]} ${e[9]}-comment`)+" svelte-jlybuf")},m(n,c){insert(n,t,c);d.m(t,null);if(!a){l=[listen(t,"click",e[10]),listen(t,"contextmenu",e[12])];a=!0}},p(e,[a]){if(c===(c=select_block_type(e))&&d)d.p(e,a);else{d.d(1);d=c(e);if(d){d.c();d.m(t,null)}}1&a&&n!==(n=null_to_empty(`${e[0]} ${e[9]}-comment`)+" svelte-jlybuf")&&attr(t,"class",n)},i:noop,o:noop,d(e){e&&detach(t);d.d();a=!1;run_all(l)}}}function chessboard_674ed83_instance(e,t,n){var a;let l,c,f,m,g,_;let{comment:y}=t,b=y.node,{className:A=""}=t,{store:C,eventHandlers:k}=getContext(I.V.Name),{isActive:S,translations:T,commentsEditable:M}=C;component_subscribe(e,S,e=>n(17,f=e));component_subscribe(e,T,e=>n(4,m=e));component_subscribe(e,M,e=>n(16,c=e));let P=y.isBeforeComment?"before":"after",L=null!==(a=y.comment)&&void 0!==a?a:"",N=L;onMount(()=>(""===N&&g.focus(),()=>{clearTimeout(_)}));function handleClick(){b&&k.clickComment(b.ids);g.focus()}function handleInput(e){let t="Enter"===e.code||"NumpadEnter"===e.code;if(t){g.blur();e.preventDefault();return}clearTimeout(_);_=window.setTimeout(()=>{g.innerText!==L&&k.updateComment(y,g.innerText)},d.Constants.CommentUpdateDelay)}function onContextMenu(e){b&&k.openContextMenu(b,e)}function handleFocusOut(e){""===N&&k.updateComment(y,void 0)}function span_binding(e){w[e?"unshift":"push"](()=>{n(1,g=e)})}function span_input_handler(){n(2,N=this.innerText),n(14,y),n(15,L)}return e.$$set=e=>{"comment"in e&&n(14,y=e.comment);"className"in e&&n(0,A=e.className)},e.$$.update=()=>{196608&e.$$.dirty&&n(3,l=f&&c);if(49152&e.$$.dirty&&y.comment!==L){n(15,L=y.comment);n(2,N=L)}},[A,g,N,l,m,b,S,T,M,P,handleClick,handleInput,onContextMenu,handleFocusOut,y,L,c,f,span_binding,span_input_handler]}class U extends x{constructor(e){super();init(this,e,chessboard_674ed83_instance,chessboard_674ed83_create_fragment,safe_not_equal,{comment:14,className:0})}}function chessboard_0481802_create_fragment(e){let t,n;return t=new U({props:{comment:e[1].content,className:`move-list-row comment-row ${e[2]}`}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,[n]){let a={};2&n&&(a.comment=e[1].content);4&n&&(a.className=`move-list-row comment-row ${e[2]}`);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_0481802_instance(e,t,n){var a;let l;let c,d=noop,$$subscribe_moveListRow=()=>(d(),d=subscribe(f,e=>n(1,c=e)),f);e.$$.on_destroy.push(()=>d());let{moveListRow:f}=t;return $$subscribe_moveListRow(),e.$$set=e=>{"moveListRow"in e&&$$subscribe_moveListRow(n(0,f=e.moveListRow))},e.$$.update=()=>{10&e.$$.dirty&&n(2,l=null!==n(3,a=c.rowBgColor)&&void 0!==a?a:"light-row")},[f,c,l,a]}class W extends x{constructor(e){super();init(this,e,chessboard_0481802_instance,chessboard_0481802_create_fragment,not_equal,{moveListRow:0})}}var j=n(68007),G=n(27112),q=n(4317),Z=n(15388);let z={"!!":{icon:q.u[Z.Rc.Brilliant],color:"#1baca6"},"!":{icon:q.u[Z.Rc.GreatFind],color:"#5c8bb0"},"?":{icon:q.u[Z.Rc.Mistake],color:"#e6912c"},"??":{icon:q.u[Z.Rc.Blunder],color:"#b33430"},"?!":{icon:q.u[Z.Rc.Inaccuracy],color:"#f0c15c"},"!?":{icon:q.u[Z.Rc.Interesting],color:"#7979a1"},"☒":{icon:q.u[Z.Rc.Miss],color:"#ee6b55"}};function getPlyAnnotationDetails(e,t={}){var n;if(!e)return{inlineText:""};let a=e.annotation??"",l=(null==(n=e.additionalAnnotation)?void 0:n[0])??"";if(t.disableAnnotations||!a&&!l)return withOverrides({inlineText:""},e,t);let c=z[a],d=z[l],f=c??d;return shouldShowAnnotationIconAsText(e.ids,null==f?void 0:f.icon,t)?withOverrides({color:null==f?void 0:f.color,inlineText:`${a} ${l}`.trim()},e,t):withOverrides({...f,inlineText:f&&f===d?"":l},e,t)}function withOverrides(e,t,n={}){var a;let{textColor:l,effectType:c}=(null==(a=n.nodeEffectOverrides)?void 0:a[`${t.ids.line}-${t.ids.move}`])??{},d={};if(!n.disableCustomColors){t.customColor&&(d.color=t.customColor);void 0!==l&&(d.color=null===l?void 0:l)}void 0!==c&&(d.icon=null===c?void 0:q.u[c]);let f={...e,...d};return n.disableAllIcons&&delete f.icon,f}function shouldShowAnnotationIconAsText(e,t,n){var a;if(n.showAllAnnotationsAsText||n.disableAllIcons)return!0;let{effectType:l}=(null==(a=n.nodeEffectOverrides)?void 0:a[`${e.line}-${e.move}`])??{};return null===l||l&&q.u[l]!==t}function chessboard_d9a6deb_create_if_block(e){let t,n,a,l,c,d,f,m,g,_,y;let b=e[3].icon&&chessboard_d9a6deb_create_if_block_2(e);l=new R({props:{san:e[1].san,color:e[5],textType:e[10],annotation:e[3].inlineText}});let A=e[4]&&chessboard_d9a6deb_create_if_block_1(e);return{c(){t=internal_element("div");b&&b.c();n=space();a=internal_element("span");create_component(l.$$.fragment);c=space();A&&A.c();attr(a,"class","node-highlight-content");attr(a,"style",d=e[3].color?`color: ${e[3].color}`:null);toggle_class(a,"offset-for-annotation-icon",e[2]&&!e[3].icon);toggle_class(a,"limit-begin",e[7](e[1].ids,e[6].begin));toggle_class(a,"limit-focus",e[7](e[1].ids,e[6].focus));toggle_class(a,"limit-end",e[7](e[1].ids,e[6].end));attr(t,"data-node",f=`${e[1].ids.line}-${e[1].ids.move}`);attr(t,"class",m=`node ${e[5]}-move ${e[0]}`)},m(d,f){insert(d,t,f);b&&b.m(t,null);append(t,n);append(t,a);mount_component(l,a,null);append(a,c);A&&A.m(a,null);g=!0;if(!_){y=[listen(t,"click",e[16]),listen(t,"contextmenu",e[17]),listen(t,"touchstart",e[18]),listen(t,"touchend",e[19],{passive:!0})];_=!0}},p(e,c){if(e[3].icon){if(b)b.p(e,c);else{(b=chessboard_d9a6deb_create_if_block_2(e)).c();b.m(t,n)}}else if(b){b.d(1);b=null}let _={};2&c[0]&&(_.san=e[1].san);32&c[0]&&(_.color=e[5]);8&c[0]&&(_.annotation=e[3].inlineText);l.$set(_);if(e[4]){if(A){A.p(e,c);16&c[0]&&transition_in(A,1)}else{(A=chessboard_d9a6deb_create_if_block_1(e)).c();transition_in(A,1);A.m(a,null)}}else if(A){group_outros();transition_out(A,1,1,()=>{A=null});check_outros()}(!g||8&c[0]&&d!==(d=e[3].color?`color: ${e[3].color}`:null))&&attr(a,"style",d);(!g||12&c[0])&&toggle_class(a,"offset-for-annotation-icon",e[2]&&!e[3].icon);(!g||194&c[0])&&toggle_class(a,"limit-begin",e[7](e[1].ids,e[6].begin));(!g||194&c[0])&&toggle_class(a,"limit-focus",e[7](e[1].ids,e[6].focus));(!g||194&c[0])&&toggle_class(a,"limit-end",e[7](e[1].ids,e[6].end));(!g||2&c[0]&&f!==(f=`${e[1].ids.line}-${e[1].ids.move}`))&&attr(t,"data-node",f);(!g||33&c[0]&&m!==(m=`node ${e[5]}-move ${e[0]}`))&&attr(t,"class",m)},i(e){if(!g){transition_in(l.$$.fragment,e);transition_in(A);g=!0}},o(e){transition_out(l.$$.fragment,e);transition_out(A);g=!1},d(e){e&&detach(t);b&&b.d();destroy_component(l);A&&A.d();_=!1;run_all(y)}}}function chessboard_d9a6deb_create_if_block_2(e){let t;let n=(0,j.i)({path:e[3].icon,size:"18"})+"";return{c(){attr(t=internal_element("span"),"class","node-annotation-icon")},m(e,a){insert(e,t,a);t.innerHTML=n},p(e,a){8&a[0]&&n!==(n=(0,j.i)({path:e[3].icon,size:"18"})+"")&&(t.innerHTML=n)},d(e){e&&detach(t)}}}function chessboard_d9a6deb_create_if_block_1(e){let t,n;let a=[e[4]],l={};for(let e=0;e<a.length;e+=1)l=internal_assign(l,a[e]);return t=new $({props:l}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let l=16&n[0]?get_spread_update(a,[get_spread_object(e[4])]):{};t.$set(l)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_d9a6deb_create_fragment(e){let t,n;let a=e[1]&&chessboard_d9a6deb_create_if_block(e);return{c(){a&&a.c();t=empty()},m(e,l){a&&a.m(e,l);insert(e,t,l);n=!0},p(e,n){if(e[1]){if(a){a.p(e,n);2&n[0]&&transition_in(a,1)}else{(a=chessboard_d9a6deb_create_if_block(e)).c();transition_in(a,1);a.m(t.parentNode,t)}}else if(a){group_outros();transition_out(a,1,1,()=>{a=null});check_outros()}},i(e){if(!n){transition_in(a);n=!0}},o(e){transition_out(a);n=!1},d(e){a&&a.d(e);e&&detach(t)}}}function chessboard_d9a6deb_instance(e,t,n){var a;let l,c,d,f,m,g,_,y,b,A;let{className:C=""}=t,{node:w}=t,{disableAllIcons:k=!1}=t,{staticAnnotationIconSpacing:S=!1}=t,{store:T,eventHandlers:M,game:P}=getContext(I.V.Name),{annotationsHidden:L,gameMetadata:N,textType:x,translations:O,nodeLimits:R,customColorsEnabled:V,classificationStyle:H,nodeEffectOverrides:D}=T;component_subscribe(e,L,e=>n(25,_=e));component_subscribe(e,N,e=>n(26,y=e));component_subscribe(e,O,e=>n(27,b=e));component_subscribe(e,R,e=>n(6,A=e));component_subscribe(e,V,e=>n(23,m=e));component_subscribe(e,H,e=>n(24,g=e));component_subscribe(e,D,e=>n(22,f=e));let F=null;function onClick(e){(null==w?void 0:w.ids)&&M.selectNode(w.ids,e)}function onContextMenu(e){M.openContextMenu(w,e)}function onTouchStart(e){onClick(e);F=setTimeout(()=>{F=null;onContextMenu(e)},500)}function onTouchEnd(){F&&clearTimeout(F)}return e.$$set=e=>{"className"in e&&n(0,C=e.className);"node"in e&&n(1,w=e.node);"disableAllIcons"in e&&n(20,k=e.disableAllIcons);"staticAnnotationIconSpacing"in e&&n(2,S=e.staticAnnotationIconSpacing)},e.$$.update=()=>{2097154&e.$$.dirty[0]&&n(5,l=(0,B.O)(null!==n(21,a=null==w?void 0:w.color)&&void 0!==a?a:1));202375170&e.$$.dirty[0]&&n(4,c=k?null:getTooltipProps({node:w,translations:b,gameMetadata:y,game:P}));63963138&e.$$.dirty[0]&&n(3,d=getPlyAnnotationDetails(w,{disableAllIcons:k,disableAnnotations:_,showAllAnnotationsAsText:g===G.b.MoveListClassificationStyles.Traditional,disableCustomColors:!m,nodeEffectOverrides:f}))},[C,w,S,d,c,l,A,(e,t)=>is(null==e?void 0:e.line,null==t?void 0:t.line)&&is(null==e?void 0:e.move,null==t?void 0:t.move),L,N,x,O,R,V,H,D,onClick,onContextMenu,onTouchStart,onTouchEnd,k,a,f,m,g,_,y,b]}class K extends x{constructor(e){super();init(this,e,chessboard_d9a6deb_instance,chessboard_d9a6deb_create_fragment,safe_not_equal,{className:0,node:1,disableAllIcons:20,staticAnnotationIconSpacing:2},null,[-1,-1])}}var Q=n(9802);function decisecondsToDaysHoursMinutesObject(e){let t=Math.ceil(e/10),n=Math.floor(t/86400),a=Math.floor(t%86400/3600),l=Math.ceil(t%3600/60);if(60===l){l=0;a+=1}if(24===a){a=0;n+=1}return{days:n,hours:a,minutes:l}}function decisecondsToDaysHoursMinutesString(e,t){let{days:n,hours:a,minutes:l}=decisecondsToDaysHoursMinutesObject(e),c={days:a>0||l>0?", ":"",hours:l>0?", ":""},d=n>0?`${null==t?void 0:t[y.k.Translation.Plural.NumberOfDays](n)}${c.days}`:"",f=a>0?`${null==t?void 0:t[y.k.Translation.Plural.NumberOfHours](a)}${c.hours}`:"",m=l>0?`${null==t?void 0:t[y.k.Translation.Plural.NumberOfMinutes](l)}`:"";return`${d}${f}${m}`}function decisecondsToHumanReadableFormat(e,t){let{days:n,hours:a,minutes:l}=decisecondsToDaysHoursMinutesObject(e);return n?n>0?`${t[y.k.Translation.Plural.NumberOfDays](n)}`:"":a?a>0?`${t[y.k.Translation.Plural.NumberOfHours](a)}`:"":l>0?`${t[y.k.Translation.Plural.NumberOfMinutes](l)}`:""}function formatDecisecondsAsClockString(e){let t=Math.floor(e/600),n=((e-600*t)/10).toFixed(1);if(0===t)return n;let a=`0${n}`.substr(-4);return`${t}:${a}`}function getLargestAndWidestTimestamps(e,{displayTimeInClockFormat:t,translations:n}){let a,l;[...e].forEach(e=>{if(!e)return;let c=(0,Q.H)(e);if(null==c)return;let{timestamp:d,width:f}=getTimestampData({displayTimeInClockFormat:t,timestamp:c,translations:n});d>=(a??0)&&(a=d);f>=(l??0)&&(l=f)});if(void 0!==a&&void 0!==l)return{largestTimestamp:a,largestWidth:l}}function getTimestampData({displayTimeInClockFormat:e,timestamp:t,translations:n}){let a={title:e?void 0:decisecondsToDaysHoursMinutesString(t,n),value:e?formatDecisecondsAsClockString(t):decisecondsToHumanReadableFormat(t,n)};return{timestamp:t,width:7*a.value.length,value:a.value}}var X=n(52929);function getBarWidth(e,t){return 90/Math.PI*Math.atan(e/((0,X.y)(t)/40)/3)}function chessboard_517b199_create_fragment(e){let t,n,a,l,c;let f=e[3].value+"";return{c(){t=internal_element("div");n=internal_text(f);attr(t,"data-move-list-el","timestamp");attr(t,"data-ply",e[2]);attr(t,"data-time",a=e[3].timestamp);attr(t,"class",l=`time-${e[1]}`);attr(t,"style",c=`
    ${d.CSSVariables.TimeValue}: ${e[3].timestamp}; 
    ${e[4]?`${d.CSSVariables.TimeBarWidth}: ${getBarWidth(Number(e[0]),e[4])}px;`:`${d.CSSVariables.TimeBarWidth}: ${e[3].width}px;`}
  `)},m(e,a){insert(e,t,a);append(t,n)},p(e,[m]){8&m&&f!==(f=e[3].value+"")&&set_data(n,f);4&m&&attr(t,"data-ply",e[2]);8&m&&a!==(a=e[3].timestamp)&&attr(t,"data-time",a);2&m&&l!==(l=`time-${e[1]}`)&&attr(t,"class",l);25&m&&c!==(c=`
    ${d.CSSVariables.TimeValue}: ${e[3].timestamp}; 
    ${e[4]?`${d.CSSVariables.TimeBarWidth}: ${getBarWidth(Number(e[0]),e[4])}px;`:`${d.CSSVariables.TimeBarWidth}: ${e[3].width}px;`}
  `)&&attr(t,"style",c)},i:noop,o:noop,d(e){e&&detach(t)}}}function chessboard_517b199_instance(e,t,n){let a,l,c,d;let{timestamp:f}=t,{color:m}=t,{ply:g}=t,{store:_}=getContext(I.V.Name),{baseTime:y,translations:b,displayTimeInClockFormat:A}=_;return component_subscribe(e,y,e=>n(4,d=e)),component_subscribe(e,b,e=>n(8,l=e)),component_subscribe(e,A,e=>n(9,c=e)),e.$$set=e=>{"timestamp"in e&&n(0,f=e.timestamp);"color"in e&&n(1,m=e.color);"ply"in e&&n(2,g=e.ply)},e.$$.update=()=>{769&e.$$.dirty&&n(3,a=getTimestampData({displayTimeInClockFormat:c,timestamp:Number(f),translations:l}))},[f,m,g,a,d,y,b,A,l,c]}class Y extends x{constructor(e){super();init(this,e,chessboard_517b199_instance,chessboard_517b199_create_fragment,safe_not_equal,{timestamp:0,color:1,ply:2})}}var J=n(78339);function chessboard_f21c7de_create_fragment(e){let t,n,a;return{c(){t=internal_element("span");n=internal_text("...");attr(t,"class",a=`main-line-ply ${e[0]}-move empty`)},m(e,a){insert(e,t,a);append(t,n)},p(e,[n]){1&n&&a!==(a=`main-line-ply ${e[0]}-move empty`)&&attr(t,"class",a)},i:noop,o:noop,d(e){e&&detach(t)}}}function chessboard_f21c7de_instance(e,t,n){let{color:a}=t;return e.$$set=e=>{"color"in e&&n(0,a=e.color)},[a]}class ee extends x{constructor(e){super();init(this,e,chessboard_f21c7de_instance,chessboard_f21c7de_create_fragment,safe_not_equal,{color:0})}}let et=ee;function chessboard_688df5d_get_each_context(e,t,n){let a=e.slice();return a[12]=t[n],a}function chessboard_688df5d_get_each_context_1(e,t,n){let a=e.slice();return a[12]=t[n],a}function chessboard_688df5d_create_if_block_2(e){let t,n;return t=new et({props:{color:"white"}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_688df5d_create_if_block_1(e){let t,n;return t=new et({props:{color:"black"}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_688df5d_create_each_block_1(e){let t,n,a,l,c,d=e[5]&&is(e[12].node.color,2),f=e[5]&&is(e[12].node.color,1)&&e[1],m=d&&chessboard_688df5d_create_if_block_2();n=new K({props:{node:e[12].node,className:"main-line-ply",staticAnnotationIconSpacing:!0}});let g=f&&chessboard_688df5d_create_if_block_1();return{c(){m&&m.c();t=space();create_component(n.$$.fragment);a=space();g&&g.c();l=empty()},m(e,d){m&&m.m(e,d);insert(e,t,d);mount_component(n,e,d);insert(e,a,d);g&&g.m(e,d);insert(e,l,d);c=!0},p(e,a){36&a&&(d=e[5]&&is(e[12].node.color,2));if(d){if(m)36&a&&transition_in(m,1);else{(m=chessboard_688df5d_create_if_block_2()).c();transition_in(m,1);m.m(t.parentNode,t)}}else if(m){group_outros();transition_out(m,1,1,()=>{m=null});check_outros()}let c={};4&a&&(c.node=e[12].node);n.$set(c);38&a&&(f=e[5]&&is(e[12].node.color,1)&&e[1]);if(f){if(g)38&a&&transition_in(g,1);else{(g=chessboard_688df5d_create_if_block_1()).c();transition_in(g,1);g.m(l.parentNode,l)}}else if(g){group_outros();transition_out(g,1,1,()=>{g=null});check_outros()}},i(e){if(!c){transition_in(m);transition_in(n.$$.fragment,e);transition_in(g);c=!0}},o(e){transition_out(m);transition_out(n.$$.fragment,e);transition_out(g);c=!1},d(e){m&&m.d(e);e&&detach(t);destroy_component(n,e);e&&detach(a);g&&g.d(e);e&&detach(l)}}}function chessboard_688df5d_create_if_block(e){let t,n;return t=new Y({props:{timestamp:(0,Q.H)(e[12].node),color:(0,B.O)(e[12].node.color),ply:e[12].node.ply}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};4&n&&(a.timestamp=(0,Q.H)(e[12].node));4&n&&(a.color=(0,B.O)(e[12].node.color));4&n&&(a.ply=e[12].node.ply);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_688df5d_create_each_block(e){let t,n,a=e[7](e[12]),l=a&&chessboard_688df5d_create_if_block(e);return{c(){l&&l.c();t=empty()},m(e,a){l&&l.m(e,a);insert(e,t,a);n=!0},p(e,n){4&n&&(a=e[7](e[12]));if(a){if(l){l.p(e,n);4&n&&transition_in(l,1)}else{(l=chessboard_688df5d_create_if_block(e)).c();transition_in(l,1);l.m(t.parentNode,t)}}else if(l){group_outros();transition_out(l,1,1,()=>{l=null});check_outros()}},i(e){if(!n){transition_in(l);n=!0}},o(e){transition_out(l);n=!1},d(e){l&&l.d(e);e&&detach(t)}}}function chessboard_688df5d_create_fragment(e){let t,n,a,l,c,d;let f=e[2].content,m=[];for(let t=0;t<f.length;t+=1)m[t]=chessboard_688df5d_create_each_block_1(chessboard_688df5d_get_each_context_1(e,f,t));let out=e=>transition_out(m[e],1,1,()=>{m[e]=null}),g=e[2].content,_=[];for(let t=0;t<g.length;t+=1)_[t]=chessboard_688df5d_create_each_block(chessboard_688df5d_get_each_context(e,g,t));let out_1=e=>transition_out(_[e],1,1,()=>{_[e]=null});return{c(){t=internal_element("div");n=internal_text(e[4]);a=internal_text(".\n\n  ");for(let e=0;e<m.length;e+=1)m[e].c();l=space();for(let e=0;e<_.length;e+=1)_[e].c();attr(t,"class",c=`main-line-row move-list-row ${e[3]}`);attr(t,"data-whole-move-number",e[4])},m(e,c){insert(e,t,c);append(t,n);append(t,a);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(t,null);append(t,l);for(let e=0;e<_.length;e+=1)_[e]&&_[e].m(t,null);d=!0},p(e,[a]){(!d||16&a)&&set_data(n,e[4]);if(38&a){let n;f=e[2].content;for(n=0;n<f.length;n+=1){let c=chessboard_688df5d_get_each_context_1(e,f,n);if(m[n]){m[n].p(c,a);transition_in(m[n],1)}else{m[n]=chessboard_688df5d_create_each_block_1(c);m[n].c();transition_in(m[n],1);m[n].m(t,l)}}group_outros();for(n=f.length;n<m.length;n+=1)out(n);check_outros()}if(132&a){let n;g=e[2].content;for(n=0;n<g.length;n+=1){let l=chessboard_688df5d_get_each_context(e,g,n);if(_[n]){_[n].p(l,a);transition_in(_[n],1)}else{_[n]=chessboard_688df5d_create_each_block(l);_[n].c();transition_in(_[n],1);_[n].m(t,null)}}group_outros();for(n=g.length;n<_.length;n+=1)out_1(n);check_outros()}(!d||8&a&&c!==(c=`main-line-row move-list-row ${e[3]}`))&&attr(t,"class",c);(!d||16&a)&&attr(t,"data-whole-move-number",e[4])},i(e){if(!d){for(let e=0;e<f.length;e+=1)transition_in(m[e]);for(let e=0;e<g.length;e+=1)transition_in(_[e]);d=!0}},o(e){m=m.filter(Boolean);for(let e=0;e<m.length;e+=1)transition_out(m[e]);_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)transition_out(_[e]);d=!1},d(e){e&&detach(t);destroy_each(m,e);destroy_each(_,e)}}}function chessboard_688df5d_instance(e,t,n){var a;let l,c,d,f;let m,g=noop,$$subscribe_moveListRow=()=>(g(),g=subscribe(_,e=>n(2,m=e)),_);e.$$.on_destroy.push(()=>g());let{moveListRow:_}=t;$$subscribe_moveListRow();let{showTimestamps:y}=t,{hasMainlineRowAfter:b}=t,{store:A}=getContext(I.V.Name),{startingMoveNumber:C}=A;component_subscribe(e,C,e=>n(10,f=e));function showTimestampForNode(e){var t,n;return y&&(null===(n=null===(t=null==e?void 0:e.node)||void 0===t?void 0:t.commands)||void 0===n?void 0:n.timestamp)!==void 0}return e.$$set=e=>{"moveListRow"in e&&$$subscribe_moveListRow(n(0,_=e.moveListRow));"showTimestamps"in e&&n(8,y=e.showTimestamps);"hasMainlineRowAfter"in e&&n(1,b=e.hasMainlineRowAfter)},e.$$.update=()=>{4&e.$$.dirty&&n(5,l=1===m.content.length);1028&e.$$.dirty&&n(4,c=(0,J.Ms)(m.content[0].node,f));516&e.$$.dirty&&n(3,d=null!==n(9,a=m.rowBgColor)&&void 0!==a?a:"light-row")},[_,b,m,d,c,l,C,showTimestampForNode,y,a,f]}class en extends x{constructor(e){super();init(this,e,chessboard_688df5d_instance,chessboard_688df5d_create_fragment,not_equal,{moveListRow:0,showTimestamps:8,hasMainlineRowAfter:1})}}function chessboard_04d8682_get_each_context(e,t,n){let a=e.slice();return a[7]=t[n],a[9]=n,a}function chessboard_04d8682_get_each_context_1(e,t,n){let a=e.slice();return a[10]=t[n],a}function create_if_block_3(e){let t,n;return t=new U({props:{comment:{node:e[7].node,comment:e[7].beforeComment,isBeforeComment:!0}}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};1&n&&(a.comment={node:e[7].node,comment:e[7].beforeComment,isBeforeComment:!0});t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_04d8682_create_if_block_2(e){let t,n,a;let l=(0,J.Ms)(e[7].node,e[2])+"",c=e[5](e[7])?".":"...";return{c(){t=internal_element("span");n=internal_text(l);a=internal_text(c);attr(t,"class",`move-number ${0===e[9]&&"start"}`)},m(e,l){insert(e,t,l);append(t,n);append(t,a)},p(e,t){5&t&&l!==(l=(0,J.Ms)(e[7].node,e[2])+"")&&set_data(n,l);1&t&&c!==(c=e[5](e[7])?".":"...")&&set_data(a,c)},d(e){e&&detach(t)}}}function chessboard_04d8682_create_if_block_1(e){let t,n;return t=new U({props:{comment:{node:e[7].node,comment:e[7].afterComment}}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};1&n&&(a.comment={node:e[7].node,comment:e[7].afterComment});t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_04d8682_create_if_block(e){let t,n;let a=e[7].inlineVariations,l=[];for(let t=0;t<a.length;t+=1)l[t]=chessboard_04d8682_create_each_block_1(chessboard_04d8682_get_each_context_1(e,a,t));let out=e=>transition_out(l[e],1,1,()=>{l[e]=null});return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=empty()},m(e,a){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,a);insert(e,t,a);n=!0},p(e,n){if(1&n){let c;a=e[7].inlineVariations;for(c=0;c<a.length;c+=1){let d=chessboard_04d8682_get_each_context_1(e,a,c);if(l[c]){l[c].p(d,n);transition_in(l[c],1)}else{l[c]=chessboard_04d8682_create_each_block_1(d);l[c].c();transition_in(l[c],1);l[c].m(t.parentNode,t)}}group_outros();for(c=a.length;c<l.length;c+=1)out(c);check_outros()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)transition_in(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)transition_out(l[e]);n=!1},d(e){destroy_each(l,e);e&&detach(t)}}}function chessboard_04d8682_create_each_block_1(e){let t,n,a,l,c,d,f,m;return l=new eo({props:{moveListNodes:e[10]}}),{c(){t=internal_element("i");(n=internal_element("span")).textContent="(";a=space();create_component(l.$$.fragment);c=space();(d=internal_element("span")).textContent=")";f=space();attr(n,"class","inline-variation-paren");attr(d,"class","inline-variation-paren")},m(e,g){insert(e,t,g);append(t,n);append(t,a);mount_component(l,t,null);append(t,c);append(t,d);append(t,f);m=!0},p(e,t){let n={};1&t&&(n.moveListNodes=e[10]);l.$set(n)},i(e){if(!m){transition_in(l.$$.fragment,e);m=!0}},o(e){transition_out(l.$$.fragment,e);m=!1},d(e){e&&detach(t);destroy_component(l)}}}function chessboard_04d8682_create_each_block(e){let t,n,a,l,c,d,f,m;let g=0===e[9]||e[5](e[7]),_=void 0!==e[7].beforeComment&&!e[1]&&create_if_block_3(e),y=g&&chessboard_04d8682_create_if_block_2(e);l=new K({props:{node:e[7].node,disableAllIcons:!0}});let b=void 0!==e[7].afterComment&&!e[1]&&chessboard_04d8682_create_if_block_1(e),A=e[7].inlineVariations&&chessboard_04d8682_create_if_block(e);return{c(){_&&_.c();t=space();n=internal_element("span");y&&y.c();a=space();create_component(l.$$.fragment);c=space();b&&b.c();d=space();A&&A.c();f=empty();attr(n,"class","inline-move")},m(e,g){_&&_.m(e,g);insert(e,t,g);insert(e,n,g);y&&y.m(n,null);append(n,a);mount_component(l,n,null);insert(e,c,g);b&&b.m(e,g);insert(e,d,g);A&&A.m(e,g);insert(e,f,g);m=!0},p(e,c){if(void 0===e[7].beforeComment||e[1]){if(_){group_outros();transition_out(_,1,1,()=>{_=null});check_outros()}}else if(_){_.p(e,c);3&c&&transition_in(_,1)}else{(_=create_if_block_3(e)).c();transition_in(_,1);_.m(t.parentNode,t)}1&c&&(g=0===e[9]||e[5](e[7]));if(g){if(y)y.p(e,c);else{(y=chessboard_04d8682_create_if_block_2(e)).c();y.m(n,a)}}else if(y){y.d(1);y=null}let m={};1&c&&(m.node=e[7].node);l.$set(m);if(void 0===e[7].afterComment||e[1]){if(b){group_outros();transition_out(b,1,1,()=>{b=null});check_outros()}}else if(b){b.p(e,c);3&c&&transition_in(b,1)}else{(b=chessboard_04d8682_create_if_block_1(e)).c();transition_in(b,1);b.m(d.parentNode,d)}if(e[7].inlineVariations){if(A){A.p(e,c);1&c&&transition_in(A,1)}else{(A=chessboard_04d8682_create_if_block(e)).c();transition_in(A,1);A.m(f.parentNode,f)}}else if(A){group_outros();transition_out(A,1,1,()=>{A=null});check_outros()}},i(e){if(!m){transition_in(_);transition_in(l.$$.fragment,e);transition_in(b);transition_in(A);m=!0}},o(e){transition_out(_);transition_out(l.$$.fragment,e);transition_out(b);transition_out(A);m=!1},d(e){_&&_.d(e);e&&detach(t);e&&detach(n);y&&y.d();destroy_component(l);e&&detach(c);b&&b.d(e);e&&detach(d);A&&A.d(e);e&&detach(f)}}}function chessboard_04d8682_create_fragment(e){let t,n;let a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=chessboard_04d8682_create_each_block(chessboard_04d8682_get_each_context(e,a,t));let out=e=>transition_out(l[e],1,1,()=>{l[e]=null});return{c(){t=internal_element("span");for(let e=0;e<l.length;e+=1)l[e].c();attr(t,"class","variation-line")},m(e,a){insert(e,t,a);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null);n=!0},p(e,[n]){if(39&n){let c;a=e[0];for(c=0;c<a.length;c+=1){let d=chessboard_04d8682_get_each_context(e,a,c);if(l[c]){l[c].p(d,n);transition_in(l[c],1)}else{l[c]=chessboard_04d8682_create_each_block(d);l[c].c();transition_in(l[c],1);l[c].m(t,null)}}group_outros();for(c=a.length;c<l.length;c+=1)out(c);check_outros()}},i(e){if(!n){for(let e=0;e<a.length;e+=1)transition_in(l[e]);n=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)transition_out(l[e]);n=!1},d(e){e&&detach(t);destroy_each(l,e)}}}function chessboard_04d8682_instance(e,t,n){let a,l;let{moveListNodes:c}=t,{store:d}=getContext(I.V.Name),{commentsHidden:f,startingMoveNumber:m}=d;component_subscribe(e,f,e=>n(1,a=e));component_subscribe(e,m,e=>n(2,l=e));function isWhite(e){return e.node.color===O.Z.ColorsAsNumbers.White}return e.$$set=e=>{"moveListNodes"in e&&n(0,c=e.moveListNodes)},[c,a,l,f,m,isWhite]}class eo extends x{constructor(e){super();init(this,e,chessboard_04d8682_instance,chessboard_04d8682_create_fragment,safe_not_equal,{moveListNodes:0})}}function chessboard_d68d9f8_get_each_context(e,t,n){let a=e.slice();return a[8]=t[n].trimTop,a[9]=t[n].trimBottom,a}function chessboard_d68d9f8_create_each_block(e){let t;return{c(){attr(t=internal_element("div"),"class","vertical-line");toggle_class(t,"trim-top",e[8]);toggle_class(t,"trim-bottom",e[9])},m(e,n){insert(e,t,n)},p(e,n){8&n&&toggle_class(t,"trim-top",e[8]);8&n&&toggle_class(t,"trim-bottom",e[9])},d(e){e&&detach(t)}}}function chessboard_d68d9f8_create_fragment(e){let t,n,a,l,c,d,f;let m=e[3],g=[];for(let t=0;t<m.length;t+=1)g[t]=chessboard_d68d9f8_create_each_block(chessboard_d68d9f8_get_each_context(e,m,t));return c=new eo({props:{moveListNodes:e[2].content}}),{c(){t=internal_element("div");n=internal_element("div");for(let e=0;e<g.length;e+=1)g[e].c();a=space();l=internal_element("div");create_component(c.$$.fragment);attr(n,"class","variation-row-indent");attr(l,"class","variation-content");attr(t,"class",d=`variation-row move-list-row ${e[4]}`)},m(e,d){insert(e,t,d);append(t,n);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(n,null);append(t,a);append(t,l);mount_component(c,l,null);f=!0},p(e,[a]){if(8&a){let t;m=e[3];for(t=0;t<m.length;t+=1){let l=chessboard_d68d9f8_get_each_context(e,m,t);if(g[t])g[t].p(l,a);else{g[t]=chessboard_d68d9f8_create_each_block(l);g[t].c();g[t].m(n,null)}}for(;t<g.length;t+=1)g[t].d(1);g.length=m.length}let l={};4&a&&(l.moveListNodes=e[2].content);c.$set(l);(!f||16&a&&d!==(d=`variation-row move-list-row ${e[4]}`))&&attr(t,"class",d)},i(e){if(!f){transition_in(c.$$.fragment,e);f=!0}},o(e){transition_out(c.$$.fragment,e);f=!1},d(e){e&&detach(t);destroy_each(g,e);destroy_component(c)}}}function shouldTrimIndentTop(e,t){return e===t}function shouldTrimIndentBottom(e,t,n){return n<=t&&e>=n}function getIndentations(e,t){let n=[];for(let a=0;a<e;a++)n.push({trimTop:shouldTrimIndentTop(a+1,e),trimBottom:shouldTrimIndentBottom(a+1,e,t)});return n}function chessboard_d68d9f8_instance(e,t,n){var a,l;let c,d;let f,m=noop,$$subscribe_nextMoveListRow=()=>(m(),m=subscribe(b,e=>n(7,f=e)),b),g,_=noop,$$subscribe_moveListRow=()=>(_(),_=subscribe(y,e=>n(2,g=e)),y);e.$$.on_destroy.push(()=>m());e.$$.on_destroy.push(()=>_());let{moveListRow:y}=t;$$subscribe_moveListRow();let{nextMoveListRow:b}=t;return $$subscribe_nextMoveListRow(),e.$$set=e=>{"moveListRow"in e&&$$subscribe_moveListRow(n(0,y=e.moveListRow));"nextMoveListRow"in e&&$$subscribe_nextMoveListRow(n(1,b=e.nextMoveListRow))},e.$$.update=()=>{36&e.$$.dirty&&n(4,c=null!==n(5,a=g.rowBgColor)&&void 0!==a?a:"light-row");196&e.$$.dirty&&n(3,d=getIndentations(g.depth,null!==n(6,l=null==f?void 0:f.depth)&&void 0!==l?l:0))},[y,b,g,d,c,a,l,f]}class er extends x{constructor(e){super();init(this,e,chessboard_d68d9f8_instance,chessboard_d68d9f8_create_fragment,not_equal,{moveListRow:0,nextMoveListRow:1})}}function getMoveNodeEl(e,t,n){return(null==e?void 0:e.querySelector(`.node[data-node="${t}-${n}"]`))??void 0}function chessboard_d101c0c_get_each_context(e,t,n){let a=e.slice();return a[43]=t[n],a[45]=n,a}function create_if_block_6(e){let t,n,a,l,c;let d=[create_if_block_7,chessboard_d101c0c_create_else_block],f=[];function select_block_type_1(e,n){return(8&n[0]&&(t=null),null==t&&(t=!(0!==e[43].get().depth)),t)?0:1}return a=f[n=select_block_type_1(e,[-1,-1])]=d[n](e),{c(){a.c();l=empty()},m(e,t){f[n].m(e,t);insert(e,l,t);c=!0},p(e,t){let c=n;n=select_block_type_1(e,t);if(n===c)f[n].p(e,t);else{group_outros();transition_out(f[c],1,1,()=>{f[c]=null});check_outros();(a=f[n])?a.p(e,t):(a=f[n]=d[n](e)).c();transition_in(a,1);a.m(l.parentNode,l)}},i(e){if(!c){transition_in(a);c=!0}},o(e){transition_out(a);c=!1},d(e){f[n].d(e);e&&detach(l)}}}function create_if_block_4(e){let t,n;let a=!e[10]&&create_if_block_5(e);return{c(){a&&a.c();t=empty()},m(e,l){a&&a.m(e,l);insert(e,t,l);n=!0},p(e,n){if(e[10]){if(a){group_outros();transition_out(a,1,1,()=>{a=null});check_outros()}}else if(a){a.p(e,n);1024&n[0]&&transition_in(a,1)}else{(a=create_if_block_5(e)).c();transition_in(a,1);a.m(t.parentNode,t)}},i(e){if(!n){transition_in(a);n=!0}},o(e){transition_out(a);n=!1},d(e){a&&a.d(e);e&&detach(t)}}}function chessboard_d101c0c_create_else_block(e){let t,n;return t=new er({props:{moveListRow:e[43],nextMoveListRow:e[3][e[45]+1]}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};8&n[0]&&(a.moveListRow=e[43]);8&n[0]&&(a.nextMoveListRow=e[3][e[45]+1]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function create_if_block_7(e){let t,n;return t=new en({props:{moveListRow:e[43],showTimestamps:e[1],hasMainlineRowAfter:e[5]>e[45]}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};8&n[0]&&(a.moveListRow=e[43]);2&n[0]&&(a.showTimestamps=e[1]);40&n[0]&&(a.hasMainlineRowAfter=e[5]>e[45]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function create_if_block_5(e){let t,n;return t=new W({props:{moveListRow:e[43]}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};8&n[0]&&(a.moveListRow=e[43]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_d101c0c_create_each_block(e,t){let n,a,l,c,d,f,m;let g=[create_if_block_4,create_if_block_6],_=[];function select_block_type(e,t){return(8&t[0]&&(a=null),8&t[0]&&(l=null),null==a&&(a=!!isDataCommentRow(e[43])),a)?0:(null==l&&(l=!!isDataMovesRow(e[43])),l)?1:-1}return~(c=select_block_type(t,[-1,-1]))&&(d=_[c]=g[c](t)),{key:e,first:null,c(){n=empty();d&&d.c();f=empty();this.first=n},m(e,t){insert(e,n,t);~c&&_[c].m(e,t);insert(e,f,t);m=!0},p(e,n){let a=c;c=select_block_type(t=e,n);if(c===a)~c&&_[c].p(t,n);else{if(d){group_outros();transition_out(_[a],1,1,()=>{_[a]=null});check_outros()}if(~c){(d=_[c])?d.p(t,n):(d=_[c]=g[c](t)).c();transition_in(d,1);d.m(f.parentNode,f)}else d=null}},i(e){if(!m){transition_in(d);m=!0}},o(e){transition_out(d);m=!1},d(e){e&&detach(n);~c&&_[c].d(e);e&&detach(f)}}}function chessboard_d101c0c_create_if_block_2(e){let t,n,a,l,c;let d=e[6]&&chessboard_d101c0c_create_if_block_3(e);return{c(){t=internal_element("div");n=internal_element("span");a=internal_text(e[11]);l=space();d&&d.c();attr(n,"class","game-result");attr(t,"class","main-line-row move-list-row result-row")},m(e,f){insert(e,t,f);append(t,n);append(n,a);append(n,l);d&&d.m(n,null);c=!0},p(e,t){(!c||2048&t[0])&&set_data(a,e[11]);if(e[6]){if(d){d.p(e,t);64&t[0]&&transition_in(d,1)}else{(d=chessboard_d101c0c_create_if_block_3(e)).c();transition_in(d,1);d.m(n,null)}}else if(d){group_outros();transition_out(d,1,1,()=>{d=null});check_outros()}},i(e){if(!c){transition_in(d);c=!0}},o(e){transition_out(d);c=!1},d(e){e&&detach(t);d&&d.d()}}}function chessboard_d101c0c_create_if_block_3(e){let t,n;let a=[e[6]],l={};for(let e=0;e<a.length;e+=1)l=internal_assign(l,a[e]);return t=new $({props:l}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let l=64&n[0]?get_spread_update(a,[get_spread_object(e[6])]):{};t.$set(l)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_d101c0c_create_if_block_1(e){let t,n;return t=new F({props:{menuProps:e[23],selectedNodeKeys:e[16],selectedNodeRect:e[13].getBoundingClientRect(),game:e[2]}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};8192&n[0]&&(a.selectedNodeRect=e[13].getBoundingClientRect());4&n[0]&&(a.game=e[2]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_d101c0c_create_if_block(e){let t,n;return t=new H({props:{variationPopover:e[24],selectedNodeRect:e[13].getBoundingClientRect(),eventHandlers:e[0],textType:e[18]}}),{c(){create_component(t.$$.fragment)},m(e,a){mount_component(t,e,a);n=!0},p(e,n){let a={};8192&n[0]&&(a.selectedNodeRect=e[13].getBoundingClientRect());1&n[0]&&(a.eventHandlers=e[0]);t.$set(a)},i(e){if(!n){transition_in(t.$$.fragment,e);n=!0}},o(e){transition_out(t.$$.fragment,e);n=!1},d(e){destroy_component(t,e)}}}function chessboard_d101c0c_create_fragment(e){let t,n,a,l,c,f,m;let g=[],_=new Map,y=e[3],get_key=e=>e[43].get().renderKey;for(let t=0;t<y.length;t+=1){let n=chessboard_d101c0c_get_each_context(e,y,t),a=get_key(n);_.set(a,g[t]=chessboard_d101c0c_create_each_block(a,n))}let b=e[11]&&chessboard_d101c0c_create_if_block_2(e),A=e[12].isOpen&&e[12].enabled&&e[13]&&chessboard_d101c0c_create_if_block_1(e),C=e[14].isOpen&&e[13]&&chessboard_d101c0c_create_if_block(e);return{c(){t=internal_element("div");for(let e=0;e<g.length;e+=1)g[e].c();n=space();b&&b.c();l=space();A&&A.c();c=space();C&&C.c();f=empty();attr(t,"style",a=`
    ${d.CSSVariables.MaxMoveTimeTaken}: ${e[8]}; 
    ${d.CSSVariables.TimestampWidth}: ${e[9]}px`);toggle_class(t,"timestamps-with-base-time",void 0!==e[7]);toggle_class(t,"toggle-timestamps",e[4])},m(e,a){insert(e,t,a);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(t,null);append(t,n);b&&b.m(t,null);insert(e,l,a);A&&A.m(e,a);insert(e,c,a);C&&C.m(e,a);insert(e,f,a);m=!0},p(e,l){if(1066&l[0]){y=e[3];group_outros();g=update_keyed_each(g,l,get_key,1,e,y,_,t,outro_and_destroy_block,chessboard_d101c0c_create_each_block,n,chessboard_d101c0c_get_each_context);check_outros()}if(e[11]){if(b){b.p(e,l);2048&l[0]&&transition_in(b,1)}else{(b=chessboard_d101c0c_create_if_block_2(e)).c();transition_in(b,1);b.m(t,null)}}else if(b){group_outros();transition_out(b,1,1,()=>{b=null});check_outros()}(!m||768&l[0]&&a!==(a=`
    ${d.CSSVariables.MaxMoveTimeTaken}: ${e[8]}; 
    ${d.CSSVariables.TimestampWidth}: ${e[9]}px`))&&attr(t,"style",a);(!m||128&l[0])&&toggle_class(t,"timestamps-with-base-time",void 0!==e[7]);(!m||16&l[0])&&toggle_class(t,"toggle-timestamps",e[4]);if(e[12].isOpen&&e[12].enabled&&e[13]){if(A){A.p(e,l);12288&l[0]&&transition_in(A,1)}else{(A=chessboard_d101c0c_create_if_block_1(e)).c();transition_in(A,1);A.m(c.parentNode,c)}}else if(A){group_outros();transition_out(A,1,1,()=>{A=null});check_outros()}if(e[14].isOpen&&e[13]){if(C){C.p(e,l);24576&l[0]&&transition_in(C,1)}else{(C=chessboard_d101c0c_create_if_block(e)).c();transition_in(C,1);C.m(f.parentNode,f)}}else if(C){group_outros();transition_out(C,1,1,()=>{C=null});check_outros()}},i(e){if(!m){for(let e=0;e<y.length;e+=1)transition_in(g[e]);transition_in(b);transition_in(A);transition_in(C);m=!0}},o(e){for(let e=0;e<g.length;e+=1)transition_out(g[e]);transition_out(b);transition_out(A);transition_out(C);m=!1},d(e){e&&detach(t);for(let e=0;e<g.length;e+=1)g[e].d();b&&b.d();e&&detach(l);A&&A.d(e);e&&detach(c);C&&C.d(e);e&&detach(f)}}}function chessboard_d101c0c_instance(e,t,n){let a,l,c,d,f,m,g,_,y,b,A,C,w,k,S,T,M;let{data:P}=t,{eventHandlers:L}=t,{hideTimestampText:N}=t,{showTimestamps:x}=t,{game:O}=t,{moveListRows:R,selectedNodeKeys:B,selectedNodeEl:V,textType:H,result:D,maxTimestampWidth:F,largestTimestamp:$,baseTime:U,contextMenu:W,variationPopover:j,gameMetadata:G,commentsHidden:q,translations:Z,scrollContainer:z,moveListEl:K,finishedInitialLoad:Q}=P;component_subscribe(e,R,e=>n(3,f=e));component_subscribe(e,V,e=>n(13,T=e));component_subscribe(e,D,e=>n(11,k=e));component_subscribe(e,F,e=>n(9,C=e));component_subscribe(e,$,e=>n(8,A=e));component_subscribe(e,U,e=>n(7,b=e));component_subscribe(e,W,e=>n(12,S=e));component_subscribe(e,j,e=>n(14,M=e));component_subscribe(e,G,e=>n(34,_=e));component_subscribe(e,q,e=>n(10,w=e));component_subscribe(e,Z,e=>n(35,y=e));component_subscribe(e,z,e=>n(33,g=e));component_subscribe(e,K,e=>n(32,m=e));setContext(I.V.Name,{store:P,eventHandlers:L,game:O});let X=new ResizeObserver(handleContainerResize);onMount(()=>{X.observe(l);l.addEventListener("scroll",handleScrollOrResize);window.addEventListener("scroll",handleScrollOrResize);let e=Q.subscribe(reinitializeScroll);return()=>{X.disconnect();l.removeEventListener("scroll",handleScrollOrResize);window.removeEventListener("scroll",handleScrollOrResize);e()}});function handleContainerResize(e){handleScrollOrResize();void 0===N&&(e[0].contentRect.width<305+F.get()?n(4,d=!0):n(4,d=!1))}function handleScrollOrResize(){let e=j.get();e.isOpen&&j.set(Object.assign(Object.assign({},e),{isOpen:!1}));let t=W.get();t.isOpen&&W.set(Object.assign(Object.assign({},t),{isOpen:!1}))}function reinitializeScroll(e){if(e)return;let t=P.selectedNodeKeys.get();if(!t)return;let n=getMoveNodeEl(P.moveListEl.get(),t.ids.line,t.ids.move);if(n){L.scrollToMoveNode(n,{scrollToTop:!0});Q.set(!0)}}function getLastMainlineRowIndex(e){for(let t=e.length-1;t>=0;t--){let n=e[t].get();if(isMovesRow(n)&&0===n.depth)return t}return -1}return e.$$set=e=>{"data"in e&&n(30,P=e.data);"eventHandlers"in e&&n(0,L=e.eventHandlers);"hideTimestampText"in e&&n(31,N=e.hideTimestampText);"showTimestamps"in e&&n(1,x=e.showTimestamps);"game"in e&&n(2,O=e.game)},e.$$.update=()=>{24&e.$$.dirty[1]&&n(6,a=getResultTooltipProps({translations:y,gameMetadata:_}));6&e.$$.dirty[1]&&(l=null!=g?g:m);8&e.$$.dirty[0]&&n(5,c=getLastMainlineRowIndex(f));1&e.$$.dirty[1]&&n(4,d=N)},[L,x,O,f,d,c,a,b,A,C,w,k,S,T,M,R,B,V,H,D,F,$,U,W,j,G,q,Z,z,K,P,N,m,g,_,y]}class ei extends x{constructor(e){super();init(this,e,chessboard_d101c0c_instance,chessboard_d101c0c_create_fragment,safe_not_equal,{data:30,eventHandlers:0,hideTimestampText:31,showTimestamps:1,game:2},null,[-1,-1])}}var ea=(e=>(e.NodeSelected="nodeSelected",e.NoNodeSelected="noNodeSelected",e))(ea||{}),es=(e=>(e.LOAD_LINE="LOAD_LINE",e.SELECT_NODE="SELECT_NODE",e.DESELECT_NODE="DESELECT_NODE",e))(es||{}),el=n(17229);let{createStateMachine:eu}=el.jd;function createMachineService(e){let t=eu(e);return Object.assign({},t,{send:(e,n)=>{t.transition(e,n);t.emit("action",{type:e,value:n,nextState:t.getCurrentState()})},onTransition:e=>t.on("action",e)})}function createMoveListStateMachine(e){let t=createMachineService(getStateMachine(e));return t.onTransition(t=>[renderHandler].forEach(n=>n(t,e))),t}function renderHandler({type:e,value:t,nextState:n},a){var l;let c=a.data.currentState.get(),{setMoveListRows:d,selectNode:f,setResult:m,setState:g,setGameMetadataFromGameInfo:_,setContextMenu:y,setVariationPopover:b,setStartingMoveNumber:A}=a.actions;c!==n&&g(n);let C={[es.LOAD_LINE]:({lines:e,result:t,node:n})=>{let{updatedLayout:l}=f(n,{lines:e});l||d(e);m(t);A(a.game.getStartingMoveNumber());_(a.game);y({isOpen:!1});b({isOpen:!1})},[es.SELECT_NODE]:({node:e,disableScrollIfScrolledUp:t})=>{f(e,{disableScrollIfScrolledUp:t});y({isOpen:!1});b({isOpen:!1})},[es.DESELECT_NODE]:()=>{f(null)}};null==(l=C[e])||l.call(C,t,n)}function getStateMachine({game:e,data:t}){return{initialState:ea.NoNodeSelected,states:{[ea.NoNodeSelected]:{SELECT_NODE:()=>ea.NodeSelected,LOAD_LINE:()=>ea.NodeSelected},[ea.NodeSelected]:{SELECT_NODE:()=>ea.NodeSelected,DESELECT_NODE:()=>ea.NoNodeSelected,LOAD_LINE:()=>ea.NodeSelected}}}}let ec=[];function writable(e,t=noop){let n;let a=new Set;function set(t){if(safe_not_equal(e,t)){e=t;if(n){let t=!ec.length;for(let t of a){t[1]();ec.push(t,e)}if(t){for(let e=0;e<ec.length;e+=2)ec[e][0](ec[e+1]);ec.length=0}}}}function update(t){set(t(e))}function subscribe(l,c=noop){let d=[l,c];return a.add(d),1===a.size&&(n=t(set)||noop),l(e),()=>{a.delete(d);if(0===a.size&&n){n();n=null}}}return{set,update,subscribe}}function data(e){let t=e,n=writable(t);function get(){return t}return{set:function set(e){return n.set(t=e)},update:function update(e){n.update(n=>t=e(n))},subscribe:n.subscribe,get}}var ed=n(98845),ef=n(10269);function findThreefoldRepetitions(e){if(!e)return null;let t=findThreefoldIndexes(e.map(({fen:e})=>ef.A.shortenFen(e,3)));return 3===t.length?t:null}function findThreefoldIndexes(e){let t=[];for(let n=e.length-1;n>=0;n--){e[n]===e[e.length-1]&&t.push(n);if(3===t.length)break}return t}function getCommentsForNode(e,t,n){if(n)return{};let a={};return 0===e.ids.move&&void 0!==t&&(a.beforeComment=t),void 0!==e.comment&&(a.afterComment=e.comment),a}function nodeHasMultipleOrNestedVariations(e,t){return!!e.lines&&0!==e.lines.length&&(e.lines.length>=2||lineHasVariations(t[e.lines[0]]))}function lineHasVariations(e){return e.some(e=>e.lines&&e.lines.length>0)}function nodeIsFirstInLineAndHasVariations(e){return!!(e&&0===e.ids.move&&e.lines&&e.lines.length>0)}function nodeHasChildrenRenderedAsSiblings(e,t){return nodeIsFirstInLineAndHasVariations(e)||nodeHasMultipleOrNestedVariations(e,t)}function getLineWithVariationsInlined(e,t,n={}){let a=[];return e.forEach((e,l)=>{let{beforeComment:c,afterComment:d}=getCommentsForNode(e,n.initComment,n.ignoreComments),f={node:e,beforeComment:c,afterComment:d},m=0===l&&n.ignoreFirstNodeVariations;if(e.lines&&!m){f.inlineVariations=[];e.lines.forEach(e=>{var a;let l=getLineWithVariationsInlined(t[e],t,{initComment:t[e].initComment,ignoreComments:n.ignoreComments});null==(a=f.inlineVariations)||a.push(l)})}a.push(f)}),a}function getRowRenderKey({content:e,depth:t},n={}){let a;if(isMovesRowContent(e))a=`moves-${t}-${getNodeRenderKey(e[0].node)}`;else if(isCommentRowContent(e)){let{node:n,isBeforeComment:l}=e,c=n?getNodeRenderKey(n):`(line-${e.lineNumber??"UNKNOWN"})`;a=`${l?"before":"after"}Comment-${t}-${c}`}else a=`unknownContent-${JSON.stringify(e)}`;return getDedupedRenderKey(a,n)}function getNodeRenderKey({hash:e,san:t,moveNumber:n}){return`(node-${n}-${t}-[${e.toString()}])`}function getDedupedRenderKey(e,t){return(t[e]=(t[e]??0)+1,(t[e]??0)>1)?`${t[e]}-${e}`:e}function moveListToFlatTree(e,{ignoreComments:t,ignoreVariations:n}={}){let a=[],l={},appendRow=e=>{a.push({...e,renderKey:getRowRenderKey(e,l)})},c=e[0],d=[];return void 0===c.initComment||t||appendRow({content:{comment:c.initComment,node:c[0]??null,lineNumber:0,isBeforeComment:!0},depth:0}),c.forEach(a=>{d.push({node:a});if(void 0===a.comment||t){if(a.color===O.Z.ColorsAsNumbers.Black){appendRow({content:d,depth:0});d=[]}}else{appendRow({content:d,depth:0});appendRow({content:{comment:a.comment,node:a},depth:0});d=[]}if(!(!a.lines||shouldIgnoreVariations(a.ids,n))){if(d.length>0){appendRow({content:d,depth:0});d=[]}a.lines.forEach(n=>{appendVariationRows(e[n],1,appendRow,e,{initComment:e[n].initComment,ignoreComments:t})})}}),d.length>0&&appendRow({content:d,depth:0}),getRowsWithColors(a).map(e=>data(e))}function getRowsWithColors(e){let t;return e.map(e=>(isMovesRow(e)&&0===e.depth&&(t="light-row"===t?"dark-row":"light-row"),{...e,rowBgColor:t??"light-row"}))}function appendVariationRows(e,t,n,a,l={}){if(t>=8){n({content:getLineWithVariationsInlined(e,a,l),depth:t});return}if(nodeIsFirstInLineAndHasVariations(e[0])&&!l.ignoreFirstNodeVariations){appendSubVariationsAsSiblings(e,t,n,a,{ignoreComments:l.ignoreComments});return}let c=[];for(let d=0;d<e.length;d++){let f=e[d];if(0!==d&&f.lines){if(f.lines){if(nodeHasMultipleOrNestedVariations(f,a)){if(c.length>0){n({content:c,depth:t});c=[]}appendSubVariationsAsSiblings(e.slice(d),t+1,n,a,{ignoreComments:l.ignoreComments});break}let m=a[f.lines[0]],g=getLineWithVariationsInlined(m,a,{ignoreComments:l.ignoreComments,initComment:m.initComment}),{beforeComment:_,afterComment:y}=getCommentsForNode(f,l.initComment,l.ignoreComments);c.push({node:f,inlineVariations:[g],beforeComment:_,afterComment:y})}}else{let{beforeComment:e,afterComment:t}=getCommentsForNode(f,l.initComment,l.ignoreComments);c.push({node:f,beforeComment:e,afterComment:t})}}c.length>0&&n({content:c,depth:t})}function appendSubVariationsAsSiblings(e,t,n,a,{ignoreComments:l}={}){var c,d;appendVariationRows(e,t,n,a,{ignoreFirstNodeVariations:!0,ignoreComments:l});null==(d=null==(c=e[0])?void 0:c.lines)||d.forEach(e=>{appendVariationRows(a[e],t,n,a,{initComment:a[e].initComment,ignoreComments:l})})}function shouldIgnoreVariations(e,t){return!0===t||"object"==typeof t&&(t.line!==e.line||t.move!==e.move)}var ep=n(22367);function addMainLineNodeToRows(e,t){let n,a;let l=t.get();for(let t=l.length-1;t>=0;t--){let c=l[t].get();if(isMovesRow(c)&&0===c.depth){if(c.content.find(t=>(0,ep.M)(e,t.node)))return;if(!n){n=c;a=t}if(c.content[0].node.ids.move<e.ids.move)break}}let c=a===l.length-1;e.color===O.Z.ColorsAsNumbers.Black&&void 0!==n&&void 0!==a&&c?l[a].set({...n,content:[...n.content,{node:e}]}):t.update(t=>{let a={depth:0,content:[{node:e}],rowBgColor:(null==n?void 0:n.rowBgColor)==="light-row"?"dark-row":"light-row"};return t.push(data({...a,renderKey:getRowRenderKey(a)})),t})}function scrollToNode({containerEl:e,moveListEl:t,nodeEl:n,position:a="center",onlyIfOutside:l=!1}){if(!t||!n)return;let c=e||t,d=c.getBoundingClientRect(),f=n.getBoundingClientRect();if(!l||!(d.top<=f.top)||!(d.bottom>=f.bottom))switch(a){case"nearest-edge":scrollNodeToNearestEdge();break;case"top":scrollNodeToTop();break;case"bottom":scrollNodeToBottom();break;default:scrollNodeToCenter()}function scrollNodeToCenter(){let e=(d.bottom-d.top)/2,t=d.top-f.top+e;c.scrollTop-=t}function scrollNodeToNearestEdge(){f.top-d.top<d.bottom-f.bottom?scrollNodeToTop():scrollNodeToBottom()}function scrollNodeToTop(){c.scrollTop-=d.top-f.top}function scrollNodeToBottom(){c.scrollTop+=f.bottom-d.bottom}}function isMoveListScrolledUp(e){return e.scrollHeight-e.scrollTop-e.clientHeight>=30}async function handleSelectedNodeChangeDOMUpdates(e,t={}){let n=e.moveListEl.get(),a=e.scrollContainer.get(),l=isMoveListScrolledUp(a??n);await tick();let c=e.selectedNodeKeys.get(),d=e.selectedNodeEl.get();null==d||d.classList.remove("selected");if(!c||!n){e.selectedNodeEl.set(null);return}let f=getMoveNodeEl(n,c.ids.line,c.ids.move),m=null==f?void 0:f.querySelector(".node-highlight-content");if(!m||!f){e.selectedNodeEl.set(null);return}let g=e.finishedInitialLoad.get();t.disableScrollIfScrolledUp&&l||scrollToMoveNode(f,n,a,{scrollToTop:!g});g||e.finishedInitialLoad.set(!0);m.classList.add("selected");e.selectedNodeEl.set(m)}function scrollToMoveNode(e,t,n,a={}){e&&scrollToNode({nodeEl:e,moveListEl:t,containerEl:n,position:a.scrollToTop?"top":"nearest-edge",onlyIfOutside:!a.scrollToTop})}function createStore(e,{textType:t,baseTime:n,menuEnabled:a,moveListEl:l,scrollContainer:c,translations:f,customColorsEnabled:m,displayTimeInClockFormat:g,classificationStyle:_}){let y={startingMoveNumber:data(1),moveListRows:data([]),currentState:data(ea.NoNodeSelected),selectedNodeKeys:data(null),selectedNodeEl:data(null),result:data(null),maxTimestampWidth:data(0),largestTimestamp:data(0),nodeLimits:data({enabled:!1,begin:null,focus:null,end:null}),contextMenu:data({enabled:a,isOpen:!1,actions:{}}),variationPopover:data({isOpen:!1,entries:[],selectedIndex:null}),gameMetadata:data({threefoldIndexes:null,resultPositionInfo:null}),moveListEl:data(l),scrollContainer:data(c),finishedInitialLoad:data(!1),classificationStyle:data(_),textType:data(t),baseTime:data(n),displayTimeInClockFormat:data(g),annotationsHidden:data(!1),variationVisibility:data(d.VariationVisibility.All),commentsHidden:data(!1),isActive:data(!0),commentsEditable:data(!0),customColorsEnabled:data(m),translations:data(f),nodeEffectOverrides:data({})};return{data:y,actions:createActions(e,y)}}function createActions(e,t){let{moveListRows:n,currentState:a,selectedNodeKeys:l,selectedNodeEl:c,textType:f,baseTime:m,result:g,contextMenu:_,variationPopover:b,annotationsHidden:A,commentsHidden:C,variationVisibility:w,maxTimestampWidth:k,largestTimestamp:S,gameMetadata:T,isActive:M,commentsEditable:P,translations:L,nodeLimits:N,customColorsEnabled:x,startingMoveNumber:O,displayTimeInClockFormat:I,nodeEffectOverrides:R}=t;function setMoveListRows(e){var t;let a;switch(w.get()){case d.VariationVisibility.None:a=!0;break;case d.VariationVisibility.Active:a=(0,ed.P)(null==(t=l.get())?void 0:t.ids,e)??!0;break;case d.VariationVisibility.All:default:a=!1}n.set(moveListToFlatTree(e,{ignoreComments:C.get(),ignoreVariations:a}));refreshTimestamps(e[0])}function refreshTimestamps(e){let t=getLargestAndWidestTimestamps(e,{displayTimeInClockFormat:I.get(),translations:L.get()})??{largestTimestamp:0,largestWidth:0};setLargestTimestamp(t.largestTimestamp);setMaxTimestampWidth(t.largestWidth)}function setLargestTimestamp(e){S.set(e)}function setMaxTimestampWidth(e){k.set(e)}function selectNode(n,a={}){let c;let f=l.get(),m=n?{ids:n.ids,hash:n.hash}:null;l.set(m);if(w.get()!==d.VariationVisibility.Active)c={updatedLayout:!1,selectedNodeKeys:m};else{let t=a.lines??e.getRawLines(),n=shouldSelectedNodeChangeUpdateLayout(t,m,f);n&&setMoveListRows(t);c={updatedLayout:n,selectedNodeKeys:m}}return handleSelectedNodeChangeDOMUpdates(t,{disableScrollIfScrolledUp:a.disableScrollIfScrolledUp}),c}return{setTextType:function setTextType(e){f.set(e)},setState:function setState(e){a.set(e)},setMoveListRows,selectNode,setSelectedNodeEl:function setSelectedNodeEl(e){c.set(e)},setResult:function setResult(e){g.set("*"===e?null:e)},setContextMenu:function setContextMenu(e){_.set({..._.get(),...e})},setVariationPopover:function setVariationPopover(t){var n;let a=b.get(),l=e.getSelectedNode(),c=e.getRawLines();if(t.isOpen&&l){let{line:e,move:t}=(null==l?void 0:l.ids)||{},d=c[e][t+1],f=(null==(n=null==d?void 0:d.lines)?void 0:n.map(e=>{var t;let n=c[e],a=n[0],l=a.isContinuation?(null==(t=n[1])?void 0:t.san)??"...":void 0;return{move:a,trailingSan:l}}))??[];a.entries=[{move:d},...f];a.selectedIndex=0}b.set({...a,...t})},selectPopoverMove:function selectPopoverMove(e){let t=b.get();b.set({...t,selectedIndex:e})},setBaseTime:function setBaseTime(e){m.set(e)},setAnnotationsHidden:function setAnnotationsHidden(e){A.set(e)},setCommentsHidden:function setCommentsHidden(e){C.set(e)},setVariationVisibility:function setVariationVisibility(e){w.set(e)},addContextMenuActions:function addContextMenuActions(e){let t=(Array.isArray(e)?e:[e]).reduce((e,t)=>({...e,[t.action]:t}),{}),n=_.get();_.set({...n,actions:{...n.actions,...t}})},removeContextMenuActions:function removeContextMenuActions(e){let t=Array.isArray(e)?e:[e],n=_.get(),a=n.actions??{},l=Object.keys(a).filter(e=>!t.includes(e)).reduce((e,t)=>(e[t]=a[t],e),{});_.set({...n,actions:{...l}})},setGameMetadata:function setGameMetadata(e){T.set(e)},setGameMetadataFromGameInfo:function setGameMetadataFromGameInfo(e){var t,n;let a={threefoldIndexes:null,resultPositionInfo:null},{TimeoutVsInsufficientMaterial:l,DrawByAgreement:c}=y.k.Translation.GameTerminationMessages,d=L.get();if(g.get()){let f=e.getLine(0);a.threefoldIndexes=findThreefoldRepetitions(f);a.resultPositionInfo=e.getFinalPositionInfo({timeoutVsInsufficientMaterial:null==(t=d[l])?void 0:t.call(d),drawByAgreement:null==(n=d[c])?void 0:n.call(d)})||null}T.set(a)},setResultPositionInfo:function setResultPositionInfo(e){T.update(t=>({...t,resultPositionInfo:e}))},setThreefoldIndexes:function setThreefoldIndexes(e){T.update(t=>({...t,threefoldIndexes:e}))},setActiveStatus:function setActiveStatus(e){M.set(e)},setNodeLimits:function setNodeLimits(e){N.set({...N.get(),...e})},setCommentsEditable:function setCommentsEditable(e){P.set(e)},enableNodeLimits:function enableNodeLimits(){N.set({...N.get(),enabled:!0})},setCustomColorsEnabled:function setCustomColorsEnabled(e){x.set(e)},addMainLineNode:function addMainLineNode(e){addMainLineNodeToRows(e,n)},setStartingMoveNumber:function setStartingMoveNumber(e){e!==O.get()&&O.set(e)},setDisplayTimeInClockFormat:function setDisplayTimeInClockFormat(e,t){I.set(e);refreshTimestamps(t)},refreshNode:function refreshNode(e){if(0===e.ids.line){let t=(0,Q.H)(e);if(null!==t){t>S.get()&&setLargestTimestamp(t);let{width:e}=getTimestampData({timestamp:t,translations:L.get(),displayTimeInClockFormat:I.get()});e>k.get()&&setMaxTimestampWidth(e)}}n.get().forEach(t=>{let n=t.get();isMovesRow(n)?(0,J.ER)(e,n.content)&&t.set({...n,content:(0,J.Q4)(e,n.content)}):isCommentRow(n)&&(0,ep.M)(e,n.content.node)&&t.set({...n,content:{...n.content,node:e}})})},setClassificationStyle:function setClassificationStyle(e=G.b.MoveListClassificationStyles.Default){t.classificationStyle.set(e)},setNodeEffectOverrides:function setNodeEffectOverrides(e){R.set(e)}}}function shouldSelectedNodeChangeUpdateLayout(e,t,n){var a,l;let c=(0,ed.P)(null==t?void 0:t.ids,e),d=(0,ed.P)(null==n?void 0:n.ids,e),f=c?e[c.line][c.move]:null,m=d?e[d.line][d.move]:null,g=!(0,ep.M)(f,m),_=((null==(a=null==f?void 0:f.lines)?void 0:a.length)??0)>0||((null==(l=null==m?void 0:m.lines)?void 0:l.length)??0)>0;return g&&_}function decodeHTMLEntities(e){let t=document.createElement("textarea");return t.innerHTML=e.replace(/&nbsp;/g," "),t.value}function cleanCommentString(e){let t;return void 0===e?void 0:(" "===(t=decodeHTMLEntities(stripHTMLTags(e)))&&(t=""),t)}function stripHTMLTags(e){try{return new DOMParser().parseFromString(e,"text/html").body.textContent||""}catch{return""}}function createEventHandlers(e,{game:t,data:n,actions:a,queue:l}){return{selectNode(e,a){a&&a.stopPropagation();t.getOptions().disableUserNavigation||!1===n.isActive.get()||selectNode(e)},setSelectedNodeEl(e){a.setSelectedNodeEl(e)},openVariationsPopover(){a.setVariationPopover({isOpen:!0})},selectPopoverMove(e){a.selectPopoverMove(e)},closeVariationsPopover(){a.setVariationPopover({isOpen:!1})},openContextMenu(e,c){if(!t.getOptions().disableUserNavigation&&!1!==n.isActive.get()&&n.contextMenu.get().enabled){e&&selectNode(e.ids);null==c||c.preventDefault();l.add(()=>{a.setContextMenu({isOpen:!0})});l.syncFlush()}},closeContextMenu(){a.setContextMenu({isOpen:!1})},handleContextMenuAction(e,a){var l,c;let d=n.contextMenu.get(),f=n.selectedNodeKeys.get(),m=null==(c=null==(l=d.actions)?void 0:l[e])?void 0:c.handler;if(!f||!m)return;let g=t.getNodeByIds(f.ids);if(g){m({node:g,game:t},a);this.closeContextMenu()}},updateComment(e,n){var a;let l=cleanCommentString(n),c=(null==(a=e.node)?void 0:a.ids.line)??e.lineNumber;e.isBeforeComment&&void 0!==c?t.updateLineComment(l,c):e.node&&t.updateNode(e.node.ids,{comment:l})},clickComment(e){t.getOptions().disableUserNavigation||t.selectNode(e.line,e.move)},async handleSelectedNodeChange(){await tick();let e=n.selectedNodeKeys.get(),t=n.moveListEl.get(),a=n.selectedNodeEl.get();null==a||a.classList.remove("selected");if(!e||!t){n.selectedNodeEl.set(null);return}let l=getMoveNodeEl(t,e.ids.line,e.ids.move),c=null==l?void 0:l.querySelector(".node-highlight-content");if(!c||!l){n.selectedNodeEl.set(null);return}let d=n.finishedInitialLoad.get();scrollToMoveNode(l,{scrollToTop:!d});d||n.finishedInitialLoad.set(!0);c.classList.add("selected");n.selectedNodeEl.set(c)},scrollToMoveNode};function scrollToMoveNode(e,t={}){e&&scrollToNode({nodeEl:e,moveListEl:n.moveListEl.get(),containerEl:n.scrollContainer.get(),position:t.scrollToTop?"top":"nearest-edge",onlyIfOutside:!t.scrollToTop})}function selectNode(a){let l=n.selectedNodeKeys.get(),c=t.getSelectedNode(),d=(null==c?void 0:c.ids.line)===a.line&&(null==c?void 0:c.ids.move)===a.move;null===l&&d?e(es.SELECT_NODE,{node:c}):t.selectNode(a.line,a.move)}}function replaceContainer(e,t){let n=document.createDocumentFragment(),a=new e(Object.assign({},t,{target:n}));return t.target.replaceWith(n),a}let{pick:em}=el.ur;function createSvelteComponent({ComponentType:e,methods:t,options:n,replaceContainer:a=!0}){let l=a?replaceContainer(e,n):new e(n),c={destroy,el:n.target,get,instance:l,on,set};t&&t.length&&t.forEach(e=>{c[e]=l[e]});return c;function destroy(){l.$destroy()}function get(e){return"string"==typeof e?l.$$.ctx[e]:em(l.$$.ctx,e)}function on(e,t){l.$on(e,t)}function set(e){l.$set(e)}}var eh=n(90760),eg=n(27071);function createAddComment(e,t){return{getDisplayName:({node:e})=>e.ids.move>0?y.k.Translation.Actions.InsertComment:y.k.Translation.Actions.InsertCommentAfter,action:eg.C.AddComment,isVisible,handler};function isVisible({node:t}){let n=e.commentsEditable.get();return void 0===t.comment&&n}function handler({node:e,game:t}){t.updateNode(e.ids,{comment:""})}}function createAddCommentBefore(e,t){return{getDisplayName:()=>y.k.Translation.Actions.InsertCommentBefore,action:eg.C.AddCommentBefore,isVisible,handler};function isVisible({node:t,game:n}){let a=n.getRawLines()[t.ids.line],l=0===t.ids.move,c=void 0!==a.initComment,d=e.commentsEditable.get();return l&&!c&&d}function handler({node:e,game:t}){t.updateLineComment("",e.ids.line)}}function isNagFormat(e){return!!(e&&"$"===e.charAt(0))}function normalizeAnnotation(e){return e&&(Object.prototype.hasOwnProperty.call(D.PN,e)||Object.prototype.hasOwnProperty.call(D.Ql,e))?isNagFormat(e)?D.PN[e]:normalizeAnnotation(D.Ql[e]):e||""}function createAddAnnotation(e,t){return{getDisplayName:()=>"",action:eg.C.AddAnnotation,isVisible,handler};function isVisible(){return!1}function handler({node:e,game:t},n){var a;if(!(null==(a=null==n?void 0:n.data)?void 0:a.annotation))return;let l=normalizeAnnotation(e.annotation),c=n.data.annotation!==l?n.data.annotation:"";t.updateNode(e.ids,{annotation:c})}}function createAddAdditionalAnnotation(e,t){return{getDisplayName:()=>"",action:eg.C.AddAdditionalAnnotation,isVisible,handler};function isVisible(){return!1}function handler({node:e,game:t},n){var a,l;if(!(null==(a=null==n?void 0:n.data)?void 0:a.annotation))return;let c=normalizeAnnotation(null==(l=e.additionalAnnotation)?void 0:l[0]),d=n.data.annotation!==c?[n.data.annotation]:[];t.updateNode(e.ids,{additionalAnnotation:d})}}function createHideAllAnnotations(e,t){return{getDisplayName:()=>y.k.Translation.Actions.HideAllAnnotations,action:eg.C.HideAllAnnotations,isVisible,handler};function isVisible(){return!e.annotationsHidden.get()}function handler(){t.setAnnotationsHidden(!0)}}function createShowAllAnnotations(e,t){return{getDisplayName:()=>y.k.Translation.Actions.ShowAllAnnotations,action:eg.C.ShowAllAnnotations,isVisible,handler};function isVisible(){return e.annotationsHidden.get()}function handler(){t.setAnnotationsHidden(!1)}}function createRemoveAnnotation(e,t){return{getDisplayName:()=>y.k.Translation.Actions.RemoveAnnotation,action:eg.C.RemoveAnnotation,isVisible,handler};function isVisible({node:e}){let t=!!e.annotation,n=!!e.additionalAnnotation;return t||n}function handler({node:e,game:t}){t.updateNode(e.ids,{annotation:void 0,additionalAnnotation:void 0})}}var ev=(e=>(e[e.MainLine=0]="MainLine",e[e.MainLineChild=-1]="MainLineChild",e[e.Parent=1]="Parent",e))(ev||{});function canPromote({api:e,node:t}){let n=t.ids.line;if(0===n)return!1;let a=e.getLine(n);if(!a)return!1;let l=a.parentId;if(0===l){let{canAddMovesToMainLine:t,canModifyExistingMovesOnMainLine:n}=e.getMode().getOptions();return t&&n}return!0}function createPromoteVariation(e,t){return{getDisplayName:()=>y.k.Translation.Actions.Promote,action:eg.C.PromoteVariation,isVisible,handler};function isVisible({game:e,node:t}){return canPromote({api:e,node:t})}function handler({node:e,game:t}){t.promoteVariation(e.ids.line,ev.Parent)}}function deleteMove({node:e,api:t}){let n=t.getRawLines();if(0!==e.ids.line&&e.lines&&nodeHasChildrenRenderedAsSiblings(e,n)){t.promoteVariation(e.lines[0],1,{replace:!0});return}t.deletePosition(e.ids.move,e.ids.line)}function createDeleteMove(e,t){return{getDisplayName:()=>y.k.Translation.Actions.DeleteMove,action:eg.C.DeleteMove,isVisible,handler};function isVisible(){return!0}function handler({node:e,game:t}){deleteMove({node:e,api:t})}}function createDeleteComment(e,t){return{getDisplayName:({node:e})=>e.ids.move>0?y.k.Translation.Actions.DeleteComment:y.k.Translation.Actions.DeleteCommentAfter,action:eg.C.DeleteCommentAfter,isVisible,handler};function isVisible({node:t}){let n=e.commentsEditable.get();return void 0!==t.comment&&n}function handler({node:e,game:t}){t.updateNode(e.ids,{comment:void 0})}}function createDeleteCommentBefore(e,t){return{getDisplayName:()=>y.k.Translation.Actions.DeleteCommentBefore,action:eg.C.DeleteCommentBefore,isVisible,handler};function isVisible({node:t,game:n}){let a=void 0!==n.getRawLines()[t.ids.line].initComment,l=0===t.ids.move,c=e.commentsEditable.get();return a&&l&&c}function handler({node:e,game:t}){t.updateLineComment(void 0,e.ids.line)}}function createConfirmations(e){let t=new Map,n=e;return{cancelConfirmation,cancelAllConfirmations,confirmAction,registerConfirmationCallback,requestConfirmation};function cancelConfirmation(e){t.delete(e)}function cancelAllConfirmations(){t.clear()}function confirmAction(e){var n;null==(n=t.get(e))||n();t.delete(e)}function registerConfirmationCallback(e){n=e}async function requestConfirmation(e){let{action:a,data:l,text:c,type:d}=e;return(t.set(d,a),n)?await n({data:l,text:c,type:d})?confirmAction(d):cancelConfirmation(d):window.confirm(c)?confirmAction(d):void cancelConfirmation(d)}}function createClearAnalysis(e,t){let n=createConfirmations();return{getDisplayName:()=>y.k.Translation.Actions.ClearAllAnalysis,action:eg.C.ClearAnalysis,handler,isVisible:()=>!0};function handler({node:e,game:t}){n.requestConfirmation({action:onConfirmation,data:void 0,text:"Are you sure you want to clear all analysis?",type:"ClearAnalysis"});function onConfirmation(){let n=t.getLine(0);if(n){t.resetToMainLine();n.forEach(n=>{var a,l;t.updateNode(n.ids,{additionalAnnotation:void 0,annotation:"",comment:void 0});null==(a=e.commands)||delete a.href;null==(l=e.commands)||delete l.text});n.initComment&&t.updateLineComment(void 0,n.id)}}}}function createInsertContinuationAction(e,t){return{getDisplayName:()=>y.k.Translation.Actions.InsertContinuation,action:eg.C.InsertContinuation,isVisible,handler};function isVisible({game:e,node:t}){let n=e.getRawLines();return t.ids.move===n[t.ids.line].length-1}function handler({game:e}){e.createContinuation()}}function isOnFirstLineOfParentNode(e,t){return!!t.lines&&e.ids.line===t.lines[0]}function createMoveVariationUpAction(e,t){return{action:eg.C.MoveVariationUp,handler,isVisible,getDisplayName:()=>y.k.Translation.Actions.MoveVariationUp};function isVisible({game:e,node:t}){if(0===t.ids.line)return!1;let n=e.getLine(t.ids.line);if(!n)return!1;let a=e.getNodeByIds({line:n.parentId,move:n.atMoveNode});return!!a&&!!(a.lines&&a.lines.length>1)&&!isOnFirstLineOfParentNode(t,a)}function handler({node:e,game:t}){t.moveVariation(e.ids.line,!0)}}function isOnLastLineOfParentNode(e,t){return!!t.lines&&e.ids.line===t.lines[t.lines.length-1]}function createMoveVariationDownAction(e,t){return{action:eg.C.MoveVariationDown,handler,isVisible,getDisplayName:()=>y.k.Translation.Actions.MoveVariationDown};function isVisible({game:e,node:t}){if(0===t.ids.line)return!1;let n=e.getLine(t.ids.line);if(!n)return!1;let a=e.getNodeByIds({line:n.parentId,move:n.atMoveNode});return!!a&&!!(a.lines&&a.lines.length>1)&&!isOnLastLineOfParentNode(t,a)}function handler({node:e,game:t}){t.moveVariation(e.ids.line,!1)}}var e_=n(88370);function createSetFocus(e,t){return{getDisplayName:()=>y.k.Translation.Actions.SetFocus,action:eg.C.SetFocus,isVisible,handler};function isVisible({node:t}){let{enabled:n,focus:a}=e.nodeLimits.get();return n&&a!==t.ids}function handler({node:e,game:n}){let a={focus:e.ids},l=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,a);n.emit(_.i.APIEvents.NodeLimitsUpdated,l);t.setNodeLimits(a)}}function createSetBegin(e,t){return{getDisplayName:()=>y.k.Translation.Actions.SetBegin,action:eg.C.SetBegin,isVisible,handler};function isVisible({node:t}){let{enabled:n,begin:a}=e.nodeLimits.get();return n&&a!==t.ids}function handler({node:e,game:n}){let a={begin:e.ids},l=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,a);n.emit(_.i.APIEvents.NodeLimitsUpdated,l);t.setNodeLimits(a)}}function createSetEnd(e,t){return{getDisplayName:()=>y.k.Translation.Actions.SetEnd,action:eg.C.SetEnd,isVisible,handler};function isVisible({node:t}){let{enabled:n,end:a}=e.nodeLimits.get();return n&&a!==t.ids}function handler({node:e,game:n}){let a={end:e.ids},l=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,a);n.emit(_.i.APIEvents.NodeLimitsUpdated,l);t.setNodeLimits(a)}}function createRemoveBegin(e,t){return{getDisplayName:()=>y.k.Translation.Actions.RemoveBegin,action:eg.C.RemoveBegin,isVisible,handler};function isVisible({node:t}){return e.nodeLimits.get().begin===t.ids}function handler({game:e}){let n={begin:null},a=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,n);e.emit(_.i.APIEvents.NodeLimitsUpdated,a);t.setNodeLimits(n)}}function createRemoveFocus(e,t){return{getDisplayName:()=>y.k.Translation.Actions.RemoveFocus,action:eg.C.RemoveFocus,isVisible,handler};function isVisible({node:t}){return e.nodeLimits.get().focus===t.ids}function handler({game:e}){let n={focus:null},a=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,n);e.emit(_.i.APIEvents.NodeLimitsUpdated,a);t.setNodeLimits(n)}}function createRemoveEnd(e,t){return{getDisplayName:()=>y.k.Translation.Actions.RemoveEnd,action:eg.C.RemoveEnd,isVisible,handler};function isVisible({node:t}){return e.nodeLimits.get().end===t.ids}function handler({game:e}){let n={end:null},a=(0,e_.e)(_.i.APIEvents.NodeLimitsUpdated,n);e.emit(_.i.APIEvents.NodeLimitsUpdated,a);t.setNodeLimits(n)}}function createContextMenuActions(e,t){return{[eg.C.AddAnnotation]:createAddAnnotation(),[eg.C.AddAdditionalAnnotation]:createAddAdditionalAnnotation(),[eg.C.AddCommentBefore]:createAddCommentBefore(e),[eg.C.AddComment]:createAddComment(e),[eg.C.DeleteCommentBefore]:createDeleteCommentBefore(e),[eg.C.DeleteCommentAfter]:createDeleteComment(e),[eg.C.RemoveAnnotation]:createRemoveAnnotation(),[eg.C.DeleteMove]:createDeleteMove(),[eg.C.PromoteVariation]:createPromoteVariation(),[eg.C.MoveVariationDown]:createMoveVariationDownAction(),[eg.C.MoveVariationUp]:createMoveVariationUpAction(),[eg.C.InsertContinuation]:createInsertContinuationAction(),[eg.C.ShowAllAnnotations]:createShowAllAnnotations(e,t),[eg.C.HideAllAnnotations]:createHideAllAnnotations(e,t),[eg.C.ClearAnalysis]:createClearAnalysis(),[eg.C.SetBegin]:createSetBegin(e,t),[eg.C.SetFocus]:createSetFocus(e,t),[eg.C.SetEnd]:createSetEnd(e,t),[eg.C.RemoveBegin]:createRemoveBegin(e,t),[eg.C.RemoveFocus]:createRemoveFocus(e,t),[eg.C.RemoveEnd]:createRemoveEnd(e,t)}}function createMoveList({target:e,translations:t=b,game:n,hideTimestampText:a,displayTimeInClockFormat:l=!0,showTimestamps:c,scrollContainer:f,customColorsEnabled:m=!1}){var g;let{data:_,actions:y}=createStore(n,{baseTime:null==(g=n.timeControl.get())?void 0:g.baseTime,textType:n.getOptions().moveListDisplayType,classificationStyle:n.getOptions().moveListClassificationStyle??G.b.MoveListClassificationStyles.Default,menuEnabled:n.getOptions().moveListContextMenuEnabled,moveListEl:e,scrollContainer:f,translations:t,customColorsEnabled:m,displayTimeInClockFormat:l}),A=(0,eh.y)(!1),C=createContextMenuActions(_,y);y.addContextMenuActions(Object.values(C));let w=createMoveListStateMachine({data:_,actions:y,game:n}),k=createEventHandlers(w.send,{data:_,game:n,actions:y,queue:A}),S=createSvelteComponent({ComponentType:ei,options:{props:{data:_,eventHandlers:k,hideTimestampText:a,showTimestamps:c,game:n},target:e},replaceContainer:!1});e.classList.contains("move-list")||e.classList.add("move-list");e.classList.contains("chessboard-pkg-move-list-component")||e.classList.add("chessboard-pkg-move-list-component");return{destroy,setTextType:y.setTextType,setContextMenuEnabled:e=>y.setContextMenu({enabled:e}),setBaseTime:e=>{y.setBaseTime(e)},setResult:e=>{y.setResult(e);y.setGameMetadataFromGameInfo(n)},setActiveStatus:e=>{y.setActiveStatus(e)},isActive:()=>_.isActive.get(),selectMainLineStart(){w.send(es.DESELECT_NODE);(f??e).scrollTop=0},selectNode:e=>{w.send(es.SELECT_NODE,{node:e})},loadLine:(e,t,n)=>{w.send(es.LOAD_LINE,{lines:e,result:t,node:n})},addMainLineNode:(e,t)=>{if(e){y.addMainLineNode(e);y.setContextMenu({isOpen:!1});y.setVariationPopover({isOpen:!1});(0,ep.M)(t,_.selectedNodeKeys.get())||w.send(es.SELECT_NODE,{node:t,disableScrollIfScrolledUp:!e.userGenerated})}},deselectNode:()=>w.send(es.DESELECT_NODE),addContextMenuActions:y.addContextMenuActions,removeContextMenuActions:y.removeContextMenuActions,setAnalysisHidden:e=>{setAnalysisFeatureVisibility({hideAnnotations:e,hideComments:e,variationVisibility:e?d.VariationVisibility.None:d.VariationVisibility.All})},setAnnotationsHidden:e=>{setAnalysisFeatureVisibility({hideAnnotations:e})},setVariationsHidden(e){setAnalysisFeatureVisibility({variationVisibility:e?d.VariationVisibility.None:d.VariationVisibility.All})},setVariationVisibility(e){setAnalysisFeatureVisibility({variationVisibility:e})},getVariationVisibility:()=>_.variationVisibility.get(),setCommentsHidden:e=>{setAnalysisFeatureVisibility({hideComments:e})},setCommentsEditable:y.setCommentsEditable,getMoveNodeEl:(t,n)=>getMoveNodeEl(e,t,n),openVariationsPopover:k.openVariationsPopover,closeVariationsPopover:k.closeVariationsPopover,enableNodeLimits:y.enableNodeLimits,updateNodeLimits:y.setNodeLimits,getNodeLimits:()=>{let getNode=e=>{var t;return(null==(t=n.getLine(null==e?void 0:e.line))?void 0:t[null==e?void 0:e.move])||null};return{begin:getNode(_.nodeLimits.get().begin),focus:getNode(_.nodeLimits.get().focus),end:getNode(_.nodeLimits.get().end)}},setCustomColorsEnabled:y.setCustomColorsEnabled,reinitialize:()=>{_.finishedInitialLoad.set(!1)},getQueue:()=>A,refreshNode:y.refreshNode,setClassificationStyle:y.setClassificationStyle,setNodeEffectOverrides:y.setNodeEffectOverrides,getNodeEffectOverrides:()=>_.nodeEffectOverrides.get()};function setAnalysisFeatureVisibility(e){let{hideComments:t,variationVisibility:a,hideAnnotations:l}=e;void 0!==t&&y.setCommentsHidden(t);void 0!==a&&y.setVariationVisibility(a);void 0!==l&&y.setAnnotationsHidden(l);(void 0!==t||void 0!==a)&&w.send(es.LOAD_LINE,{lines:n.getRawLines(),result:_.result.get(),node:n.getSelectedNode()})}function destroy(){S.destroy();A.clear()}}var ey=n(20146),eb=n(47176),eA=n(68364);let eC=[_.i.APIEvents.MoveBackward,_.i.APIEvents.MoveForward,_.i.APIEvents.SelectLineEnd,_.i.APIEvents.SelectLineStart,_.i.APIEvents.SelectNode];function forceNextFrame(e,t=[]){requestAnimationFrame(()=>{requestAnimationFrame(()=>{e(...t)})})}var ew=n(85705);function shouldOpenVariationsPopover(e){var t,n;let a=null==(n=null==(t=e["move-list"])?void 0:t.getMoveList())?void 0:n.getVariationVisibility();if(!a||a===d.VariationVisibility.None)return!1;let l=e.getSelectedNode();if(!l||a===d.VariationVisibility.Active&&0===l.ids.line)return!1;let c=e.getRawLines(),f=c[l.ids.line][l.ids.move+1];return((null==f?void 0:f.lines)??[]).some(e=>{let t=c[e];return!!t[0]&&(!t[0].isContinuation||c[e].length>1)})}let ek=ey.n.filter(e=>!eC.includes(e));function createMoveListPlugin({target:e,scrollContainer:t,hideTimestampText:n,displayTimeInClockFormat:a=!0,showTimestamps:l=!0,translations:c=b,loadLineOnCreate:d=!0,customColorsEnabled:f=!1}){let m,g;return{api:createMoveListPluginAPI,create,destroy,match:[{condition:(0,eA.E)([...ek,_.i.APIEvents.LineCommentUpdated,_.i.APIEvents.LineUpdated,_.i.APIEvents.AddMove,_.i.InstanceEvents.Create,_.i.InstanceEvents.ModeChanged]),handler:onLineUpdated},{condition:(0,eA.E)([...eC]),handler:onSelectedNodeChanged},{condition:(0,eb.is)(_.i.OptionsEvents.Update),handler:onOptionsChange},{condition:(0,eb.is)(_.i.APIEvents.UpdatePGNHeaders),handler:setGameData},{condition:(0,eb.is)(_.i.APIEvents.NodeUpdated),handler:onNodeUpdated}],name:I.V.Name};function createMoveListPluginAPI(e){return{setCommentsEditable:e=>{m.setCommentsEditable(e)},enableNodeLimits:()=>{m.enableNodeLimits();g=e.api.extendAPI(I.V.Name,{getDiagramNodeLimits:()=>m.getNodeLimits})},updateNodeLimits:e=>m.updateNodeLimits(e),getMoveList:()=>m,activate:()=>{if(m.isActive())return;m.setActiveStatus(!0);let t=m.getQueue();t.clear({persistPreserved:!0});t.add(loadLine,e.api,m);t.syncFlush()},deactivate:()=>{if(m.isActive()){m.setActiveStatus(!1);m.getQueue().syncFlush()}}}}function onSelectedNodeChanged(e,t){let{line:n,move:a}=t.api.getPosition().ids;if(0===n&&-1===a){queueForNextFrame({},m.selectMainLineStart);return}queueForNextFrame({},m.selectNode,t.api.getSelectedNode())}function onOptionsChange(e,t){var n,a,l,c;(null==(n=e.data)?void 0:n.enabled)===!0?null==(a=t.api["move-list"])||a.activate():(null==(l=e.data)?void 0:l.enabled)===!1&&(null==(c=t.api["move-list"])||c.deactivate());queueForNextFrame({persistOnClear:!0},()=>{"moveListDisplayType"in e.data&&m.setTextType(e.data.moveListDisplayType);"moveListClassificationStyle"in e.data&&m.setClassificationStyle(e.data.moveListClassificationStyle);"moveListContextMenuEnabled"in e.data&&m.setContextMenuEnabled(e.data.moveListContextMenuEnabled)})}function onNodeUpdated(e,t){var n;let{api:a}=t,l=e.data.node??(null==(n=e.data.changes)?void 0:n.node);if(!e.data.changes||!l)return;let c="comment"in e.data.changes;if(c){queueForNextFrame({clearQueue:!0},loadLine,a,m);m.getQueue().syncFlush();return}let d="timestamp"in e.data.changes,f="annotation"in e.data.changes||"additionalAnnotation"in e.data.changes,g="customColor"in e.data.changes;(d||f||g)&&queueForNextFrame({},m.refreshNode,l)}function onLineUpdated(e,t){var n,a,l;let{api:c}=t,d=(null==(n=e.data)?void 0:n.move)??(null==(a=e.data)?void 0:a.listMove),f=c.getResult(),g=c.getSelectedNode(),y=e.type===_.i.APIEvents.AddMove||e.type===_.i.APIEvents.Move;if((null==(l=null==d?void 0:d.ids)?void 0:l.line)===0&&y&&f===O.Z.Results.None){queueForNextFrame({},m.addMainLineNode,d,g);return}queueForNextFrame({clearQueue:!0},loadLine,c,m)}function create(g){var _;let{api:y}=g;m=createMoveList({target:e,scrollContainer:t,game:y,hideTimestampText:n,displayTimeInClockFormat:a,showTimestamps:l,translations:c,customColorsEnabled:f});d&&loadLine(y,m);m.setActiveStatus(g.api.getOptions().enabled??!0);null==(_=y[ew.I.Plugin.Name])||_.setKeys({[ew.I.Arrow.Right]:()=>{if(m&&shouldOpenVariationsPopover(y)){m.openVariationsPopover();return}y.moveForward()}})}function setGameData(e,t){var n;let{api:a}=t,l=a.getResult(),c=null==(n=a.timeControl.get())?void 0:n.baseTime;queueForNextFrame({persistOnClear:!0},()=>{m.setResult(l);"TimeControl"in e.data&&m.setBaseTime(c)})}function destroy(e){var t;m&&m.destroy();null==g||g();null==(t=null==e?void 0:e.api[ew.I.Plugin.Name])||t.resetKeys()}function queueForNextFrame(e,t,...n){if(!m.isActive())return;let a=m.getQueue();e.clearQueue&&a.clear({persistPreserved:!0});a.add({preserved:e.persistOnClear??!1},t,...n);forceNextFrame(function flushMoveListQueue(){a.syncFlush()})}}function loadLine(e,t){let n=e.getRawLines(),a=e.getResult(),l=e.getSelectedNode();t.loadLine(n,a,l)}},9966:function(e,t,n){"use strict";n.d(t,{t:function(){return createPremovesPlugin}});var a=n(32831);function createCancelPremoves({api:e}){return e.premoves.cancel}function createGetLegalPremovesForSquare({api:e}){return e.premoves.getLegalMovesForSquare}function createGetLegalPremoves({api:e}){return e.premoves.getLegalMoves}function createGetPremove({api:e}){return e.premoves.getMove}function createGetPremovePieces({api:e}){return e.premoves.getPieces}function createLoadPremoves({api:e}){return function loadPremoves(...t){var n;let a=null==(n=t[0])?void 0:n.premoves,l=e.getContext().game;null==a||a.forEach(e=>{l.premove.move(e)});e.premoves.loadQueue(a);t[0].pieces=e.premoves.getPieces()}}function createReloadPremoves({api:e}){return e.premoves.reload}function createPremove({api:e}){return e.premoves.move}function createResetPremoves({api:e}){return function resetPremoves(t){return e.getContext().respond(a.i.APIEvents.SetBoardPosition,{pieces:e.premoves.getPieces(),holdSelectedPiece:!0}),t}}function notPlayersTurn(e){return e.api.getPlayingAs()!==e.api.getTurn()}function notUserGeneratedMove(e,t){return!t.userGenerated}function userGeneratedMove(e,t){return!!t.userGenerated}function noPremovesMade(e){return e.api.premoves.getQueue().length}function premovesMade(e){return e.api.premoves.getQueue().length>0}function premovesToLoad(e,t){return!!(null==t?void 0:t.premoves)}function createPremoveAPIOverrides(){return{moveBackward:{handler:createCancelPremoves,run:"before"},moveForward:{handler:createCancelPremoves,run:"before"},outOfTime:{handler:createCancelPremoves,run:"before"},resign:{handler:createCancelPremoves,run:"before"},selectLineEnd:{handler:createCancelPremoves,run:"before"},selectLineStart:{handler:createCancelPremoves,run:"before"},selectNode:{handler:createCancelPremoves,run:"before"},undo:{handler:createCancelPremoves,run:"before"},agreeDraw:{handler:createCancelPremoves,run:"before"},deletePosition:{handler:createCancelPremoves,run:"before"},getLegalMovesForSquare:{conditions:notPlayersTurn,handler:createGetLegalPremovesForSquare,run:"instead"},getLegalMoves:{conditions:notPlayersTurn,handler:createGetLegalPremoves,run:"instead"},getMove:{conditions:notPlayersTurn,handler:createGetPremove,run:"instead"},getPieces:{conditions:noPremovesMade,handler:createGetPremovePieces,run:"instead"},load:[{handler:createCancelPremoves,run:"before"},{conditions:premovesToLoad,handler:createLoadPremoves,run:"before"}],move:[{conditions:[notPlayersTurn,premovesMade],handler:createReloadPremoves,run:"before"},{conditions:[notPlayersTurn,userGeneratedMove],handler:createPremove,run:"instead"},{conditions:[notPlayersTurn,notUserGeneratedMove,premovesMade],handler:createResetPremoves,run:"after"}]}}var l=n(12507);function createIsAllowedToMove(e,t){return function isAllowedToMove(){return(0,l.j)({api:t,canMoveWhenNotPlayerTurn:!0,modeOptions:e.getOptions()})}}function createPremoveModeOverrides(){return{isAllowedToMove:createIsAllowedToMove}}function createCancel(e){return function cancel(){let{api:t,game:n}=e;return t.premoves.getQueue().length?(n.premove.cancel(),t.reload()):null}}var c=n(5825),d=n(67577),f=n(52929),m=n(83789);function addTimeToConsumedPremove({api:e,timeControl:t}){let n=e.getLine(0);if(!n)return null;let a=n[n.length-1],l=(0,m.Y)({api:e,node:a}),{baseTime:c,increment:d}=t,g=getGameTimeLeft({baseTime:(0,f.y)(c),increment:(0,f.y)(d),lastNodeTime:null==l?void 0:l.time});return g&&a&&(a.time=g),g}function getGameTimeLeft({baseTime:e,increment:t,lastNodeTime:n}){return getStartingTime()-d.P;function getStartingTime(){return n?n+t:e}}function createConsumeNext(e){return function consumeNext(){let{api:t,game:n,mutateGame:a}=e,l=t.premoves.getQueue();if(!l.length)return null;if(t.isGameOver())return t.premoves.cancel();t.premoves.reload();let f=a(function consume(){n.premove.consume()});if(!f||0===f.plyDiff)return null;f.consumedPremove=!0;t.premoves.getQueue().length&&(f.pieces=t.premoves.getPieces());if(f.move){let e=t.timeControl.get();if(e){addTimeToConsumedPremove({api:t,timeControl:e});(0,c.q)({api:t,node:f.move,timestamp:d.P})}Object.assign(f.move,{animate:!1,userGenerated:!0})}return f.result&&t.setResult(f.result),f}}var g=n(57571);function createGetLegalMovesForSquare(e){return function getLegalMovesForSquare(t){let{game:n}=e,a=n.premove.moves(t);return a?(0,g.b)(a.filter(e=>void 0===t||e.from===t).map(e=>e.to)):[]}}function createGetLegalMoves(e){return function getLegalMoves(){let{game:t}=e;return t.premove.moves()||[]}}function createGetMove(e){return function getMove(t){let{game:n}=e,a="from"in t,l="drop"in t,c=n.premove.moves(a?t.from:void 0),d=c?c.find(e=>e.to===t.to&&(!l||e.drop===t.drop)):null;if(!d&&a&&isKingMove(t)){let e=[...n.premove.queue];d=n.premove.move(t);if(d){n.premove.cancel();e.forEach(n.premove.move)}}return d?n.moveDetails({...d}):null};function isKingMove(t){var n;let{game:a}=e;return!!(t.from&&(null==(n=a.premove.getPieces(!0)[t.from])?void 0:n.type.toLowerCase())==="k")}}var _=n(77457);function createGetPieces(e){return function getPieces(){let{game:t}=e;return(0,_.N)(t.premove.getPieces(!0))}}function createGetQueue(e){return function getQueue(){let{game:t}=e;return t.premove.queue}}function createIsLegalMove(e){return function isLegalMove(t){let{game:n}=e;return!!n.premove.move(t)&&(n.undo(),!0)}}function createLoadQueue(e){return function loadQueue(t){let{game:n}=e;n.premove.queue.length=0;n.premove.queue.push(...t)}}var y=n(91664);function createMove(e){return function move(t){let{api:n,game:l,respond:c}=e;return"tcn"in t?null:l.premove.move(t)?(n.getOptions().playSounds&&c(a.i.SoundEvents.Play,{sound:y.t.BoardSounds.Premove}),c(a.i.APIEvents.SetBoardPosition,{pieces:n.premoves.getPieces()})):null}}function createReload(e){return function reload(){let{api:t}=e;if(t.premoves.getQueue().length){let e=[...t.premoves.getQueue()];t.reload();t.premoves.loadQueue(e)}else t.reload()}}function createPremovesAPIFactory(){return function createPremovesAPI(e){return{cancel:createCancel(e),consumeNext:createConsumeNext(e),getLegalMovesForSquare:createGetLegalMovesForSquare(e),getLegalMoves:createGetLegalMoves(e),getMove:createGetMove(e),getPieces:createGetPieces(e),getQueue:createGetQueue(e),isLegalMove:createIsLegalMove(e),loadQueue:createLoadQueue(e),move:createMove(e),reload:createReload(e)}}}function eventIsMoveNotMadeByUser(e){return e.type===a.i.APIEvents.Move&&!e.data.consumedPremove}var b=n(73707),A=n(16080);let C="premove";function getPremoveHighlights(e,t){var n;let{api:a,options:l}=t,c=null==(n=a.premoves)?void 0:n.getQueue();if(!l||!l.allowMarkings||!c.length)return[];let d=[];return c.forEach(e=>{if(e.from){let t=(0,b.t)({color:l.premoveHighlightColor,opacity:l.premoveHighlightOpacity,square:e.from,type:C});d.push(t)}let t=(0,b.t)({color:l.premoveHighlightColor,opacity:l.premoveHighlightOpacity,square:(0,A.v)(e),type:C});d.push(t)}),d}var w=n(47176),k=n(2700);function createPremovesPlugin(){return{api:createPremovesAPIFactory(),apiOverrides:createPremoveAPIOverrides(),beforeState:[{condition:(0,w.is)(a.i.UserEvents.PointerdownRight),handler:pointerDownRightBeforeStateHandler},{condition:(0,w.is)(a.i.APIEvents.Move),handler:moveBeforeStateHandler}],create,destroy,modeOverrides:createPremoveModeOverrides(),name:k.A.Plugin.Name};function create(e){let{api:t}=e;t.highlights&&t.highlights.addModule(getPremoveHighlights)}function destroy(e){var t,n;let{api:a}=e;null==(t=a.premoves)||t.cancel();null==(n=a.highlights)||n.removeModule(getPremoveHighlights)}function pointerDownRightBeforeStateHandler(e,t){let{api:n,queue:a}=t;return!(n.premoves.getQueue().length>0)||(a.add(n.premoves.cancel),!1)}function moveBeforeStateHandler(e,t){let{api:n,queue:l}=t;return!n.premoves.getQueue().length||!eventIsMoveNotMadeByUser(e)||(l.add(function consumeNext(){if(n.isGameOver()){n.premoves.cancel();return}let e=n.premoves.consumeNext(),t=null===e?a.i.APIEvents.IllegalMove:a.i.APIEvents.Move;n.once(a.i.APIEvents.Move,()=>{n.getContext().respond(t,{...e,holdSelectedPiece:!0})})}),!1)}}},13410:function(e,t,n){"use strict";n.d(t,{Z:function(){return isEdgeSquare}});function isEdgeSquare(e){if(!e)return!1;let t=!1;return["a","h","1","8"].forEach(n=>{e.includes(n)&&(t=!0)}),t}},9802:function(e,t,n){"use strict";n.d(t,{H:function(){return getTimestampFromNode}});function getTimestampFromNode(e){var t;return(null==(t=e.commands)?void 0:t.timestamp)?parseInt(e.commands.timestamp,10):null}},17084:function(e,t,n){"use strict";var a;n.d(t,{Z:function(){return a}});(e=>{(e=>{e[e.White=1]="White";e[e.Black=2]="Black"})(e.ColorsAsNumbers||(e.ColorsAsNumbers={}));(e=>{e.Bughouse="bughouse";e.Chess="chess";e.Chess960="chess960";e.Crazyhouse="crazyhouse";e.KingOfTheHill="kingofthehill";e.ThreeCheck="threecheck"})(e.Variants||(e.Variants={}));e.JCEVariantTypes={bughouse:"Bughouse",chess:"Chess",chess960:"Chess960",crazyhouse:"Crazyhouse",threecheck:"3-check",kingofthehill:"King of the Hill"};(e=>{e.White="w";e.Black="b"})(e.ColorsAsLetters||(e.ColorsAsLetters={}));(e=>{e.White="white";e.Black="black"})(e.ColorsAsWords||(e.ColorsAsWords={}));e.DefaultTimeControl=5;(e=>{e.Black="?";e.Event="?";e.Date="????.??.??";e.Site="?";e.Value="?";e.Result="*";e.Round="?";e.White="?"})(e.EmptyPGNHeaders||(e.EmptyPGNHeaders={}));(e=>{(e=>{e[e.Capture=1]="Capture";e[e.BigPawn=2]="BigPawn";e[e.EPCapture=4]="EPCapture";e[e.AnyCapture=5]="AnyCapture";e[e.Promotion=8]="Promotion";e[e.CapturePromotion=9]="CapturePromotion";e[e.KingsideCastle=16]="KingsideCastle";e[e.QueensideCastle=32]="QueensideCastle";e[e.AnyCastle=48]="AnyCastle";e[e.Drop=64]="Drop";e[e.DropOrCapture=69]="DropOrCapture";e[e.DropOrPromote=72]="DropOrPromote"})(e.Flags||(e.Flags={}));(e=>{e[e.Capture=0]="Capture";e[e.Castle=1]="Castle";e[e.Check=2]="Check";e[e.Checkmate=3]="Checkmate";e[e.Normal=4]="Normal";e[e.Premove=5]="Premove";e[e.Promotion=6]="Promotion"})(e.Types||(e.Types={}))})(e.Move||(e.Move={}));(e=>{(e=>{(e=>{(e=>{(e=>{e.Arrows="arrows";e.Effects="effects";e.Pieces="pieces"})(e.Targets||(e.Targets={}));(e=>{e.Above="above";e.Below="below"})(e.Positions||(e.Positions={}))})(e.VisualOrder||(e.VisualOrder={}));(e=>{e.Image="Image";e.Star="Star";e.TextBox="TextBox"})(e.Types||(e.Types={}))})(e.CustomItem||(e.CustomItem={}));(e=>{e.alt="a";e.custom="c";e.default="d";e.shift="s";e.ctrl="l"})(e.ColorKeys||(e.ColorKeys={}));(e=>{e.a="alt";e.c="custom";e.d="default";e.s="shift";e.l="ctrl"})(e.JCEColorsMap||(e.JCEColorsMap={}));(e=>{e.Arrow="arrow";e.Effect="effect";e.Square="square";e.CustomItem="customItem"})(e.Types||(e.Types={}))})(e.Marking||(e.Marking={}))})(e.Node||(e.Node={}));(e=>{(e=>{e.p="pawn";e.n="knight";e.b="bishop";e.r="rook";e.q="queen";e.k="king"})(e.Names||(e.Names={}));(e=>{e.Pawn="p";e.Knight="n";e.Bishop="b";e.Rook="r";e.Queen="q";e.King="k"})(e.Types||(e.Types={}))})(e.Piece||(e.Piece={}));(e=>{(e=>{e.Color="#ffff00";e[e.Opacity=.5]="Opacity"})(e.Defaults||(e.Defaults={}));(e=>{e.Analysis="analysis";e.Move="move";e.Premove="premove";e.Selection="selection"})(e.Types||(e.Types={}))})(e.Highlight||(e.Highlight={}));(e=>{e.Blitz="blitz";e.Bullet="bullet";e.Rapid="rapid"})(e.TimeControlTypes||(e.TimeControlTypes={}));(e=>{e.Black="0-1";e.Draw="1/2-1/2";e.None="*";e.White="1-0"})(e.Results||(e.Results={}))})(a||(a={}))},93160:function(e,t,n){"use strict";var a;n.d(t,{R:function(){return l},S:function(){return a}});(e=>{(e=>{e.Name="highlights"})(e.Plugin||(e.Plugin={}))})(a||(a={}));let l="highlight"},51639:function(e,t,n){"use strict";n.d(t,{K:function(){return createTimeControlPlugin}});var a=n(79670);function createTimeControlPlugin(e){return{create,name:a.B.Plugin.Name};function create(t){let{api:n}=t;e&&n.timeControl.set(e)}}},18792:function(e,t,n){"use strict";n.d(t,{B:function(){return formatAPIMove}});var a=n(10269);function formatAPIMove(e,t,n){let l;if("string"==typeof e)l=a.A.sanToObj(e,t,n);else if("san"in e){if("to"in e)l=e;else{let{san:c,...d}=e,f=a.A.sanToObj(c,t,n);l=f?{...f,...d}:null}}else if("tcn"in e){let{tcn:t,...n}=e;l={...a.A.decodeTCN(t)[0],...n}}else l=e;return l?{animate:!0,...l}:null}},37242:function(e,t,n){"use strict";n.d(t,{$:function(){return createCustomItemsPlugin}});function createCustomItems(e){return{getDefaultStarColor};function getDefaultStarColor(){return e}}function createCustomItemsAPI(e){return function createAPI(){return createCustomItems(e)}}var a,l=n(32831),c=n(23572),d=n(47176),f=n(41906),m=n(17949),g=n(62230);function withDataProp(e,t,n){let a={...e};return a.data[t]=n,a}var _=n(84878),y=n(77457),b=n(67234),A=n(60527),C=n(70994);function getDOMTarget(e){if(!e)return null;let t=e.position===c.xF.Positions.Below;return e.target===c.xF.Targets.Arrows?{insertBefore:t,type:b.R.Arrows}:e.target===c.xF.Targets.Effects?{insertBefore:t,type:b.R.Effects}:e.target===c.xF.Targets.Pieces?{insertBefore:!t,type:t?b.R.Effects:b.R.Pieces}:null}var w=n(79561);function createCustomItemsMethods({board:e,el:t,options:n}){let a=(0,y.N)(),l=(0,y.N)(),d=(0,_.i)(),f=(0,y.N)(),m=document.createComment("/Custom Items");e.addToDom({el:m,insertAfter:!0,type:b.R.Pieces});return{addCustomItems,removeCustomItems};function addCustomItems(g){g.forEach(g=>{let{data:{color:_,image:y,opacity:b,text:k,type:S,visualOrder:T,frame:M,removalClass:P,square:L}}=g;l.isDefined(L)&&flushAnimatingCustomItem(L,P);f.isDefined(L)&&d.end(f.get(L));let N=document.createElement("div");N.classList.add(c.iX.Classes.Root);if(M){N.classList.add("custom-item__frame");M.imageAnimated&&N.classList.add("custom-item__frame--animated");let e=createCustomItemFrame(M);e&&N.appendChild(e)}else{N.innerHTML=w[S];assignSVGAttributes()}(0,A.a)({el:N,square:L});n.test&&(0,C.P_)(N,{[C.fd.Color]:_,[C.fd.Element]:C.mm.CustomItem,[C.fd.Opacity]:b,[C.fd.Square]:L,[C.fd.Type]:S});let x=getDOMTarget(T);x?e.addToDom({el:N,...x}):t.insertBefore(N,m);a.set(L,N);function assignSVGAttributes(){let e=N.querySelector("svg");if(e){_&&(e.style.fill=_);b&&(e.style.opacity=String(b));if(y){let t=e.querySelector("image");if(!t)return;t.setAttribute("href",y.url);if(y.percentOfSquare){let{width:n}=e.viewBox.baseVal,a=n*y.percentOfSquare*.01,l=(n-a)/2;Object.assign(t.style,{height:`${a}px`,width:`${a}px`,x:`${l}px`,y:`${l}px`})}}if(k){let t=e.querySelector("text");if(!t)return;t.innerHTML=k.value;k.color&&(t.style.fill=k.color)}}}})}function createCustomItemFrame(e){if(!e)return;let t=document.createElement("div"),{imageURL:n,imageAnimated:a,positionRatioX:l,positionRatioY:c,widthRatio:d,heightRatio:f}=e,m=a?"auto 100%":`${1/d*100}% ${1/f*100}%`;return t.style.backgroundImage=`url(${n})`,t.style.backgroundSize=m,t.style.backgroundPositionX=`${l/d/(1/d-1)*100}%`,t.style.backgroundPositionY=`${c/f/(1/f-1)*100}%`,t}function flushAnimatingCustomItem(e,t="captured"){let n=a.get(e);if(n&&n.classList.contains(t)){removeCustomItemElement(n,e);clearTimeout(l.get(e));l.deleteItem(e)}}function removeCustomItems(e){e.forEach(e=>{let{data:t}=e,{frame:n,removalClass:c="captured",removalTimeout:d=250,square:m}=t,g=a.get(m);if(g){if(null==n?void 0:n.imageAnimated)animateCustomItemImage({customItemElement:g,imageURL:n.imageURL,square:m,onAnimationEnd:()=>{f.isDefined(m)&&f.deleteItem(m);removeCustomItemElement(g,m)}});else{g.classList.add(c);l.set(m,window.setTimeout(()=>{l.isDefined(m)&&l.deleteItem(m);g&&removeCustomItemElement(g,m)},d))}}})}function removeCustomItemElement(e,n){t.removeChild(e);a.deleteItem(n)}function animateCustomItemImage({customItemElement:e,imageURL:t,square:n,onAnimationEnd:a}){let l=e.querySelector("div");if(!l){a();return}let c=new Image;c.src=t;c.onload=()=>{let t=e.clientHeight,m=Math.ceil(c.naturalWidth/c.naturalHeight),g=1/m,_=d.play({duration:m/24*1e3,data:{currentFrame:1},onUpdate:()=>{let{data:e,frameInfo:n}=_,a=g*e.currentFrame<n.elapsedInterval;if(a){l.style.backgroundPositionX=`-${t*e.currentFrame}px`;e.currentFrame++}},onEnd:a});f.set(n,_)}}}function init(e){let{api:t,options:n,renderer:a}=e,l=t.markings;null==a||a.extendRenderer(createCustomItemsMethods);let d=n.allowMarkings?l.getAllWhere({types:[c.hm]}):[];null==a||a.addCustomItems(d,e)}function createCustomItemsEventHandlers(){return[{condition:(0,f.q)(c.hm),handler:markCustomItem},{condition:(0,g.b)(c.hm),handler:unmarkCustomItem},{condition:(0,d.is)(l.i.InstanceEvents.RendererSet),handler:(e,t)=>init(t)}];function markCustomItem(e,t){let{api:n,renderer:a}=t,l=n["custom-items"],d=e.data.filter((0,m.X)(c.hm)).map(e=>e.data.color?e:withDataProp(e,"color",l.getDefaultStarColor()));null==a||a.addCustomItems(d,t)}function unmarkCustomItem(e,t){let{api:n,queue:a,renderer:l}=t,d=e.data.filter((0,m.X)(c.hm));d.forEach(e=>{let t=e.data.removalSound;t&&a.add(n.playSound,t)});null==l||l.removeCustomItems(d,t)}}(e=>{e.DefaultSquareColor="#ffa704"})(a||(a={}));function createCustomItemsPlugin({defaultStarColor:e=a.DefaultSquareColor}={}){return{create:init,api:createCustomItemsAPI(e),match:createCustomItemsEventHandlers(),name:c.iX.Plugin.Name}}},64299:function(e,t,n){"use strict";n.d(t,{k:function(){return isTouchEvent}});function isTouchEvent(e){return void 0!==e.touches}},37131:function(e,t,n){"use strict";n.d(t,{y:function(){return easeLinear}});function easeLinear(e){return e}},79561:function(e,t,n){"use strict";n.r(t);n.d(t,{Image:function(){return a},Star:function(){return l},TextBox:function(){return c}});let a=`
<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
  <image x="7.5" y="7.5" width="25" height="25" />
</svg>
`,l=`
  <svg xmlns="http://www.w3.org/2000/svg" style="fill: #ffa704" viewBox="0 0 40 40">
    <path
      d="M23.12,17.84H16.4a1.11,1.11,0,0,1-1.06-1.43L18.7,5.21a1.11,1.11,0,0,1,2.13,0l3.36,11.2A1.11,1.11,0,0,1,23.12,17.84Z" />
    <path
      d="M27.21,34.11,4.35,16.88a1.11,1.11,0,0,1,.67-2l17.89,0a1.11,1.11,0,0,1,1.06.8l5,17.19A1.11,1.11,0,0,1,27.21,34.11Z" />
    <path
      d="M35.17,16.88,12.31,34.11a1.11,1.11,0,0,1-1.74-1.2l5-17.19a1.11,1.11,0,0,1,1.06-.8l17.89,0A1.11,1.11,0,0,1,35.17,16.88Z" />
  </svg>
`,c=`
<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="5" y="12.5" width="30" height="15" rx="3" fill="inherit" />
  <text fill="#676767" font-size="0.8rem" x="20.5" y="20.5" dominant-baseline="middle" text-anchor="middle"></text>
</svg>
`},34592:function(e,t,n){"use strict";var a;n.d(t,{d:function(){return a}});(e=>{(e=>{e.Analysis="analysis";e.CaptureTheStar="capture-the-star";e.Explorer="exploring";e.GuessTheMove="guess-the-move";e.PassiveObserving="passive-observing";e.Observing="observing";e.Playing="playing";e.Setup="setup"})(e.Types||(e.Types={}))})(a||(a={}))},47834:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var a=(e=>(e.BadData="Bad Data",e.BeforeStateHooksConflict="Before State hooks conflict",e.DOMDoesNotMatchJCE="DOM Does Not Match JCE",e.ElementAlreadyExists="Element Already Exists",e.ElementNotFound="Element Not Found",e.IllegalJCECall="Illegal JCE Call",e.IncorrectMode="Incorrect Mode",e.InvalidStateMachine="Invalid State Machine",e.MissingPluginDependency="Missing Plugin Dependency",e))(a||{})},25495:function(e,t,n){"use strict";n.d(t,{l:function(){return M}});var a=n(15388),l=n(5700);let c=`<g id="Brilliant">
    <g>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M12.57,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.34A.41.41,0,0,1,10,14.1V12.2A.32.32,0,0,1,10,12a.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.4A.36.36,0,0,1,10,3.16a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M8.07,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2A.31.31,0,0,1,8,12a.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.17a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,d=`<g id="great_find">
    <g>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M10.32,14.1a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,f=`<g id="inaccuracy">
    <g>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M13.66,14.3a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.3V12.4a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,3.6A.5.5,0,0,1,11,3.36l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M7.65,14.32a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.49a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6A4.85,4.85,0,0,1,8.48,9a8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24A1.61,1.61,0,0,0,6,5.61a3,3,0,0,0-.41.18A1.75,1.75,0,0,0,5.3,6l-.11.09A.5.5,0,0,1,5,6.12.31.31,0,0,1,4.74,6l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.18a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17A3.92,3.92,0,0,1,8.93,4a2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.21,3,3,0,0,1,9.85,7.15Z"></path>
    </g>
  </g>`;var m=n(7215);let g=`<g id="blunder">
    <g>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M14.74,5A2.58,2.58,0,0,0,14,4a3.76,3.76,0,0,0-1.09-.56,4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06L10.37,6a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.3a1,1,0,0,1,.26-.7q.27-.28.66-.63a5.79,5.79,0,0,0,.51-.48,4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5Z"></path>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M12.38,12.15H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.15Z"></path>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M6.79,12.15H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,14.51a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.15Z"></path>
      <path class="${l.d.ClassNames.Component}" fill="#fff" d="M8.39,4A3.76,3.76,0,0,0,7.3,3.48a4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06L4.78,6a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,5.56a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.4a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1.5.5,0,0,0,0-.12V10.3a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9c.18-.15.35-.31.52-.48A7,7,0,0,0,9,7.89a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1A2.66,2.66,0,0,0,9.15,5,2.58,2.58,0,0,0,8.39,4Z"></path>
    </g>
  </g>`,_=`<g id="draw_black">
    <path d="M2.92,7V5.84c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V7Zm8.87-2.39L7,13.88H5l4.8-9.26ZM9.85,13.88c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,8.26,15,8.78,15,10c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
    <path class="${l.d.ClassNames.ComponentShadow}" fill="#fff" d="M2.92,6.51V5.34c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.51Zm8.87-2.39L7,13.38H5l4.8-9.26ZM9.85,13.38c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.76,15,8.28,15,9.5c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
  </g>`,y=`<g id="resign">
     <path
     d="M 4.1166627,5.4628911 C 4.0978684,5.3907765 4.0650542,5.3230701 4.0200928,5.2636365 3.9751319,5.2041998 3.9189029,5.1542038 3.8546188,5.1164993 3.7247928,5.0403508 3.5700345,5.0188935 3.4243877,5.0568504 3.3522707,5.0756446 3.2845643,5.1084589 3.2251276,5.1534202 3.1656931,5.1983811 3.115696,5.2546101 3.0779912,5.3188916 3.001843,5.448713 2.9803873,5.6034758 3.0183435,5.7491277 l 2.329766,8.6866993 c 0.01457,0.07524 0.04445,0.146674 0.087786,0.209878 0.043333,0.0632 0.099198,0.116846 0.1641237,0.157559 0.064951,0.04071 0.1375394,0.06762 0.2133234,0.07911 0.075759,0.01148 0.1530907,0.0072 0.2271523,-0.01241 0.07409,-0.01967 0.1433304,-0.05434 0.2034382,-0.101894 0.060109,-0.04752 0.1097821,-0.106936 0.1459767,-0.174483 0.036192,-0.06755 0.058111,-0.141808 0.064403,-0.218191 0.00626,-0.07638 -0.00317,-0.15324 -0.02786,-0.225804 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1;stroke-width:0.249618"
     id="path1" />
  <path
     d="M 14.467491,6.7409343 C 14.334345,6.1485165 14.15462,5.5960374 13.994864,4.9969421 L 13.45569,3 c -0.451783,0.4941833 -1.044201,0.8380118 -1.6974,0.985159 -0.544991,0.1279266 -1.104735,0.1816643 -1.664103,0.1597553 -0.5525038,0 -1.0916782,-0.039939 -1.6374927,-0.046596 C 7.8971265,4.0817857 7.3377825,4.137723 6.7925673,4.2647309 6.1388934,4.4077545 5.5444039,4.7467926 5.088507,5.2365754 L 5.6276764,7.2335301 6.093638,8.9775093 c 0.1397858,0.5125652 0.2862366,1.0517387 0.4526316,1.6840957 0,0.106513 0.059911,0.213 0.086543,0.319512 C 7.091185,10.489718 7.6875722,10.14859 8.3435177,10.002614 8.889532,9.8809508 9.4484757,9.8272835 10.007645,9.8428592 c 0.545839,0 1.085013,0.046599 1.630828,0.053242 0.561465,0.018619 1.123005,-0.035069 1.670766,-0.1597549 C 13.95882,9.5848047 14.547867,9.2415815 15,8.7511824 14.793641,7.9790383 14.627246,7.3400171 14.467491,6.7409343 Z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1;stroke-width:0.249618"
     id="path2" />
  </g>`,b=`<g id="mate">
<path
   d="m 9.9742023,6.6728298 2.42e-5,-2.42e-5 -0.00213,-0.00204 C 9.7700909,6.4784115 9.5898002,6.3078138 9.4249699,6.1860933 9.2615451,6.0654149 9.0947034,5.9782259 8.9192108,5.9782259 c -0.25168,0 -0.4344667,0.1056058 -0.549814,0.2695152 -0.1111793,0.1579967 -0.1529321,0.3598302 -0.1529321,0.5495475 0,0.3631985 0.1493457,0.7186669 0.3948949,1.0255973 l 0.036373,0.045485 h 0.058231 1.8222934 0.121163 V 7.7472074 c 0,-0.062738 0.0045,-0.1263489 0.0094,-0.192189 l 6.79e-4,-0.00921 c 0.0046,-0.061284 0.0093,-0.1257673 0.0093,-0.1863246 V 7.30329 l -0.04289,-0.0363 C 10.37581,7.055366 10.165155,6.8638071 9.9742023,6.6728298 Z M 8.7059637,10.223781 h -0.058231 l -0.036373,0.04546 c -0.2455492,0.306954 -0.3948949,0.662399 -0.3948949,1.025621 0,0.189718 0.041753,0.391551 0.1529321,0.549524 0.1153473,0.163909 0.298134,0.269539 0.549814,0.269539 0.1754926,0 0.3423343,-0.08719 0.5057591,-0.207867 0.1648303,-0.121721 0.345121,-0.292319 0.5471241,-0.484677 l 2.43e-5,2.4e-5 0.00208,-0.0021 c 0.1909566,-0.19096 0.4016116,-0.382519 0.6517156,-0.594143 l 0.04289,-0.0363 v -0.0562 c 0,-0.06056 -0.0048,-0.125041 -0.0093,-0.186349 l -6.79e-4,-0.0092 c -0.0049,-0.06584 -0.0094,-0.12945 -0.0094,-0.192188 V 10.223781 H 10.528257 Z M 14.663966,4.902295 h 0.208401 v 0.2084006 9.93e-5 l 0.0065,7.8706591 v 9.7e-5 0.208304 H 14.670436 14.55412 c -0.512351,0 -0.925154,-0.0027 -1.261842,-0.179928 l -0.0024,-0.0013 -0.0024,-0.0011 c -0.294717,-0.138683 -0.506995,-0.38084 -0.634046,-0.780096 l -0.04771,-0.149976 -0.132794,0.0845 c -0.389055,0.247585 -0.730662,0.573344 -1.056979,0.884515 -0.04173,0.03979 -0.08319,0.07931 -0.124459,0.118425 l -2.4e-5,-2.4e-5 -0.0023,0.0023 -0.02246,0.02249 c -0.696009,0.69613 -1.3763643,1.376606 -2.4702007,1.376606 -1.5837231,0 -2.7092072,-1.111695 -2.7092072,-2.631662 0,-0.757682 0.1705492,-1.383417 0.3033682,-1.762875 L 6.435997,10.042013 6.3016271,10.013224 5.7588163,9.8969076 5.6122817,9.8655021 v 0.1498789 0.770597 H 5.4038811 4.2794826 4.0904681 V 9.9378365 9.8166734 H 3.969305 3.3101776 3.1211632 V 9.6082728 8.4838791 8.2754786 H 3.3101776 3.969305 4.0904681 V 8.1543154 7.3061736 H 4.2794826 5.4038811 5.6122817 V 8.076771 8.2255594 L 5.7579924,8.195414 6.3201893,8.0790974 6.4618774,8.0498001 6.4081295,7.9154545 C 6.2579357,7.5399458 6.0872411,6.9154711 6.0872411,6.1575473 c 0,-1.5199695 1.1254841,-2.6316648 2.7092072,-2.6316648 0.9968332,0 1.6502897,0.5651455 2.2851117,1.1922446 h -0.0173 l 0.220735,0.2091227 c 0.04129,0.039104 0.08276,0.078642 0.124459,0.1184175 0.326317,0.3111784 0.667924,0.6369448 1.057003,0.8845295 l 0.13277,0.084499 0.04774,-0.1499757 C 12.773991,5.465466 12.986269,5.2233118 13.280986,5.0846237 l 0.0024,-0.00115 0.0024,-0.00126 C 13.622521,4.9050091 14.035323,4.902295 14.547649,4.902295 Z"
   fill="black"
   stroke="black"
   style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:0.242326;stroke-opacity:1"
   id="path1-4" />
   </g>`,A=`<g id="mate">
   <path
     d="m 8.91922,5.86598 c 0.27141,0 0.5622,0.28866 0.96931,0.70103 0.19387,0.20619 0.40707,0.41237 0.65917,0.63918 0,0.12371 -0.0194,0.26804 -0.0194,0.41237 H 8.70598 C 8.47334,7.30928 8.33764,6.95876 8.33764,6.60825 c 0,-0.37114 0.15509,-0.74227 0.58158,-0.74227 z m 0,6.26802 c -0.42649,0 -0.58158,-0.3711 -0.58158,-0.7422 0,-0.3506 0.1357,-0.7011 0.36834,-1.0104 h 1.82232 c 0,0.1444 0.0194,0.2887 0.0194,0.4124 -0.2521,0.2268 -0.4653,0.433 -0.65917,0.6392 -0.40711,0.4124 -0.6979,0.701 -0.96931,0.701 z M 11.3748,4.52577 C 10.6769,3.7835 9.95961,3 8.79645,3 7.14863,3 5.96607,4.23711 5.96607,5.92784 c 0,0.82474 0.17448,1.50515 0.32957,1.91752 L 5.73344,7.96907 V 7.02062 H 5.40388 4.27948 3.96931 V 8.05155 H 3.31018 3 V 8.40206 9.5979 9.9485 h 0.31018 0.65913 v 1.0309 h 0.31017 1.1244 0.32956 v -0.9485 l 0.54281,0.1237 c -0.1357,0.4124 -0.31018,1.0928 -0.31018,1.9176 0,1.6907 1.18256,2.9278 2.83038,2.9278 1.16316,0 1.88045,-0.7835 2.57835,-1.5258 0.3683,-0.3711 0.7367,-0.7629 1.1632,-1.0515 0.1357,0.4536 0.3683,0.7422 0.6979,0.9072 0.3683,0.2062 0.8142,0.2062 1.3182,0.2062 H 14.6704 15 V 13.1856 L 14.9935,4.81443 V 4.46392 H 14.664 14.5477 c -0.5041,0 -0.95,0 -1.3183,0.20618 C 12.8998,4.83505 12.6672,5.12371 12.5315,5.57732 12.105,5.28866 11.7367,4.89691 11.3683,4.52577 Z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path1-6" />
</g>`,C=`<g id="winner">
    <path
   d="m 24.4334,39.6517 c 15.9034,0 22.8584,-4.7017 22.8584,-4.7017 l 0.975,-23.6167 c 0,-2.16663 -1.495,-2.79497 -3.25,-1.4083 L 34.1834,17.53 26.6868,2.66667 C 26.0151,0.911667 25.1484,0.5 24.5201,0.5 23.8918,0.5 22.9384,0.955 22.3534,2.66667 L 14.6834,17.53 3.85008,9.925 C 2.09508,8.53833 0.513416,9.16667 0.600083,11.3333 L 1.57508,34.95 c 0,0 6.955,4.55 22.85832,4.7017 z"
   fill="white"
   style="fill:#ffffff;fill-opacity:1)"
   id="path1"
   transform="matrix(0.25173118,0,0,0.25173118,2.8497971,2.8741344)" />
  </g>`,w=`<g id="timeout">
  <path
     d="M 14.53306,6.65985 C 14.23406,5.94735 13.79936,5.29981 13.25316,4.75326 12.70156,4.20841 12.05256,3.77198 11.33986,3.46665 10.60046,3.15154 9.8037904,2.99267 9.0000004,3 8.1941504,2.99365 7.3955404,3.15247 6.65343,3.46665 5.94521,3.77288 5.30075,4.2093 4.75351,4.75326 4.2073,5.29981 3.77259,5.94735 3.47357,6.65985 3.15336,7.39796 2.99209,8.19521 3.00026,8.99975 c -0.00817,0.80451 0.1531,1.60181 0.47331,2.33991 0.29902,0.7125 0.73373,1.36 1.27994,1.9066 0.54921,0.5446 1.19599,0.9811 1.90659,1.2866 0.7400404,0.3133 1.5362904,0.4721 2.3399004,0.4666 0.80154,0.0064 1.5958596,-0.1524 2.3332596,-0.4666 0.7126,-0.3053 1.3616,-0.7418 1.9132,-1.2866 0.5462,-0.5466 0.981,-1.1941 1.28,-1.9066 0.317,-0.7391 0.4781,-1.5357 0.4733,-2.33991 0.0069,-0.80376 -0.1519,-1.60031 -0.4667,-2.3399 z m -1.6599,3.99981 c -0.4273,1.0054 -1.2278,1.806 -2.2332,2.2333 -0.5154,0.2234 -1.0716196,0.3369 -1.6332896,0.3333 -0.5659,0.0028 -1.12634,-0.1107 -1.6466,-0.3333 C 6.35339,12.45616 5.55527,11.64606 5.1335,10.63296 4.91346,10.11656 4.80003,9.56106 4.80003,8.99975 c 0,-0.56133 0.11343,-1.11687 0.33347,-1.63327 0.42744,-1.00301 1.22484,-1.8028 2.2265704,-2.23324 0.5182,-0.22176 1.07628,-0.33519 1.63993,-0.33331 0.5616,-0.00287 1.1176596,0.11062 1.6332596,0.33331 1.0054,0.42728 1.806,1.22782 2.2332,2.23324 0.2201,0.5164 0.3335,1.07194 0.3335,1.63327 0,0.56131 -0.1134,1.11681 -0.3335,1.63321 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path1" /><path
     d="M 11.03326,10.50636 9.5666404,9.03975 V 6.70651 c 0.0025,-0.07769 -0.01099,-0.15507 -0.03966,-0.22732 -0.02867,-0.07225 -0.0719,-0.13783 -0.127,-0.19266 -0.05063,-0.05599 -0.11231,-0.10089 -0.18115,-0.13187 -0.06884,-0.03098 -0.14335,-0.04737 -0.21883,-0.04812 h -0.59998 c -0.07966,-9.1e-4 -0.15866,0.0146 -0.23206,0.04557 -0.07341,0.03096 -0.13964,0.07672 -0.19458,0.13442 -0.05599,0.0545 -0.10024,0.11987 -0.13005,0.19209 -0.0298,0.07222 -0.04453,0.14977 -0.04328,0.22789 v 2.82655 c -6.3e-4,0.079 0.01435,0.1574 0.0441,0.2306 0.02974,0.0732 0.07366,0.1398 0.12923,0.196 l 1.81325,1.82 c 0.05533,0.0572 0.12162,0.1028 0.19492,0.1339 0.07331,0.0311 0.1521096,0.0471 0.2317096,0.0471 0.0796,0 0.1585,-0.016 0.2317,-0.0471 0.0733,-0.0311 0.1396,-0.0767 0.195,-0.1339 l 0.42,-0.42 c 0.0572,-0.0553 0.1027,-0.1216 0.1338,-0.1949 0.0311,-0.0733 0.0472,-0.1521 0.0472,-0.2318 0,-0.0796 -0.0161,-0.1584 -0.0472,-0.2317 -0.0311,-0.0733 -0.0766,-0.1396 -0.1338,-0.1949 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path2" />
</g>`,k=`<g id="abandon">
     <path
     d="M 4.916061,9.770005 H 11.4752 c 0.0515,5e-4 0.1025,-0.01 0.1497,-0.0306 0.0472,-0.0206 0.0895,-0.051 0.124101,-0.0892 0.0709,-0.07146 0.111699,-0.1674 0.114,-0.26805 V 8.6178651 c -0.0057,-0.1026901 -0.0482,-0.19988 -0.119701,-0.2737701 -0.0347,-0.03613 -0.0763,-0.06487 -0.122399,-0.08447 -0.0461,-0.01961 -0.0956,-0.02968 -0.145701,-0.0296 H 4.910351 l 1.27191,-1.2776102 c 0.03821,-0.03301 0.06836,-0.07433 0.08813,-0.1208 0.01977,-0.04647 0.02865,-0.09684 0.02594,-0.1472699 -8.7e-4,-0.10264 -0.0418,-0.20088 -0.11407,-0.27377 L 5.771601,6.0056148 c -0.03098,-0.03803 -0.07016,-0.06856 -0.1146,-0.0893 -0.04445,-0.02075 -0.09302,-0.03116 -0.14206,-0.03047 -0.09975,0.00412 -0.19392,0.04711 -0.26237,0.11977 L 2.919801,8.321285 2.514841,8.7262349 c -0.03683,0.03533 -0.06598,0.07788 -0.0856,0.1249801 -0.01963,0.04711 -0.02932,0.09777 -0.02847,0.14879 -0.00341,0.04998 0.00457,0.10007 0.02334,0.1465099 0.01878,0.04643 0.04785,0.088 0.08503,0.1215601 l 2.74343,2.72063 c 0.03619,0.0373 0.07971,0.0666 0.1278,0.0863 0.0481,0.0196 0.09974,0.0291 0.15168,0.0278 0.0487,0.0022 0.09725,-0.0069 0.14181,-0.0267 0.04455,-0.0198 0.08387,-0.0498 0.11485,-0.0874 l 0.41066,-0.405 c 0.04188,-0.0348 0.07559,-0.0783 0.09872,-0.1276 0.02313,-0.0493 0.03512,-0.1031 0.03512,-0.1575 0,-0.0545 -0.01199,-0.1083 -0.03512,-0.1576 -0.02313,-0.0492 -0.05684,-0.0928 -0.09872,-0.1276 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path1" /><path
     d="M 14.4867,3.866765 H 7.984591 c -0.06741,0 -0.13416,0.01328 -0.19644,0.03908 -0.06227,0.0258 -0.11886,0.06361 -0.16653,0.1112699 -0.04767,0.04767 -0.08548,0.10426 -0.11127,0.1665401 -0.0258,0.06228 -0.03908,0.12903 -0.03908,0.19644 v 2.90883 h 1.28901 v -2.13314 h 4.95072 v 7.68842 h -4.95072 v -2.1331 h -1.28901 v 2.9088 c 0,0.1362 0.05408,0.2667 0.15035,0.363 0.09627,0.0963 0.22683,0.1503 0.36297,0.1503 H 14.4867 c 0.136101,0 0.2667,-0.054 0.363,-0.1503 0.0962,-0.0963 0.1503,-0.2268 0.1503,-0.363 V 4.3800949 c 0,-0.13614 -0.0541,-0.26671 -0.1503,-0.36298 -0.0963,-0.09626 -0.2269,-0.15035 -0.363,-0.1503499 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path2" />
  </g>`,S=`<g id="bestMove">
    <path
     d="m 8.9841263,2.5728447 c -0.09619,-3e-5 -0.19013,0.02906 -0.26947,0.08346 -0.07933,0.0544 -0.14032,0.13155 -0.17495,0.22129 l -1.34597,3.49191 -3.73951,0.19681 c -0.09733,0.00662 -0.19044,0.0422 -0.26738,0.10216 -0.07693,0.05997 -0.13417,0.14158 -0.16435,0.23433 -0.02941,0.09166 -0.02996,0.19014 -0.00157,0.28212 0.02838,0.09197 0.08434,0.17301 0.16029,0.23215 l 2.90146,2.36184 -0.96504,3.6188003 c -0.0253,0.0934 -0.0212,0.1922 0.01175,0.2831 0.03295,0.0909 0.09315,0.1694 0.17237,0.2249 0.07979,0.0621 0.17819,0.0957 0.27935,0.0952 0.09232,4e-4 0.18276,-0.0261 0.26031,-0.0762 l 3.17446,-2.038 3.1427497,2.038 c 0.079,0.0555 0.1732,0.0852 0.2698,0.0852 0.0966,0 0.1908,-0.0297 0.2698,-0.0852 0.0786,-0.056 0.1382,-0.1346 0.1711,-0.2253 0.0329,-0.0907 0.0374,-0.1893 0.013,-0.2826 l -0.965,-3.6189003 2.9015,-2.3618 c 0.0759,-0.05913 0.1319,-0.14017 0.1603,-0.23215 0.0283,-0.09198 0.0278,-0.19045 -0.0016,-0.28211 -0.0302,-0.09276 -0.0874,-0.17437 -0.1644,-0.23433 -0.0769,-0.05997 -0.17,-0.09555 -0.2673,-0.10216 l -3.7396,-0.19682 -1.3713197,-3.48555 c -0.03241,-0.0945 -0.09298,-0.1768 -0.17358,-0.23582 -0.08059,-0.05903 -0.17733,-0.09195 -0.2772,-0.09433 z"
     fill="white"
     style="fill:#ffffff;fill-opacity:1"
     id="path1" />
  </g>`,T=`<g id="miss">
<rect
x="3"
y="7.6666651"
width="12"
height="2.6666701"
rx="0.33333299"
fill="white"
style="fill:#ffffff;fill-opacity:1"
id="rect1" />
  </g>`,M={[a.Rc.Brilliant]:{icon:c,color:2540195},[a.Rc.GreatFind]:{icon:d,color:7642047},[a.Rc.BestMove]:{icon:S,color:8500812},[a.Rc.Inaccuracy]:{icon:f,color:16238129},[a.Rc.Miss]:{icon:T,color:16742249},[a.Rc.CheckmateBlack]:{icon:b,color:14690344},[a.Rc.CheckmateWhite]:{icon:A,color:14690344},[a.Rc.Mate]:{icon:b,color:14690344},[a.Rc.Mistake]:{icon:m.R,color:16753753},[a.Rc.DrawBlack]:{icon:_,color:5591889},[a.Rc.DrawWhite]:{icon:_,color:5591889},[a.Rc.Stalemate]:{icon:_,color:5591889},[a.Rc.Blunder]:{icon:g,color:16400685},[a.Rc.ResignBlack]:{icon:y,color:14690344},[a.Rc.ResignWhite]:{icon:y,color:14690344},[a.Rc.Winner]:{icon:C,color:8632399},[a.Rc.WinnerWhite]:{icon:C,color:8632399},[a.Rc.TimeoutBlack]:{icon:w,color:14690344},[a.Rc.TimeoutWhite]:{icon:w,color:14690344},[a.Rc.Abandon]:{icon:k,color:14690344}}},77230:function(e,t,n){"use strict";n.d(t,{$:function(){return mergePlugins}});function mergePlugins(e,t){let n=Object.values(e).map(e=>e.name);return t.reduce((e,t)=>{let a=n.indexOf(t.name);return a>-1?e.splice(a,1,t):e.push(t),e},e)}},49923:function(e,t,n){"use strict";var a;n.d(t,{O:function(){return a}});(e=>{(e=>{e.Name="clocks"})(e.Plugin||(e.Plugin={}));(e=>{e.Blitz="blitz";e.Bullet="bullet";e.Rapid="rapid"})(e.TimeControlTypes||(e.TimeControlTypes={}))})(a||(a={}))},98845:function(e,t,n){"use strict";n.d(t,{P:function(){return getMainLineAncestorIds}});function getMainLineAncestorIds(e,t){if(!e)return null;if(0===e.line)return e;let n=t[e.line];return n&&void 0!==n.parentId&&void 0!==n.atMoveNode?getMainLineAncestorIds({line:n.parentId,move:n.atMoveNode},t):null}},79972:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});let a={wp:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA8UExURUxpcUFBQUNDQ0REREREREVFRUVFRUVFRf////j4+O/v7+Li4tPT08TExK+vr5SUlICAgGtra1VVVUZGRh1ZfCsAAAAIdFJOUwAgPF19qsrhYMPqTAAAA+1JREFUeNrtm9vSqyAMhSv1FAmKrPd/132BWs+2u0g6/7Bu25l+k4QQFvTxSEpKSkpKSkpKSkpKSkpKSkpKSvpVZUoplf0UkspLDCpz9SNhyissVOU/QJVjq+opnT4fKWdbo7XWprVDLkWr7AkA6A3VNQ1q2h4AoIQT6Ez9giIiotYBwFOUqqM1FVHTC3IpAGjrLRVR04nlMasOqYh0B6CSqPvihIqILYBCZhHaQyrS3IuksQTQHFIRcSsRLjWk8IiKNFsAWfzKcs05lgEQe3sE0J1RUcPcA1X8HPIpFjF30bOYA6BTKmI20Vt9AfTnwSLN7GIXVwnYcypi5j52iyiB7i2sMipW9RaWFcE6pWokolUC9hxLS9RWAfTXWNFXYg7gMofx+5YCYK6CFb/LPwB0F8ES2BP9BHHaHUQmCAWgPU0hW4nxtAScPqMyIsP8E4A9ziALzfKP8iCNjacSOvk8MuxyaU8ldk70vki7C8WdoDsyeBCv9I1QLOlB+OP+VPeNntRDLIWjD2h3mqqPFiTMSlUO5tZu4+qcjCfoQ9U19cGWaCQCNoXq2Bnh+AEbQkXHR7KGOXbA/AJ0XNdnhg0zcxszYM8pVCdYvoUZG6+tKgCmrqmuqT4fbYZ2Hw+L6UJjv2+jDc7Z1Rz/GiN8tOKdXe0F1nx3jHWCLQDo96jaiB1C4SJcExX3Mc9kxeKazvBK7eLjeCOqWvzumorN4uOIu888XG6DxXOqmJt1lg8qgX6L5YBy/IbIMFgBVm+weplDz8qK2HDZ+ObDnnGz5hKwajaDl6YNVyt5J+xP1v2qgY41L1hc2eucqNfFBdkcMu1wyWaxGnO44XKxre/V9NzSLpcVfKBRAW5/cGADsXDlANr6gMtKVVeGVbDmszIbJ2SOlAA2DkSz6PSFTAp3rhSbxWCaS6xC1+w9r1kMg5FXo8LhHXqzmJ2jcqnq5HVGM1+NMbkUhmcQNf0Q13Oiqi/O1DGt3fyKatZYbaxTRla+qGp6j+t+h8sbgeaK6pXIDvcn0ofK6WuqF5i3BIvs5lqfjMArrBHMe6iVujWBbkjgG1TTfUt350PU3F9afEI1kpn7OsVzemb6CdR4HXRXZ1WzFfghlX9RfI97U81iRf+j7o45On/10P+jIrLhG34GoKdvoIgaFzyNxTBefUHlyysPHSz7LRVRH9gDyMdgfUVFoZ8oVf7h5JdURGE9gMsHzJ80iSxoDpsAVKSDZrEE+hBUREH9OFw/53y/pVYh24MJQkUhrxefAHQYLBNwjrh8NilT8zng6kBcAfefYm6Rfr8U/z6W6wIpLFZI/XWsKqh+4a+xSUlJSUlJSX9R/wAgFdSXQxyROwAAAABJRU5ErkJggg==",wn:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABCUExURUxpcUVFRfj4+EZGRkRERENDQ0VFRUVFRUREREFBQdPT0////5OTk+7u7uHh4V1dXU9PT6SkpG5ubre3t8jIyIKCgji/HX0AAAAKdFJOUwC1//+RRfHebR4QloLCAAAF2ElEQVR42u2c3bacIAyFK/6gKIio7/+qFVBHHcWMhBnbZS66zkV75jvZmxACp3/+PPHEE0888cQTTzxRpHl6P6goHiK/GVWaxfH9uIqR6mZcWsFetDfjSjVVWZY340riWPIBi9yLK7LJKsm9uAbDNxbrTlzaWl15O658AOET1n24BsfX5YxluZI8LX6MRUfHj1iWa4iMJnnxUw3bJdbMpYMm6c8MX5Ml1cBVywVZ9gOygs7r8IU1hOiaXs1wNP8BVfVOZYKLrprQsuSLNjMNjSIHWIaMNSNZlnzTV04qC9ZVtQXLv7YG4564oKzPGGssWFR8iaoqT6lMxkaw8AkzCjYQKg3GGKvkNxJGZyoCiSFhnTLFoggtYQWnsglrdMKykNU1ey/uAK62DttgvHZCAg82CZkHdFa9puqalgO4WB+Qq4hfjbL9QK2ObCBcleYK469k6kinVI1b34+5Bg3VgopPvYLkAN8brqwIU0rbBVY/N1cdoH5Zf9EwB1bywhKvno8REJdej0mIotUvklXNVApWvlhXB7DXfDIcP6meqThsGxrqagB7bTRkseyrXqm+A1dVa/skqIZNQz4Kky5jrxR741lqyMmHwSYZadiNh1xJV4+brnxTtD4PsxiZ3hkoarKWhr8SbHZ9irkdQlsaxl0qMsR0mcM9kEow4VIRM126hWcwquHDhVNF7a4ITcIKaCwtlRPLLMYCS0ICTtYh1miuFqdRNdcVQAltRtxYuqdFUDHa9sqnNdNZuazpC4xCqoBU9oPFCRaGilpCKYB1VICwMFSkH+w6bWc+lbvrvFmLmX9t6IFUXaxgWI2vuUxt4MBFONTJxuH4F1bnaa5iKu8QX+kuunZY64WlzZUg1AbIIrS9fePAmi2vm1TqWRsIrLqPJw7lsNYLS1eub9QGoyDV68NhrReWl+en2gClKsy5WwCwWo/mJh9rA6AySDuHNCMdflJsTXgsRWpvo3e/vVh+eDNNRwv3+GaBJS8vxeJoFW52GGFGfdE8PCHn9cGnQoz3q8cOMQnjZmA7foa2vABhqcu7or1fdUrBOzt2n8bI1Dkm4Qus3gdLlYenYz1+mIYj02VA7tZQrLHoZSx5NGmvl1et6aLM1Rykoa6n9Lq3xO7P3C8uWaN0tVO1MA01VnZ9JVZ7P7OlolGUrN6URScDOIGDZT6ne//mpkq9394nsVvClYY+WLoKya0q5vS5s3Hon0EyAtTQw1s2AXEv1slSe/uGeY4nOwLV0GMlTlzxYgzJjYTRbrfoplony6OcmtVoH9rVDVtI+DaUNXfqkhF4sjyxxseSmqwaOhZhRtj53j2xEuSDZHls1RNYMj9NlFLuSGgdyCEjN4Z1xjBgebQs6sVOOs+mzhsJvdrANRndp6J7VeRMQpwpxEiQ5sn2qbClOr3y2VL51QfYiKkW5EMJsUZJLqrzG583CVEc70v1LiGW448HAQCqdwn9Tq+AUySA6l1C7xp/1vZcpPKv8c7e9XwN7koY0FoFqF4dJCuctai7b3eswpDWMuMJck1CU7WSUBVL8osSmk4yiLUSoIS7yUKYMx/7HfD24SBZwTbEBPRQ5ChZbagNMfNKFmKv9XZ+vO4szymzc9tZLkP9Irfr2rYxUdmwX+o/27brvrLzZHo2IVjbVL1aPUY/Dlkr1VeNvhMKVR70OgTS7PDpoViA8lDk9DglJpRS9otDdPTHxItDo86ZEWZQRnA+vgjfBOfaea3Ve/W7B6hb4Qgl+6YTvPw0+OBHtZ0h4pRRPZAQpU+IccSZY1IpVvqHGWUglQkzAWlLlLAXHylSXZCbVBHw+yT9V1f/FOuZYPT6HRqPx1IG0USDImNhr8sIVpSlwqirufs650KgnPgjWDPzSWC0g5CH3h8GwjSpgDyo/jBa/+Niim4ta67C3/HIVOYJeeqNJbGxuD+WvorFxiL+FeK+WAodSz5YD5a95q+wA8XyQeL/xMppmLjb/zbzxBNPPPHEE0/84/EXqrqgdaE+G+kAAAAASUVORK5CYII=",wb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABIUExURUxpcUJCQkREREVFRUREREREREVFRUVFRT8/P0RERPj4+EZGRtPT0////6CgoOHh4f39/bKysmRkZFFRUcXFxY+Pj+/v73p6esE377UAAAAKdFJOUwAoZMREiPDfEqnkaJEWAAAFq0lEQVR42u2b2ZajOgxFmzCaGMzM///pRTIhsoF0IBaw+qKHfqjK6ux1JB3LQ/35c8cdd9xxxx13OI3ES66GFITxc4hIPC4E5fnPKeLLgIVPI/zkQlR92TRlW6NgyVWo2i4rUoiyvgZXMGDUzQg1RFMNPxCnY0EHEqpUIZd3AbFyQpUqWV5ALjGkMM1SiiX7gevk6oqGcqdiARbIFZxrpFBZlAqw5NCN4emlpQwsqbHE+ViUqhuo2uflsIYc5rBmn1tbyYBQmjmEgj+54tFNezOH4KanTxGhmUV1gcJ6OURPxGouMkEImB/eYlUXKCyIx/PN1WEXiqtQVUqvPyhWdIEU4gzYp1n2Fiu8CFVbjGv1VcRCqjIbqbRYk2UF4sQmHCbT11wjTbHik2o/1FP8i6rDZSekvSDOopITVWpOpUn0PIXLplJo8MLa0ooz/OqdQRArJwYPa1JVH84V2FQKCz6m3YBT6qE25kXaGTIy0DSEIdEL+MFcSYy7Q1OsluxaobIkbLHrI4cvX3v7mwomeJrDAbvSW/8DB2jQokozusM3cxi8R2nwsmPWIzwM6UhhoVi0D2Gr3Y2/g9z6RxQWlLvMLLHASyO61Z5+2R9T9sIudxSLbllBzub920MGVvDRqqApRLEa0nJQex3Zox1QXpDCWhli4f4+J/ZgbdLSAyZpMfqoJRaUVry2peVPY/BKoSWWXVqSYqGrsu7SwEiVKRYWvFVatUGVKuYZH+q9zUyxMIf0pM23SgvIec9T49FIM+tACxfE5O1auYmV8p6nPl71Xlg5pBXvGa71UrRnlCvG81tTLMwhJEkQdpXaWWz45AoWxBqxSEnPK34a9D2uNpyJpUuLNqJ4DTXmpxquZvTGxTCbHeHajdjOsPRpPcsSFL48a46Vf27E6bT+wVPwfWbncPKHaG3pmfq1Zhm8vKWCH7Esf5CLWC3LnQuOKzOx0pc/+KRdVbpQ80xZ9BdzmC7ZVreIxXK5kSznUPsWueR5LNmWxqJztUsvVXOxNJY5P1QLWMoaFR2WVl18gSXWsRqG4hJjaRULPdaYm7F+BYvjQi+eT1oT1udp641Vua/5+Qxvtr73ae2ZD/wOG7FZEGtaV/6CZS8GDj1ermHRJTFeWhJHteBzPP6wKAR2fqJjBWu2orNjKfw6EsdjFQvf2H2B1UnJ4qcfsPQ2kES5UlrHqjV8aWmEPA5r7MR0Z0jJ04mjb+2k0qXF4Ft6ril2YukcMrg87hwcYLme5n376dH2HHIs1TBH7cUaxeIYbHAM/KkPjbHMqXH9JhbH0Ly8Ld0iFoM/jOPpT2LR3aTTmq9/aUOWHYbel8pfxMpZTriSlUnqWyoOjx8NtdqfQrZzt11ZnKiMmz3X1z397hQat7PujwP3UpVst9bec6N1ESrOx0pim1yUqmS89THfJ26h4n3ZJRYuTv7eg+O5Kd8VGbwWqbptfoWexXyhGH5Z9UYCJf+zT/+bNHYWFf/LXQ+fbW2SCv2d++UuPjhQX1cVeEN9xEMI6Mb1sp9BaaoDXiX5o16dUrJp4NAhH6LV0eO/8IOybJoXFf9jlsR74GvEun5+EfpTccD650hBKOLnzojFg4UtENGqJBWNelXIOHRNFviUA769b3OpVIe3xPPooPLytq/6vqKUvsuWnP5cs2pLqVZI1iNVTdlW438hnDlYoIu8bTYDGQI2vU6l55Cqzrvs5+had1z46q7/BFVY8eGjqnL1VhBsvS9shjT94vymSGek+JjLgb2+n2whzP4Y6brayaCKA/xvQCack31sEu09qVkNFzvGYMP4/mWUDs5Iwp3nR5/GRAeTjti+w/9rODjajZ2XFhbXr6N9tOtU63M4uDbYf5K7Hu1lsX50iMS9P+Aj5+jG2uCnP2J5/yOs3AlWnzuO3gkWR/ybWEnMFH/uuOOOO+644447nMd/5mwuGyzR1rsAAAAASUVORK5CYII=",wr:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAA/UExURUxpcUFBQUNDQ0REREREREVFRUVFRUVFRf////j4+O/v7+Li4tPT08XFxbS0tKCgoI+Pj3p6emNjY1NTU0ZGRi8lq24AAAAIdFJOUwAiRmyXweDwOT8tswAABR1JREFUeNrtm2FzozYQht+VsO/aGZxk2v//C3vTnP3h7my0bz9gbIEhloTkuK02M5nYKPDw7mq1SAKoVq1atWrVqlWrVq1atWrVriZ5ziLnExHkU2BZEdmNvtmTdJ+Ntd3NfLk/PhZLREQAoBt89edwiP7Z/hraNwBAMtK3TURbY8xFmr/d9bY6VVIhAESMWAvImcK8XARU1QJYYm07o7IAOLnLN6RCPayrM3bAwTnmxRL7OvyphBgYD4tjAPU+mb597/gWeA8EC8OyTQsAdOoUwGaL3bfL+anjGCUvH2QHdEcA1lojAF4PncuHJS0A13XsL+9wcZNMYh0AOGQxyNBYtTPWGqB9zxtb/NVd3USBUQ9r3J+vXxiArv8kcM5sg3tXGBMgnRdBCk8PTrMM/aPqQesQiJmwphlOgZcrlmAJ6wXQpIwdrBaMh+Yu/9nO3D+B9nJy592VlFer/zx7IfpHnaQMKeFq+eeknv9Tzowju0Cb68Hlm8iIBR9rWa0pFnI78QDIJJO31hgjmCmwSECMMbadSCnAIevgM720A/C2ePsUvHoNfbWYM7ZuUqYSH3iFoyAcqZUX66YbaRiWJlabTZpa+PVR6+Nx/p7C1WqQZkw5mDtv3aqVVJsXiS1ZS5V9TLzNp4li5Vcrpuky1jOpJSikFg9r1LpiHTI7UTNgmZlqYyUWAZvqxfM1xAT7MEYtbJKnc/qnOuRXS/fARlaJZYF9biw4QLYpWtlhmJNrmXP/eTl4EDx9hZHoeSsZ7rtpgO9d/hmbDsBGjlwKn3NWGherZvD7xp5PkX20sm8A9NRdhehnu2QyWpLsZ7T0EiLWGm/yKfMgat8AQDsVIyIhUakESbEGcVRxI4ppdskpdd8pCmEBzWjuDSAx/AznO/+MT3xwXVxPie7vr713SFJJf/Z7Zpr1HHfvLnJaPLZoJgH80JvHwtsiceiS8gXxk/XRtbxMn7IGBlkoX0kpVp0uPIyNLq/K+KeRjGotO3hWMeIBan1YNFH5SVjtx16ZWRMgsCuNdbcep+bIQ9mxbrn4IKw7o8iU6xFYCMiNE66Uhc8EtRgLzoc4MeDm9TmxbtqUxtqFYenKxGVy54cZroSuaLLnh1svlscKrwi4qoQopdYUq7gTA++dXJMh4rE0ye3FYys0UnRNcJno5oznZ8p1MhaBy4BtSSxBqlqRwWUK5YcbfnkWta4ttTxW0m42lsWK6+xMzxDxaiViydNgjdqWxNqlzSjEF4KmWH7w1YpOXKZcflhTCEb3xGS18H9TK7ra8vN8Uaz0HcvPiMWnwuJDsNo1arWlsGKz6YquaIrmBz4K60FqNekR3y/oyGhLCM+/2W+S97ikGBYAPa9tSthOIKJf8oQyrrCJVMv8HplCk3adRrTtN0YuSLLM4tvBBb9gEIhl7Is/6zEsRy+9QCP9Sme/kO27+7vTfFiXdwuoTqmxKVWMGDus8YeteIZgyWYHAJ3r1rxaJI1tAGB/YhYs2bYATifFWjObDYDD8T5XwK6R7Q7Qn6cML2HROSv4EvA6xn21mlfA/Zx0ttA0RJl2068WeO9WY8kfgP5gwrPe/AApvxng2z3pTYiXj5x29KSYFxEBjyGhE4LlnOR5XxCAiHMZsEwbsesqzBzQmpVYErW/Kci6gCgNwFLmxaJmwcpMFfS88S/FQhksZAj5ArZWrbaMWu16J36GVaz/AFbAA5mVx0sRgmWrEwPz2rbQdY+oVq1atWrVqlXLbP8ALD7swRCgEUgAAAAASUVORK5CYII=",wq:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABOUExURUxpcUBAQENDQ0REREREREVFRUREREVFRUVFRUVFRf////j4+PHx8ejo6N7e3tPT08nJyby8vK+vr6CgoJGRkYKCgnBwcGBgYFFRUUZGRknouq0AAAAKdFJOUwAVMlVylLzf7PdB/fgsAAAHtUlEQVR42u1c27akKAxt71qAeBf+/0dngZaSQNVRwbN6ZsxL9+qiZJuE7Gyg+s+fxx577LHHHnvssceiACPCWpzlpZSyyNNPM0dpXkgpyzyLfwtUoiZcrcpcwKJsHyHz5Fdil0tgpT1rWsEh2f3RjBdXjX3bdsO8zIqGLK6ah67t+kn/vbgbV6xySnT09SLKmsnGpb051usI1v8Crkj5amKvdU5CiJ41NSOocLfGCK58mt8KS8VnJMachHUq8XdnxApVbY4gzYyQB3eWyhmAilDegzCqEDZgBKkbIWUZ3essDucknKv8igxnDWgE08hvdFcp5YTmJJy3xqQKOEUjaq7Sq7hvGUopWzQn5XrSd0oXUo5ohII1GA4NX97drlCTVnvyuYArhyY3ppZwzKlTJ9r8yR3A+Z3JlUk5u+ZUNSLeYDE4gqkRXPwqrGXODnirflnuvNdbqoC75oRBbF6WO3lzZ26plOf2nKpwvZd/JWXvGNFvYb6pyPewZmlXiL3M54oGcJA18PK+cppLKagVw8GIkHJohwfo+pDd2JcqasGw1JyFSQSCoRBqerqzeVZ9TQtDpPuDBCyLiYIga3fe2tmolbYHSddv3E2pFmKuTVijvLeBWJ0hJ757Q+DeU3eK8x7kTnfWQatD5O5tpJzbd+5MFgnHWwJSzvul3U9CichV6BV5gr6faFnTv+ftrEnTrbrRJYCyjA8++0dQ2a6pytQhAvttqQmHxJi3II+2HjOfXZ3SakkJdF6B3nZPe6YnrqIPNVd/Wnx9dnk86wyht0jBKvkAi9hRVDGst08HXN5T/OzDFL6utrcUtFZSZBQvpqOYu2NIaqND3Auy8ezp+CrV3+z2lp2p/KhiCKshIH2gIOt3WIqjcd3rDTkwoGd/V6hAUuEqHZuwmI5i6ozhqnkixBJApPTymPpI0fuod56Aq2Ozv6FAYeiJJwIxR1+eTerxWBgL3YKCb+rWJQewauPTEelEs4PoAEkXi/oF/W0jjhCmQ3RxJKhU8jFjaqwT8Wfxd0F3SKwpP8MXomvTmwJdZjoT6sTJfCMASyknYsE6JNYyLZwtGTEbtVwjd78vjCEhsInPrWfrlxYHesTcksX12sjlBiwBBuxRzKAjSY1hDRgWg6/8BdaANxl+gMX2LYZS7TOBVzKjX1jPfjch+QFYk0N0mW+UQRmxFrZ4zboWIjZ1q44EgsWPeUsLegsWSHkLFmtWCZFBCYJhZcjNi7OaI7xoaUH67sbNBTWhV16VIo4hoSCfLWfq5XRIQ0YVejRdlWABVgXK2+XR9rQERqiEfqb1mh/lsa6mQX4egZ9tWHSJoiNIEFYGBEq9Ce4DGlKVnplBd01AR9iwSK1ks3L04PggB13ACAV3K1Ab+c1dCJfuufLIWOdodqrfGfsZwVp2zylQtgrVwUZQKT3RgBxoTDVYoJ0IHaylBcYx1A1C/hlVL44rW/19ObXMrNYGrtIBiy2nKIP171szr8+KZmpWnUWt5UdVxvu0aaYGwYgtNRHvLdbpb/DPsHIzN+pldZ9CpfJr0UwtceFywqqFxFVWu+WtMQAqtpZCKatze4RRpnSTWTXrbsUV2dVJ2SgdsdXNerWuI1Gb7K8CWF440stQUPTpjkyhwtitBT0r6NUxKrbut17aTY1wCq+4YjcsKhwxXHJO63DBQU8yHSxXP+79vc8GM1dq6yj2H2BpOdwAIvTYH0ys3F5wuaNFGue/tus3Wsj9o8f+YGGtLbqsH8mIy13ECdZa0+vxweX9wdTOohUXdSFwYl3Kf+c4jrm8E2c1OeqpeseKHLZaosLBjzcz32oEc+ASx2ExtJ5ZgA3x2FUi6XQGFoGo6LbJ67PHm7s8Q6f5BCwxWuquEZ4b4omTaOh4AtZIrcOWwfv0oLTkhJfxd8J7nlxnH2rnNau340fPw8XI1dtdNbqdAFW+hxoWMXqHMMhxWeJs+jxCGCDh3cR40d5HniLIcVnqbq+uJpYfHX4nRo8QetLhd2K8HsJg58OxWztcC6E3Hf5AjBdRNSLY+bCbGC8lFrgFEOLaVhhUQS9y+RIj21B1Ie/aeBLjllhh6DAQMRqomrC3R3yI0UAViA6DEGNtwBKBb49cJ0YTVR/8nsZVYjRRBaNDX2KkANUN16UuEaOZ7UHp0H2P4BqqRtxwXeo8MTKIKigdXiZGmFah6fAqMWJXBaZD17WsK64KTYcXiNEFKjQdniZGJ6jwdHiKGClzgwpPh67bdSsE3jRt23W9skHZOOo/hr7vu65tmhvpEBEj4203jNMs5BET8zyNQ981N94ejgrpY/kd6zBK8y8uMU18dOTpm5M/H5iZv1ZbAtM2vGZU/erHNqpyv2m7XsXb+GaVhgS23X6cp4HT11mjfJjE+ZuTR3hHyrmvXz5W9+4f6HmhmpqXvy23MrNg5UrfrAxgyw/0QsQxrtT1A/z410HSViPBN9tAt9Tz9U7mC/947LQtz+iChFEJ/dEbkYktSIeTBj0veB98JgFiOJGwNgeIYhVgh9K+GuHb1MeBtr+tOwj+LWkdGBb3b1TTUwfTx4+vE29YIjQs+nfCIv6KMQt1EPUvgCUeWA+s5XZ0H9qCpPwt9t+ElRb32K/8by2PPfbYY4899tj/y/4BGYsA2gPdkaEAAAAASUVORK5CYII=",wk:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABIUExURUxpcUFBQUNDQ0REREREREREREVFRUVFRUVFRf////39/fj4+PHx8eTk5NTU1MnJyb6+vq+vr56enoaGhnNzc2JiYlJSUkZGRt7Q2EcAAAAJdFJOUwAaSmmEosHg8fYyyCoAAAXsSURBVHja7ZvXuqM6DIXpkLjhut7/Tc+FYSeAIQacMudDlxPKvyUhL8meLLvssssuu+yyf8+KheW/gNVhbtWF9Q9iKfow90NYt/to5KewyJ9dWBdWstq+xKq/V+8n1WqG9cUKdmEdru3kgXX/br2f1vb7A+thX8Mim3ZhXVgX1oX1c1j3n8TS/WjsCUb8/av79lLdP2GZ31EQz95SP4NlnzNKfBUrH60F9DMWBVCNP35N0+cA5OQDtED9sbcXZVXVdV1XVTlpHAoAfIKlgXZyZ1FWtb81bctR1O1s+NHWVeF/qwA3LVcSQD4QVc18cNKMN55mWo5kxjfkWdYAZorFARRZllfNyn1tddppxePZzhpjjHXTNwBQy+peVxP/OmuMsY9bu3NgeT08VktGbjcv2ikTUtunl4oZ1nNBNUqKR1VjQg0/duVxqtKHT4v77Xa7T1dAKtSIRmdY6g+J0+VKSaW/rznqMO8qRZdM4x8vDRapNRRUI9nqGi4MAHSHcj9vAECz2+22oRSYcmrhDzjFtsVF7wCgPEolb9tUhBC6JJCUvDJmjnE1ABx/CXXcFHwh2Z1Xlr2RypfdnVwlAPdeKu+vds/3mHdDBMk7jWrsW9UbAP2bfUUI4XZXGAsA+v1UhPWYqo2XznL0/VSEcr2jShQA1LsTy0dRuHh3NYAjH3AWIYyr6OzKvbM+QEUoFy72YywBsE9hcQ10sTG0H8ksQgjnMjaKL2LIeyl7TmOzR0jZC7aeXDwyigUAvuYsod2fxmMvmR5X25WrGecGaCJTi4SdxfSkVdB8eym2EzkvV7AUgDjtYMMxZHbew+gNBbq8OIz16N9eZbwOYlELAHWR+wbQ+0CsfGJez3d1mWdZlpdeUwY/xT4u51tABVNLTfuCoSuS69qzLaepARbC4nHrT7eCRd1cHXldHfKXWU5rikBD6bHipnMdIEMxFAFnV7OR2xNWWwTKYSi3IrGwgiUDX0y+jlWHvnAawrKnsFRgrd+DVYSSKx6r+zRWXBBbQK0FMT+BtZw4EUJ49JfYACaExQKj0B1YeRcYC1AeXbcqwAWLvFm6awdWHbqUcb/45LFyi4QrRHMUq0CoPnAeLbhyADIoIJZtXTRW3i1GrEMMuY1TEFkLmCAWtfP0isXK22CNZ0NqRfU+FQAWFDbczZ4RiZU3QQFBhxgij20xdFicitn0JxKrAWBpMLOEi4yhfwqLmrLEYTUALAuGkOv4dr9Y0WxLriisGoALa5pd7WvWrOiVUXX9TT1jsGoAjoepuNkzG8nDufAoE10ejVVtUUlEZ9b4rLUwPnO9xirDStFTCRf7GT5qV/B9f1xep77EKraouN2741iEXT881Iy+f4VVIHjBQKX3hfAxPF3jsgDqoiw3RHNTlWXZBXuQgUo9Jem+UfNa2jMX3j4P7PqoNSp5ZADuq4RZ4+IuEstsUh3Zxmi3uMSwIWdNKAPVuEu39PdA1bujG+zbXIy9HNrQwDXPVAd3tPNuq3wdnbOdpcqyIjXXM1WTZT/ClYgqMVcyqqRcCakSciWlGrhUKiqRiCoR10hlU1ENOkCmoOL2zEmDIJdIQGX27reekDnxVDotlVfR5iyVPCKwXsscdY5KuEMC67Wc4DOBwIXopZRKKaWUVlpppZRSUsq+F4J7/TBScfOOs4LjJIiJXik9Oy+1as4ao5WUYnfztSe9rMVBc3Zv8xUZxWrjlRNzq45si9RQ9fPjrdFKyV5wxii5BexOKWNc9FJpbZ4p2zJ1AD2QFIzedtqd8v5vZzGhx/xumJHsdsLuXHm0MiWV4bfTdvw02Uoj68SWH+a2AaaRqKYW45mpKQQhEScS7mQBKncdq9kOIR94zmibkU4nCaM/cHNPdVjD/1fiNkVmOZq0hZUpsqtL3VgH97R2l/etseBBM+fX7GJ9Rn/mqOLZ5CoBvONk5/nV0KbGEuclTn1Cw6+eafpdrOL3sFgSLP2DWM0bsOiF9XEsq1JbEqy32P8Tq27fY6kb2csuu+yyyy677LLsP+d98B4+O0hIAAAAAElFTkSuQmCC",bp:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSQkJCUlJSUlJSUlJSUlJSUlJSUlJSwsK3d0dGZjYlZTUk1KSUVCQjo5OSYmJrRYvAoAAAAJdFJOUwAfN1Z6o8Tg+2/nYHEAAAPpSURBVHja7ZlNTxNRFIZb2gpL4kKX4EbdlcSYuMMYEt3Vf4D+growcVklboDEWU/5BdA/AJxWtioUtiXktluRxApoGejHa+5MP+ZOKb09lxij8+7K4sk5Z87HO0MkEipUqFChQoUKFeqf1s0Hd66J9DADoPbkGkjRp/D02pz1DB29N0XdA5yDtVzhK4CXZqiYhdaGnSOiggVnxoiVgrPqoogKwKkJKg7s2yvkaR0wCWwWdTtLHVVxYtAPFjbaGUrt4mySzbqhhCXL/9wgxcNutYgoXzJIMg3bJp/KqLGbCw1/ikRFC9NMVgLnvspLVgWPmawJ7CspUqGEV0xWEqtZlVXGMXuA/E9RsgR7jOZbarkk6ye3JZp9LOsXk5VpqKWXrBqblf0rWemm+hipyK/XfCvAEvznmEKuj3XK7nsVlRf8vp/AUaBc/HlMoB5IscJerDG01I4Q/P0VyWBbSdFgr0Zm/QUrCGGy72+g6XuIMkX+HYpaOOhlKMom9zEy2w2sKIQwutvST7gVy0tUycxPjFlwJGpHyjJKMZICvnWr/8nIGt4FlnurIl81sIZxQNn4woLDvLVjGWkK/Y1fBmqT3GLtK36iIB8lq2S3gSVbObYF2WKsks2iYdvKgfTG6ITF+rK5uUYBVpnFSioLp50jc0tP9eZaYf1gsMYD296bb97GT6ARPEPuruB065i67b2whAVWs6a9Vz3RVtn7yTMBSZUlvJ/vmOfxMhZvuKNzc3NzGafHqsk/GKzDTKvYYbH9Ukdo5busMzPUGJrUCayKSSNWHHXKd1lm79vjWKZOYBWDq+312BF1AivhreF3gO3O9Iiy2XeAiOV0p1o2mGnpu2Mtqnwn55Z+qbduRAUvjMq16ds3JZOCRS0n69uDwvD7RNa/CKsGHZbC/op/QZfYrzCRGJze3S56K4w7Rvdx4bvbXpILbFO4YQevozPNDKvh/wST987QAq9afZaJ7X9TMqwV9d1KBsZ4lLeAz6plcrMsMQxY3ELdtu1+c1Id+XNmNC29qp3tdyeje9ZHsvCBFNuwEkZ7lnHXqwZTlNpxPevMSM+waV8WlvdqZI2ye2LAhh1oCB9td5TAku4zzNIgVUdwOxk3rNxA1kf9KxJ3qzUYJQPTtU5TWLwqQyLa0k5yHquXtYN/AHSnMipTzF3JIsvRLdfF1RkS0Z5mwcZxOCwsWtc8u0llNQ/qimPNARrU8b7e1xyjtDM0RSJNI2w1skNRVD3Ta4n6ynBWRcsIx3AxPEXa0/JicZyTDmtGi7WowdrSatZE2wteD2tZg7Wuyfrwfbj0bF0CevrjrDd64v6nKFSoUP+zfgN+r0dDyFRp3AAAAABJRU5ErkJggg==",bn:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSUlJSUlJSUlJSUlJSUlJSUlJSUlJSwsLHd0dGZjYlZTUk5LSkVCQjo5OCYmJvq3tckAAAAJdFJOUwASKUhtlMDg/auJd7sAAAV0SURBVHja7ZlNTxtHGMeNwUmOSEmbK6e2N9Nbb6GKWvXmREFqb05U9UzSF/XoSk0qIhL2vHb7AWz6AYpnnV6LjMXVyMz6CiFh1QL2FrD/1azNendnvDNjVlUOfs7Wz8/b/OeZZ1OpqU1talN7V+zm3cRQHwBLCaFmDeAkIdZHQGKOreD1TkKOpdE3f0vIsQz+NUvtZBy7hgOzVEvGsRvYMoskGceyKJtFkoxjOZhmkSTjWN71WDVg+eMromYKPY9F2gB+WV64CmsO5wNWjbU/ug+ulPrnAxZpejA8W5y46wvYNM0SYxHL3vdc+3RC1ofomaa5QQZmNRjNvT+Z3hRwYJom8a1hG5PCPkE/4JbnGt0HukuTFJG5VSQkCuvo98YdL1skbNsM9lS7iAa2whEOckYd4JEm6/pln3IwA90F3WO9K3CLpcwGftY8iq7QLUJqtKmpQd5RLIlYhFJDT4OusaM4cKPOOWbrOZb11JkQy0CPd8zBsY4KYhAiU66WyDENxSj0vSpaTBzOuVJSB9+qn2uWekLIK8a64HusiY7WJcvStSNk1Vgp76l3/a6XLoex1gRt0VTP/h1seiyDyV9dcJBsdOc1yshS7x7tr7dEvU8d1SBnjJ7HqrWEnc8qqRzkHM446YokzFat5HU8Fx/sUcKoo9iuOWxKWW08VhacUhyrxoI8VuvUc4EO1uqh5FO1hGUvBSccV4SllrCCN8JxtauHCknbKh2WQU8QokVbYVYTf6scIFFHNEKsBkv+iUIVURZUkUZZ1OgoSP2FIPMWz3IwL2/UA0GINRrK/YC1JL383bLgkqVhVs1L/kNpiOditwSsx1Lp2hVkvv2S0ijbxj+yW8MVZR59nkVlTXEbZ4IQ/4IrYBmnstfnlqDnDeDtHs/qSBS1L3QLeNniWA4kD+wzPvOWgR/Qa0XEkLEW4kPcNAVudW+iX+dY7VjVmUNP6NaTGTFrSXJp+Jmnw2y30ZmfQZ8IWPdiFXWzGDjNe8PEP0rNRsYwhqLNWFYOoxBZqfa8UeeU6eOFiPUw/iEbDmPPBtxFFvxaRIHkrH4peDfvr7Lh5L7ncItn2bGHO+9uBAZ5w3uAfu0NGC4nGzKhyKE+Ynko98FAiHoCVrxfWRz6P28CnW+WF4dCtMa3BLXxU6wQ+v/fcHAy799ykYGOKrBmRxM4Dczd+UhHWFQhxlT+8qxYzZHSvQ/UBemSiXQGQ1jD8ZsnXYiO0g2q0F+p1BeA+8YL0V3wH97R8ZdShTOUSqXzANb3AiHOAS+IKF3y6ST91WBH4vufj0iEny6J5njzxOeD7c28n/hDIkyX0gR260v4D/SZAvfouwxRZaBgm+PP7vqLGLc+JkRqdHX3Qy/ImBBVhqbwfsgl40Kkes/udIF/pfkh2lov5dRt3q1RiLbKwDpqjxXerVGI8vkrfDpdMjZEtaE8ILMvRAOiRqsG1uSojw9RsVV5lRWEqNdeOe4kBqpIKU41qmi4JCZErfbKCEIMsJqxNwd3wa3FhajVXnnU41htjcWVKF2B7pJNmJG7MjZdWuqVGS6rrO0GpUcjeztBS9zAoUWPVg1w5q6uH+m1RBariLFVjZa4VQh5MrQg7anqcXxvENs6rVcrZTNgxQrZHk55z9Rg7GMh3lTNcVbcYGu27xT7FIdlM9Z+N9TWrBngtSmzkqPUFjm20ZHarypr1rSB8jDRlUr0NVmtVi6r8SeeKAjquVewOKtWTLOkEGQWu8UNIrVq2XEV1h1EzXbklVxxFVl/yK9IbhIcZ6+k6460QLnG7A2lI8Usv84eY5ZsdcI+diizjqWsNUUWkbIyGqyTKesdZq0fKZoCS93+T9bcj+r2fWpqU5va1HTsP1MAb+04YA6IAAAAAElFTkSuQmCC",bb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAqUExURUxpcSUlJSUlJSUlJSUlJSUlJSUlJSwsLHd0dGdkZFZTUkVCQjw6OiYmJk6AIV8AAAAIdFJOUwAWNFWCq977e1jxYQAABNNJREFUeNrtmb9v20YUx/XDUlZrSScBGVJkMpCtk4AiuwAXBdqJQIMk3Qg07eAkCHfSyB9ACegc+9hdgk+aGyTSEDsSK4nf/6W4H6QpmSLveETRAHqbnfiD977v3feeTrXaIQ5xiK8qOpWRHtpY/lgN6luweFYF6ggifqiAZQEfyQRYHleR1tgj5C/gqTHrBCuXEEJGWBizbPjnjEUdPDBENbHhaZFgjlNDVguveFqEjvDZkHUP46HIa4IbY+l9IvKi+GLMGiQs00b2MCSxXgvjvKRcdI4/DFldkFh6PDZktfFRsEbGbawdYS3kMh/VWgMhZ02q8AmLF1lFiWwoompOIzvbeO0xlwjNS+wjcj0m15eaeRsxdrlcLytQfu2ec7m+Z009NXIvXHgkkau9MEpr5Q5JIlffoJktwPfEdDFPrTsGVtGXadEpT6gFlE6sCfiuPIwPuGeUT6yHFWsiCaizFOpR8H6WONYOLlzhg1z6OkIyLTmz97FmI08IneCaz+2GBCUd0cKYK8+s/hdui28ImeL3UscncmWJU65SD1eEBKV8rIfXosRAttHi1l/GfOo2fFmibKPDjIy8L6F+C2tRYnzLNrDhPzr66vfwIS6Rcn+Ob5Gp9lJXd+DzQSUBnfDTyNtI2Ia4MChRjESXtbFUkSdxiZx1yosWKP0i7bhEQuV49WOWbifZaikmIqByvOxQsgLNzbWNV1IuzjpOxqvEXdnDhZQrkKMajxd32WstuUJXysVYC171WrKI3obYZBMxlNIL9zpKsbQEazG5blk3/FdvEtZUR7AuxlJ6QqUTxkud8LOXOheQL6XnrM980U9Yequ+HcXSc9Zv6SPE/V9d/Mat9MlxPEmzxMQp2vM/W6yt4yhYj9Wn/kMsfTZLo5HdZOozjjZjjbiEiifIv8sKU6yJ+inqI2kjL4iJY6VZVH0orCiRfh9L2cLsTZolb8cozXKUByzx+hTL3mYtVe+gXdbxHdY8VB77VdJGvshlsFCW1el0OrusY3XWeZrFoxyrucUKjFgNuT7LkKxNFSwq4ir9Cy0WyQmq0ce6AivUmPsClvLc15y1l4MKqM55tDfVsazIyy9Rw3P6KGTdqHv0MJ+l4dFdFMilcXe0b+/VfSzlOy2102TLNVX/GNlMHeSstKRtKx6iKJ+lPvZbF1hWiVpPmr294vO0JjrL7ze3i1tWWmKLUv80lJMWneu8BjT2iS8sVu8xzEJOWpqPYSfZglEpl9ZjWCtzWkVaenKxj7Xh3rQoljWt6GcUGcQlaj6Ptu8WKVH6L8ANZ3f0Y1SJF+Deru/QJK1rTVSthTATNSnzBGaxxFhhMxZns7ez2ewTS0v/DabxHeAgK55pfuf08CfkxIsnGjn9nP7L8IzHVpLPVXNr2vz/v/17djXw3VR4AzqbnfF/XKjB6haAT5dblC3icMRgSkP2CNjsBYk4n6t9Hdlw2EeFgvCmStN/H5HvFsMcFc9nT6FC6MFgd0W5vBwMBgL2TmFmG+wp1BvkLTrkkrVXwfRbWHm5IInz/yw+l/uvxp14XyxYL29f2vKz4u9c+yCKUWzVOWvJLquwkXakyirey9VZ80KWs1FmFV6TqI5V12CF/0/W9OtlRTPFcIpZ6vGfsn7ViNohDnGIQ2jGv7ULQsgUpwsIAAAAAElFTkSuQmCC",br:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURUxpcSUlJSUlJSYmJiUlJSYmJiUlJYiGhXh1dW1ramBeXVZTUk1LSkVCQjk3NyYmJt1oLkIAAAAHdFJOUwApUXmew+Gm1HRSAAAEcklEQVR42u2ZvW8cRRjGf7N2QBcRMnM+UlDAnnEoaEj8DxBb9EhBQqJBUESpIKHmP0AIXUOBUuAaKYEORQqJKwoULIsCiRDsoySxbkdHsKXEvpdid897vv2YWR+EYt/uZnefeZ73az4OGmusscYaa6yxo6YcXukaiAb2+JMtvSOxXVo9NtYVSW23rsb2otH73wACEJn03RcuSLS1nf/NfO5o8OZN4NEpUBxc37JLoTKLWlt47Wvg0q1+7ld5gwsf3kx5KPY3bCdEBvHnGuDaL+ddsTo7PSBKngnBOQCLBkLZttDaWHHTOPcQDq63WQq1RQGLyQMNqvfkS169qLl9ftOFl4IHn/ycEFFYFWawGBG8tGUTsZVYwuPPCcESgsIupMMaAoRlGFiso+9HECYfK2xKK/7Zn9OAdfS9JCEU1qDFcKymByfZ7Mb6XHmpBCsAGGamIGQYFuZ9Aa8AEBTosZOTn8NErjsvAGyQxQIFoYTFdZfLSyUAJ7MEBAVrkkJb13qMsaxetlnvBIvl3S4P6+pnCRY/JS6PmejfD4O851iPVhXKGEMLzr7XRe/b2AHaVWPK6+DWxPDdPH6VGit6sfbTWMtq8FJevs937b/ES82Kl/bjFVbqceW1W46lQfG+I9aoFCtOmL4z1lwFlnbGkqsnSkIZAnrPusZxkwulSaTYd95P/MBCocIQMLznXHpqxE5miVcaJBHV1qC6GOtcxq9vcr8PqK7SJh2MxA6CGOqv591bQnCAbCljpp9EYKDb9yjTM1JmH/jtMd9YTwtK0j3mmOWjU5578re+RaIosihzWMwGA38/57GmJQV+N46VDKLuobciFsWnTxzdMci2rd0Lp7qKTBw6VA1eWRtMr3i1sdh24FX4QEa3JydNe1pbK09eKmcPW9Xwi7GOhr4/ThZ9nDgeJXZcjZllUx8fK6qPZQtEyyx4jdF9sVo5uwp7eP7wwtIlkVXeOWGd9hB1ecXw4s0r98Bj62nUNe4hAp8NlszQX1LeDP002loaeyV6Wn5YqjTntCeWlCTxTLCkDq+ZnTuK/SX1/GVLFgI9C17U4dUq4GXLmmHgX9qFrAP3Vlh5HAw82lf2AuUpaZwplpQl6wx5WT+sXmk7bj2t2i5sX6XFHdQoR+uJJTWKe748kbRBnU4ucCyRWN87PlDYttFqcvp2sjuUoRcvRadTMLmBts/dUefKxNEzGg0iibIjuyuuETt7L1Yz2I4mPKS0Me1ufCR9+4YTVuchcH9ju4h1+5VVYPWOA5b6qMdvN8qdcPYiey9OxXT65ubM9/z4XYVDB78un7i3WZ2r7/LgziRzpYw5Erqdr/iiWuP8E/k0drTSmbP/+OghNg7HZb2yXoX1cv/PNUzeNUcGMop45uPh6apcPcd6u1vhLmMY/DHt6imsUBYWHNK5beyzVb5XPXGrDWVbugIrcDhzpufcsIqXR0/WlViu/6WKA9bseM1yHWp5aOz993vfBst5fXQqbUcs87/UuHfZ/dvHNNZYY4352T/ZP4i5JEtsbQAAAABJRU5ErkJggg==",bq:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURUxpcSYmJiUlJSUlJSUlJSUlJSUlJSUlJS4uLXd0dGZjY1ZTUk5MS0VCQjw6OiYmJh8fH+/JGhMAAAAJdFJOUwAWOFp1lLzg/a0PANwAAAbDSURBVHja7ZvrlqsqDIC3ipqRW9//ac8CvJAQW6ph1l77mPk3pfCZxFyA/vnzyCOPPPLII4888kgnMEJW+nEC7/08DWcrd2qavfcwqf63oIaw4CowcmDdeIzw06+AdZNHAkMxRAEeMra3Zp9U5YzWxqXlRzIkqQqyEXNrri5S6Z+fn0VrrY1/FVxRm27ZRrjXL3AFKrdBBYHXy/vcjmrj3kbYgD41pRopVdIGHMroA9WCRkQu1dKEwWcQlTY2cI3IhIhKa2tfr5y8ibLImsZGZXSZsmxmwYTl2qprTibUGCtfNICTEdpG8rldcEjOvBAs6w+XnqOyFooFmULlwzuvirAoHM6nyYgAHhTaLNir6PCFsuKi3a7PpVRWdHrV0OOBUVaBVY5oj7WUa77DMu2xQgCn0SH6lt+wgm8tzIiANbR0eUZZAWt7/cF7s5Qj3OvVzuWDLgyniiPMT95DSZW9qy0kZBbGhtnbHxRqC+6grLFhXRoyNefwMyoxDFWWbxm21kWpMjyqbMJrAURZofhpWtnEssWi+E2rqWmtTHMjty0gtiJvXTUuG6pAVHvG+hWyFOBpodiiFVwLdXuehPvdAU2IHa8TqmvqWxu9shUcYtfg8qpmKBS6GzHW1HNfOfdHqKzRA8V85vZXrXj3j9BlkjJJP9aN8KHNPA0EuNGjT3u4fVoY+XN3QKdPZ7ajO5v7k1+jRm84wdKlFVUWuJjw/mnuD1R7oxcTMfpul2GZaMWJteGK5WlAzppIqOfqSaMXuXI7ESz8LvZ5Iki6pHObrMJ14R99bSRfsm8a6zyKmD3OL66I8uTDDs+dt7bahLnnShMaVLGngmrgsQzqMOLCQJrI7s3cmsz9TllAvklWRlgaW7EnSRP3FuXcoeeu2Qoom66U+bKHHhCWKfpEc4bFN3TgK5o1VTRdMbP5rC0ecNVF+0TQZ1iKaegMkyf4NsLRXj1hjfns+HlRi2Hx9kO25lTMnSKM/1wjTrEtLrAgcwCCpTMrjvQjimUZLF+LVfYu77Ci186MDVks3NsW79M5lmMaPcieaCRrm72apzZMWOp07n0LY6zwLWCwcpenWMfi1IbaIKxi7uQhNbtMQznzGiD6U6zdioA6kO2T8XRubWu3TTpfmCgpa2aTcRaqe9KNlVjU9fYWpSL7jKV/xFUVcj9d2mosbUixRtqgrMqq6CG7rIc4KvK8jyixdFRnB/wHE+o+XLkNUNUWjSdcU5dtVZLVYyFQ6JlgZT0R6rcr93Kmo7XBXOdYOljRFzZMXjeVVLmuajvbdFIBlua97fuMrdY6k8Hdd3PiWRHut1MLOdV2GdtpE1CukZby2Ip4P2fHnWm3vYar1+srqr1JzVePoStxcVjRiWjcWLGgoDJpC+BVdnsfG0Ugy+xcHYsVrej4f2/PiXZywt7FfOFIbyRGSVzqBCs2C0azxuWo3NXd1I4+fvIf1bPra8PZMNF2mMqsyrq4izMV6THZkcfSwNgwYWEqfXN/sC9TnFtbdA7Lsv/dvkE26+DG/uBc2GXj4gA0Z8P0huJ3et0Qv7w/qEqANWzqarGUymw2vLwTx+XexPUllrtWzNTGiJ2rHsuQ99neig7MPkf2yn2H5crO4Obx4sRpxgDUY2n8XPa2w5eHEsf7+AWW06yy7p0ezHzsvijGCjj8mdNfFyvh8GxilFHW7UON6atwUEMlclzW82XMdRMKOLyo01srEx1OE+MdE9btsl1LjHeUJXWvRSZGWCsWHd4lxosmFLxtM913+p3Kyp0PD/djhLWi0WHv7kGGSvQi112nP6hEr73dTIwGKUvwjP9WYsyorOztkTtOn1OB8O2R64kxp7LSt0cuJ0ZE5cTvaVx0ekTV4JrntRiBqRpcl7qUGDFVk8unFxIjobItrkt9HyMIlHh0uJQYqapa3Wv+zulLqka3wL+JESWUdDq8kBg5KOl0+LXT81CNHL4yMZoTqDbRgU+MxqwUbhMAF/5WaZoOqdOH+4AOgPzw6VQAImbDXz10s78jTX6C1KnpnUZyOR03SZsxv/0YMJwNTrYs4frZiSzx3ryxLucEJamy/WYlOPsO5RRxu57o/TyI5p1wSHkBCLElNCVJ5e4xrWTgvRcK9vtP6CTEfHPT9FNd6hfizFE+paFFrwPzL2tyW/RWht5xrvfWG58WMWOXfpF4BwjD/TgJdSm5DfDszGwQsCHIYmkQsKLkKcZxfD0LvIdWGMv62/3iIHoUdThXfx9L67/O51UDLP3PYo3y8SFiqQfrwfprsbyTFhmsFvJvYqm5jTT7kfUjjzzyyCOPPPL/lf8AtuykcwsccVwAAAAASUVORK5CYII=",bk:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAzUExURUxpcSIiIiUlJSUlJSUlJSUlJSUlJSUlJSUlJYWDgnd0dGNgYFZTUk5MS0NAQDIxMSYmJtBHgnAAAAAJdFJOUwARMVJ8nr7f8e5A/hcAAAUDSURBVHja7ZrrmqMgDIYrB3WLHO7/avcBPCJgwNh29+GbX9Pq+E4SYxLzejU1NTU1Nf17oieRX8AaTSjWsP5BrOnPqvdPYb0XTT+FJaZFDathoeX2Mxb/Xr4/ZKsA64sZrGHV5/YNS2yffQ3rvSX3RdtH769hba6LqWE1rIbVsH4O6z39IpZaJXcwcv30649qtcPSP1RB7KR+Bkv/Dla3aAiwXKQvX36tpu+C0HLBxT92dUIZd2KMkp0VqDFGhlhDcOZy6uHM20iUD8HwY+gZ9VfgQcT74OrmE1kfDk56htMNEX4eyeyu0IehNUljDH29COsT5w3sts3o9re11kpprY9XOIWW7xTZ0b7aaf115LfAOj7/VTUJV54LIYRN5Ac4GWDtv9NKye17KdX85XgjdVDvPjUjBb5armDCZ6FakWTsUTmf19cazJtKxpj2ZPr0cYbJH+DARlrlQBdVKg01k51CywZXhmlnUFpLNeWhPNn5otOlvMHKA8xSaXHoTHGlauxl40oDTHWXqyy30uepPNdQcj92NjOIh6l8fPHCwJqeppozGC1yoXqeymaXY7WRl32ePXgPVpqLzrl9eh6rxFy9N5Z4HksWmKv7mLFsTwm+GZlPDh8wlvWiNmbsgD7UnzGWxVJQL3ofiozh1VWBMO0Lv0MhWO1FkvOh1CZf4xUeLZ0XB2BoJXwo9bFAl9dJKT6nCLBMB6oddNxYAVUe7HywSkQErI7o3YMnhuUuxG1/2K3dlsyWnyN378jmo1USi4KePDLqQ3t+T3b9Y8Y3OuwHafx/kOAx2JjCOlVHpE/Zy1fE3enxfw9rimHJiLFZwlz27iKRdHgDyySw7OnX45r00IZFOsoFi9/CGu5g0ZjDLRZs8DR+GgvmxNSdGMsvJVg85kT4QNrnrXjI83os27XoFBaFZvnEXU+qsXjsUKnAWZ66R/UUN1fQ1sGxqEkZyxZcwOI0/trk3NaBscgYTbyzsXpg36PidY0OoxOKZafkiRwPfgXjiub4PCucsgCx3PQnnuKhdY2vA2W8ZpbBlAWGlaBajQXy4dyQgaY/MKw+XpmtxgL2r8TNSyFcICyermmK2lc/GcnUdyMpwMpSFc1GSDwWzlwALJajKoisZErep4mZ6xrrkqpkHpjIMzsun+4vsahJJyzvwqKpLsm1D47LTfuvsMglVf8qErvmopTlimbG3NpgnmosfZXBc2EvL9o/nftaqqrA2idBAFceS2epal5jDFdpwr+Qk9E+X0Ooqt6SkSyXBAxtpMxSVb7RdkWSxh7/3aV6gGtP1b9eP8KFRIXMhUaFyoVIhch1oLq/pUHG3GP7W1Tz+32FRKWxqJLVyZepkhPGOqoBb/uH3eN6iOqizIFSHboTHPU3wkvdK2UuyxwZFgjbMqfS88+68ymX+kGpysq9pElzKMG6VEZuQaqm+SoJezBNhA8/sJwX2YVJVqWPGyi2C7k574oJId5p+QW0YANtQA0uNq4dQxYlibgtyQ5ojvQ7U0ZP71sS87s8ipizlk28e/KdGkXL8AYDyqqyaU3sTIkgmIVfqcxqOez4H01FazX5hRux3Vu1Wvlwtvv9wo1AWtawaBrDXDwzsKwsKDCia8RurB0WQ3hCK1wsmyV6jNDCX1UcEOqGJzYo70e8xsZCiPmGVfiYfgSLNiyoGtbnsRSyNArWI/o/sfjwjLAb2aampqampqam1195W8+wSJhrTQAAAABJRU5ErkJggg=="}},60527:function(e,t,n){"use strict";n.d(t,{a:function(){return setPositionBySquare}});function removeClassNamesStartingWith(e,t){return e.split(" ").filter(e=>!e.startsWith(t)).join(" ").trim()}var a=n(65960);function setPositionBySquare({square:e,el:t}){let n=(0,a.Z)(e);if(n){t.className=removeClassNamesStartingWith(t.className,"square-");t.classList.add(`square-${n.file}${n.rank}`);t.style.transform=""}}},70994:function(e,t,n){"use strict";n.d(t,{P_:function(){return setTestData},fd:function(){return a},mm:function(){return l}});function setTestData(e,t){return!!e&&(Object.entries(t).forEach(([t,n])=>{let a=`${t.charAt(0).toUpperCase()}${t.slice(1)}`;void 0===n?delete e.dataset[`test${a}`]:e.dataset[`test${a}`]=n}),!0)}var a=(e=>(e.Anchor="anchor",e.Animated="animated",e.Blinking="blinking",e.Color="color",e.Dragging="dragging",e.Editable="editable",e.Element="element",e.EnPassant="enPassant",e.File="file",e.Figurine="figurine",e.Flipped="flipped",e.IconTextValue="iconTextValue",e.Inside="inside",e.Interval="interval",e.LeadingFigurine="leadingFigurine",e.Opacity="opacity",e.Outside="outside",e.Position="position",e.Rank="rank",e.Selected="selected",e.ShortString="shortstring",e.Square="square",e.Star="star",e.TextColor="textColor",e.TextValue="textValue",e.Times="times",e.TrailingFigurine="trailingFigurine",e.Type="type",e.WholeMoveNumber="wholeMoveNumber",e.X="x",e.Y="y",e))(a||{}),l=(e=>(e.Arrow="arrow",e.BlinkingHighlight="blinking-highlight",e.Board="board",e.CommentLink="comment-link",e.Coordinates="coordinates",e.CustomItem="custom-item",e.Effect="effect",e.FadeInOverlay="fade-in-overlay",e.GameResult="game-result",e.HalfMove="half-move",e.Highlight="highlight",e.Hint="hint",e.HoverSquare="hover-square",e.Move="move",e.Piece="piece",e.PotentialCapture="capture-hint",e.PromotionCloseButton="promotion-close-button",e.PromotionPiece="promotion-piece",e.PromotionWindow="promotion-window",e.Square="square",e.SiblingBoard="sibling-board",e))(l||{})},83995:function(e,t,n){"use strict";n.r(t);n.d(t,{create:function(){return b}});var a,l=n(78048),c=n(89226),d=n(32831),f=n(11173),m=n(9482);function shouldAddContinuation({canAddMovesToMainLine:e,isAtEndOfLine:t,node:n}){var a;let l=(0,m.L)(n)?null==(a=null==n?void 0:n.ids)?void 0:a.line:null==n?void 0:n.id;return!e&&t&&0===l}var g=n(18792);function createMove(e){let{api:t}=e,n=t.move;return function move(e){let a=(0,g.B)(e,t.getFEN(),t.getVariant());if(!a)return n(e);let l=t.isAtEndOfLine(),{canAddMovesToMainLine:c}=t.getMode().getOptions();if((0,f.h)({api:t,followAlternateLines:!0,mv:a}))return n(e);if(shouldAddContinuation({canAddMovesToMainLine:c,isAtEndOfLine:l,node:t.getRelativeNode()}))return addContinuation();return n(e);function addContinuation(){return t.createContinuation()?n(e):null}}}(e=>{(e=>{e.Name="analysis"})(e.Plugin||(e.Plugin={}))})(a||(a={}));var _=n(47176);function createAnalysisModePlugin(){return{apiOverrides:{move:createMove},match:[{condition:(0,_.is)(d.i.OptionsEvents.UpdateMode),handler:changeUsePlayingAs}],name:a.Plugin.Name};function changeUsePlayingAs(e,{api:t}){void 0!==e.data.usePlayingAs&&t.usePlayingAs(e.data.usePlayingAs)}}var y=n(34592);function base({api:e,options:t}){return{isAllowedToMove,name:y.d.Types.Analysis,plugins:[createAnalysisModePlugin(),(0,c.A)()],usePlayingAs:t.usePlayingAs};function isAllowedToMove(){var t;let{canAddMovesToMainLine:n}=e.getMode().getOptions(),a=e.getPlayingAs();return(void 0===a||a===e.getTurn())&&(n||!!e.getSelectedNode()||(null==(t=e.getLine(0))?void 0:t.length))}}let b=(0,l.k)(base,{canAddMovesToMainLine:{default:!0,editable:!0},canInteractWithPieces:{default:!0,editable:!0},canMoveWhenGameIsOver:{default:!0,editable:!1},canModifyExistingMovesOnMainLine:{default:!0,editable:!0},usePlayingAs:{default:!1,editable:!0}})},12507:function(e,t,n){"use strict";n.d(t,{j:function(){return isAllowedToMoveInPlayingMode}});function isAllowedToMoveInPlayingMode({api:e,canMoveWhenNotPlayerTurn:t,modeOptions:n}){let{canAddMovesToMainLine:a,canMoveWhenGameIsOver:l,canModifyExistingMovesOnMainLine:c}=n;return!!((l||!e.isGameOver())&&(a&&e.isAtEndOfLine()||c)&&(t||e.getPlayingAs()===e.getTurn()))}},12062:function(e,t,n){"use strict";n.d(t,{Md:function(){return l},W:function(){return a},ep:function(){return c}});let a={baseTime:3e5,increment:0},l=1800,c=6e3},49144:function(e,t,n){"use strict";let a,l;n.d(t,{r:function(){return createEcoPlugin}});class c{constructor(e="keyval-store",t="keyval"){this.storeName=t;this._dbp=new Promise((n,a)=>{let l=indexedDB.open(e,1);l.onerror=()=>a(l.error);l.onsuccess=()=>n(l.result);l.onupgradeneeded=()=>{l.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(n=>new Promise((a,l)=>{let c=n.transaction(this.storeName,e);c.oncomplete=()=>a();c.onabort=c.onerror=()=>l(c.error);t(c.objectStore(this.storeName))}))}}function getDefaultStore(){return a||(a=new c),a}function get(e,t=getDefaultStore()){let n;return t._withIDBStore("readonly",t=>{n=t.get(e)}).then(()=>n.result)}function set(e,t,n=getDefaultStore()){return n._withIDBStore("readwrite",n=>{n.put(t,e)})}function formatFENsForECOLookup(e){return e.reverse().map(e=>e.split(" ").slice(0,3).join(" "))}function setMany(e,t){return t._withIDBStore("readwrite",t=>{e.forEach(e=>{t.put(e,e.f)})})}var d=(e=>(e.ECO="chesscom_eco",e))(d||{}),f=(e=>(e.ECO="eco",e))(f||{});let m={get:e=>fetch(e,{method:"GET"}).then(e=>e.json())},g="IS_POPULATED",_="VERSION";function createEcoStore({name:e,table:t}={}){l=new c(e??d.ECO,t??f.ECO)}function getEcoStore(){return l}async function initEcoDB({ecoPath:e,http:t}){if(!l)throw Error("create eco store with createEcoStore before initializing");let n="67a7b72d116785dc913f04a4cebed53b",a=await ecoDBIsPopulated(),c=await getVersion();if(!a||!c&&n||c!==n)return setVersion(n),populateStore({ecoPath:e,http:t??m}).then(setPopulated)}function setPopulated(){return set(g,!0,l)}function setVersion(e){return set(_,e,l)}async function getVersion(){return get(_,l).then(String)}async function ecoDBIsPopulated(){return get(g,l).then(Boolean)}async function populateStore({ecoPath:e,http:t}){return t.get(e).then(e=>{var t;setMany(((null==(t=null==e?void 0:e.data)?void 0:t.positions)?e.data.positions:e.data)??e,l)})}async function getECO({fens:e}){let t=getEcoStore();if(!t)return;let n=formatFENsForECOLookup(e),a=await getECOValuesFromDB(t,n);return a[0]||(e=>{if(!e)return;let{ev:t,...n}=e;return n})(a.find(Boolean))}function getECOValuesFromDB(e,t){return Promise.all(t.map(t=>get(t,e)))}var y=n(97211);function createECOAPI(e,{http:t,ecoPath:n}){let a;let l=!1;return{get:()=>a,initialize,update};async function initialize({skipDBPopulate:a}={skipDBPopulate:!1}){let{respond:c}=e;if(!a){l=!1;await initEcoDB({ecoPath:n,http:t})}l=!0;await update();c(y._.Events.DBInitialized)}async function update(){if(!l||!ecoDBIsPopulated())return;let{api:t,respond:n}=e;a=await getECO({fens:t.getHistoryFENs()});n(y._.Events.Update,a)}}var b=n(68364),A=n(20146);function createEcoPlugin({ecoPath:e="",http:t=m,storeData:n={name:d.ECO,table:f.ECO},disableInitOnCreate:a=!1}={}){return"indexedDB"in window?{api:n=>createECOAPI(n,{ecoPath:e,http:t}),create:function create(e){getEcoStore()||createEcoStore({...n});a||e.api.eco.initialize()},match:[{condition:(0,b.E)(A.n),handler:(e,t)=>t.api.eco.update()}],name:y._.Name}:{name:y._.Name}}},91664:function(e,t,n){"use strict";var a;n.d(t,{t:function(){return a}});(e=>{(e=>{e.Name="sounds"})(e.Plugin||(e.Plugin={}));(e=>{e.GameStart="game-start";e.GameEnd="game-end";e.Capture="capture";e.Castle="castle";e.Premove="premove";e.MoveSelf="move-self";e.MoveCheck="move-check";e.MoveOpponent="move-opponent";e.Promote="promote";e.Notify="notify";e.TenSeconds="tenseconds";e.Illegal="illegal"})(e.BoardSounds||(e.BoardSounds={}))})(a||(a={}))},11859:function(e,t,n){"use strict";n.d(t,{A4:function(){return a},aP:function(){return d},vv:function(){return c}});var a,l=n(27112),c=(e=>(e.Pseudo3d="pseudo3d",e.Disabled="board-disabled",e.Flipped="flipped",e))(c||{}),d=(e=>(e.All="All",e.Move="Move",e))(d||{});(e=>{(e=>{e.Default="default";e.WebGL2D="webgl-2d";e.WebGL3D="webgl-3d"})(e.Types||(e.Types={}));e.TriggerOptions=[l.b.SaveableOptions.AnimationType,l.b.SaveableOptions.PieceStyle]})(a||(a={}))},62541:function(e,t,n){"use strict";n.d(t,{B:function(){return isCapture}});var a=n(17084);function isCapture(e){return void 0!==e.flags&&((1&e.flags)==1||e.flags===a.Z.Move.Flags.EPCapture)}},17229:function(e,t,n){"use strict";n.d(t,{_w:function(){return B},jd:function(){return k},rG:function(){return C},ur:function(){return w},wr:function(){return V}});var a,l,c,d,f=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);!function(e){!function(e){e[e.Backspace=8]="Backspace";e[e.Delete=46]="Delete";e[e.DownArrow=40]="DownArrow";e[e.Enter=13]="Enter";e[e.Escape=27]="Escape";e[e.LeftArrow=37]="LeftArrow";e[e.RightArrow=39]="RightArrow";e[e.Spacebar=32]="Spacebar";e[e.Stop=137]="Stop";e[e.Tab=9]="Tab";e[e.UpArrow=38]="UpArrow"}(e.KeyCodes||(e.KeyCodes={}))}(m||(m={}));!function(e){!function(e){e.DidHide="modal-did-hide"}(e.Events||(e.Events={}))}(g||(g={}));var m,g,_,y,b="function"==typeof Map?new Map:(_=[],y=[],{has:function(e){return _.indexOf(e)>-1},get:function(e){return y[_.indexOf(e)]},set:function(e,t){-1===_.indexOf(e)&&(_.push(e),y.push(t))},delete:function(e){var t=_.indexOf(e);t>-1&&(_.splice(t,1),y.splice(t,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){var t=b.get(e);t&&t.destroy()}function i(e){var t=b.get(e);t&&t.update()}var A=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((A=function(e){return e}).destroy=function(e){return e},A.update=function(e){return e}):((A=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!b.has(e)){var t,n=null,a=null,l=null,a2=function(){e.clientWidth!==a&&p()},c=(function(t){window.removeEventListener("resize",a2,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),b.delete(e)}).bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",a2,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",b.set(e,{destroy:c,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),isNaN(n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth))&&(n=0),p()}function s(t){var n=e.style.width;e.style.width="0px",e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&(e.parentNode.style.scrollBehavior="auto",t.push([e.parentNode,e.parentNode.scrollTop])),e=e.parentNode;return function(){return t.forEach(function(e){var t=e[0];t.scrollTop=e[1],t.style.scrollBehavior=null})}}(e);e.style.height="",e.style.height=e.scrollHeight+n+"px",a=e.clientWidth,t()}}function p(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),a="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(a<t?"hidden"===n.overflowY&&(s("scroll"),u(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(s("hidden"),u(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),l!==a){l=a;var c=o("autosize:resized");try{e.dispatchEvent(c)}catch(e){}}}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},A.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e});!function(e){!function(e){e.Hidden="hidden";e.Invisible="invisible"}(e.Classes||(e.Classes={}))}(a||(a={}));!function(e){!function(e){e[e.Backspace=8]="Backspace";e[e.Delete=46]="Delete";e[e.DownArrow=40]="DownArrow";e[e.Enter=13]="Enter";e[e.Escape=27]="Escape";e[e.LeftArrow=37]="LeftArrow";e[e.RightArrow=39]="RightArrow";e[e.Spacebar=32]="Spacebar";e[e.Stop=137]="Stop";e[e.Tab=9]="Tab";e[e.UpArrow=38]="UpArrow"}(e.KeyCodes||(e.KeyCodes={}))}(l||(l={}));function createEventEmitter(){let e=[];return{emit,listeners:e,off,offAll,offMany,on,onAll,onMany,once};function emit(t,n){let a;for(a of e)(a.type===t||"all"===a.type)&&a.handler(n)}function off(t){let n=e.findIndex(e=>t.type===e.type&&t.handler===e.handler);-1!==n&&e.splice(n,1)}function offAll(e){return off({handler:e,type:"all"})}function offMany(e=[]){e.forEach(e=>off(e))}function on(t,n){e.push({handler:n,type:t})}function onAll(e){on("all",e)}function onMany(e=[],t){e.forEach(e=>on(e,t))}function once(t,n){let a={handler:(...e)=>{off(a);n(...e)},type:t};e.push(a)}}let C=Object.freeze(Object.defineProperty({__proto__:null,createEventEmitter},Symbol.toStringTag,{value:"Module"})),w=Object.freeze(Object.defineProperty({__proto__:null,hasAllProperties:function hasAllProperties(e,t){return t.every(t=>Object.prototype.hasOwnProperty.call(e,t))},hasData:function hasData(e={}){return Object.keys(e).length>0},hasProperty:function hasProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)},hasSomeProperties:function hasSomeProperties(e,t){return t.some(t=>Object.prototype.hasOwnProperty.call(e,t))},invertObject:function invertObject(e){return Object.keys(e).reduce((t,n)=>({...t,[e[n]]:n}),{})},isEmpty:function isEmpty(e){return!Object.keys(e).length},objectWithExcludedProps:function objectWithExcludedProps(e,t=[]){return Object.keys(e).filter(e=>!t.includes(e)).reduce((t,n)=>({...t,[n]:e[n]}),{})},pick:function pick(e,t){return t.reduce((t,n)=>(Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]),t),{})},transformObjectBooleansToBinaryString:function transformObjectBooleansToBinaryString(e){return Object.keys(e).reduce((t,n)=>{let a=e[n];return"boolean"==typeof a&&(a=a?"1":"0"),t[n]=a,t},{})}},Symbol.toStringTag,{value:"Module"}));!function(e){!function(e){!function(e){e.NoTransition="NoTransition";e.OnEnter="Enter";e.OnExit="Exit";e.OnReEnter="ReEnter"}(e.Types||(e.Types={}))}(e.Event||(e.Event={}))}(c||(c={}));let k=Object.freeze(Object.defineProperty({__proto__:null,get StateMachine(){return c},createStateMachine:function createStateMachine({data:e,initialState:t,states:n},a=createEventEmitter()){let l=t;return{...a,getCurrentState,getData,transition};function getCurrentState(){return l}function getData(){return{...e}}function transition(t,d){if(!n[l][t])return a.emit(c.Event.Types.NoTransition,{action:t,data:e,state:l}),!1;let f=n[l][t](d),m="string"==typeof f?f:f.nextState,buildEvent=n=>({action:t,currentState:l,data:e,event:n,nextState:m,params:d});return l!==m&&a.emit(c.Event.Types.OnExit,buildEvent(c.Event.Types.OnExit)),f.data&&Object.assign(e,f.data),l!==m&&a.emit(c.Event.Types.OnEnter,buildEvent(c.Event.Types.OnEnter)),l===m?a.emit(c.Event.Types.OnReEnter,buildEvent(c.Event.Types.OnReEnter)):l=m,!0}}},Symbol.toStringTag,{value:"Module"}));var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},T={};!/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */function(e){!function(){var HowlerGlobal2=function(){this.init()};HowlerGlobal2.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;e=parseFloat(e);n.ctx||setupAudioContext();if(void 0!==e&&e>=0&&e<=1){n._volume=e;if(n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var l=n._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=n._howls[a]._soundById(l[c]);d&&d._node&&(d._node.volume=d._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||setupAudioContext();n._muted=e;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var l=n._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=n._howls[a]._soundById(l[c]);d&&d._node&&(d._node.muted=!!e||d._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();if(e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close){e.ctx.close();e.ctx=null;setupAudioContext()}return e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;e.state=e.ctx&&e.ctx.state||"suspended";e._autoSuspend();if(!e.usingWebAudio){if("undefined"!=typeof Audio)try{var n=new Audio;void 0===n.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0}try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!n||"function"!=typeof n.canPlayType)return e;var a=n.canPlayType("audio/mpeg;").replace(/^no$/,""),l=e._navigator?e._navigator.userAgent:"",c=l.match(/OPR\/(\d+)/g),d=c&&33>parseInt(c[0].split("/")[1],10),f=-1!==l.indexOf("Safari")&&-1===l.indexOf("Chrome"),m=l.match(/Version\/(.*?) /),g=f&&m&&15>parseInt(m[1],10);return e._codecs={mp3:!!(!d&&(a||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!a,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!g&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!g&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1;e.autoUnlock=!1;if(!e._mobileUnloaded&&44100!==e.ctx.sampleRate){e._mobileUnloaded=!0;e.unload()}e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var unlock=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0;e._releaseHtml5Audio(n)}catch(t){e.noAudio=!0;break}for(var a=0;a<e._howls.length;a++)if(!e._howls[a]._webAudio)for(var l=e._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=e._howls[a]._soundById(l[c]);if(d&&d._node&&!d._node._unlocked){d._node._unlocked=!0;d._node.load()}}e._autoResume();var f=e.ctx.createBufferSource();f.buffer=e._scratchBuffer;f.connect(e.ctx.destination);void 0===f.start?f.noteOn(0):f.start(0);"function"==typeof e.ctx.resume&&e.ctx.resume();f.onended=function(){f.disconnect(0);e._audioUnlocked=!0;document.removeEventListener("touchstart",unlock,!0);document.removeEventListener("touchend",unlock,!0);document.removeEventListener("click",unlock,!0);document.removeEventListener("keydown",unlock,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",unlock,!0),document.addEventListener("touchend",unlock,!0),document.addEventListener("click",unlock,!0),document.addEventListener("keydown",unlock,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var a=0;a<e._howls[n]._sounds.length;a++)if(!e._howls[n]._sounds[a]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null;e.state="suspending";var handleSuspension=function(){e.state="suspended";if(e._resumeAfterSuspend){delete e._resumeAfterSuspend;e._autoResume()}};e.ctx.suspend().then(handleSuspension,handleSuspension)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio){if("running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer){clearTimeout(e._suspendTimer);e._suspendTimer=null}else if("suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state){e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")});if(e._suspendTimer){clearTimeout(e._suspendTimer);e._suspendTimer=null}}else"suspending"===e.state&&(e._resumeAfterSuspend=!0);return e}}};var t=new HowlerGlobal2,Howl2=function(e){if(!e.src||0===e.src.length){console.error("An array of source files must be passed with any new Howl.");return}this.init(e)};Howl2.prototype={init:function(e){var n=this;return t.ctx||setupAudioContext(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!!e.xhr&&!!e.xhr.withCredentials&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e,n,a=this,l=null;if(t.noAudio){a._emit("loaderror",null,"No audio support.");return}"string"==typeof a._src&&(a._src=[a._src]);for(var c=0;c<a._src.length;c++){if(a._format&&a._format[c])e=a._format[c];else{n=a._src[c];if("string"!=typeof n){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(n))||(e=/\.([^.]+)$/.exec(n.split("?",1)[0]));e&&(e=e[1].toLowerCase())}e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');if(e&&t.codecs(e)){l=a._src[c];break}}if(!l){a._emit("loaderror",null,"No codec support for selected audio sources.");return}a._src=l;a._state="loading";if("https:"===window.location.protocol&&"http:"===l.slice(0,5)){a._html5=!0;a._webAudio=!1}return new Sound3(a),a._webAudio&&loadBuffer(a),a},play:function(e,n){var a=this,l=null;if("number"==typeof e){l=e;e=null}else if("string"==typeof e&&"loaded"===a._state&&!a._sprite[e])return null;else if(void 0===e){e="__default";if(!a._playLock){for(var c=0,d=0;d<a._sounds.length;d++)if(a._sounds[d]._paused&&!a._sounds[d]._ended){c++;l=a._sounds[d]._id}1===c?e=null:l=null}}var f=l?a._soundById(l):a._inactiveSound();if(!f)return null;l&&!e&&(e=f._sprite||"__default");if("loaded"!==a._state){f._sprite=e;f._ended=!1;var m=f._id;return a._queue.push({event:"play",action:function(){a.play(m)}}),m}if(l&&!f._paused)return n||a._loadQueue("play"),f._id;a._webAudio&&t._autoResume();var g=Math.max(0,f._seek>0?f._seek:a._sprite[e][0]/1e3),_=Math.max(0,(a._sprite[e][0]+a._sprite[e][1])/1e3-g),y=1e3*_/Math.abs(f._rate),b=a._sprite[e][0]/1e3,A=(a._sprite[e][0]+a._sprite[e][1])/1e3;f._sprite=e;f._ended=!1;var setParams=function(){f._paused=!1;f._seek=g;f._start=b;f._stop=A;f._loop=!!(f._loop||a._sprite[e][2])};if(g>=A){a._ended(f);return}var C=f._node;if(a._webAudio){var playWebAudio=function(){a._playLock=!1;setParams();a._refreshBuffer(f);var e=f._muted||a._muted?0:f._volume;C.gain.setValueAtTime(e,t.ctx.currentTime);f._playStart=t.ctx.currentTime;void 0===C.bufferSource.start?f._loop?C.bufferSource.noteGrainOn(0,g,86400):C.bufferSource.noteGrainOn(0,g,_):f._loop?C.bufferSource.start(0,g,86400):C.bufferSource.start(0,g,_);y!==1/0&&(a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),y));n||setTimeout(function(){a._emit("play",f._id);a._loadQueue()},0)};if("running"===t.state&&"interrupted"!==t.ctx.state)playWebAudio();else{a._playLock=!0;a.once("resume",playWebAudio);a._clearTimer(f._id)}}else{var playHtml5=function(){C.currentTime=g;C.muted=f._muted||a._muted||t._muted||C.muted;C.volume=f._volume*t.volume();C.playbackRate=f._rate;try{var l=C.play();if(l&&"undefined"!=typeof Promise&&(l instanceof Promise||"function"==typeof l.then)){a._playLock=!0;setParams();l.then(function(){a._playLock=!1;C._unlocked=!0;n?a._loadQueue():a._emit("play",f._id)}).catch(function(){a._playLock=!1;a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");f._ended=!0;f._paused=!0})}else if(!n){a._playLock=!1;setParams();a._emit("play",f._id)}C.playbackRate=f._rate;if(C.paused){a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}if("__default"!==e||f._loop)a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),y);else{a._endTimers[f._id]=function(){a._ended(f);C.removeEventListener("ended",a._endTimers[f._id],!1)};C.addEventListener("ended",a._endTimers[f._id],!1)}}catch(e){a._emit("playerror",f._id,e)}};if("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===C.src){C.src=a._src;C.load()}var w=window&&window.ejecta||!C.readyState&&t._navigator.isCocoonJS;if(C.readyState>=3||w)playHtml5();else{a._playLock=!0;a._state="loading";var listener=function(){a._state="loaded";playHtml5();C.removeEventListener(t._canPlayEvent,listener,!1)};C.addEventListener(t._canPlayEvent,listener,!1);a._clearTimer(f._id)}}return f._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),a=0;a<n.length;a++){t._clearTimer(n[a]);var l=t._soundById(n[a]);if(l&&!l._paused){l._seek=t.seek(n[a]);l._rateSeek=0;l._paused=!0;t._stopFade(n[a]);if(l._node){if(t._webAudio){if(!l._node.bufferSource)continue;void 0===l._node.bufferSource.stop?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0);t._cleanBuffer(l._node)}else isNaN(l._node.duration)&&l._node.duration!==1/0||l._node.pause()}}arguments[1]||t._emit("pause",l?l._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var a=n._getSoundIds(e),l=0;l<a.length;l++){n._clearTimer(a[l]);var c=n._soundById(a[l]);if(c){c._seek=c._start||0;c._rateSeek=0;c._paused=!0;c._ended=!0;n._stopFade(a[l]);if(c._node){if(n._webAudio){if(c._node.bufferSource){void 0===c._node.bufferSource.stop?c._node.bufferSource.noteOff(0):c._node.bufferSource.stop(0);n._cleanBuffer(c._node)}}else if(!isNaN(c._node.duration)||c._node.duration===1/0){c._node.currentTime=c._start||0;c._node.pause();c._node.duration===1/0&&n._clearSound(c._node)}}t||n._emit("stop",c._id)}}return n},mute:function(e,n){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(e,n)}}),a;if(void 0===n){if("boolean"!=typeof e)return a._muted;a._muted=e}for(var l=a._getSoundIds(n),c=0;c<l.length;c++){var d=a._soundById(l[c]);if(d){d._muted=e;d._interval&&a._stopFade(d._id);a._webAudio&&d._node?d._node.gain.setValueAtTime(e?0:d._volume,t.ctx.currentTime):d._node&&(d._node.muted=!!t._muted||e);a._emit("mute",d._id)}}return a},volume:function(){var e,n,a,l=this,c=arguments;if(0===c.length)return l._volume;if(1===c.length||2===c.length&&void 0===c[1])l._getSoundIds().indexOf(c[0])>=0?n=parseInt(c[0],10):e=parseFloat(c[0]);else if(c.length>=2){e=parseFloat(c[0]);n=parseInt(c[1],10)}if(void 0===e||!(e>=0)||!(e<=1))return(a=n?l._soundById(n):l._sounds[0])?a._volume:0;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"volume",action:function(){l.volume.apply(l,c)}}),l;void 0===n&&(l._volume=e);n=l._getSoundIds(n);for(var d=0;d<n.length;d++){a=l._soundById(n[d]);if(a){a._volume=e;c[2]||l._stopFade(n[d]);l._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,t.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*t.volume());l._emit("volume",a._id)}}return l},fade:function(e,n,a,l){var c=this;if("loaded"!==c._state||c._playLock)return c._queue.push({event:"fade",action:function(){c.fade(e,n,a,l)}}),c;e=Math.min(Math.max(0,parseFloat(e)),1);n=Math.min(Math.max(0,parseFloat(n)),1);a=parseFloat(a);c.volume(e,l);for(var d=c._getSoundIds(l),f=0;f<d.length;f++){var m=c._soundById(d[f]);if(m){l||c._stopFade(d[f]);if(c._webAudio&&!m._muted){var g=t.ctx.currentTime,_=g+a/1e3;m._volume=e;m._node.gain.setValueAtTime(e,g);m._node.gain.linearRampToValueAtTime(n,_)}c._startFadeInterval(m,e,n,a,d[f],void 0===l)}}return c},_startFadeInterval:function(e,t,n,a,l,c){var d=this,f=t,m=n-t,g=Math.abs(m/.01),_=Date.now();e._fadeTo=n;e._interval=setInterval(function(){var l=(Date.now()-_)/a;_=Date.now();f+=m*l;f=Math.round(100*f)/100;f=m<0?Math.max(n,f):Math.min(n,f);d._webAudio?e._volume=f:d.volume(f,e._id,!0);c&&(d._volume=f);if(n<t&&f<=n||n>t&&f>=n){clearInterval(e._interval);e._interval=null;e._fadeTo=null;d.volume(n,e._id);d._emit("fade",e._id)}},Math.max(4,g>0?a/g:a))},_stopFade:function(e){var n=this,a=n._soundById(e);if(a&&a._interval){n._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime);clearInterval(a._interval);a._interval=null;n.volume(a._fadeTo,e);a._fadeTo=null;n._emit("fade",e)}return n},loop:function(){var e,t,n,a=this,l=arguments;if(0===l.length)return a._loop;if(1===l.length){if("boolean"!=typeof l[0])return!!(n=a._soundById(parseInt(l[0],10)))&&n._loop;e=l[0];a._loop=e}else if(2===l.length){e=l[0];t=parseInt(l[1],10)}for(var c=a._getSoundIds(t),d=0;d<c.length;d++){n=a._soundById(c[d]);if(n){n._loop=e;if(a._webAudio&&n._node&&n._node.bufferSource){n._node.bufferSource.loop=e;if(e){n._node.bufferSource.loopStart=n._start||0;n._node.bufferSource.loopEnd=n._stop;if(a.playing(c[d])){a.pause(c[d],!0);a.play(c[d],!0)}}}}}return a},rate:function(){var e,n,a,l=this,c=arguments;if(0===c.length)n=l._sounds[0]._id;else if(1===c.length)l._getSoundIds().indexOf(c[0])>=0?n=parseInt(c[0],10):e=parseFloat(c[0]);else if(2===c.length){e=parseFloat(c[0]);n=parseInt(c[1],10)}if("number"!=typeof e)return(a=l._soundById(n))?a._rate:l._rate;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"rate",action:function(){l.rate.apply(l,c)}}),l;void 0===n&&(l._rate=e);n=l._getSoundIds(n);for(var d=0;d<n.length;d++){a=l._soundById(n[d]);if(a){if(l.playing(n[d])){a._rateSeek=l.seek(n[d]);a._playStart=l._webAudio?t.ctx.currentTime:a._playStart}a._rate=e;l._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):a._node&&(a._node.playbackRate=e);var f=l.seek(n[d]),m=1e3*((l._sprite[a._sprite][0]+l._sprite[a._sprite][1])/1e3-f)/Math.abs(a._rate);if(l._endTimers[n[d]]||!a._paused){l._clearTimer(n[d]);l._endTimers[n[d]]=setTimeout(l._ended.bind(l,a),m)}l._emit("rate",a._id)}}return l},seek:function(){var e,n,a=this,l=arguments;if(0===l.length)a._sounds.length&&(n=a._sounds[0]._id);else if(1===l.length){var c=a._getSoundIds().indexOf(l[0]);if(c>=0)n=parseInt(l[0],10);else if(a._sounds.length){n=a._sounds[0]._id;e=parseFloat(l[0])}}else if(2===l.length){e=parseFloat(l[0]);n=parseInt(l[1],10)}if(void 0===n)return 0;if("number"==typeof e&&("loaded"!==a._state||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,l)}}),a;var d=a._soundById(n);if(d){if("number"==typeof e&&e>=0){var f=a.playing(n);f&&a.pause(n,!0);d._seek=e;d._ended=!1;a._clearTimer(n);a._webAudio||!d._node||isNaN(d._node.duration)||(d._node.currentTime=e);var seekAndEmit=function(){f&&a.play(n,!0);a._emit("seek",n)};if(f&&!a._webAudio){var emitSeek=function(){a._playLock?setTimeout(emitSeek,0):seekAndEmit()};setTimeout(emitSeek,0)}else seekAndEmit()}else{if(!a._webAudio)return d._node.currentTime;var m=a.playing(n)?t.ctx.currentTime-d._playStart:0,g=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(g+m*Math.abs(d._rate))}}return a},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var a=0;a<t._sounds.length;a++)if(!t._sounds[a]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,a=t._soundById(e);return a&&(n=t._sprite[a._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,a=e._sounds,l=0;l<a.length;l++){a[l]._paused||e.stop(a[l]._id);if(!e._webAudio){e._clearSound(a[l]._node);a[l]._node.removeEventListener("error",a[l]._errorFn,!1);a[l]._node.removeEventListener(t._canPlayEvent,a[l]._loadFn,!1);a[l]._node.removeEventListener("ended",a[l]._endFn,!1);t._releaseHtml5Audio(a[l]._node)}delete a[l]._node;e._clearTimer(a[l]._id)}var c=t._howls.indexOf(e);c>=0&&t._howls.splice(c,1);var d=!0;for(l=0;l<t._howls.length;l++)if(t._howls[l]._src===e._src||e._src.indexOf(t._howls[l]._src)>=0){d=!1;break}return n&&d&&delete n[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,a){var l=this,c=l["_on"+e];return"function"==typeof t&&c.push(a?{id:n,fn:t,once:a}:{id:n,fn:t}),l},off:function(e,t,n){var a=this,l=a["_on"+e],c=0;if("number"==typeof t){n=t;t=null}if(t||n)for(c=0;c<l.length;c++){var d=n===l[c].id;if(t===l[c].fn&&d||!t&&d){l.splice(c,1);break}}else if(e)a["_on"+e]=[];else{var f=Object.keys(a);for(c=0;c<f.length;c++)0===f[c].indexOf("_on")&&Array.isArray(a[f[c]])&&(a[f[c]]=[])}return a},once:function(e,t,n){var a=this;return a.on(e,t,n,1),a},_emit:function(e,t,n){for(var a=this,l=a["_on"+e],c=l.length-1;c>=0;c--)if(!l[c].id||l[c].id===t||"load"===e){setTimeout((function(e){e.call(this,t,n)}).bind(a,l[c].fn),0);l[c].once&&a.off(e,l[c].fn,l[c].id)}return a._loadQueue(e),a},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];if(n.event===e){t._queue.shift();t._loadQueue()}e||n.action()}return t},_ended:function(e){var n=this,a=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var l=!!(e._loop||n._sprite[a][2]);n._emit("end",e._id);!n._webAudio&&l&&n.stop(e._id,!0).play(e._id);if(n._webAudio&&l){n._emit("play",e._id);e._seek=e._start||0;e._rateSeek=0;e._playStart=t.ctx.currentTime;var c=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),c)}if(n._webAudio&&!l){e._paused=!0;e._ended=!0;e._seek=e._start||0;e._rateSeek=0;n._clearTimer(e._id);n._cleanBuffer(e._node);t._autoSuspend()}return n._webAudio||l||n.stop(e._id,!0),n},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new Sound3(e)},_drain:function(){var e=this,t=e._pool,n=0,a=0;if(!(e._sounds.length<t)){for(a=0;a<e._sounds.length;a++)e._sounds[a]._ended&&n++;for(a=e._sounds.length-1;a>=0;a--){if(n<=t)return;if(e._sounds[a]._ended){e._webAudio&&e._sounds[a]._node&&e._sounds[a]._node.disconnect(0);e._sounds.splice(a,1);n--}}}},_getSoundIds:function(e){var t=this;if(void 0!==e)return[e];for(var n=[],a=0;a<t._sounds.length;a++)n.push(t._sounds[a]._id);return n},_refreshBuffer:function(e){var a=this;e._node.bufferSource=t.ctx.createBufferSource();e._node.bufferSource.buffer=n[a._src];e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node);e._node.bufferSource.loop=e._loop;if(e._loop){e._node.bufferSource.loopStart=e._start||0;e._node.bufferSource.loopEnd=e._stop||0}return e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),a},_cleanBuffer:function(e){var n=this,a=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return n;if(t._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null;e.bufferSource.disconnect(0);if(a)try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,n},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var Sound3=function(e){this._parent=e;this.init()};Sound3.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,a=t._muted||e._muted||e._parent._muted?0:e._volume;if(n._webAudio){e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain();e._node.gain.setValueAtTime(a,t.ctx.currentTime);e._node.paused=!0;e._node.connect(t.masterGain)}else if(!t.noAudio){e._node=t._obtainHtml5Audio();e._errorFn=e._errorListener.bind(e);e._node.addEventListener("error",e._errorFn,!1);e._loadFn=e._loadListener.bind(e);e._node.addEventListener(t._canPlayEvent,e._loadFn,!1);e._endFn=e._endListener.bind(e);e._node.addEventListener("ended",e._endFn,!1);e._node.src=n._src;e._node.preload=!0===n._preload?"auto":n._preload;e._node.volume=a*t.volume();e._node.load()}return e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0);e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10;0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]});if("loaded"!==n._state){n._state="loaded";n._emit("load");n._loadQueue()}e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;if(t._duration===1/0){t._duration=Math.ceil(10*e._node.duration)/10;t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration);t._ended(e)}e._node.removeEventListener("ended",e._endFn,!1)}};var n={},loadBuffer=function(e){var t=e._src;if(n[t]){e._duration=n[t].duration;loadSound2(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var a=atob(t.split(",")[1]),l=new Uint8Array(a.length),c=0;c<a.length;++c)l[c]=a.charCodeAt(c);decodeAudioData(l.buffer,e)}else{var d=new XMLHttpRequest;d.open(e._xhr.method,t,!0);d.withCredentials=e._xhr.withCredentials;d.responseType="arraybuffer";e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){d.setRequestHeader(t,e._xhr.headers[t])});d.onload=function(){var t=(d.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t){e._emit("loaderror",null,"Failed loading audio file with status: "+d.status+".");return}decodeAudioData(d.response,e)};d.onerror=function(){if(e._webAudio){e._html5=!0;e._webAudio=!1;e._sounds=[];delete n[t];e.load()}};safeXhrSend(d)}},safeXhrSend=function(e){try{e.send()}catch(t){e.onerror()}},decodeAudioData=function(e,a){var error2=function(){a._emit("loaderror",null,"Decoding audio data failed.")},success=function(e){if(e&&a._sounds.length>0){n[a._src]=e;loadSound2(a,e)}else error2()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(success).catch(error2):t.ctx.decodeAudioData(e,success,error2)},loadSound2=function(e,t){t&&!e._duration&&(e._duration=t.duration);0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]});if("loaded"!==e._state){e._state="loaded";e._emit("load");e._loadQueue()}},setupAudioContext=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=n?parseInt(n[1],10):null;if(e&&a&&a<9){var l=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!l&&(t.usingWebAudio=!1)}if(t.usingWebAudio){t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain();t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime);t.masterGain.connect(t.ctx.destination)}t._setup()}};e.Howler=t;e.Howl=Howl2;if(void 0!==S){S.HowlerGlobal=HowlerGlobal2;S.Howler=t;S.Howl=Howl2;S.Sound=Sound3}else if("undefined"!=typeof window){window.HowlerGlobal=HowlerGlobal2;window.Howler=t;window.Howl=Howl2;window.Sound=Sound3}}();!/*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   */function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t};HowlerGlobal.prototype.pos=function(e,t,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;t="number"!=typeof t?a._pos[1]:t;n="number"!=typeof n?a._pos[2]:n;if("number"!=typeof e)return a._pos;a._pos=[e,t,n];if(void 0!==a.ctx.listener.positionX){a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1);a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1);a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)}else a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);return a};HowlerGlobal.prototype.orientation=function(e,t,n,a,l,c){var d=this;if(!d.ctx||!d.ctx.listener)return d;var f=d._orientation;t="number"!=typeof t?f[1]:t;n="number"!=typeof n?f[2]:n;a="number"!=typeof a?f[3]:a;l="number"!=typeof l?f[4]:l;c="number"!=typeof c?f[5]:c;if("number"!=typeof e)return f;d._orientation=[e,t,n,a,l,c];if(void 0!==d.ctx.listener.forwardX){d.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1);d.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1);d.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1);d.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1);d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1);d.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)}else d.ctx.listener.setOrientation(e,t,n,a,l,c);return d};Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init);Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var a=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e;n._pos=[e,0,0]}for(var l=n._getSoundIds(t),c=0;c<l.length;c++){var d=n._soundById(l[c]);if(d){if("number"!=typeof e)return d._stereo;d._stereo=e;d._pos=[e,0,0];if(d._node){d._pannerAttr.panningModel="equalpower";d._panner&&d._panner.pan||setupPanner(d,a);if("spatial"===a){if(void 0!==d._panner.positionX){d._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime);d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime);d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)}else d._panner.setPosition(e,0,0)}else d._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)}n._emit("stereo",d._id)}}return n};Howl.prototype.pos=function(e,t,n,a){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"pos",action:function(){l.pos(e,t,n,a)}}),l;t="number"!=typeof t?0:t;n="number"!=typeof n?-.5:n;if(void 0===a){if("number"!=typeof e)return l._pos;l._pos=[e,t,n]}for(var c=l._getSoundIds(a),d=0;d<c.length;d++){var f=l._soundById(c[d]);if(f){if("number"!=typeof e)return f._pos;f._pos=[e,t,n];if(f._node){(!f._panner||f._panner.pan)&&setupPanner(f,"spatial");if(void 0!==f._panner.positionX){f._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime);f._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime);f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)}else f._panner.setPosition(e,t,n)}l._emit("pos",f._id)}}return l};Howl.prototype.orientation=function(e,t,n,a){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"orientation",action:function(){l.orientation(e,t,n,a)}}),l;t="number"!=typeof t?l._orientation[1]:t;n="number"!=typeof n?l._orientation[2]:n;if(void 0===a){if("number"!=typeof e)return l._orientation;l._orientation=[e,t,n]}for(var c=l._getSoundIds(a),d=0;d<c.length;d++){var f=l._soundById(c[d]);if(f){if("number"!=typeof e)return f._orientation;f._orientation=[e,t,n];if(f._node){if(!f._panner){f._pos||(f._pos=l._pos||[0,0,-.5]);setupPanner(f,"spatial")}if(void 0!==f._panner.orientationX){f._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime);f._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime);f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)}else f._panner.setOrientation(e,t,n)}l._emit("orientation",f._id)}}return l};Howl.prototype.pannerAttr=function(){var e,t,n,a=this,l=arguments;if(!a._webAudio)return a;if(0===l.length)return a._pannerAttr;if(1===l.length){if("object"!=typeof l[0])return(n=a._soundById(parseInt(l[0],10)))?n._pannerAttr:a._pannerAttr;e=l[0];if(void 0===t){e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel});a._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:a._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:a._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:a._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:a._panningModel}}}else if(2===l.length){e=l[0];t=parseInt(l[1],10)}for(var c=a._getSoundIds(t),d=0;d<c.length;d++){n=a._soundById(c[d]);if(n){var f=n._pannerAttr;f={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:f.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:f.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:f.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:f.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:f.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:f.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:f.panningModel};var m=n._panner;if(!m){n._pos||(n._pos=a._pos||[0,0,-.5]);setupPanner(n,"spatial");m=n._panner}m.coneInnerAngle=f.coneInnerAngle;m.coneOuterAngle=f.coneOuterAngle;m.coneOuterGain=f.coneOuterGain;m.distanceModel=f.distanceModel;m.maxDistance=f.maxDistance;m.refDistance=f.refDistance;m.rolloffFactor=f.rolloffFactor;m.panningModel=f.panningModel}}return a};Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation;t._stereo=n._stereo;t._pos=n._pos;t._pannerAttr=n._pannerAttr;e.call(this);t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init);Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation;t._stereo=n._stereo;t._pos=n._pos;t._pannerAttr=n._pannerAttr;if(t._stereo)n.stereo(t._stereo);else if(t._pos)n.pos(t._pos[0],t._pos[1],t._pos[2],t._id);else if(t._panner){t._panner.disconnect(0);t._panner=void 0;n._refreshBuffer(t)}return e.call(this)}}(Sound.prototype.reset);var setupPanner=function(e,t){t=t||"spatial";if("spatial"===t){e._panner=Howler.ctx.createPanner();e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle;e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle;e._panner.coneOuterGain=e._pannerAttr.coneOuterGain;e._panner.distanceModel=e._pannerAttr.distanceModel;e._panner.maxDistance=e._pannerAttr.maxDistance;e._panner.refDistance=e._pannerAttr.refDistance;e._panner.rolloffFactor=e._pannerAttr.rolloffFactor;e._panner.panningModel=e._pannerAttr.panningModel;if(void 0!==e._panner.positionX){e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime);e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime);e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)}else e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]);if(void 0!==e._panner.orientationX){e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime);e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime);e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)}else e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])}else{e._panner=Howler.ctx.createStereoPanner();e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)}e._panner.connect(e._node);e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}(T);let M=class{constructor(e,t=!1){__publicField(this,"assets");__publicField(this,"howler",null);__publicField(this,"useAudioElement",!1);/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.assets=e.filter(e=>e.endsWith("mp3")).concat(e.filter(e=>!e.endsWith("mp3"))):this.assets=e;this.useAudioElement=t}load(){this.unload();this.howler||(this.howler=new T.Howl({html5:this.useAudioElement,src:this.assets,onloaderror:()=>{console.warn("Howler: sounds failed to load, falling back to html5 audio");this.howler=new T.Howl({html5:!0,src:this.assets,onloaderror:()=>{console.error("Howler: html5 audio fallback failed to load")}})}}))}unload(){var e;null==(e=this.howler)||e.unload()}play(){var e;this.howler||this.load();null==(e=this.howler)||e.play();if(window.Cypress){window.Cypress.howlerHistory||(window.Cypress.howlerHistory=[]);window.Cypress.howlerHistory.push({time:Date.now(),src:this.assets.slice(0)})}}};!function(e){e.Suspended="web-ui-sound-suspended";e.Enabled="web-ui-sound-enabled"}(d||(d={}));let P=window.chesscom||{},L=window.AudioContext||window.webkitAudioContext,N=!!L;function newAudioContext(){try{return new L}catch(e){return null}}function isSuspended(){return N}function resumeAudio(e){if(L){P.audioContext||(P.audioContext=newAudioContext());if(!P.audioContext||!P.audioContext.resume){N=!1;e();return}P.audioContext.resume().then(()=>{N=!1;e()})}}let x=["mousedown","keydown","touchstart","touchend"],O=!1;function addWindowEvents(e){if(!O){O=!0;x.forEach(t=>window.addEventListener(t,e))}}function removeWindowEvents(e){if(O){O=!1;x.forEach(t=>window.removeEventListener(t,e))}}function waitMessage(e,t){function listener(n){var a;if((null==(a=null==n?void 0:n.data)?void 0:a.key)===e){t();window.removeEventListener("message",listener)}}window.addEventListener("message",listener)}function enableSound(){isSuspended()&&resumeAudio(()=>{window.postMessage({key:d.Enabled},window.location.origin);removeWindowEvents(enableSound)})}function loadSound(e,t=!1){let n=new M(e,t);if(isSuspended()){addWindowEvents(enableSound);waitMessage(d.Enabled,()=>n.load())}else n.load();return n}let I=0,R=!1;function playSound(e){if(isSuspended()){if(!R&&I>3){I=0;R=!0;window.postMessage({key:d.Suspended},window.location.origin)}else if(!R){I++;enableSound();waitMessage(d.Enabled,()=>e.play())}}else e.play()}let B=Object.freeze(Object.defineProperty({__proto__:null,Sound:M,get SoundEvents(){return d},enableSound,loadSound,playSound},Symbol.toStringTag,{value:"Module"})),V=Object.freeze(Object.defineProperty({__proto__:null,addTrailingSlash:function addTrailingSlash(e){return e&&e.length&&"/"!==e.substr(-1)?`${e}/`:e},capitalizeFirstLetter:function capitalizeFirstLetter(e){return`${e[0].toUpperCase()}${e.slice(1)}`},newlineToBr:function newlineToBr(e){return e.toString().replace(/(?:\r\n|\r|\n)/g,"<br>")},uncapitalizeFirstLetter:function uncapitalizeFirstLetter(e){return`${e[0].toLowerCase()}${e.slice(1)}`}},Symbol.toStringTag,{value:"Module"}))},49165:function(e,t,n){"use strict";n.d(t,{T:function(){return getOppositeColor}});var a=n(17084);function getOppositeColor(e){return e===a.Z.ColorsAsNumbers.Black?a.Z.ColorsAsNumbers.White:a.Z.ColorsAsNumbers.Black}},5825:function(e,t,n){"use strict";n.d(t,{q:function(){return setTimestampOnNode}});var a=n(32831);function setTimestampOnNode({api:e,node:t,timestamp:n}){var l;let{game:c,respond:d}=e.getContext(),{line:f,move:m}=t.ids;if(null===n)return(null==(l=t.commands)?void 0:l.timestamp)&&delete t.commands.timestamp,d(a.i.APIEvents.NodeUpdated,{changes:{timestamp:n,node:t}});t.commands||(t.commands={});c.updateNode({commands:Object.assign(t.commands,{timestamp:`${n}`})},m,f)}},22367:function(e,t,n){"use strict";n.d(t,{M:function(){return isMatchingNode}});function isMatchingNode(e,t){if(!e||!t)return!1;let{ids:n,hash:a}=t;return e.ids.line===n.line&&e.ids.move===n.move&&e.hash[0]===a[0]&&e.hash[1]===a[1]}},66548:function(e,t,n){"use strict";var a;n.d(t,{k:function(){return a}});(e=>{(e=>{(e=>{e.ClearAllAnalysis="Clear All Analysis";e.DeleteCommentAfter="Delete Comment After";e.DeleteCommentBefore="Delete Comment Before";e.DeleteComment="Delete Comment";e.DeleteLine="Delete Entire Variation";e.DeleteMove="Delete Move";e.InsertComment="Comment";e.InsertCommentAfter="Comment After";e.InsertCommentBefore="Comment Before";e.InsertContinuation="Insert Continuation";e.MoveVariationDown="Move Variation Down";e.MoveVariationUp="Move Variation Up";e.Promote="Promote";e.RemoveAnnotation="Remove Annotation";e.ShowAllAnnotations="Show All Annotations";e.HideAllAnnotations="Hide All Annotations";e.RemoveBegin="Remove Begin";e.RemoveEnd="Remove End";e.RemoveEvaluationAnnotation="Remove Evaluation Annotation";e.RemoveFocus="Remove Focus";e.SetBegin="Set Begin";e.SetEnd="Set End";e.SetFocus="Set Focus"})(e.Actions||(e.Actions={}));(e=>{e.BadMove="Bad move";e.BlackHasDecisiveAdvantage="Black has a decisive advantage";e.BlackHasModerateAdvantage="Black has a moderate advantage";e.BlackHasSlightAdvantage="Black has a slight advantage";e.Blunder="Blunder";e.Drawish="Drawish";e.DubiousMove="Dubious move";e.ExcellentMove="Excellent move";e.GoodMove="Good move";e.Miss="Miss";e.Novelty="Novelty";e.Unclear="Unclear";e.PositionInZuqZwang="The position is in zugzwang";e.SpeculativeMove="Speculative move";e.WhiteHasSlightAdvantage="White has a slight advantage";e.WhiteHasModerateAdvantage="White has a moderate advantage";e.WhiteHasDecisiveAdvantage="White has a decisive advantage";e.WithInitiative="With initiative";e.WithCompensation="With compensation";e.WithAttack="With an attack";e.TimeTrouble="Time trouble";e.Counterplay="Counterplay";e.DevelopmentLead="Development lead"})(e.Annotations||(e.Annotations={}));(e=>{e.B="B";e.K="K";e.N="N";e.P="P";e.Q="Q";e.R="R"})(e.Pieces||(e.Pieces={}));(e=>{e.NumberOfDays="numberOfDays";e.NumberOfHours="numberOfHours";e.NumberOfMinutes="numberOfMinutes"})(e.Plural||(e.Plural={}));(e=>{e.AddComment="Add Comment..."})(e.Prompt||(e.Prompt={}));(e=>{e.FiftyMove="Fifty moves were played with no capture or pawn move, so the game ended in a draw.";e.InsufficientMaterial="Neither player had enough material to force checkmate, so the game ended in a draw.";e.WhiteTimeoutVsInsufficientMaterial="Although White ran out of time, Black did not have sufficient material to ever force checkmate, so the game ended in a draw.";e.BlackTimeoutVsInsufficientMaterial="Although Black ran out of time, White did not have sufficient material to ever force checkmate, so the game ended in a draw.";e.DrawByAgreement="The game has been drawn by agreement.";e.Stalemate="A draw by stalemate occurs when the player whose turn it is has no legal moves, but their king is not in check.";e.EnPassant="En passant is a special pawn move by which a pawn captures another pawn that has advanced two squares.";e.ThreeFoldRepetition="This game ended in a draw because the same position was repeated three times."})(e.Tooltips||(e.Tooltips={}));(e=>{e.TimeoutVsInsufficientMaterial="Game drawn by timeout vs insufficient material";e.DrawByAgreement="Game drawn by agreement"})(e.GameTerminationMessages||(e.GameTerminationMessages={}))})(e.Translation||(e.Translation={}));(e=>{e.HML="hml";e.VML="vml";e.MOVE_LIST="move-list"})(e.Types||(e.Types={}))})(a||(a={}))},47176:function(e,t,n){"use strict";n.d(t,{is:function(){return is}});function is(e){return function isType(t){return e===t.type}}},62230:function(e,t,n){"use strict";n.d(t,{b:function(){return isUnmark}});var a=n(32831),l=n(47176);function isUnmark(e){return function isMarkingOfType(t){var n,c;return(0,l.is)(a.i.APIEvents.Unmark)(t)&&(null==(c=(n=t.data).find)?void 0:c.call(n,t=>t.type===e))}}},15388:function(e,t,n){"use strict";n.d(t,{Rc:function(){return c},dc:function(){return l},kx:function(){return a}});(e=>{(e=>{e.Name="effects"})(e.Plugin||(e.Plugin={}));(e=>{e.Normal="18.75%";e.Large="24.5%"})(e.BadgeSize||(e.BadgeSize={}));(e=>{e.FlyoutEffectBegin="FlyoutEffectBegin";e.FlyoutEffectEnd="FlyoutEffectEnd"})(e.Events||(e.Events={}))})(l||(l={}));let a="effect";var l,c=(e=>(e.Abandon="Abandon",e.Alternative="Alternative",e.BestMove="BestMove",e.Blunder="Blunder",e.Book="Book",e.Brilliant="Brilliant",e.CheckmateBlack="CheckmateBlack",e.CheckmateWhite="CheckmateWhite",e.Correct="Correct",e.Critical="Critical",e.Custom="Custom",e.DefeatBlack="DefeatBlack",e.DefeatWhite="DefeatWhite",e.DrawBlack="DrawBlack",e.DrawWhite="DrawWhite",e.Excellent="Excellent",e.FastWin="FastWin",e.Forced="Forced",e.FreePiece="FreePiece",e.Gamechanger="Gamechanger",e.Good="Good",e.GreatFind="GreatFind",e.Inaccuracy="Inaccuracy",e.Incorrect="Incorrect",e.Mate="Mate",e.Miss="Miss",e.MissedWin="MissedWin",e.Mistake="Mistake",e.ResignBlack="ResignBlack",e.ResignWhite="ResignWhite",e.Sharp="Sharp",e.Stalemate="Stalemate",e.Takeback="Takeback",e.Threat="Threat",e.TimeoutBlack="TimeoutBlack",e.TimeoutWhite="TimeoutWhite",e.Undo="Undo",e.Winner="Winner",e.WinnerWhite="WinnerWhite",e.Interesting="Interesting",e.Warning="Warning",e.Equal="Equal",e))(c||{})},67577:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});let a=1},45659:function(e,t,n){"use strict";n.d(t,{T:function(){return getTuckPosition},k:function(){return tuckMarking}});function tuckMarking({square:e,isFlipped:t,effectEl:n}){let a=getTuckPosition(e,t);a.top&&n.classList.add("tuck-top");a.right&&n.classList.add("tuck-right")}function getTuckPosition(e,t){let n={top:t?"1":"8",right:t?"a":"h"};return{top:e.includes(n.top),right:e.includes(n.right)}}},11173:function(e,t,n){"use strict";n.d(t,{h:function(){return canMoveForward}});function canMoveForward({api:e,followAlternateLines:t=!1,mv:n}){let{game:a,mutateGame:l}=e.getContext(),c=l(function callMethod(){a.moveForward(t,n)});return null!=c&&!!c.plyDiff&&(a.moveBackward(),!0)}},23511:function(e,t,n){"use strict";n.d(t,{U:function(){return getLegacyPieceBaseURL}});var a=n(42589);function getLegacyPieceBaseURL(e,t=150,n){return`${(0,a.L)(n)}/chess-themes/pieces/${e}/${t}`}},10269:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var a=n(59074),l={exports:{}};!function(e){!/*!
   * Chess.com (c) 2020 | all rights reserved
   *//*!
   * A distant fork of chess.js - BSD (c) 2014, Jeff Hlywa (jhlywa@gmail.com)
   */function(){var t=function(){var e=[[2637767806,863464769],[720845184,95069639],[1155203408,610415943],[2618685246,1655139042],[1971536997,1218186377],[848342074,540017087],[263957791,1627660921],[3896152207,4076560586],[226391645,1484086288],[436746274,3467632685],[2516964848,3797861296],[3491888988,3510251221],[1086189917,1248276018],[18044180,1876255637],[1572111136,1190386149],[597658413,2146900428],[97624494,2243205793],[1738507407,1854916977],[1950989311,2149575947],[2098318769,3283594736],[2194108574,2015279052],[4079062812,2500884588],[856979699,2941369318],[1270058469,3877737539],[2858720366,3170717948],[2378012835,1387254795],[2278688587,2178388503],[435406673,3555273441],[3031118064,1655806655],[2063925420,1107589828],[3376753832,436852829],[615148625,1302492416],[1285502018,1963045959],[346460119,1016137793],[2803604355,1176288659],[55085973,2968618255],[1669016372,4287873088],[164740250,1037634196],[896886403,883023163],[1935551383,2764331555],[410153072,4055711755],[533441746,1505690343],[3541084098,3466290517],[3214426080,4267541060],[2675233103,1951705124],[1374411850,3115986997],[1552073989,3684348154],[4244110986,875606593],[844343081,3115990494],[2356462440,135999605],[3116133511,377238503],[2129956651,2197966368],[299173332,3276914047],[1701379241,745972291],[1306570996,254977976],[2530644806,214138461],[1122123979,1667800879],[1831591130,3801192033],[1116211970,920967505],[1594837592,2551651254],[972591349,2046373768],[2479207924,1935030411],[1675376029,2367888248],[3960916618,3935874422],[1398143232,3265801671],[133930885,1520005442],[1351827834,2829577566],[2076951437,2723839804],[435980918,2364847828],[1668970368,3738157273],[2185864314,3993911799],[2041407829,31969768],[346864372,2004703094],[4047877822,3437142421],[3669961416,538399484],[616810829,4190688246],[3144558884,4030272234],[216165387,2513010905],[2761740594,3216997572],[3919406634,4096014649],[669429112,2434161727],[2234904640,3111407601],[1421079802,1598085235],[1924213810,310373675],[4002762044,2067865415],[2592451728,2586110625],[1890340057,4031717877],[4189625662,2577429954],[2276713138,3049850801],[2741429688,3310307512],[2924122950,3426712818],[421576781,1193704381],[2277442246,3030264553],[153237420,595540057],[4278711886,4176286928],[2380848297,4030514510],[2618700582,1303682185],[3018992701,185284845],[957243316,1291916363],[1543415220,1898408169],[504378001,531073412],[2591337657,1692896435],[1333852064,903543556],[1661259930,188168388],[561112646,2197961224],[1536910315,2632972300],[1349168372,2307429186],[411152329,2745631190],[1694697476,1081411140],[3755185459,2631660711],[4019355068,4027326706],[2066937809,3761668332],[3120395808,3878773315],[94890149,2109283191],[3045629038,358812277],[1249184265,3465901047],[3477490924,2308583306],[4114113436,3875911716],[1014604031,1434513279],[3991324799,2222416029],[2040431088,1539915569],[2253613964,4081224332],[2547464012,1611168627],[2722521980,4281500978],[71289574,213969824],[2450408597,903689630],[1894451515,364024012],[1939968537,374938813],[1447259295,3785468557],[4021046128,1664847745],[3139524504,3562928047],[1173487682,4065269608],[2467266804,3907744866],[4284945151,3486998177],[2925674454,1953016432],[3710671816,1271453948],[2129465869,1422863833],[587093076,18243356],[3373793513,2411305257],[2156648078,1791034213],[3737413652,1534461430],[468575139,2935304962],[1129551363,3603256834],[2861996892,1763494778],[2826449619,2465197654],[1704209531,1014895022],[3738359347,3402630390],[569410928,4095796581],[3021312909,2108247612],[2444777957,2664129360],[282063667,3773661258],[682545472,3188439005],[3318488457,1917822038],[1447622272,4045023041],[757420137,4038580915],[2613420942,4146703316],[4012836163,150381244],[2938127093,3428591704],[1208226490,3086335530],[2935205706,1446903363],[430957978,3830532479],[1381578755,3757172800],[4109399782,1596778224],[288855589,1954372339],[3169178148,2256716053],[2644780093,3895892303],[107966643,1071681559],[1304747544,2607225372],[1359190711,1898207171],[3229237120,3273634996],[3027167685,3863637628],[3011615298,2883984519],[564135827,978463264],[770797430,362326607],[1983662611,1907583229],[4153656423,48268960],[3609759233,720080177],[3727911466,1270989899],[200708787,2366086947],[744508026,393422515],[1213261630,65757284],[3485747185,3845951003],[2958861301,1680248217],[2598470344,3163845864],[2767997908,4233451722],[3881113485,1492930166],[1773764017,2764062206],[4189435844,2898689174],[4234838742,1267095035],[2624081078,3302114327],[2395569449,390426320],[1728307101,690284926],[3309827454,1118258254],[2028172868,3888829086],[4271523049,909051386],[146617804,942892565],[2467685867,974297806],[2483428231,503635829],[3743260573,2018222096],[1002067894,2289153437],[3535252974,3738302271],[4154611160,1002664952],[3623154244,2349656961],[3646679180,3524329383],[862933752,4282853607],[2806008282,3272780913],[2734037942,3828874677],[1328176304,2137666995],[2278785213,2780788825],[381286368,1816476193],[2074232908,2316293454],[4087773386,3651330956],[967884669,3728964514],[4239349185,3213509668],[419231360,1463788948],[1275421624,2672384707],[1088456595,436245261],[2365565249,783696577],[1758083333,845223583],[2048846183,3530914274],[2635948261,124738415],[940630937,3069598626],[839474029,1253439921],[902477345,165479306],[2836079689,2681188273],[2007115168,2093139645],[1363041891,1282466609],[1130479818,1063857938],[3644959908,1260430427],[1385135238,46497915],[1386975934,3110156681],[2635987502,4233461619],[1915744629,4117939016],[487743653,285736599],[2049219159,3960249250],[69242857,3908563670],[1511066720,1488527520],[215590039,1703564952],[1459430344,4184955468],[676103291,2642967214],[83799035,3182827979],[1949179493,476101251],[2593534694,1493478716],[2283504289,995211746],[1349412676,3449243940],[2954378677,1878813305],[249149717,3329151870],[1578231917,1483986052],[4135085182,890874990],[461755528,3505523909],[3669622373,634949665],[219487622,2914465301],[2825233742,3703631897],[2479105382,2935590907],[2582097898,3187672881],[1221328648,1843341402],[2140891889,3958868911],[1482849818,345750049],[751922730,3178831411],[3546542069,4036458902],[216179596,877293293],[444615341,3117393729],[2424254530,494454238],[1344234989,3003337991],[929188581,2760877801],[2507911009,1879899982],[980166547,1311840394],[3566535507,1790747461],[143525013,2311336672],[4181962471,4273938872],[1815842366,862009811],[911175674,1179575598],[3591335374,3694215714],[1452686093,3393294272],[385158879,2447709103],[4011414929,1264623507],[1448477120,911094312],[3971299641,2289992053],[3133647265,2234591563],[3007628400,964409938],[1708345684,3673411261],[3031964479,2843021794],[3022128657,2480338599],[118850112,473449293],[2048127371,3202109429],[3158349745,382018770],[1505327237,3807570472],[2568424029,3272693060],[1866609495,3888556537],[844703982,1852802964],[3504617058,682636099],[1448882679,3733580327],[821387540,2215744532],[3631471417,311618895],[2077838877,2383929020],[3352949096,1688694420],[2491080787,3998672444],[3368630402,4182204255],[983299419,2837414346],[3651215291,1033373924],[265429091,3988955082],[3019003608,2896212153],[2955948456,3025235588],[903690197,2266253487],[3925215275,89402958],[3959093811,3609545561],[2455088053,223552128],[3115011301,2133669107],[1765081558,673805649],[3324795129,2111392191],[3443871631,432345706],[3152559950,3425427147],[3699649406,672784944],[3129545774,7668664],[2747044893,173040075],[3925243406,852328481],[164095314,3161868591],[2234471571,1302682825],[2164784335,105893718],[159995093,536831360],[599199451,425051327],[3274759746,1680930461],[1192619331,3903085578],[2832721114,3078660237],[91404660,4030521531],[3044880024,1578375623],[3906596030,754177855],[803516785,1894094672],[288455592,2030430096],[2143232492,2317305324],[388352703,3406060288],[2521731420,3588403719],[1043041227,4028028525],[3195290851,2468913324],[4166724431,3168683191],[1228226538,968516529],[500177583,3444787306],[533367442,4252082053],[4236023256,657816314],[413575568,3367198397],[3435884549,3334062733],[1004255532,1135705894],[2859513268,4170618274],[3914086821,1251487871],[3080761716,3489067886],[3571165255,699353261],[773372954,3648014952],[769693293,2939128604],[3116440923,507748478],[1687629160,3739431776],[2489486648,3502376324],[3686847158,2878383449],[3530767427,902211375],[2121652637,2493976397],[1827477891,930064171],[2549918411,4029725732],[2071415163,844118802],[2236083679,3088894868],[2040110303,4144562891],[3489536313,1133419300],[2190878435,2301466071],[2465915458,2448602097],[1675766804,2073834499],[3329799896,1613253148],[1483966600,1348836071],[159505618,2527621997],[2674227354,1695130688],[2683539437,1927873839],[3833196123,2570082188],[3891433165,759819981],[1455453349,2179602430],[1430583255,1957776111],[2067726741,4235143439],[303380021,2998980439],[2136024795,3126725799],[2054591852,1051702291],[1029141665,489794361],[2317027384,569642164],[2068461795,624418658],[2499875684,1830645251],[1302894490,4319401],[1002663431,2406815191],[1560941298,2060652753],[2141002286,515773223],[3661248027,475092913],[3705503008,2419919909],[914567990,3496539911],[3462935583,2039034761],[2878378006,2379243316],[1133857586,1390159333],[3023618742,2140726761],[282908558,944874642],[3686955701,1148723903],[2604456805,4163675010],[3061545110,377179268],[3218002352,76459088],[2836503392,916455101],[536836808,151306053],[2886925079,404221671],[2936593041,2011015485],[453815187,1852163908],[3042568989,82176306],[3279635891,4174836410],[3282689058,2360003049],[4088968807,1516570623],[2680453086,1322680794],[1731693966,3438253771],[1842894553,1294307894],[2736377365,2964642609],[121205621,521330014],[2324595870,3005710757],[3784465521,676493813],[1958759409,2030833406],[1306150933,1016370058],[2636541290,482366508],[1950415745,1695073534],[322077955,3746046623],[3602873262,3829181504],[1211684447,1861645455],[504701736,4080111082],[2407799203,1223857855],[1925743434,1498920209],[3617596327,845198428],[2498480299,3484773806],[2680229135,2560201696],[3731399221,1536412390],[2756509305,2924710846],[2635957500,3459716133],[1372762539,769635894],[802677945,3878474636],[1707760534,3075809808],[3714687192,2872792173],[1615679922,1606381794],[1940556374,1337437342],[445390489,731124040],[2864974375,64601760],[1984806574,2141516710],[513390958,1890172555],[744398315,1475299139],[982749166,852662657],[652663695,4260736510],[1184061125,82616221],[3363191899,147951756],[1064069880,1507328085],[2138882964,547595589],[2616926846,3186935246],[2298715513,3606862940],[2414381911,811477686],[2694745228,900437726],[4202576185,2201114451],[3602305260,3323446937],[3756663274,2658490339],[3061587876,2171079416],[3390977925,2850497765],[486312941,224925241],[3515712841,3510684394],[1322319486,2647200565],[3839619171,1148450258],[392296762,1154854654],[1401523788,957405781],[1934485528,527352730],[645968162,3131215255],[696971825,3361451947],[2038689491,1946699733],[1723966113,2785859721],[2652365974,1118037185],[3988018407,3134982149],[1354171594,3053634345],[1287854075,2631782435],[1723106141,2662328866],[563845090,1878819261],[639520332,171129501],[534957223,1696062352],[3612364282,2283204027],[3109494688,1304463816],[500957989,630925278],[3477030536,2149497258],[4109750364,281719363],[951472732,564407054],[922095147,2767874048],[3946156928,829677774],[2622281253,2086286851],[2936811901,850242186],[630086272,3340782667],[2340986210,1296336989],[4107355543,3865114709],[3560210278,3968418243],[3868847493,2967450637],[611513888,2083325060],[3265390517,3025776309],[2874106961,3424470508],[1668707698,2923258228],[2778598353,24320552],[292356118,3415510793],[754567370,86994591],[185141877,1621715171],[2884558258,3722473457],[1492107531,111281805],[3336927864,4225337056],[782994598,1021838039],[346133860,18281270],[2080909533,1649329040],[3612065399,3859901127],[2151962287,284556115],[3957975594,3745718727],[52533817,3998775856],[1232633839,397383972],[2716413964,3629253960],[1531307298,3836851439],[3030137657,2500401718],[3561556693,653345841],[313061910,2945718466],[2065276,3342140708],[410498334,1470588117],[2726640512,4051654894],[2570984935,758567696],[3008987264,3462702678],[623860175,228525243],[3527183895,1829844480],[467272850,3890501742],[568376656,650516927],[990477018,4035508558],[2366955227,817792110],[4183621538,989198068],[946958343,1639184195],[3395758993,3924097558],[1690887473,3220519765],[605184237,1255270525],[275515833,1926424610],[2142902612,283494960],[2021972412,1823828440],[105373677,3448326697],[1666662384,1042433908],[1338566998,261206307],[498685668,1344755577],[3101233780,3119109371],[2733370951,3808165089],[3656512268,3449289481],[4025308119,1607880299],[778896067,1612183167],[2846510368,3674754715],[3058428120,2991822529],[1892379383,3268787440],[2565895844,4154602030],[3213117192,98999135],[2495816991,116985075],[1040203361,1785041385],[3106252493,69316595],[1639829808,2087117568],[3213709576,3799911752],[604681594,2340981536],[4236730699,2938666503],[4009938384,1878897714],[2701667332,1725918218],[2182473079,1258184],[3550198211,2760750799],[657991062,875584532],[1640976276,3380476221],[460041378,2924352091],[1972323596,2287414795],[2510248061,1350206297],[2959337826,3762681165],[1625877874,3235902929],[2070189957,1429368735],[4245163299,1839731898],[2358312347,138364248],[275739390,2179122576],[2037777210,972544338],[2766930226,1984733259],[1933485829,4209310327],[3034118011,3286589799],[2653025529,62078937],[2641780289,2679545709],[3540781195,2787026415],[1569993599,3215949659],[441337890,3947723353],[1878946792,459505587],[3724105660,920173002],[1691411102,3934795955],[148741087,3647709027],[142506469,2776440083],[3811107376,3823285243],[472209891,252266174],[1913386482,1867329194],[2960608550,482740699],[1145005292,1513558421],[1091751784,1687823886],[3625186042,3086337482],[1712140887,940065262],[1504455800,1945702563],[3896940088,2003245591],[2478191531,4197739e3],[3233871270,250924495],[3404865229,1131917964],[1462204167,429621621],[1349259705,3641608989],[3627860584,2048468319],[1244251718,1513180369],[3979211282,371413143],[3043187861,4285699810],[581894202,3060983825],[1390895705,1811317301],[2599134010,3337406128],[2488233440,2436161462],[1816641224,2208816697],[1792034756,815866116],[2779893723,2695577703],[2084952115,2951772258],[1351806869,169269771],[2469979804,86740603],[1163545420,4264616949],[1795352113,2511146232],[1796715044,3134635815],[3521170642,1538900329],[3725363621,1455009392],[1342594643,1512127734],[2618386938,662157428],[2028859350,2494504685],[1841905045,648351336],[4002935891,4033319405],[850071259,1768358867],[979915719,3876018087],[830889197,1629549437],[1744763229,2455795856],[522919199,368499868],[3063822504,2522639205],[2861636095,407686388],[4097602344,1945259027],[4215946617,1251639506],[894485042,534122652],[924809191,1807237502],[1811585710,1589663609],[3439653887,1722232],[3810997538,105152714],[2677100683,4291805514],[77233985,102407776],[4239834691,2851274395],[148802076,2006440603],[2409138150,126301601],[3048474397,3217504870],[588133437,4221603123],[1139638106,263087485],[982032635,3165674595],[562514827,1294842959],[467575086,905357513],[1405117894,3370530088],[3813285157,242912619],[3601878331,1985076606],[1586505598,2092146221],[738488098,103663229],[2970334297,321718822],[1068097019,1742926233],[235518094,420804527],[283685722,4092504887],[2666392744,3799169331],[3569817788,1256762975],[2169728352,292617248],[2444571896,2239859206],[3967907832,1066404216],[420376911,2913277294],[3046293305,2956347747],[2311278792,2477686209],[2885955184,4172514290],[3030078181,2275536480],[4212469731,4280736393],[1046900335,1773022229],[995380926,1414273529],[3892683234,2429494358],[615726237,2127712535],[3880203074,2071130305],[176180504,3070850165],[1474506861,2283723599],[1256707747,1857412043],[764236850,359687368],[3521530334,511649419],[2318567964,3992868140],[128167623,2518992858],[2220129756,1042300052],[2567608573,1349636707],[441446694,384760969],[4143447316,829506048],[817912603,2738025500],[2368091832,357934982],[1187643061,1561463042],[3438021235,3030161697],[1318922279,895468690],[434876457,1130220303],[1180291767,1132759596],[2520707785,1798553137],[1962430872,2958700157],[1510954061,3534879512],[57831539,3269538993],[3354831405,3852135009],[891783098,2698494511],[2555636406,996018997],[2881342935,3982231648],[3473267445,2894952368],[1238029452,3958679326],[2051805420,559465638],[3655936674,1186951582],[330209165,167662935],[1929681327,2450868735],[1313566811,2458925988],[4283920930,3243182650],[1438004300,4185567150],[3093439067,89876832],[3401620219,3721579956],[3673745794,2682874719],[3053321309,825410712],[822915968,3681514755],[3900685126,561657358],[553823814,1857753416],[4166295066,983949325],[128359165,3426887194],[3300989119,3884968622],[4193552686,3647722552],[452189154,1569670618],[4122259632,3537825460],[2519387887,2821594244],[74333898,2940550377],[4032631446,2173999692],[2521268686,1934310532],[2620314688,2177785789],[1378755571,2455646622],[394133753,4231198609],[734399075,2800989170],[573292462,1634883078],[1214417373,3426576256],[2110224475,2399009920],[2331215665,3224086912],[531326186,698539511],[3839443603,583861850],[2644531398,2017784332],[616620850,3070237104],[590349237,2798642861],[3582377217,3317831670],[1582708616,1596570667],[2126148205,2358511947],[173450736,3219362418],[3616831144,1323437318],[2655785577,3131359031],[401600069,2967397952],[496349349,4244179910],[2479612086,2579650653],[1710903074,2049666425],[3589924952,690291925],[3266682943,1900485231],[1496318498,3025542656],[3459221058,3389461212],[2091479615,3140389256],[663040899,1207089672],[3323704225,1105530508],[353318429,2879253542],[2674540957,941987316],[1688550857,620657353],[338551967,4286217277],[204689992,2239736295],[178008789,3940832005],[3871613304,3300636974],[1911672356,2429684487],[4055679954,1974461722],[3878217928,1009991796],[2533095482,310920740],[2174833823,3596041637],[1604814460,2939543881],[1452830254,4092397851],[2441027029,4169690209],[3524103304,3372213855]],t=[[836181454,1689436944],[2776523577,3710710688],[4049974663,3750330768],[519497435,2979405513]],n=[[1892447193,197291556],[3793382197,3742120663],[3838936,2994760034],[479846099,1018728609],[3476112862,182272649],[3504620154,1427438450],[2009473484,2679350403],[1738755500,1129731339]],a={p:0,P:1,n:2,N:3,b:4,B:5,r:6,R:7,q:8,Q:9,k:10,K:11},l=[];l[5]=1;l[6]=0;l[9]=3;l[10]=2;l[17]=5;l[18]=4;l[33]=7;l[34]=6;l[65]=9;l[66]=8;l[129]=11;l[130]=10;var c=[2,5,10,20,40,80,160,64],d=["","0000000","000000","00000","0000","000","00","0",""];function to32BitHex(e){var t=e.toString(16);return d[t.length]+t}function to64BitHex(e){return to32BitHex(e[0])+to32BitHex(e[1])}function hex64ToDec(e){return[parseInt(e.substr(0,8),16),parseInt(e.substr(8),16)]}function hash(l,d){var f,m,g,_,y,b,A,C,w,k,S,T,M=l.split(" "),P=M[0].split("/"),L="w"===M[1],N=0,x=Number(L),O=x?3:4;for(g=7;g>=0;g-=1){_=0;A=(y=P[g]).length;for(b=0;b<A;b+=1){S=a[C=y[b]];if(S>=0){f=(f^(w=e[64*S+8*(7-g)+_])[0])>>>0;m=(m^w[1])>>>0;S===x&&g===O&&(N|=1<<_)}_+=Number(C)||1}}if("-"!==M[2]){k=M[2];if(k.indexOf("K")>-1){f=(f^(w=t[0])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("Q")>-1){f=(f^(w=t[2])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("k")>-1){f=(f^(w=t[1])[0])>>>0;m=(m^w[1])>>>0}if(k.indexOf("q")>-1){f=(f^(w=t[3])[0])>>>0;m=(m^w[1])>>>0}}if(M[3]&&"-"!==M[3]){T=M[3].charCodeAt(0)-97;if(c[T]&N){f=(f^(w=n[T])[0])>>>0;m=(m^w[1])>>>0}}if(L){f=(4174784170^f)>>>0;m=(2938602761^m)>>>0}return d&&"hex"===d?to64BitHex([f,m]):[f,m]}function ajaxLoad(e,t){var n=new XMLHttpRequest,a=e.toLowerCase().indexOf(".json")>-1;function onload(){if(n.status>=200&&n.status<300||304===n.status||0===n.status||1223===n.status){if(a)try{t(null,JSON.parse(n.response))}catch(e){t(e)}else t(null,new DataView(n.response))}else t(Error("Error code: "+n.status))}n.open("GET",e,!0);a||(n.responseType="arraybuffer");n.onload=onload;n.onerror=onload;n.send()}function wrap(e){var t,n,a,l,c={};function parseBook(e,t){var a,l,c,d,f,m,g=n.getUint16(e+8),_=n.getUint16(e+10);return l=g>>9&7,c=g>>6&7,d=g>>3&7,f=7&g,m=g>>12&7,4===c&&t&&l===d&&"-"!==t&&(7===f&&(0===l&&t.indexOf("K")>-1||7===l&&t.indexOf("k")>-1)?f-=1:0===f&&(0===l&&t.indexOf("Q")>-1||7===l&&t.indexOf("q")>-1)&&(f+=2)),a=String.fromCharCode(c+97)+(l+1)+String.fromCharCode(f+97)+(d+1),m&&(a+="nbrq"[m-1]),{move:a,weight:_}}function sortMoves(e){e.sort(function sorter(e,t){return t.weight-e.weight})}function query(e){return"string"==typeof e&&(e={fen:e}),t(e)}function pick(e){var t,n,a,l,c,d=0;sortMoves(t=(e=e||{}).moves||query(e));a=t.length;if(a){if(!e.type||1===a||"best"===e.type)return t[0].move;if("random"===e.type){l=Math.floor(Math.random()*t.sum)+1;for(c=0;c<a-1;c+=1){d+=t[c].weight;if(l<=d)break}return t[c].move}return"randomDisregardWeight"===e.type?t[Math.floor(Math.random()*a)].move:"worst"===e.type?t[a-1].move:((n=parseInt(e.type)||1)<0&&(n=a+n+1),n<1?n=1:n>a&&(n=a),t[n-1].move)}}function bufferBookFind(e){var t,a,l,c,d,f=n.length||n.byteLength||0,m=e.offset||0,g=e.fen,_=e.chess960,y=e.checkAll,b=[],A=0;e.hash?"string"==typeof(t=e.hash)&&(t=hex64ToDec(t)):t=hash(g);!_&&g&&(d=g.split(" ")[2]);for(m=0;m<f;m+=16)if(n.getUint32(m)===t[0]&&n.getUint32(m+4)===t[1]){l=parseBook(m,d);b[b.length]=l;A+=l.weight;a=!0}else if(a&&!y)break;b.sum=A;if(e.relative)for(c=b.length-1;c>=0;c-=1)b[c].relative=Math.round(b[c].weight/A*1e4);return b}function decompressMoves(e){var t,n=[],a=e.b.length;for(t=0;t<a;++t)n.push({move:e.b[t],weight:e.w[t]});return n}function jsonBookFind(e){var t,n,l,d,f,m,g=0,_=e.fen;if(c.useFen)(t=a[l=_.replace(/ \d+ \d+$/,"")])||(d=l.replace(/[a-h][1-8]$/,"-"))===l||(t=a[d]);else{e.hash||(e.hash=hash(_,"hex"));t=a[e.hash];if(t){t[0]&&t[0].n&&(t=t[0]);if(t.n&&!t.b)return[];if(t.b)t=decompressMoves(t);else if(!e.chess960&&_){m=_.split(" ")[2];for(n=t.length-1;n>=0;n-=1)(f=t[n].move.match(/e([18])([ah])\1/))&&("h"===f[2]&&("1"===f[1]&&m.indexOf("K")>-1||"8"===f[1]&&m.indexOf("k")>-1)?t[n]={move:"e"+f[1]+"g"+f[1],weight:t[n].weight}:"a"===f[2]&&("1"===f[1]&&m.indexOf("Q")>-1||"8"===f[1]&&m.indexOf("q")>-1)&&(t[n]={move:"e"+f[1]+"c"+f[1],weight:t[n].weight}))}}}if(t)for(n=t.length-1;n>=0;n-=1)g+=Number(t[n].weight);else t=[];return t.sum=g,t}c={query,pick};if(e.getUint32){t=bufferBookFind;n=e;c.buffer=n}else{t=jsonBookFind;a=e;c.json=a;for(l in a){c.useFen=l.indexOf(" ")>-1;break}}return c}function getBook(e,t){ajaxLoad(e,function onload(e,n){var a;n&&(a=wrap(n));if(t)return t(e,a);if(e)throw e;return a})}return{hash,loadBook:function(){var e={};return function loadBook2(t,n){if(e[t]){e[t].book?setTimeout(function(){n(null,e[t].book)},0):e[t].cbs.push(n);return}e[t]={cbs:[n]};getBook(t,function onload(n,a){var l=e[t].cbs;if(n)delete e[t];else{e[t].book=a;e[t].cbs=void 0}l.forEach(function(e){setTimeout(function(){e(n,a)},0)})})}}(),to64BitHex,zobristPiece:e,zobristCastle:t,zobristEnPassant:n,zobristTurn:[4174784170,2938602761],zobristPieceValue:a,zobristPieceValueNumbers:l}}(),n=function init(){var e,n,a,l,c={Chess:0,Chess960:1,Crazyhouse:2,"3-check":3,"King of the Hill":4,Bughouse:5,chess960:1,fischerandom:1,fischerrandom:1,fischer:1,chess9lx:1,960:1,crazyhouse:2,"three-check":3,threecheck:3,"3check":3,kingofthehill:4,koth:4,bughouse:5},d=["Chess","Chess960","Crazyhouse","3-check","King of the Hill","Bughouse"],f={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,_=0,y=0,b=-1,A=1,C=2,w=4,k=8,S=16,T=32,M=64,P=128,L=3,N=252,x=255,O=512,I=112,R=1,B=2,V=4,H=3,D=7,F=14,$=21,U=127,W="pnbrqkPNBRQK",j="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",G=[];G[5]=[-16,-17,-15];G[6]=[16,17,15];G[8]=[-18,-33,-31,-14,18,33,31,14];G[16]=[-17,-15,17,15];G[32]=[-16,1,16,-1];G[64]=[-17,-16,-15,1,17,16,15,-1];G[128]=[-17,-16,-15,1,17,16,15,-1];var q={P:5,p:6,N:9,n:10,B:17,b:18,R:33,r:34,Q:65,q:66,K:129,k:130},Z={P:4,p:4,N:8,n:8,B:16,b:16,R:32,r:32,Q:64,q:64,K:128,k:128},z={5:"P",6:"p",9:"N",10:"n",17:"B",18:"b",33:"R",34:"r",65:"Q",66:"q",129:"K",130:"k"},K={9:"N",10:"N",17:"B",18:"B",33:"R",34:"R",65:"Q",66:"Q",129:"K",130:"K"},Q=[80,0,0,0,0,0,0,96,0,0,0,0,0,0,80,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,96,96,96,96,96,96,224,0,224,96,96,96,96,96,96,0,0,0,0,0,0,8,212,224,212,8,0,0,0,0,0,0,0,0,0,0,0,80,8,96,8,80,0,0,0,0,0,0,0,0,0,0,80,0,0,96,0,0,80,0,0,0,0,0,0,0,0,80,0,0,0,96,0,0,0,80,0,0,0,0,0,0,80,0,0,0,0,96,0,0,0,0,80,0,0,0,0,80,0,0,0,0,0,96,0,0,0,0,0,80,0,0,80,0,0,0,0,0,0,96,0,0,0,0,0,0,80],X=[336,80,80,0,0,0,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,360,508,252,0,252,508,360,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,476,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,0,0,0,80,80,336],Y=[336,80,80,0,0,0,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,360,508,252,0,252,508,488,352,352,352,352,0,96,96,96,96,120,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,476,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,88,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,80,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,0,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,0,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,0,96,352,96,96,0,0,80,80,336],J=[336,80,80,0,0,96,96,352,96,0,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,352,352,352,352,488,508,252,0,252,508,360,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,120,96,96,96,96,0,0,0,0,80,88,508,252,508,252,476,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,88,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,80,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,0,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,0,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,0,0,0,80,80,336],ee=[336,80,80,0,0,96,96,352,96,96,0,0,80,80,336,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,352,352,352,352,488,508,252,0,252,508,488,352,352,352,352,0,96,96,96,104,252,252,252,252,252,252,252,104,96,96,96,0,0,0,0,80,88,508,252,508,252,508,88,80,0,0,0,0,0,0,80,80,336,120,120,360,120,120,336,80,80,0,0,0,0,80,80,336,80,112,96,352,96,112,80,336,80,80,0,0,80,80,336,80,80,96,96,352,96,96,80,80,336,80,80,0,80,336,80,80,0,96,96,352,96,96,0,80,80,336,80,0,336,80,80,0,0,96,96,352,96,96,0,0,80,80,336],et=[336,80,80,112,112,112,96,352,96,96,112,112,112,80,336,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,352,352,480,480,488,508,252,0,252,508,488,480,480,480,352,0,96,104,252,252,252,252,252,252,252,252,252,252,252,252,104,0,0,80,88,120,120,508,252,508,252,508,120,120,120,88,80,0,80,80,80,112,368,120,120,376,120,120,368,112,112,80,80,0,80,80,80,368,112,112,112,368,112,112,112,368,112,80,80,0,80,80,336,112,112,112,112,368,112,112,112,112,368,80,80,0,80,336,80,112,112,112,112,352,96,112,112,112,112,336,80,0,336,80,80,112,112,112,96,352,96,96,112,112,112,80,336],en=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,33,16,31,15,0,0,0,0,0,0,0,0,0,0,0,18,17,16,15,14,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,-14,-15,-16,-17,-18,0,0,0,0,0,0,0,0,0,0,0,-15,-31,-16,-33,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],eo=[0,5,8,11,14],er=[31,7,7,7,63],ei={P:0,p:0,N:5,n:5,B:8,b:8,R:11,r:11,Q:14,q:14},ea=[w,k,S,T,M],es=["","N","B","R","Q"],el={CAPTURE:1,BIG_PAWN:2,EP_CAPTURE:4,ANY_CAPTURE:5,PROMOTION:8,KSIDE_CASTLE:16,QSIDE_CASTLE:32,KQSIDE_CASTLE:48,DROP:64,DROP_OR_PROMOTE:72},eu=[0,6,1],ec={K:119,Q:112,k:7,q:0,A:112,B:113,C:114,D:115,E:116,F:117,G:118,H:119,a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},ed=["Event","Site","Date","Round","White","Black","Result"],ef=["Event","Site","Date","Round","White","Black","Result","Variant","SetUp","FEN","WhiteA","WhiteB","BlackA","BlackB"];function rank(e){return e>>4}function file(e){return 7&e}function algebraic(e){return String.fromCharCode(file(e)+97)+(8-rank(e))}function swapColor(e){return 3-e}function hashNum(e,t){e[0]=(e[0]^t[0])>>>0;e[1]=(e[1]^t[1])>>>0}function wordWrap(e,t,n){return t<1?e:(t="number"==typeof t?t:80,e.replace(RegExp("(.{1,"+t+"})(?: |$|\r?\n)","g"),"$1"+n).slice(0,-n.length))}function completeFen(e){var t,n;t=[""," w - - 0 1"," - - 0 1"," - 0 1"," 0 1"," 1"][(n=(e=e.trim()).split(" ")).length];if(t&&e)e+=t;else if("0"===n[5]){n[5]=1;e=n.join(" ")}return e}function formatTimestamp(e){var t=Math.floor(e%36e3/600),n=Math.floor(e%36e3%600)/10;return Math.floor(e/36e3)+":"+(t<10?"0":"")+t+":"+(n<10?"0":"")+n}function timestampToTime(e){var t=e.split(":");return(3600*t[0]+60*t[1]+1*t[2])*10}function createVariantZobristNumbers(){t.zobristCheck=[[441249556,340005552],[1040760204,311043682],[1621584863,1749286446],[1006868636,1625552915],[1953853171,24921145],[161251506,1935545265]]}function fixFenPieces(e,t){var n,a,l=e.length,d=0,f=0,m=t&&(t===c.Crazyhouse||t===c.Bughouse);for(n=0;n<l;++n){a=e[n];if(+a!=+a){if("/"===a){if(8!==f){e=e.substr(0,n)+(8-f)+e.substr(n);++n;++l}f=0;if(++d>7){if(!m&&n<l-1||!/^[pnbrq]{0,63}$/i.test(e.substr(n+1)))return!1;break}}else if(q[a]){if(++f>8)return!1}else if("~"!==a)return!1;else if(!m||!n||!/[nbrq]/i.test(e[n-1])){e=e.substr(0,n)+e.substr(n+1);--n;--l}}else{f+=1*a;if(f>8){e=e.substr(0,n)+(a-(f-8))+e.substr(n+1);f=8}}}return e}function validateFen(e,t){var n,a,l,d,f,m,g,_,y,b,A,C,w,k,S,T,M,P,L,N,x=/^(?:[A-H]{1,2}[a-h]{0,2}|[A-H]{0,2}[a-h]{1,2}|KQ?k?q?|Qk?q?|kq?|q|-)$/,O=c[t]||1*t||c[String(t).replace(/\s/g,"").toLowerCase()],I=O===c.Crazyhouse||O===c.Bughouse,R=0,B=0,V=!0,H="",D={0:0,7:0},F={0:0,7:0},$={0:"k",7:"K"},U={0:"r",7:"R"},j=O===c.Chess960;if(!e)return 1;if(O===c.Bughouse){f=e.split(" | ");if(2===f.length)return 0===(m=validateFen(f[0],t))&&(m=validateFen(f[1],t)),m}f=e.split(/\s+/);if(O===c["3-check"]&&7===f.length){d=f.pop();if(!/^\+[0-3]\+[0-3]$/.test(d)||"+3+3"===d)return 14}if(6!==f.length)return 1;if(/\D|.{7,}|^0|^$/.test(f[5]))return 2;if(/\D|.{7,}|^0.|^$/.test(f[4]))return 3;if(!/^(?:-|[abcdefgh][36])$/.test(f[3]))return 4;b=f[2];if(j){if(!x.test(b))return 12}else if(!/^(?:KQ?k?q?|Qk?q?|kq?|q|-)$/.test(b)){if(void 0!==t||!x.test(b))return 5;j=!0}if("w"!==f[1]&&"b"!==f[1])return 6;I&&(f[0]=f[0].replace(/~(?=.*\/)/g,""));a=f[0].split("/");if(I&&9===a.length){d=a.pop();if(!/^[pnbrq]{0,63}$/i.test(d))return 13}if(8!==a.length)return 7;if("3"===f[3][1]&&"w"===f[1]||"6"===f[3][1]&&"b"===f[1])return 11;if("-"!==f[3]){g=4==(B="3"===f[3][1]?4:3)?5:2;R=f[3].charCodeAt(0)-97;V=!1;H=4===B?"P":"p"}for(n=0;n<a.length;++n){P=0;L=!1;for(N=0;N<a[n].length;N++){l=a[n][N];if(+l==+l){if(L)return 8;P+=1*l;L=!0}else{if(-1===W.indexOf(l))return 9;V||B!==n||R!==P||H!==l||(V=!0);if(g===n&&R===P)return 11;n%7==0&&(l===$[n]?F[n]=1<<P:l===U[n]&&(D[n]|=1<<P));++P;L=!1}}if(8!==P)return 10}if(!V)return 11;if("-"!==b){if(j){C={0:0,1:0,2:252,4:248,8:240,16:224,32:192,64:128,128:0};A={0:0,1:0,2:1,4:3,8:7,16:15,32:31,64:63,128:0};M={0:[0,0],7:[0,0]};for(n=b.length-1;n>=0;--n){S=b.charCodeAt(n);if(T&&T>S&&T-S<8)return 15;if(75===S)w=D[k=7]&C[F[k]];else if(81===S)w=D[k=7]&A[F[k]];else if(107===S)w=D[k=0]&C[F[k]];else if(113===S)w=D[k=0]&A[F[k]];else{k=S>=97?0:7;w=1<<S-(k?65:97);T=S}if(!w||(w&w-1)!=0||F[k]<2||F[k]>64||(w&D[k])!==w||++M[k][(F[k]<w)*1]>1)return 15}}else{_=(b.indexOf("K")>-1?128:0)|(b.indexOf("Q")>-1?1:0);if(_&&(16!==F[7]||(_&D[7])!==_))return 15;y=(b.indexOf("k")>-1?128:0)|(b.indexOf("q")>-1?1:0);if(y&&(16!==F[0]||(y&D[0])!==y))return 15}}return 0}function handToString(e,t){var n,a,l="",c=0,d=t?6:0;if(e)for(;c<5;){n=e>>eo[c]&er[c];for(a=0;a<n;++a)l+=W[c+d];++c}return l}function hash3Check(e,n){n[A]&&hashNum(e,t.zobristCheck[n[A]-1]);n[C]&&hashNum(e,t.zobristCheck[n[C]+2])}function hashHand(e,n){var a,l,c,d,f,m,g,_=0;for(a=1;a<3;++a){l=n[a];if(l){c=0;for(;c<5;){f=_+63*c;d=l>>eo[c]&er[c];for(m=0;m<d;++m)hashNum(e,[31*(g=t.zobristPiece[f++])[0]>>>0,17*g[1]>>>0]);++c}}_=315}}function hashEP(e,n,a,l){(e[a+1]===l||e[a-1]===l)&&hashNum(n,t.zobristEnPassant[file(a)])}function getPieces(e,t){var n,a,l=[];for(n=0;n<120;++n){136&n&&(n+=8);a=e[n];if(a&&(a&t)===t){l.push(n);continue}}return l}function addPawnMove(e,t,a,l){var c;if(0===n||e[a+8]&B){if(rank(a)%7==0){c=l|el.PROMOTION|t<<D|a<<F;m[_++]=c|4<<$;m[_++]=c|3<<$;m[_++]=c|2<<$;m[_++]=c|1<<$}else m[_++]=l|t<<D|a<<F}}function kingOfTheHillWin(e){switch(e){case 67:case 68:case 51:case 52:return!0}return!1}function canCastle960(e,t,n,a){var l,c,d,f=t+(n-t%8),m=n>t%8?1:-1;for(d=t+m;d!==f;d+=m)if(e[d])return!1;c=(l=a===A?1===m?118:114:1===m?6:2)-m;if(e[l+8]||e[l]&&l!==t&&l!==f||e[c]&&c!==t&&c!==f)return!1;if(l!==t){m=l>t?1:-1;for(d=t+m;d!==l;d+=m)if(d!==f&&e[d]||e[d+8])return!1}return!0}var ep=function(){function createLine(e,t,n,a,l,d,f){var m,g,_,y,b,w,k,S,T=[],M="",P=!0,L=t[n],N=L.length,x="";if(L.commands)for(y in L.commands)(!d||d.indexOf(y)>-1)&&(x+="[%"+y+" "+L.commands[y]+"]");L.initComment&&!f&&(x=(x+" "+L.initComment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim());x&&T.push("{"+x+"}");for(g=0;g<N;++g){w=(m=L[g]).color===A;M="";x="";if(a!==c.Bughouse){P&&!w?M=e+"...":w&&(M=e+".");l&&(w||P)&&(M+=" ")}else{T.bughouseOrder||(T.bughouseOrder=[]);T.bughouseOrder.push(m.bughouseOrder);g||(T.blackCountOffset=L[0].color===C?1:0)}M+=m.san;m.annotation&&(M+=m.annotation);m.additionalAnnotation&&(M+=" "+m.additionalAnnotation.join(" "));P=!1;void 0===m.time||m.commands||(m.commands={clk:formatTimestamp(m.time)});if(m.commands)for(y in m.commands)(!d||d.indexOf(y)>-1)&&(x+="[%"+y+" "+m.commands[y]+"]");m.comment&&!f&&(x=(x+" "+m.comment.replace(/(\"|\}|\%|\\)/g,"\\$1")).trim());if(x){M+=" {"+x+"}";P=!0}T.push(M);if(m.lines){k=m.lines.length;for(_=0;_<k;++_){S=m.lines[_];if(t[S].length){(b=createLine(e,t,S,a,l,d,f))[0]="("+b[0];b[b.length-1]+=")";T=T.concat(b);P=!0}}}!w&&e++}return T}function makeBugHousePgn(e,t,n){var a=t,l=e.siblingGame.pgn(),c=0,d=0,f=[];t.bughouseOrder=t.bughouseOrder||[];l.bughouseOrder=l.bughouseOrder||[];for(;t.bughouseOrder.length||l.bughouseOrder.length;)if(!t.bughouseOrder.length||l.bughouseOrder.length&&t.bughouseOrder[0]>l.bughouseOrder[0]){l.bughouseOrder.shift();f.push("B")}else{t.bughouseOrder.shift();f.push("A")}return t=[],f.forEach(function(f){var m,g,_,y="";if("A"===f){m=a;++c;g=c;_=e.startingMoveNumber()}else{m=l;++d;g=d;_=e.siblingGame.startingMoveNumber()}y=String(Math.floor((g+1)/2)+_-1);(m.blackCountOffset+g)%2?y+=f:y+=f.toLowerCase();y+="."+(n?" ":"")+m.shift();t.push(y)}),t}function createHeader(e,t){return"["+e+' "'+String(t).replace(/(\"|\\)/g,"\\$1")+'"]'}return function generatePgn2(e,t,n,a,l,d){var f,m,g="string"==typeof e.newline?e.newline:"\n",_=void 0===e.spaceAfterPeriods||e.spaceAfterPeriods,y="";y+=createHeader("Event",t.Event)+g+(createHeader("Site",t.Site)+g)+(createHeader("Date",t.Date)+g)+(createHeader("Round",t.Round)+g);l===c.Bughouse?y+=createHeader("WhiteA",t.WhiteA||"?")+g+(createHeader("BlackA",t.BlackA||"?")+g)+(createHeader("WhiteB",t.WhiteB||"?")+g)+(createHeader("BlackB",t.BlackB||"?")+g):y+=createHeader("White",t.White)+g+(createHeader("Black",t.Black)+g);y+=createHeader("Result",t.Result)+g;l&&(y+=createHeader("Variant",t.Variant)+g);t.FEN&&t.FEN!==j&&(y+=createHeader("SetUp","1")+g+(createHeader("FEN",t.FEN)+g));for(f in t)-1===ef.indexOf(f)&&(y+=createHeader(f,t[f])+g);y+=g;m=createLine(a,n,0,l,_,e.hideCommands?[]:e.restrictCommands,e.hideComments);if(l===c.Bughouse){if(d.isDependent)return m;m=makeBugHousePgn(d,m,_)}return m.push(t.Result),y+wordWrap(m.join(" "),e.maxWidth,g)}}(),em=function(){var e="!?‼⁇⁉⁈□∇Δ∞⩲⩱\xb1∓⨀⟳→↑⇆∆⌓⇔⇗⟫⟪✕⊥⊕○⇄↻⊙☒~",t=/\[%(\S+)\s([^\]]+)\]/,n=/^(?:[+=~\/\-\u2212]+|T?N|RR|D)$/;function extractCommands(e){for(var n,a=e.commands||{};n=t.exec(e.value);){e.value=e.value.replace(n[0],"").trim();a[n[1]]=n[2];e.commands=a}}function isSplitGame(e,t,n,a){for(var l;++t<n;)if((l=e[t].trim())&&"%"!==l[0])return"["===l[0]&&(!a||/^\[\S+\s+".*"\]$/.test(l))}return function tokenize(t,a){var l,c,d,f,m,g,_,y="tags",b=[],A={type:y,value:""},C=0,w=[],k=!0;a=a||{};f=(l=t.split(/\r?\n/)).length;if(a.recordErrorInfo){w._trackTokenInfo=function(e){var t=b.length;e._lineStart=t?b[t-1]._lineEnd:1;e._colStart=t?b[t-1]._colEnd+1:0;e._lineEnd=c+1;e._colEnd=m;b[t]=e};b.push=w._trackTokenInfo}e:for(c=0;c<f;++c){d=l[c].trim();if("%"!==d[0]){if(d){g=(d=" "+d+" ").length;m=0;if(k)for(;m<g;++m){_=d[m];if("tags"===y){if("["===_)A={type:y="tagName",value:""};else if(_.trim()){A={type:y="san",value:""};k=!1;break}}else if("tagName"===y){if(A.value&&""===_.trim()){b.push(A);y="tagValueStart"}else" "!==_&&(A.value+=_)}else if("tagValueStart"===y){if('"'===_||"“"===_)A={type:y="tagValue",value:""};else if(_.trim()){b.push({type:"tagValue",value:d.slice(m,-1).match(/(.*?)"?\]?$/)[1]});A={type:y="tags",value:""};continue e}}else if("tagValue"===y){if('"'===_||"”"===_){b.push(A);if("]"===d[m+1]){A={type:y="tags",value:""};++m}else if("]"===d.slice(-2,-1)){A.value+=d.substr(m).match(/(.*?)"?\s*\] $/)[1];A={type:y="tags",value:""};continue e}else y="tagEnd"}else{if("\\"===_&&m+2<g){++m;_=d[m]}m>0&&(A.value+=_)}}else{if("]"!==_){if(!_.trim())continue;--m}A={type:y="tags",value:""}}}for(;m<g;++m){_=d[m];if("san"===y){if(e.indexOf(_)>-1){if("!"===_||"?"===_||6>e.indexOf(_)&&(_=["!!","??","!?","?!"][e.indexOf(_)-2])){A.value&&b.push(A);A={type:"a",value:_};("!"===d[m+1]||"?"===d[m+1])&&(A.value+=d[++m]);b.push(A);A={type:"san",value:""}}else{if("∞"===_&&"=/"===A.value){A.type="aa";A.value+=_}else{if(A.value){n.test(A.value)&&("--"!==A.value||a.rejectNullMoves)&&(A.type="aa");b.push(A)}A={type:"aa",value:_};if("↑"===_&&"↑"===d[m+1]){A.value="↻";++m}}b.push(A);A={type:"san",value:""}}}else if(" "===_||"	"===_||"\r"===_||"{"===_||"("===_||")"===_){if(A.value){if("$"===A.value[0])A.type="nag";else if("*"===A.value||"1-0"===A.value||"0-1"===A.value||"1/2-1/2"===A.value||"\xbd-\xbd"===A.value){if(C||m+1<g)A.type="*"===A.value?"cont":"comment";else{A.type="result";"\xbd-\xbd"===A.value&&(A.value="1/2-1/2");b.push(A);w.push(b);if(c+1===f||c+2===f&&!l[c+1])return w;k=!0;A={type:y="tags",value:""};b=[];a.recordErrorInfo&&(b.push=w._trackTokenInfo);break}}n.test(A.value)&&("--"!==A.value||a.rejectNullMoves)&&(A.type="aa");b.push(A);A={type:y,value:""}}if(" "===_||"	"===_||"\r"===_)y="san";else if("{"===_){y="comment";if(b.length&&"comment"===b[b.length-1].type){A=b.pop();A.value+=" "}}else if("("===_){y="san";b.push({type:"variationStart",value:++C})}else{if(C<1){if(!a.commentErrors)return!1}else b.push({type:"variationEnd",value:C--});y="san"}A.type=y}else if("."!==_&&(A.value||+_!=+_||"-"===d[m+1]||"/"===d[m+1]))A.value+=_;else if(+_==+_){A.number||(A.number="");A.number+=_;switch(d[m+1]){case"A":case"a":case"B":case"b":A.number+=d[++m];b.push({type:"number",value:A.number});delete A.number}}}else{0===m&&(A.value=A.value.trim());if("}"!==_){"\\"===_&&m+2<g&&(_=d[++m]);A.value+=_}else{A.value=A.value.trim();A.value.indexOf("[")>-1&&extractCommands(A);b.push(A);A={type:y="san",value:""}}}}}else if(b.length){if("tags"===y){y="san";k=!1}else if("tagValueStart"!==y&&isSplitGame(l,c,f,C||"comment"===y)){"comment"===y&&b.push(A);if("tagValue"!==b[b.length-1].type){w.push(b);b=[];a.recordErrorInfo&&(b.push=w._trackTokenInfo)}y="tags";k=!0;C=0}}}}return A.value&&b.push(A),(b.length||!w.length)&&w.push(b),w}}();function Chess2(ef,eh){var eg,ev,e_=0,ey=!0,eb=[],eA=A,eC=[],ew=b,ek=0,eS=1,eE=1,eT=[],eM=[eT],eP=0;eT.id=eP;var eL={},eN=[],ex=!1,eO=!1,eI=makeMoveChess,moveToSan=function(e,t){var n,a,l,c,d,f,m="";if(e&el.KQSIDE_CASTLE)m=e&el.KSIDE_CASTLE?"O-O":"O-O-O";else if(e&el.DROP){l=e>>F&U;(n=e>>$)&&(m+=es[n]);m+="@"+algebraic(l)}else{l=e>>F&U;c=ev[a=e>>D&U];if(c&w){e&el.ANY_CAPTURE&&(m+=String.fromCharCode(file(a)+97)+"x");m+=algebraic(l);e&el.PROMOTION&&(m+="="+es[n=e>>$])}else{m+=K[c&x];y>1&&(m+=getDisambiguator(c,a,l));e&el.ANY_CAPTURE&&(m+="x");m+=algebraic(l)}}if(!t){if(e&el.KQSIDE_CASTLE){a=e>>D&U;l=e>>F&U}else e&el.DROP_OR_PROMOTE&&(c=ea[n]+eA);if(inCheckAfterMove(c,a,l,e)){eI(e,a,l,n);d=g;g=_;f=y;e_&&isVariantWin()||generateMoves()===g?m+="#":m+="+";_=g;g=d;y=f;reverseMove(eT.pop())}}return m};function hashPosition(){var e,n,a,l=eA===A?[4174784170,2938602761]:[0,0];for(a=0;a<120;++a){136&a&&(a+=8);(e=ev[a])&&hashNum(l,t.zobristPiece[64*t.zobristPieceValueNumbers[e&x]+8*(7-rank(a))+file(a)])}if(eO){for(n=1;n<3;++n)if(eC[n]){if((eC[n]&eC[n]-1)!=0){hashNum(l,t.zobristCastle[n-1]);hashNum(l,t.zobristCastle[n+1])}else eC[n]>1<<file(eb[n])?hashNum(l,t.zobristCastle[n-1]):hashNum(l,t.zobristCastle[n+1])}}else{for(n=1;n<3;++n)if(eC[n]){eC[n]&el.KSIDE_CASTLE&&hashNum(l,t.zobristCastle[n-1]);eC[n]&el.QSIDE_CASTLE&&hashNum(l,t.zobristCastle[n+1])}ex?hashHand(l,eg._hand):e_===c["3-check"]&&hash3Check(l,eN)}return ew!==b&&hashEP(ev,l,ew+(eA===A?16:-16),w|eA),l}function getCurrentHash(){var e;if(eT.length)e=eT[eT.length-1].hash;else{eT.hash||(eT.hash=hashPosition());e=eT.hash}return[e[0],e[1]]}function bughouseify(e){function fixBughouseSan(e){return/#/.test(e)&&checkIsPotentiallyBlockable()&&(e=e.replace("#","+")),e}function bughouseFunc(t,n){var a=e(t,n);if(a){if("string"==typeof a)a=fixBughouseSan(a);else{a.san=fixBughouseSan(a.san);eT[eT.length-1].san=a.san}}return a}return bughouseFunc._isBughouseified=!0,bughouseFunc._orig=e,bughouseFunc}function setVariant(e,t){var n=e_;e_=e?c[e]||1*e||c[String(e).replace(/\s/g,"").toLowerCase()]||c.Chess:0;if(n!==e_){if(e_===c.Bughouse){ex=!0;if(!eg.isDependent){eg.siblingGame=Chess2();eg.siblingGame.hashing(ey);eg.siblingGame.isDependent=!0;eg.siblingGame.siblingGame=eg;eg.siblingGame.header({Variant:"Bughouse"})}createVariantZobristNumbers();eI=makeMoveVariant;moveToSan=bughouseify(moveToSan);eg.move=bughouseify(eg.move)}else{delete eg.siblingGame;ex=e_===c.Crazyhouse;eO=e_===c.Chess960;if(e_){createVariantZobristNumbers();eI=makeMoveVariant}else eI=makeMoveChess;if(moveToSan._isBughouseified){moveToSan=moveToSan._orig;eg.move=eg.move._orig}}t||updateSetup(generateFen())}}function disambiguate960Rook(e,t){for(var n,a,l=e>7?A:C;!(136&e);){n=ev[e];if(n&l){if(n&T){if(a)return;a=e%8+(l===A?65:97)}else if(n&P)return a}e+=t}}function clear(e,t,n){ev=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];eA=A;eb[A]=b;eb[C]=b;eC[A]=0;eC[C]=0;eg._hand[A]=0;eg._hand[C]=0;eN[A]=0;eN[C]=0;ew=b;ek=0;eS=1;if(!t){eM=[eT=[]];eP=0;eT.id=eP;eL={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"};e?setHeader(["Variant",e]):setVariant(!1,n);n||updateSetup(generateFen())}}function reset(){clear(0,!1,!0);eT.hash=[1178310168,378666140];ev=[34,10,18,66,130,18,10,34,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,33,9,17,65,129,17,9,33,0,0,0,0,0,0,0,0];eE=1;eb[A]=116;eb[C]=4;eC[A]=48;eC[C]=48}function load(e,t,n,a){var l,m,g,_,y,k,S,M,N,x,I,R,B=0;if(a){R=(l=e.split(" "))[3];I=l[2]}else{R=(l=e.trim().split(/\s+/))[3]||"-";I=l[2]||"-"}void 0===t?(31&I.charCodeAt(0))<9&&setVariant(c.Chess960,!0):setVariant(t,!0);m=l[0];if(!a&&!(m=fixFenPieces(m,e_)))return!1;_=m.length;clear(d[e_],n,!0);if(ex){if(e_===c.Bughouse&&!eg.isDependent){k=e.split(" | ");if(!eg.siblingGame.load(1===k.length?e:k[1],t,n,a))return reset(),!1}for(y=0;y<_;++y){S=m[y];if(+S!=+S){if("/"===S){if(B>111){for(++y;y<_;++y){S=m[y];eg._hand[S<"a"?A:C]+=1<<ei[S]>>>0}break}B+=8}else{ev[B]=q[S];if("~"===m[y+1]){++y;ev[B]|=O}ev[B]&P&&(eb[ev[B]&L]=B);++B}}else B+=1*S}}else for(y=0;y<_;++y){S=m[y];if(+S!=+S){if("/"===S)B+=8;else{ev[B]=q[S];ev[B]&P&&(eb[ev[B]&L]=B);++B}}else B+=1*S}eA="b"===l[1]?C:A;if("-"!==I){if(eO){N={1:[0,0],2:[0,0]};for(y=I.length-1;y>=0;--y){75===(g=I.charCodeAt(y))?g=disambiguate960Rook(119,-1):81===g?g=disambiguate960Rook(112,1):107===g?g=disambiguate960Rook(7,-1):113===g&&(g=disambiguate960Rook(0,1));M=g<97?A:C;x=ec[String.fromCharCode(g)];if(a||ev[x]===(T|M)){g>=97?eb[M]>=1&&eb[M]<=6&&(eC[M]|=1<<x):eb[M]>=113&&eb[M]<=118&&(eC[M]|=1<<x-112);++N[M][(eb[M]<x)*1]}}(N[A][0]>1||N[A][1]>1)&&(eC[A]=0);(N[C][0]>1||N[C][1]>1)&&(eC[C]=0)}else{if(!a)for(y=I.length-1;y>=0;--y){M=97>I.charCodeAt(y)?A:C;(ev[ec[I[y]]]!==(T|M)||eb[M]!==(M===A?116:4))&&(I=I.substr(0,y)+I.substr(y+1))}for(y=I.length-1;y>=0;--y)switch(I[y]){case"K":eC[A]|=el.KSIDE_CASTLE;break;case"Q":eC[A]|=el.QSIDE_CASTLE;break;case"k":eC[C]|=el.KSIDE_CASTLE;break;case"q":eC[C]|=el.QSIDE_CASTLE}}}!a&&(2!==R.length||eA===A&&"6"!==R[1]||eA===C&&"3"!==R[1]||ev[R.charCodeAt(0)-97+(8-("3"===R[1]?4:5))*16]!==(w|swapColor(eA))||ev[f[R]])&&(R="-");ew="-"===R?b:f[R];ek=1*l[4]||0;eS=1*l[5]||1;if(e_===c["3-check"]){l[6]&&"+3+3"!==l[6]&&(k=l[6].match(/^\+([0-3])\+([0-3])$/));k=k||[0,0,0];eN[A]=1*k[1];eN[C]=1*k[2]}if(!n){eE=eS;updateSetup(generateFen())}return!0}function generateStandardFen(){var e,t,n=0,a="",l="";for(e=0;e<120;++e){if(136&e){n&&(a+=n);a+="/";n=0;e+=8}t=ev[e];if(t){if(n){a+=n;n=0}a+=z[t&x]}else++n}return n&&(a+=n),eC[A]&el.KSIDE_CASTLE&&(l+="K"),eC[A]&el.QSIDE_CASTLE&&(l+="Q"),eC[C]&el.KSIDE_CASTLE&&(l+="k"),eC[C]&el.QSIDE_CASTLE&&(l+="q"),a+=" "+(eA===A?"w":"b")+" "+(l||"-")+" "+(ew===b?"-":algebraic(ew))+" "+ek+" "+eS}function generateVariantFen(){var e,t,n,a=0,l="",d="";for(e=0;e<120;++e){if(136&e){a&&(l+=a);l+="/";a=0;e+=8}n=ev[e];if(n){if(a){l+=a;a=0}l+=z[n&x];ex&&n&O&&(l+="~")}else++a}a&&(l+=a);ex&&(l+="/"+handToString(eg._hand[A],!0)+handToString(eg._hand[C]));if(eO){t=eC[C];e=0;for(;t;){1&t&&(d=String.fromCharCode(e+97)+d);t>>=1;++e}t=eC[A];e=0;for(;t;){1&t&&(d=String.fromCharCode(e+65)+d);t>>=1;++e}}else{eC[A]&el.KSIDE_CASTLE&&(d+="K");eC[A]&el.QSIDE_CASTLE&&(d+="Q");eC[C]&el.KSIDE_CASTLE&&(d+="k");eC[C]&el.QSIDE_CASTLE&&(d+="q")}return l+=" "+(eA===A?"w":"b")+" "+(d||"-")+" "+(ew===b?"-":algebraic(ew))+" "+ek+" "+eS,e_===c["3-check"]?l+=" +"+eN[A]+"+"+eN[C]:e_!==c.Bughouse||eg.isDependent||(l+=" | "+eg.siblingGame.fen()),l}function generateFen(){return e_?generateVariantFen():generateStandardFen()}function setHeader(e){var t,n,a;for(t=0;t<e.length;t+=2){n=e[t];a=e[t+1];if(n){if("Variant"===n){setVariant(a);a=e_?d[e_]:void 0}"Result"===n&&"*"!==a&&"1-0"!==a&&"0-1"!==a&&"1/2-1/2"!==a&&(a="*");void 0!==a?eL[n]=String(a):ed.indexOf(n)>-1?"Date"===n?eL[n]="????.??.??":eL[n]="?":delete eL[n]}}return eL}function updateSetup(e){if(!(eT.length>0)&&!eP){if(e!==j){eL.SetUp="1";eL.FEN=e;eT.hash=null}else{delete eL.SetUp;delete eL.FEN;eT.hash=[1178310168,378666140]}}}function get(e){var t=ev[f[e]];return t?{type:z[t&N|C],color:t&L,promoted:(t&O)!=0}:null}function chooseKingThreats(e,t){return eO&&eC[e]?et:!(eC[e]&el.KSIDE_CASTLE)||ev[t+1]||ev[t+2]?!(eC[e]&el.QSIDE_CASTLE)||ev[t-1]||ev[t-2]||ev[t-3]?X:(l=el.QSIDE_CASTLE,J):!(eC[e]&el.QSIDE_CASTLE)||ev[t-1]||ev[t-2]||ev[t-3]?(l=el.KSIDE_CASTLE,Y):(l=el.KQSIDE_CASTLE,ee)}function calculateLegalMoveInfo(t,c){var d,f,m,g,_,y,A,C,k,S,T,M,P,L=eA,x=ev;e=[];n=0;a=0;l=0;x[8]=x[9]=x[10]=x[11]=x[12]=x[13]=x[14]=x[15]=x[24]=x[25]=x[26]=x[27]=x[28]=x[29]=x[30]=x[31]=x[40]=x[41]=x[42]=x[43]=x[44]=x[45]=x[46]=x[47]=x[56]=x[57]=x[58]=x[59]=x[60]=x[61]=x[62]=x[63]=x[72]=x[73]=x[74]=x[75]=x[76]=x[77]=x[78]=x[79]=x[88]=x[89]=x[90]=x[91]=x[92]=x[93]=x[94]=x[95]=x[104]=x[105]=x[106]=x[107]=x[108]=x[109]=x[110]=x[111]=x[120]=x[121]=x[122]=x[123]=x[124]=x[125]=x[126]=x[127]=0;if(c===b){e=getPieces(ev,L|t);return}M=chooseKingThreats(L,c);for(d=0;d<120;++d){136&d&&(d+=8);g=ev[d];if(g){if(g&L){(!t||(0|g)&t)&&e.push(d);continue}P=M[d-c+119];if((P&g)!=0){if(g&w){k=G[g];for(f=1;f<3;++f){A=d+k[f];if(!(136&A)){x[A+8]|=R;if(A===c){++n;x[d+8]|=B}}}}else{C=(k=G[g&N]).length;T=g&I;t:for(f=0;f<C;++f){S=k[f];A=d;if((!(c>A)||!(S<0)||!(c-A>16))&&(!(c<A)||!(S>0)||!(A-c>16)))for(;(136&(A+=S))==0;){x[A+8]|=R;_=ev[A];if(_){if(_&L){if(A===c){for(m=A-S;m!==d;m-=S)x[m+8]|=B;x[d+8]|=B;++n;T&&(136&(A+=S))==0&&(x[A+8]|=R)}else if(T&&256&P){y=A;for(;(y+=S)!==c;)if(136&y||ev[y])continue t;x[A+8]|=V+(Math.abs(S)<<H);++a}}break}if(!T)break}}}}}}n>1&&(e=[c])}function validateEnPassant(e,t){var a,l,c,d=t+16*(eA===A?1:-1);return(1!==n||(ev[t+8]&B)!=0||(ev[d+8]&B)!=0)&&(a=ev[e],ev[t]=a,ev[e]=0,l=ev[d],ev[d]=0,c=inCheck(),ev[e]=a,ev[t]=0,ev[d]=l,!c)}function addCastlingMoves(e){var t,n,a;if(eO){if(eC[e]){n=(t=eb[e])%8;for(a=0;a<8;++a)if(eC[e]&1<<a&&canCastle960(ev,t,a,e)){m[_++]=(a>n?el.KSIDE_CASTLE:el.QSIDE_CASTLE)+(t<<D)+(t+(a-n)<<F);++a}}}else{if(l&el.KSIDE_CASTLE){n=(t=eb[e])+2;0===ev[t+9]&&0===ev[t+10]&&(m[_++]=el.KSIDE_CASTLE+(t<<D)+(n<<F))}if(l&el.QSIDE_CASTLE){n=(t=eb[e])-2;0===ev[t+7]&&0===ev[t+6]&&(m[_++]=el.QSIDE_CASTLE+(t<<D)+(n<<F))}}}function drop(e,t,a){var l,c,d,f,g;if(!e){t&&(t>>=26);for(f=0;f<5;++f)if((!t||(0|t)==1<<f)&&eg._hand[a]&er[f]<<eo[f]){if(0===f){l=16;c=103;d=el.DROP}else{l=0;c=119;d=el.DROP|f<<$}for(g=l;g<=c;++g){136&g&&(g+=8);!ev[g]&&(0===n||1===n&&ev[g+8]&B)&&(m[_++]=d|g<<F)}if(t)return}}}function generateMoves(t,l){var c,d,f,b,A,C,S,T,M,P,L=eA,x=swapColor(L),O=eb[L];calculateLegalMoveInfo(t,O);y=e.length;_=g;for(M=0;M<y;++M){b=ev[c=e[M]];if(!n||!a||!(ev[c+8]&V)){if(b&w){C=G[b];if(0===a||(ev[c+8]&V)==0||ev[c+8]>>H==16){A=c+C[0];if(0===ev[A]){addPawnMove(ev,c,A,0);eu[L]!==rank(c)||ev[A+=C[0]]||addPawnMove(ev,c,A,el.BIG_PAWN)}}for(d=1;d<3;++d)!(136&(A=c+(S=C[d])))&&(!a||!(ev[c+8]&V)||ev[c+8]>>H===Math.abs(S))&&(ev[A]&x?addPawnMove(ev,c,A,el.CAPTURE):A===ew&&validateEnPassant(c,A)&&(m[_++]=el.EP_CAPTURE|c<<D|A<<F))}else{if(a&&ev[c+8]&V){if(b&k||!(Q[c-eb[L]+119]&b))continue;C=[S=ev[c+8]>>H,-S]}else C=G[b&N];P=c<<D;if(c===O){for(d=0;d<8;++d)(136&(A=c+(S=C[d])))==0&&(ev[A]?ev[A]&x&&(ev[A+8]&R)==0&&(m[_++]=el.CAPTURE|P|A<<F):(ev[A+8]&R)==0&&(m[_++]=P|A<<F));0===n&&addCastlingMoves(L)}else{f=C.length;T=b&I;for(d=0;d<f;++d){S=C[d];A=c;for(;;){A+=S;if(136&A)break;if(ev[A]){ev[A]&x&&(0===n||ev[A+8]&B)&&(m[_++]=el.CAPTURE|P|A<<F);break}(0===n||ev[A+8]&B)&&(m[_++]=P|A<<F);if(!T)break}}}}}}return e_&&(ex?drop(l,t,L):!eO&&isVariantWin()&&(_=g)),_}function inCheckAfterMove(e,t,n,a){var l,d,f,m,g,_,y,C,k;if(e_===c["King of the Hill"]&&e&P&&kingOfTheHillWin(n))return!0;if(a&el.KQSIDE_CASTLE){n=eA===A?a&el.KSIDE_CASTLE?117:115:a&el.KSIDE_CASTLE?5:3;e=T;k=!0}l=eb[swapColor(eA)];if(l===b)return!1;if((e&P)==0){d=Q[n-l+119];if(d&e){m=en[n-l+119];_=e&I;g=n+m;for(;(136&g)==0;){if(g===l){if(e&w){if((e&L)===A?l-n<0:l-n>0)return!0;break}return!0}if(g!==t&&ev[g]||!_)break;g+=m}}}if(!k){f=Q[t-l+119];if(f&I){m=en[t-l+119];if(m!==en[n-l+119]){g=l-m;for(;(136&g)==0;){if(g!==t){y=ev[g];if(y){if(y&eA&&f&y&&y&I)return!0;break}}g-=m}}}if(a&el.EP_CAPTURE){f=Q[(C=n+16*(eA===A?1:-1))-l+119];if(f&I){m=en[C-l+119];g=l-m;for(;(136&g)==0;){if(g!==t&&g!==C){if(g===n)break;y=ev[g];if(y){if(y&eA&&f&y&&y&I)return!0;break}}g-=m}}}}return!1}function attacked(e,t){var n,a,l,c,d=G[k],f=k|e;for(n=0;n<8;++n){l=t+d[n];if((136&l)==0){a=ev[l];if((a&f)===f)return!0}}d=G[P];for(n=0;n<8;++n){l=t+(c=d[n]);for(;(136&l)==0;){a=ev[l];if(a){if(a&e&&Q[t-l+119]&a&&(!(a&w)||(e===A?t-l<0:t-l>0)))return!0;break}l+=c}}return!1}function kingAttacked(e){return eb[e]!==b&&attacked(swapColor(e),eb[e])}function inCheck(){return kingAttacked(eA)}function checkIsPotentiallyBlockable(){var e,t,n,a=16384;return eg._hand[eA]+=a,e=g,g=_,t=y,n=generateMoves()!==g,_=g,g=e,y=t,eg._hand[eA]-=a,n}function inCheckmate(){return inCheck()&&(m[0]=0)===generateMoves()&&!m[0]&&(e_!==c.Bughouse||!checkIsPotentiallyBlockable())}function inStalemate(){var e=!inCheck()&&(m[0]=0)===generateMoves()&&!m[0];return e&&e_===c.Bughouse&&!eg.isDependent&&(e=eg.siblingGame.inStalemate()),e&&eb[eA]!==b}function insufficientMaterial(e){var t,n,a=0,l=0,c=0;for(n=0;n<120;++n){136&n&&(n+=8);t=ev[n];if(t){if(e&&(t&e)==0)continue;if(100&t)return!1;if(t&k){if(l||a++)return!1}else if(t&S){if(a)return!1;++l;(rank(n)+n)%2&&++c;if(c&&l!==c)return!1}}}return eb[A]!==b&&eb[C]!==b}function inThreefoldRepetition(){if(ek<8)return!1;for(var e,t=getCurrentHash(),n=!1,a=ek,l=!1,c=eT,d=c.length-1;;){d-=2;if(d<0){if(c.id){d=c.atMoveNode+d+2;c=eM[c.parentId];continue}if(-2===d)return!1;e=c.hash;l=!0}else{e=c[d].hash;c[d].halfMoves>a||a<2?l=!0:a=c[d].halfMoves}if(e[0]===t[0]&&e[1]===t[1]){if(n)return!0;n=!0}if(l)return!1}}function modifyHand(e){var n,a,l,d,f,m,g,_,y,b,C=e.move;if(e_===c.Crazyhouse||C&el.DROP){a=eg._hand;m=e.hash;b=e.color}else{a=eg.siblingGame._hand;e.handSibling=!0;if(ey){g=eg.siblingGame._history();if(g.length)m=g[g.length-1].hash;else{g.hash||(g.hash=eg.siblingGame._hashPosition());m=g.hash}}b=swapColor(e.color)}if(e.captured){l=e.captured&O?w:e.captured&N;switch(l&N){case w:_=0;break;case k:_=1;break;case S:_=2;break;case T:_=3;break;default:_=4}n=1<<eo[_];if(ey){f=a[b]>>eo[_]&er[_];y=t.zobristPiece[f+63*_+(b===A?0:315)]}}else{n=-1<<eo[d=C>>$];if(ey){f=a[b]>>eo[d]&er[d];y=t.zobristPiece[f-1+63*d+(b===A?0:315)]}}a[b]+=n;e.handChange=n;ey&&hashNum(m,[31*y[0]>>>0,17*y[1]>>>0])}function makeMoveChess(e,n,a,l){var c,d,f,m,g,_,y,k,S=eA,M=swapColor(S),L={move:e,epSquare:ew,halfMoves:ek,castlingW:eC[A],castlingB:eC[C],color:S},N=S===A;if(ey){m=getCurrentHash();L.hash=m;hashNum(m,t.zobristTurn);ew!==b&&hashEP(ev,m,ew+(N?16:-16),w|S)}if((e&el.KQSIDE_CASTLE)==0){if(ex&&e&el.DROP){ev[a]=ea[l]|S;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]]+8*(7-rank(a))+file(a)]);modifyHand(L);y=0}else{y=ev[n];k=ev[a];if(k){L.captured=k;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]&x]+8*(7-rank(a))+file(a)]);if(k&T&&eC[M]){if(eO){if(rank(a)===(N?0:7)){f=1<<file(a);if(eC[M]&f){eC[M]^=f;ey&&(f>1<<file(eb[S])?hashNum(m,t.zobristCastle[M-1]):hashNum(m,t.zobristCastle[M+1]))}}}else if(a===(N?7:119)){if(eC[M]&el.KSIDE_CASTLE){eC[M]^=el.KSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[M-1])}}else if(a===(N?0:112)&&eC[M]&el.QSIDE_CASTLE){eC[M]^=el.QSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[M+1])}}}e&el.PROMOTION?ev[a]=ea[l]|S|O:ev[a]=ev[n];ev[n]=0;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[y&x]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[ev[a]&x]+8*(7-rank(a))+file(a)])}}}else y=P;if(e&el.EP_CAPTURE){if(N){_=a+16;g=6}else{_=a-16;g=8}L.captured=w|M;ev[_]=0;ey&&hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[w|M]+8*(g-rank(a))+file(a)])}else if(y&P){if(eO){if(e&el.KQSIDE_CASTLE){ev[a]=0;ev[n]=0;if(e&el.KSIDE_CASTLE){if(N){c=118;d=117}else{c=6;d=5}}else if(N){c=114;d=115}else{c=2;d=3}ev[c]=S|P;ev[d]=S|T;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(a))+file(a)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(c))+file(c)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(d))+file(d)])}}if(ey){if((eC[S]&eC[S]-1)!=0){hashNum(m,t.zobristCastle[S-1]);hashNum(m,t.zobristCastle[S+1])}else eC[S]>1<<file(eb[S])?hashNum(m,t.zobristCastle[S-1]):hashNum(m,t.zobristCastle[S+1])}eb[S]=c||a}else{if(e&el.KQSIDE_CASTLE){ev[a]=ev[n];ev[n]=0;if(e&el.KSIDE_CASTLE){c=a-1;d=a+1}else{c=a+1;d=a-2}ev[c]=ev[d];ev[d]=0;if(ey){hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(n))+file(n)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(d))+file(d)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[P|S]+8*(7-rank(a))+file(a)]);hashNum(m,t.zobristPiece[64*t.zobristPieceValueNumbers[T|S]+8*(7-rank(c))+file(c)])}}if(ey){eC[S]&el.KSIDE_CASTLE&&hashNum(m,t.zobristCastle[S-1]);eC[S]&el.QSIDE_CASTLE&&hashNum(m,t.zobristCastle[S+1])}eb[S]=a}eC[S]=0}else if(y&T&&eC[S]){if(eO){if(rank(n)===(N?7:0)){f=1<<file(n);if(eC[S]&f){eC[S]^=f;ey&&(f>1<<file(eb[S])?hashNum(m,t.zobristCastle[S-1]):hashNum(m,t.zobristCastle[S+1]))}}}else if(n===(N?119:7)){if(eC[S]&el.KSIDE_CASTLE){eC[S]^=el.KSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[S-1])}}else if(n===(N?112:0)&&eC[S]&el.QSIDE_CASTLE){eC[S]^=el.QSIDE_CASTLE;ey&&hashNum(m,t.zobristCastle[S+1])}}if(e&el.BIG_PAWN){ew=N?a+16:a-16;ey&&hashEP(ev,m,a,w|M)}else ew=b;y&w||e&el.ANY_CAPTURE?ek=0:ek++;eA=M;eT.push(L)}function makeNullMove(){var e,n={color:eA,san:"--",epSquare:ew},a={color:eA,san:"--"};if(ey){e=getCurrentHash();n.hash=e;hashNum(e,t.zobristTurn);ew!==b&&hashEP(ev,e,ew+(eA===A?16:-16),w|eA)}return ew=b,ek++,(eA=swapColor(eA))===A&&++eS,eT.push(n),a}function makeMoveVariant(e,n,a,l){var d,f=eA;makeMoveChess(e,n,a,l);d=eT[eT.length-1];if(ex){ek=d.halfMoves+1;d.captured&&modifyHand(d);e_===c.Bughouse&&(d.bughouseOrder=eg.moveCount()-1+eg.siblingGame.moveCount())}else if(e_===c["3-check"]&&kingAttacked(eA)){d.checked=!0;ey&&eN[f]&&hashNum(d.hash,t.zobristCheck[eN[f]+(f===A?-1:2)]);++eN[f];ey&&hashNum(d.hash,t.zobristCheck[eN[f]+(f===A?-1:2)])}}function reverseMove(e){var t,n,a=eA,l=swapColor(a),d=e.move,f=d>>F&U,m=d>>D&U;eA=l;eC[C]=e.castlingB;eC[A]=e.castlingW;ew=e.epSquare;ek=e.halfMoves;if(e_){if(eO&&d&el.KQSIDE_CASTLE){if(d&el.KSIDE_CASTLE){if(l===A){n=118;t=117}else{n=6;t=5}}else if(l===A){n=114;t=115}else{n=2;t=3}ev[n]=0;ev[t]=0;ev[m]=l|P;ev[f]=l|T;eb[l]=m;return}e.handChange&&(e_!==c.Crazyhouse&&e.handSibling?eg.siblingGame._hand[swapColor(l)]-=e.handChange:eg._hand[l]-=e.handChange);if(d&el.DROP){ev[f]=0;return}e.checked&&--eN[l]}if(d&el.PROMOTION){ev[m]=w|l;d&el.CAPTURE?ev[f]=e.captured:ev[f]=0}else{ev[m]=ev[f];if(d&el.KQSIDE_CASTLE){ev[f]=0;if(d&el.KSIDE_CASTLE){t=f+1;n=f-1}else{t=f-2;n=f+1}ev[t]=l|T;ev[n]=0;eb[l]=m}else{f===eb[l]&&(eb[l]=m);if(d&el.CAPTURE)ev[f]=e.captured;else{ev[f]=0;d&el.EP_CAPTURE&&(ev[f-(l===A?-16:16)]=w|a)}}}}function getDisambiguator(e,t,n){var a,l,c,d,f,g,y,b;if(_<2)return"";e&=N;for(b=0;b<_;++b){y=(a=m[b])>>F;if(n===y){d=a>>D&U;if(d!==t){l=ev[d];if(l&e){c=!0;if(rank(t)===rank(d)){if(f)return algebraic(t);g=!0}if(file(t)===file(d)){if(g)return algebraic(t);f=!0}}}}}return c?f?String(8-rank(t)):String.fromCharCode(file(t)+97):""}function beautifyMove(e,t,n){var a,l,c=e>>F&U,d={color:eA,to:algebraic(c),flags:e&U};if(ex&&(e&el.DROP)!=0){l=e>>$;d.drop=l;d.piece=ea[l]+eA}else{a=e>>D&U;d.from=algebraic(a);d.piece=ev[a];if(e&el.PROMOTION){l=e>>$;d.promotion=ea[l]+eA}e&el.CAPTURE?d.captured=ev[c]:e&el.EP_CAPTURE&&(d.captured=w|swapColor(eA))}return t?d.san=t:d.san=moveToSan(e,n),d}function isVariantWin(){return e_===c["3-check"]?3===eN[swapColor(eA)]:e_===c["King of the Hill"]?kingOfTheHillWin(eb[swapColor(eA)]):void 0}function isBughouseWin(){if(e_===c.Bughouse)return eg.siblingGame.inCheckmate()}function isBughouseDraw(){if(e_===c.Bughouse)return eg.siblingGame.in50MoveRule()||eg.siblingGame.inThreefoldRepetition()}function createVariation(){var e=[],t=generateFen(),n=eT.length-1,a=eT[n];if(!a)return!1;e.parentId=eP;e.id=eM.length;eT.curFen=t;a.lines||(a.lines=[]);a.lines.push(e.id);if(a.move)reverseMove(a);else{ew=a.epSquare;--ek;eA=swapColor(eA)}return eA===C&&--eS,e.atMoveNode=n,n?e.hash=eT[n-1].hash:e.hash=eT.hash,eP=e.id,eM.push(e),eT=e,!0}function selectLine(e){var t=generateFen();eT.curFen=t;eT=eM[e];eP=e;load(eT.curFen,e_,!0,!0)}return eg={WHITE:A,BLACK:C,PAWN:w,KNIGHT:k,BISHOP:S,ROOK:T,QUEEN:M,KING:P,FLAGS:el,load,reset,moves:function(e){var t,n,a,l=[],c=moveToSan;if(e){e.verbose&&(c=beautifyMove);e.type&&(n=e.type|e.type<<24);a=e.noDrop}generateMoves(n,a);for(t=0;t<_;++t)l.push(c(m[t]));return l},inCheck,inCheckmate,inStalemate,isBughouseWin,in50MoveRule:function(){return ek>=100},inDraw:function(){return ek>=100||inStalemate()||insufficientMaterial()||inThreefoldRepetition()||!!isBughouseDraw()},insufficientMaterial,inThreefoldRepetition,isVariantWin,gameOver:function(){return eg.inDraw()||inCheckmate()||!!isVariantWin()||!!isBughouseWin()},isPositionValid:function(e){var t,n,a,l=0;e=e||{};if(!1!==e.pawns){t=0;for(;t<=119;){a=ev[t];if(a&w)return!1;8==++t&&(t=112)}}if(!1!==e.kings){for(t=0;t<=119;++t){136&t&&(t+=8);a=ev[t];if(a&P){if(++l>2||n&&n&a)return!1;n=a&L}}if(2!==l)return!1}return!(!1!==e.check&&!(!1===e.kings&&eb[swapColor(eA)]===b)&&kingAttacked(swapColor(eA)))},validateFen,fen:generateFen,pgn:function(e){return(e=e||{}).useResultHeader||eP||(isVariantWin()||inCheckmate()?eL.Result=eA===C?"1-0":"0-1":eg.inStalemate()?eL.Result="1/2-1/2":isBughouseWin()&&(eL.Result=eg.siblingGame.turn()===A?"1-0":"0-1")),ep(e,eL,eM,eE,e_,eg)},loadPgn:function(e,t,n){var a,l,c,d,f,m,g,_,y={},b=0;if("number"!=typeof t){n=n||t;t=0}n=n||{};if("string"==typeof e){n.singleGame&&(e=e.replace(/(?:\r?\n\s*){2,}/g,"\n"));e=eg.tokenizePgn(e,n)}n.recordErrorInfo&&(_=function(e,a){var l={reason:e,token:a,lineStart:c._lineStart,colStart:c._colStart,lineEnd:c._lineEnd,colEnd:c._colEnd,pgnIndex:t};return n.errors||(n.errors=[]),n.errors.push(l),!1});t<0&&(t=e.length+t);d=e[t];if(!d)return!1;reset();l=d.length;for(a=0;a<l;++a){c=d[a];if("tagName"!==c.type)break;if(!d[a+1]||"tagValue"!==d[a+1].type)return!1;++a;"FEN"===c.value?g=completeFen(d[a].value):y[c.value]=d[a].value}n.variant&&(y.Variant=n.variant);y.Variant&&!g&&(g=j);if(g||"1"===y.SetUp){if("0"===y.SetUp)y.FEN=g;else if(!g||!load(g,y.Variant))return!1}eg.header(y);m=(f=eg)._history();for(;a<l;++a){c=d[a];if("san"===c.type&&0===b){if(!f.move(c.value)&&("Z0"!==c.value&&"<>"!==c.value||n.rejectNullMoves||!f.move("--"))){_&&_("Invalid SAN move",c.value);if(n.commentErrors)m.length?m[m.length-1].comment=((m[m.length-1].comment||"")+" "+c.value).trim():m.initComment=((m.initComment||"")+" "+c.value).trim();else if(n.skipBadLines&&(0!==eP||eT.length&&n.allowBadMainLine))b=1;else{reset();return!1}}}else if("result"===c.type&&"*"===eL.Result)setHeader(["Result",c.value]);else if("a"===c.type&&0===b&&m[m.length-1])m[m.length-1].annotation=c.value;else if(("nag"===c.type||"aa"===c.type)&&0===b&&m[m.length-1]){m[m.length-1].additionalAnnotation||(m[m.length-1].additionalAnnotation=[]);-1===m[m.length-1].additionalAnnotation.indexOf(c.value)&&m[m.length-1].additionalAnnotation.push(c.value)}else if("comment"===c.type&&0===b){if(m.length){c.value&&(m[m.length-1].comment=c.value);if(c.commands){m[m.length-1].commands=c.commands;c.commands.clk?m[m.length-1].time=timestampToTime(c.commands.clk):c.commands.emt&&(c.commands.timestamp=String(timestampToTime(c.commands.emt)))}}else{m.initComment=String(c.value);c.commands&&(m.commands=c.commands)}}else if("variationStart"===c.type){if(b>0)++b;else if(!createVariation()){reset();return!!_&&_("Invalid variation start","(")}m=f._history()}else if("variationEnd"===c.type){b>0&&--b;if(0===b){selectLine(m.parentId);m=f._history()}}else if("number"===c.type){f=/b/i.test(c.value.slice(-1))?eg.siblingGame:eg;if(!f)return!!_&&_("Invalid Bughouse move number",c.value);m=f._history()}else"cont"===c.type&&eP&&!m.length&&f.move(f._lines()[m.parentId][m.atMoveNode].san)}return!0},header:function(e){return Array.isArray(e)?setHeader(e):("object"==typeof e&&Object.keys(e).forEach(function(t){setHeader([t,e[t]])}),eL)},turn:function(e){return(e===A||e===C)&&(eA=e),eA},move:function playMove(e){var t,n,a,l,c,d,g,y,b,C,k,S,T;if("string"==typeof e){l=e.length-1;switch(e[l]){case"+":case"#":e=e.substr(0,l)}b=W.indexOf(e[0])>6?Z[e[0]]:"O"===e[0]?P:w;if(ex){if(-1===e.indexOf("@"))C=!0;else{C=!1;b<<=24}}generateMoves(b,C);for(l=0;l<_;++l){d=moveToSan(m[l],!0);if(e===d){n=m[l];break}}if(n){g=n>>D&U;y=n>>F&U;a=n>>$}else{if("--"===e)return makeNullMove();if(e=eg.fixMove(e))try{return playMove(e)}catch(e){}return null}}else{if(e.drop){switch(e.drop){case"p":a=0;break;case"n":a=1;break;case"b":a=2;break;case"r":a=3;break;case"q":a=4;break;default:return null}b=1<<26+a}else{if(e.promotion)switch(e.promotion){case"q":a=4;break;case"n":a=1;break;case"r":a=3;break;case"b":a=2;break;default:return null}g=f[e.from];C=!0;b=ev[g]&N}t=((a?a<<$:0)|(y=f[e.to])<<F)>>D|g;generateMoves(b,C);for(l=0;l<_;++l)if(m[l]>>D===t){n=m[l];break}if(!n)return(e=eg.fixMove(e))?playMove(e):null}return T=n&el.DROP_OR_PROMOTE?ea[a]+eA:ev[g],c=beautifyMove(n,d,!0),k=inCheckAfterMove(T,g,y,n),eI(n,g,y,a),k&&(e_&&isVariantWin()||0===generateMoves()?c.san+="#":c.san+="+"),(S=eT[eT.length-1]).san=c.san,c.piece&O&&(S.promoted=!0),eA===A&&++eS,c},undo:function(e){var t=eT.pop();return t?(eA===A&&--eS,t.move)?(reverseMove(t),!!e||beautifyMove(t.move,t.san)):(ew=t.epSquare,--ek,eA=swapColor(eA),!!e||{san:"--",color:t.color}):null},clear:function(e){clear(e)},put:function(e,t,n){var a,l=f[t],c=!1,d=ev[l],m=d&L,g=e.color;if(isNaN(l)||!e.type||!g||-1===W.indexOf(e.type))return!1;ev[l]=Z[e.type]|g|(e.promoted?O:0);ev[l]&P&&(eb[g]=l);if(d&&ev[eb[m]]&&ev[eb[m]]!==(P|m)){for(a=0;a<120;++a){136&a&&(a+=8);if(ev[a]===(P|m)){eb[m]=a;c=!0}}c||(eb[m]=b)}return n||load(generateFen(),e_,!1,!1),!0},get,remove:function(e,t){var n,a=ev[f[e]],l=get(e),c=a&L;ev[f[e]]=0;if(a&P){eb[c]=b;eC[c]=0;for(n=0;n<120;++n){136&n&&(n+=8);if(ev[n]===(P|c)){eb[a.color]=n;break}}}return t||load(generateFen(),e_,!0,!1),l},history:function(e,t){for(var n,a=[],l=eT,c=l.length;;){if(-1==--c){if(l.id&&!t){c=l.atMoveNode;l=eM[l.parentId];continue}break}if(e){(n=beautifyMove(l[c].move,l[c].san)).color=l[c].color;!c&&l.initComment&&(n.firstComment=l.initComment);void 0!==l[c].comment&&(n.comment=l[c].comment);void 0!==l[c].time&&(n.time=l[c].time);void 0!==l[c].annotation&&(n.annotation=l[c].annotation);void 0!==l[c].additionalAnnotation&&(n.additionalAnnotation=l[c].additionalAnnotation);void 0!==l[c].commands&&(n.commands=l[c].commands);void 0!==l[c].captured&&(n.captured=l[c].captured);void 0!==l[c].promoted&&(n.promoted=l[c].promoted);void 0!==l[c].lines&&(n.lines=l[c].lines);void 0!==l[c].bughouseOrder&&(n.bughouseOrder=l[c].bughouseOrder);W.indexOf(l[c].san[0])>6?n.piece=Z[l[c].san[0]]:"O"===l[c].san[0]?n.piece=P:n.piece=w;n.piece|=n.color;a.unshift(n)}else a.unshift(l[c].san)}return a},hashes:function(){for(var e=[],t=eT,n=t.length;;){if(-1==--n){if(t.id){n=t.atMoveNode;t=eM[t.parentId];continue}t.hash||getCurrentHash();e.unshift(t.hash);break}e.unshift(t[n].hash)}return e},moveCount:function(){return eT.length},startingMoveNumber:function(){return eE},completeFen,createVariation,selectLine,hash:function(){var e=getCurrentHash();return e_!==c.Bughouse||eg.isDependent?e:[e,eg.siblingGame.hash()]},hashing:function(e){ey=e;e_!==c.Bughouse||eg.isDependent||eg.siblingGame.hashing(ey)},hand:function(){if(ex)return handToString(eg._hand[A],!0)+handToString(eg._hand[C])},checks:function(){if(e_===c["3-check"])return[eN[A],eN[C]]},threats:function(){var e,t,l,c,d,f,y,A=eA,C=swapColor(A),w=[],k=[],S=[],T=[],M=[],P=ew;calculateLegalMoveInfo(0,eb[A]);if(n||a)for(e=0;e<120;++e){136&e&&(e+=8);ev[e+8]&B&&ev[e]?S.push(algebraic(e)):ev[e+8]&V&&w.push(algebraic(e))}eA=C;ew=b;generateMoves();for(e=_;e--;){d=(t=m[e])>>F&U;f=t>>D&U;if(t&el.DROP_OR_PROMOTE){c=ea[y=t>>$]|C;if(t&el.PROMOTION&&y%3!=1)continue}else{c=ev[f];y=0}if(inCheckAfterMove(c,f,d,t)){eI(t,f,d,y);g=e;(e_&&isVariantWin()||generateMoves()===e)&&k.push((t&el.DROP?z[c].toLowerCase()+"@":algebraic(f))+algebraic(d));reverseMove(eT.pop());if(t&el.CAPTURE){l=0;for(e=_;e>g;)if((m[--e]>>F&U)===d){l=1;e=g;break}if(!l){T.push(algebraic(f)+algebraic(d));continue}}}t&el.CAPTURE&&1!==y&&(l=124&ev[d])&&(attacked(A,d)?l>(c=ev[f]&N)&&l-c!=8&&M.push(algebraic(f)+algebraic(d)):T.push(algebraic(f)+algebraic(d)))}return g=0,eA=A,ew=P,{pins:w,checkers:S,mates:k,undefended:T,underdefended:M}},tokenizePgn:em,fixMove:function(e){var t,n,a;if("string"==typeof e){if(/0|[?!+#]$|[18][QNRB]$|^P/i.test(e))return e.replace(/[?!+#]+$/,"").replace(/0/g,"O").replace(/([18])([QNRB])$/i,"$1=$2").replace(/^P+/i,"");n=e.indexOf("=")>0?-4:-2;t=f[e.substr(n,2)];if("number"==typeof t){if(ev[t]&swapColor(eA)||/^[a-h]x?[a-h][36]$/.test(e)){if(-1===e.indexOf("x"))return e.slice(0,n)+"x"+e.substr(n)}else if(e.indexOf("x")>-1)return e.replace(/x/g,"");if(a=e.match(/^([KQNRB]?)([a-h][1-8]?|[1-8])x?([a-h][1-8])=?(.?)$/)){if(ev[f[a[2]]])return{from:a[2],to:a[3],promotion:a[4].toLowerCase()};if(/^\d$/.test(a[2])){e=0;generateMoves(Z[a[1]],!0);for(n=0;n<_;++n)if(m[n]>>F===t&&rank(m[n]>>D&U)===8-a[2]){if(e)return;e=m[n]}if(e)return moveToSan(e,!0)}return a[1]+a[3]+a[4]}}}else if(ev[f[e.from]]===(P|eA)&&e.to&&e.from[1]===e.to[1]){if(e.from<e.to)return"O-O";if(e.from>e.to)return"O-O-O"}},_hand:[],_history:function(e){return e&&(eP=(eT=e).id),eT},_lines:function(){return eM},_hashPosition:hashPosition,_board:function(){return ev}},ef&&load(ef,eh)||reset(),eg}return Chess2.variants=d,Chess2}(),ENGINE_MANAGER=function(e){var n=["bench","d","eval","flip","isready","ponderhit","stop","uci","ucinewgame"],a=[{cmd:"position",args:["fen","startpos","moves","continuation"]},{cmd:"go",args:["binc","btime","confidence","depth","infinite","mate","mindepth","mintime","maxdepth","maxtime","movestogo","movetime","ponder","searchmoves","shallow","winc","wtime"]}],l=["moves","searchmoves"],c=["ponder","infinite","startpos"],d={depth:1,seldepth:1,time:1,nodes:1,multipv:1,cp:1,mate:1,currmovenumber:1,hashfull:1,nps:1,tbhits:1,sbhits:1,cpuload:1,bmc:1,score:2,lowerbound:2,upperbound:2,bestmove:3,ponder:3,baseTurn:3,bestmoveSan:3,ponderSan:3,pv:4,pvSan:4,string:4,refutation:4,currline:4},f=/(?:Total|Final) Evaluation[\s\S]+\n$/i;function fakeWorker(e){var t,n=[],a=[],l={},c={isFakeWorker:!0},d=e.replace(/^[^#]*#/,"");function runAsync(e){setTimeout(e,1)}function flushMessages(e,n){var a;if(!t){if(e.onmessage){a=n.concat();n.length=0;a.forEach(function(t){try{e.onmessage({data:t})}catch(e){console.error(e)}})}else setTimeout(flushMessages,5,e,n)}}return function asyncImport(e,n){var a=document.createElement("script");a.setAttribute("src",e);a.onload=function onload(){a.remove();n(a._exports)};a.onerror=function onError(e){t=!0;a.remove();l.onerror(e)};document.head.appendChild(a)}(e,function(n){var a=e.replace(/[?#].*/,""),f=a.replace(/\/[^\/]+$/,"/"),m={locateFile:function(e){return e.indexOf(".wasm")>-1&&d?d:e.indexOf(".worker.js")>-1?a+"#"+d+",worker":f+e}};n(m).then(function(){n=null;function onBeforeunload(){m=null;t=!0}window.addEventListener("beforeunload",onBeforeunload,{once:!0});c.onmessage=function onmessage(e){var n=e.data;(m.onSpecialMessage||m.onCustomMessage)(n);if("quit"===n){m=null;t=!0;window.removeEventListener("beforeunload",onBeforeunload)}};m.addMessageListener(c.postMessage)}).catch(function(e){n=null;t=!0;l.onerror(e)})}),l.postMessage=function(e){n.push(e);runAsync(function(){flushMessages(c,n)})},c.postMessage=function(e){a.push(e);runAsync(function(){flushMessages(l,a)})},l.terminate=function(){},l}function createWebWorker(e,t,n){var a=t.useFakeWorker&&t.useFakeWorker[e.replace(/[?#].*$/,"")]?fakeWorker(e):new Worker(e),l={terminate,postMessage};function postMessage(e){a.postMessage(e)}function terminate(){a.terminate()}function requeue(e){var t=e.concat();e.length=0;t.forEach(function(e){if(e.cmd)"go"!==e.cmd.substr(0,2)&&n.send(e.cmd,e.cb,e.stream);else{clearTimeout(e.timer);n.getBestMove(e.args,e.cb,e.stream)}})}return a.onmessage=function(e){"string"==typeof e.data&&l.onmessage(e.data)},a.onerror=function(c){if(n.fallbackPath&&n.fallbackPath!==e){try{c.preventDefault()}catch(e){}try{a.terminate()}catch(e){}return(a=createWebWorker(n.fallbackPath,t,n)).onmessage=function(e){l.onmessage(e)},requeue(n._activeCommands()),requeue(n._bestMoveQueue()),!1}if(t.onError)return t.onError(c)},l}function getSupportedEngines(t,n){n.fallbackPath=t.pathToNonWasmEngine;n.path=t.enginePath||t.pathToEngineWorker;n.wasmPath=t.pathToWasmEngine;if(t.engines){if(t.engines.multiThreaded&&e.supportsMultithreading()){if(!t.engines.multiThreadedNoSIMD||e.supportsSIMD()){n.path=t.engines.multiThreaded.loader;n.wasmPath=t.engines.multiThreaded.engine}else{n.path=t.engines.multiThreadedNoSIMD.loader;n.wasmPath=t.engines.multiThreadedNoSIMD.engine}}else if(t.engines.singleThreaded){n.path=t.engines.singleThreaded.loader;n.wasmPath=t.engines.singleThreaded.engine}n.fallbackPath=t.engines.asm||n.fallbackPath}}function createWorker(e,t){var n;return getSupportedEngines(e,t),n=t.path,(t.fallbackPath&&"undefined"==typeof WebAssembly||!n)&&(n=t.fallbackPath),t.wasmPath&&(n+="#"+t.wasmPath),createWebWorker(n||"stockfish.js",e,t)}function parseSearchLine(e){for(var t,n,a=e.split(" "),l=a.length,c="info"===a[0]?1:0,f={mtype:a[0]};c<l;++c){n=a[c];if(n){t=d[n];if(1===t){for(;!a[++c]&&c<l;);f[n]=Number(a[c])}else if(2===t)f[n]=!0;else if(3===t){for(;!a[++c]&&c<l;);f[n]=a[c]}else{f[n]=[];for(++c;c<l;++c){if(d[a[c]]){--c;break}a[c]&&f[n].push(a[c])}}}}if("string"==typeof f.bestmove)switch(f.bestmove){case"(none)":case"0000":case"a1a1":f.bestmove=void 0;f.bestmoveSan=void 0}if("string"==typeof f.ponder)switch(f.ponder){case"(none)":case"0000":case"a1a1":f.ponder=void 0;f.ponderSan=void 0}return f}function getFirstWord(e){var t=e.indexOf(" ");return -1===t?e:e.substr(0,t)}function convertStockfishVariantFen(e){return(e+"").replace(/^([^/]+)((?:\/[^/]+){7})\/([qrbnp]*)/i,"$1$2[$3]").replace(/( \d+ \d+) \+([0-3])\+([0-3])/,function(e,t,n,a){return" "+(3-n)+"+"+(3-a)+t})}function convertStandardVariantFen(e){return(e+"").replace(/\[([qrbnp]*)\]/i,"/$1").replace(/([0-3])\+([0-3]) (\d+ \d+)/,function(e,t,n,a){return a+" +"+(3-t)+"+"+(3-n)})}function determineQueueNum(e,t){var n,a,l,c,d=getFirstWord(e);n="uciok"===d||"option"===d?"uci":"readyok"===d||"ready"===d?"isready":"json"===d||e.indexOf("info string CEEError")>=0?"fetch":"bestmove"===d||"info"===d?"go":"other";c=t.length;for(l=0;l<c;l+=1){a=getFirstWord(t[l].cmd);if(a===n||"other"===n&&("d"===a||"eval"===a))return l}return 0}function parseEngineName(e){var t=e.match(/id name ((\S+)(?: ([\S]+).*)?)/i);if(t&&t[1])return{all:t[1].trim(),short:t[2],version:t[3],full:(t[2]+" "+(t[3]||"")).trim(),wasm:/ wasm/i.test(e),multithreaded:/ multithreaded/i.test(e)}}function loadEngine(d,m){var g,_,y,b={},A=[],C=[],w=null,k={},S={};function onmessage(t){var n,a,l,c,m=0;if(t.indexOf("\n")>-1){l=t.split("\n");for(c=0;c<l.length;c+=1)onmessage(l[c]);return}e.log&&console.log("debug (onmessage): "+t);b.stream&&b.stream(t);if(!A.length||0===t.indexOf("No such option")||0===t.indexOf("Stockfish")||0===t.indexOf("Komodo")||0===t.indexOf("Explanation Engine")||0===t.indexOf("info string variant")){if(d.ceeMode&&0===t.indexOf("Explanation Engine")){var g=t.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\s*\(C\)/);w=g?{date:g[1],increment:g[2]}:{major:parseInt((g=t.match(/Explanation Engine\s*([0-9]+)\.([0-9]+)\.([0-9]+)/))[1]),minor:parseInt(g[2]),patch:parseInt(g[3])}}return}m=determineQueueNum(t,A);(a=A[m]).stream&&!a.discard&&a.stream(t);void 0===a.message?a.message="":""!==a.message&&(a.message+="\n");a.message+=t;if(0===t.indexOf("uciok")){b.name=parseEngineName(a.message);n=!0}else if(0===t.indexOf("ready"))n=!0;else if((0===t.indexOf("bestmove")||"bestmove"===getFirstWord(t))&&"bench"!==a.cmd){n=!0;a.message=t}else if("d"===a.cmd){if(0===t.indexOf("Legal uci moves")||0===t.indexOf("Key is")){a.done=!0;n=!0}}else if(0===a.cmd.indexOf("fetch"))try{var _=a.message.split("\n").filter(function(e){return e.startsWith("json")}).join("\n");if(_){a.message=JSON.parse(_.replace(/^json /mg,"").replace(/\n/g,""));n=!0}}catch(e){}else"eval"===a.cmd?f.test(a.message)&&(n=!0):0===t.indexOf("pawn key")?n=!0:0===t.indexOf("Nodes/second")?n=!0:0===t.indexOf("Unknown command")&&(n=!0);if(n){A.splice(m,1);a.cb&&!a.discard?a.cb(a.message):a.ondiscard&&a.ondiscard()}}function isPrintingCommand(e){return"ucinewgame"!==e&&"flip"!==e&&"stop"!==e&&"ponderhit"!==e&&0!==e.indexOf("position")&&0!==e.indexOf("setoption")&&0!==e.indexOf("variation")&&0!==e.indexOf("threat-variation")&&0!==e.indexOf("push")&&0!==e.indexOf("pop")&&0!==e.indexOf("serve")&&0!==e.indexOf("speech")}b.send=function(t,n,a){var l;isPrintingCommand(t=String(t).trim())?A[A.length]={cmd:t,cb:n,stream:a}:l=!0;if(g){e.log&&console.log("stdin: "+t);g.postMessage(t);l&&n&&setTimeout(n,0)}};b._activeCommands=function(){return A};b._bestMoveQueue=function(){return C};b.quit=function(){if(g&&g.terminate){try{b.send("quit")}catch(e){}try{g.terminate()}catch(e){}g=null;b.ready=void 0}clearTimeout(_)};n.forEach(function oneach(e){b[e]=function makeSCmd(t,n){b.send(e,t,n)}});a.forEach(function oneach(e){b[e.cmd]=function makeCCmd(t,n,a){var d=[e.cmd];y&&t.fen&&(t.fen=convertStockfishVariantFen(t.fen));e.args.forEach(function oneach2(e){if(t[e]||0===t[e]){if(l.indexOf(e)>-1){if(!t[e]||!t[e].length)return;Array.isArray(t[e])&&(t[e]=t[e].join(" "))}d.push(e);-1===c.indexOf(e)&&d.push(t[e])}});b.send(d.join(" "),n,a)}});b.setoption=function(e,t){b.send("setoption name "+e+" value "+t)};b.setVariant=function(e){var t;if(e!==y){t=String(e).toLowerCase().replace(/ |-/g,"");if(e&&"chess"!==t){if("chess960"===t){b.setoption("UCI_Variant","chess");b.setoption("UCI_Chess960","true")}else{"threecheck"===t&&(t="3check");b.setoption("UCI_Variant",t);b.setoption("UCI_Chess960","false")}}else{t=void 0;b.setoption("UCI_Variant","chess");b.setoption("UCI_Chess960","false")}y=t}};b.loadBook=function(e,n){b.pathToBook=e;t.loadBook(e,function onload(e,t){if(e){console.error("Error loading opening book.");console.error(e);b.pathToBook=null;b.bookLoaded=!1}else{b.book=t;b.rawBook=t.json;b.bookLoaded=!0}n()})};b.getBookMove=function(t){var n=e.createGame(t),a=b.book.pick({fen:n.fen(),type:void 0!==t.bookPick?t.bookPick:"random",chess960:"Chess960"===n.header().Variant}),l=a&&n.move(a);if(l)return{moveSan:l.san,moveLan:a,move:{from:l.from,to:l.to,promotion:l.promotion||null},baseTurn:1===n.turn()?"b":"w",pv:[{moveSan:l.san,moveLan:a}],depth:null,score:null,mateIn:null,isBookMove:!0}};function getCEE(t,n){var a=t.loader,l=k[a]=k[a]||[],c=S[a]=S[a]||[];return t.maxEngines&&(n%=t.maxEngines),l[n]&&void 0!==l[n].ready||(l[n]=e({enginePath:a,pathToWasmEngine:t.engine,ceeMode:!0})),clearTimeout(c[n]),c[n]=setTimeout(function(){try{l[n].quit()}catch(e){}l[n]=null},t.killDelay||1e4),l[n]}function classifyStream(n,a,l,c,d,f){var m,g=[],_=[],y=a.minDepth||14,A=[],C=[];function getClassification(d,f,g){var _={cp:f[d].cp,mateIn:f[d].mateIn,pv:f[d].pv.slice(1)},y=getCEE(a,d),w={moveLan:f[d].pv[0]},k=a.book||b.rawBook;function streamCEEData(e){A[d]=!1;if(!m&&b.ready){e.mtype="classification";e.depth=g;e.multipv=d+1;n(e);C[d]&&getClassification(d,C[d].evals,C[d].depth)}}if(A[d]){C[d]={evals:f,depth:g};return}k&&(w.isBook=!!k[t.to64BitHex(e.createGame({fen:l,moves:w.moveLan,variant:c}).hash())]);A[d]=!0;C[d]=null;y.fetch({action:"analysis",variant:c,startFen:l,moves:[w],evals:[f,[_]],options:{WhiteElo:a.whiteElo,BlackElo:a.blackElo,ScoreWhiteToMove:!0}},function onDone(e){streamCEEData(e.positions[1])},function onError(e){e.err=!0;streamCEEData(e);y.quit()})}return function stream(e){var t;if("bestmove"===e.mtype)m=!0;else if(e.depth>=y){t=e.multipv-1;if("info"===e.mtype&&e.pv&&e.multipv>0&&(e.pv.length>1||1===e.mate)&&_[t]!==e.depth){g[t]=e;_[t]=e.depth;if(t<=1&&_[0]===_[1]){getClassification(0,g,e.depth);f||getClassification(1,g,e.depth)}else(d||_[0]===_[1])&&getClassification(t,g,e.depth)}}f&&e.multipv&&(1!==e.multipv||!n)||n(e)}}function bestMoveSearch(){var t,n,a,l,c,d=1,f=[],m=[],g=null,y=C[0].args,A=C[0].cb,w=C[0].stream,k=1,S=[],T=14,M=loadEngine._previousCP;C[0].started=!0;loadEngine._previousCP=null;function convertpv(e){var t=[],n=m[e]||createSanPv(f[e]);return f[e].forEach(function oneach(e,a){t.push({moveSan:n[a],moveLan:e})}),t}function getpv(e,t,n,a){var l;for(l=f.length-1;l>=0;l-=1)if(f[l][0]===e)return convertpv(l);return n?[{moveSan:t,moveLan:e},{moveSan:a,moveLan:n}]:t?[{moveSan:t,moveLan:e}]:[]}function normalize(e){var t=.03*Math.pow(32,e.depth/T);e.cp=M+(e.cp-M)*t}function convertScore(e){if(0===e.mate){e.mateIn=0;e.cp=-31800*k}else{e.mateIn=Number(e.mate*k)||null;if("number"!=typeof e.mateIn||isNaN(e.mateIn)||"number"==typeof e.cp){e.cp*=k;9===Math.abs(e.cp)&&(e.cp=0);y.normalize&&e.depth<=T&&"number"==typeof M&&1===e.multipv&&normalize(e)}else e.cp=31800*k*(e.mate/Math.abs(e.mate))}e.score=e.cp/100}function returnBestMove(e){var n=parseSearchLine(e);addBestMoveProps(n);d>T&&t<5e3&&t>-5e3&&(loadEngine._previousCP=t);n.pv=getpv(n.moveLan,n.moveSan);1===n.pv.length&&n.ponder&&(n.pv=getpv(n.moveLan,n.moveSan,n.ponder,n.ponderSan));if(S.length>1){S.splice(S.indexOf(n.moveLan),1);y.searchmoves=S;y.getNextBest=0;queueBestMoveSearch(y,function done(){A(n)},function streamer(e){if(w){e.multipv=2;w(e)}})}else if(A)try{A(n)}catch(e){console.error(e)}C.shift();clearTimeout(_);C.length>0&&bestMoveSearch()}function addBestMoveProps(c){var f;c.baseTurn=a;void 0===t&&(l.inCheckmate()?streamInfo("info depth 0 score mate 0"):l.inStalemate()&&streamInfo("info depth 0 score cp 0"));c.cp=t;c.score=t/100;c.mate=n;c.mateIn=g;c.depth=d;c.moveLan=c.bestmove;if(c.moveLan){c.move=e.uciToObj(c.moveLan)[0];f=l.move(c.move);if(f){c.moveSan=c.bestmoveSan=f.san;if(c.ponder){f=l.move(e.uciToObj(c.ponder)[0]);if(f){c.ponderSan=f.san;l.undo(!0)}}l.undo(!0)}}}function createSanPv(t){var n,a,c=t.length,d=[];for(n=0;n<c;++n){a=l.move(e.uciToObj(t[n])[0]);if(!a)break;d.push(a.san)}for(;n>0;--n)l.undo(!0);return d}function streamInfo(e){var l=parseSearchLine(e);if(l.score){l.baseTurn=a;convertScore(l);!l.multipv&&l.depth&&(l.multipv=1);if(1===l.multipv||0===l.depth){t=l.cp;n=l.mate;g=l.mateIn}}l.pv&&w&&(l.pvSan=createSanPv(l.pv));if(l.pv&&!(l.lowerbound||l.upperbound)){f.push(l.pv);w&&m.push(l.pvSan)}l.depth>d?d=l.depth:"bestmove"===l.mtype&&addBestMoveProps(l);w&&!(0===l.mateIn&&l.pv)&&w(l);createTimeout()}function createTimeout(){if(y.timeout){clearTimeout(_);C[0].timer=_=setTimeout(function(){b.stop();if(A){A();A=void 0}},y.timeout)}}if(y.difficulty>=0&&y.difficulty<20){b.setoption("Skill Level",y.difficulty);y.maximumError>=0&&y.maximumError<=4999&&b.setoption("Skill Level Maximum Error",y.maximumError);y.errorProbability>=1&&y.errorProbability<=128&&b.setoption("Skill Level Probability",y.errorProbability)}else b.setoption("Skill Level",20);void 0!==y.contempt?b.setoption("Contempt",y.contempt):b.setoption("Contempt","0");y.multiPv>1?b.setoption("MultiPV",y.multiPv):b.setoption("MultiPV",1);if(!y.movetime&&(!y.wtime||!y.btime)&&!y.depth&&!y.infinite){y.btime=y.btime||72e3;y.wtime=y.wtime||72e3}if(!y.startpos&&y.fen||y.moves||y.variant){l=e.createGame({fen:y.fen?convertStandardVariantFen(y.fen):"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",moves:y.moves,variant:y.variant,disableHashing:!0});if(l.turn()===l.WHITE)a="w";else{a="b";k=-1}}else{a="w";l=e.createGame({disableHashing:!0})}if(y.cee&&w){if(2>(Number(y.multiPv)||1)){c=!0;b.setoption("MultiPV",2)}w=classifyStream(w,y.cee,l.fen(),y.variant,1===l.moves().length,c)}b.setVariant(y.variant);b.position(y);b.go(y,returnBestMove,streamInfo);y.getNextBest&&A&&l.moves({verbose:!0}).forEach(function toLan(t){t=e.normalizeMoveObj(t);S.push(t.from+t.to+(t.promotion||""))});createTimeout()}function queueBestMoveSearch(e,t,n){C.push({args:e,cb:t,stream:n});1===C.length&&bestMoveSearch()}b.getBestMove=function(e,t,n){var a;(e=e||{}).fen=e.fen||e.baseFen;e.is960&&(e.variant="Chess960");if(b.bookLoaded&&e.useBook){a=b.getBookMove(e);if(a)return setTimeout(function(){a.mtype="bestmove";t(a)},0)}queueBestMoveSearch(e,t,n)};b.stopAll=function(t){var n,a=A.length,l=0;function ondiscard(){0==(l-=1)&&t()}C=[];for(n=0;n<a;n+=1){e.log&&console.log("debug (stop_moves): "+n,getFirstWord(A[n].cmd));if("go"===getFirstWord(A[n].cmd)&&!A[n].discard){b.stop();A[n].discard=!0;if(t){l+=1;A[n].ondiscard=ondiscard}}}t&&!l&&b.isready(t)};b.restartEngine=function(e){return b.stopAll(),b.quit(),A=[],C=[],b.bookLoaded&&!d.book&&((d=JSON.parse(JSON.stringify(d))).book=b.book),loadEngine(d,e)};b.stopFast=function(e,t){var n,a;if(b._isStopping)return b._stopQueue.push(e);a=function(e){b._stopQueue.forEach(function(t){t(e)});b._stopQueue=null;b._isStopping=!1};b._isStopping=!0;b._stopQueue=[e];b.stopAll(function(){clearTimeout(n);a(b)});n=setTimeout(function(){b.restartEngine(a)},Math.max(+t||5e3,50))};function startUp(){b.uci(function onstart(){d.settings&&Object.keys(d.settings).forEach(function oneach(e){b.setoption(e,d.settings[e])});b.ready=!0;cbIfReady()})}function cbIfReady(){b.ready&&(b.bookLoaded||!b.pathToBook)&&m&&m(b)}if("undefined"==typeof Worker)return!1;if(d.ceeMode){addCeeInterface(b,d);b.ceeVersion=function(){return JSON.parse(JSON.stringify(w))}}(g=createWorker(d,b)).onmessage=onmessage;if(d.book){b.book=d.book;b.bookLoaded=!0;b.pathToBook=d.pathToBook}return b.getFenFromMoves=e.getFenFromMoves,b.getLegalMoves=e.getLegalMoves,b.getPositionInfo=e.getPositionInfo,b.isFenValid=e.isFenValid,b.ready=!1,startUp(),!b.book&&d.pathToBook&&b.loadBook(d.pathToBook,cbIfReady),b}function addCeeInterface(t,n){var a,l,c=1e3,d=0;function createInterruptHook(e){function interruptHook(e){var t=interruptHook.callbacks;interruptHook.callbacks={};interruptHook.original&&interruptHook.original(e);for(var n in t)t[n](e)}return interruptHook.callbacks={},interruptHook.original=e,interruptHook}n.onError=a=createInterruptHook(n.onError);n.onSignal=l=createInterruptHook(n.onSignal);function analyze(n,f,m,g){var _,y=Date.now(),b=!1,A=++d;function cleanup(){clearTimeout(_);delete a.callbacks[A];delete l.callbacks[A];b=!0}function handleError(e){if(!b){cleanup();g({data:e,action:f,uci:n},n)}}function onProcessCrash(t){handleError({msg:"CEE process crashed unexpectedly",code:e.ERROR_CODES.CRASH,exitCode:t,err:Error("CEE process exited with "+t)})}a.callbacks[A]=onProcessCrash;l.callbacks[A]=onProcessCrash;_=setTimeout(function(){handleError({msg:"CEE timed out",code:e.ERROR_CODES.TIMEOUT,timeout:c,duration:Date.now()-y,err:Error("CEE timed out")})},c);for(var C=0;C<n.length;++C)t.send(n[C]);t.send("fetch "+f,function onFetchDone(e){if(!b){cleanup();m(e,n)}},function onFetchStream(n){n.indexOf("info string CEEError")>=0?handleError({msg:"CEE crashed with error code",code:e.ERROR_CODES.ERROR,log:n.match(/info string CEEError\s*(.*)/)[1],err:Error(n.match(/info string CEEError\s*(.*)/)[1])}):t.ceeDebug&&n.indexOf("not recognized")>=0&&handleError({msg:"CEE received unknown UCI option (engine.ceeDebug mode on)",option:n,code:e.ERROR_CODES.NONFATAL_ERROR,err:Error(n)})})}t.fetch=function(t,n,a){var l,c;l=(t=t||[]).action||"analysis";if(Array.isArray(t))c=t;else{c=t.uciCommands?t.uciCommands.map(function(e){return e}):[];if(t.startFen){t.options=t.options||{};void 0===t.options.ScoreWhiteToMove&&(t.options.ScoreWhiteToMove=!0);void 0===t.options.SerializeLikeCEAC&&(t.options.SerializeLikeCEAC=!0);e.CEE_LIB.addOptions(c,t.options);e.CEE_LIB.addVariant(c,t.variant);e.CEE_LIB.addPosition(c,t.startFen)}e.CEE_LIB.addVariations(c,t.evals&&t.evals[0]);e.CEE_LIB.addVariations(c,t.threats&&t.threats[0],"threat-variation");(t.moves||[]).forEach(function(n,a){var l=a+1;e.CEE_LIB.addPush(c,n);e.CEE_LIB.addClock(c,t.clocks&&t.clocks[a]);e.CEE_LIB.addVariations(c,t.evals&&t.evals[l]);e.CEE_LIB.addVariations(c,t.threats&&t.threats[l],"threat-variation")})}analyze(c,l,n,a)};t.fetch.setTimeout=function(e){c=e};e.ERROR_CODES={TIMEOUT:1,CRASH:2,ERROR:3,NONFATAL_ERROR:4}}return loadEngine},a=function(){var e,a=n(),l="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",c=252,d={4:"p",5:"P",6:"p",8:"n",9:"N",10:"n",16:"b",17:"B",18:"b",32:"r",33:"R",34:"r",64:"q",65:"Q",66:"q",128:"k",129:"K",130:"k"},f=512,m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?{~}(^)[_]@#$,./&-*++=",g="qnrbkp";function decodeTCN(e){var t,n,a,l,c=e.length,d=[];for(t=0;t<c;t+=2){l={};n=m.indexOf(e[t]);a=m.indexOf(e[t+1]);if(a>63){l.promotion=g[Math.floor((a-64)/3)];a=n+(n<16?-8:8)+(a-1)%3-1}n>75?l.drop=g[n-79]:l.from=m[n%8]+(Math.floor(n/8)+1);l.to=m[a%8]+(Math.floor(a/8)+1);d.push(l)}return d}function encodeTCN(e){var t,n,a,l,c="";Array.isArray(e)||(e=[e]);n=e.length;for(t=0;t<n;t+=1){a=e[t].drop?79+g.indexOf(e[t].drop):m.indexOf(e[t].from[0])+(e[t].from[1]-1)*8;l=m.indexOf(e[t].to[0])+(e[t].to[1]-1)*8;e[t].promotion&&(l=3*g.indexOf(e[t].promotion)+64+(l<a?9+l-a:l-a-7));c+=m[a]+m[l]}return c}function uciToObj(e){var t,n,a=e.split(" "),l=a.length,c=[];if(e)for(t=0;t<l;++t)4===(n=a[t]).length?"@"===n[1]?c.push({drop:n[0].toLowerCase(),to:n.substr(2,2)}):c.push({from:n.substr(0,2),to:n.substr(2,2)}):c.push({from:n.substr(0,2),to:n.substr(2,2),promotion:n[4]});return c}function isSameMove(e,t){return e.san===t.san||e.to===t.to&&(e.from===t.from||!e.from&&!t.from)&&(e.promotion===t.promotion||!e.promotion&&!t.promotion)&&(e.drop===t.drop||!e.drop&&!t.drop)}function getPremoves(e,t,a){var l,c,d,f,m,g,_,y,b,A,C=[],w=1,k=8,S=1,T=8,M={verbose:!0};b=3-(A=e.turn());(f=n("/",t)).turn(b);if(a){w=k=+a[1];S=T=a.charCodeAt(0)-96}for(l=w;l<=k;++l)for(c=S;c<=T;++c){m=String.fromCharCode(c+96)+l;d=e.get(m);if(d&&d.color===b){f.put(d,m,!0);if("p"===d.type){g=String.fromCharCode(c-1+96)+(l+(1===b?1:-1));_=String.fromCharCode(c+1+96)+(l+(1===b?1:-1));f.put({type:"n",color:A},g,!0);f.put({type:"n",color:A},_,!0)}else"k"===d.type&&"-"!==(y=e.fen().split(" ")[2])&&f.load(f.fen().replace(/^(\S+\s\S\s)(\S+)/,"$1"+y),t,!0,!0);C=C.concat(f.moves(M));f.remove(m,!0);if("p"===d.type){f.remove(g,!0);f.remove(_,!0)}}}if(t&&e.hand()){f._hand[b]=18721;C=C.concat(f.moves({verbose:!0}).filter(function(e){return!a||e.to===a}))}return C.forEach(function(e){normalizeMoveObj(e)}),C}function makePremove(e,t){var n,l,c,d,f,m=e.header().Variant,g=getPremoves(e,m,t.from),_=3-e.turn();for(n=g.length-1;n>=0;--n){l=g[n];if(isSameMove(l,t)){c=!0;break}}if(c){if(l.drop)e.put({type:l.drop,color:_},l.to);else{d=e.remove(l.from,!0);if(l.flags===a.FLAGS.KSIDE_CASTLE){f=e.remove("Chess960"===m?l.to:"h"+l.from[1],!0);e.put(d,"g"+l.from[1],!0);e.put(f,"f"+l.from[1])}else if(l.flags===a.FLAGS.QSIDE_CASTLE){f=e.remove("Chess960"===m?l.to:"a"+l.from[1],!0);e.put(d,"c"+l.from[1],!0);e.put(f,"d"+l.from[1])}else{if(l.promotion){d.type=l.promotion;d.promoted=!0}f=e.get(l.to);e.put(d,l.to,"k"!==d.type&&"r"!==d.type&&(!f||f.color!==_||"r"!==f.type))}}return l}if(t.from){e.turn(_);t=e.fixMove(t);e.turn(3-_);if(t)return makePremove(e,{san:t,from:t.from})}}function getPieces(e,t){var n,a,l,g=t?{}:[],_=e._board();if(t)for(n=112;n>=0;++n){136&n&&(n-=24);(a=_[n])&&(g[l=m[7&n]+(8-(n>>4))]={type:d[a&c],color:3&a,promoted:(a&f)!=0,square:l})}else for(n=112;n>=0;++n){136&n&&(n-=24);(a=_[n])&&g.push({type:d[a&c],color:3&a,promoted:(a&f)!=0,rank:8-(n>>4),file:(7&n)+1})}return g}function predict(e,t){var n=Math.min(Math.max(.20773843*Math.atan(2.49085889*e/100-2.47841945*t/100)+.02262979*e/100-.02256839*t/100+.52239679,0),1),a=Math.min(Math.max(-.20720905*Math.atan(2.49626837*e/100-2.48220286*t/100)+-.02352551*e/100+.02172627*t/100+.49443923,0),1),l=Math.min(Math.max(Math.exp(.037043456*e/100+.178106427*t/100+-8.069742932)+.004823544*Math.exp(-1.364136591*Math.pow(e/100-t/100,2))+-.001625539,0),1),c=n+a+l;return{w:n/c,b:a/c,d:l/c}}function getPositionDetails(e,t){var n,a,l,c;(e=e||{}).disableHashing=!0;n=createGame(e);if(!n)return null;if(t){l=n.move(t);if(!l)return null;n.extended||normalizeMoveObj(l)}return(c=n.fen(),e.skipValidation||n.isPositionValid(e))?(a=c.split(" "),{fen:c,pieces:getPieces(n),sideToMove:n.turn(),castling:a[2],epSquare:"-"===a[3]?null:a[3],halfMoves:+a[4],moveNumber:+a[5],move:l,hand:n.hand(),checks:n.checks()}):null}function gameFingerprints(e){var n,a,c,d,f,m,g,_,y,b=createGame(e),A=[""],C=[];if(!b)return!1;y=(_=b.header()).Variant||"";m=b.hashes();n="function"==typeof b.origHistory?b.origHistory(!0):b.history(!0);f=m.length;a=[m[0][0],m[0][1]];C.push(t.to64BitHex(a)+y);m[0]=t.to64BitHex(m[0]);for(c=1;c<f;++c){a[0]=(a[0]^m[c][0]*(c+58465))>>>0;a[1]=(a[1]^m[c][1]*(c+984))>>>0;m[c]=t.to64BitHex(m[c]);C.push(t.to64BitHex(a)+y);normalizeMoveObj(n[d=c-1]);g=(n[d].from?n[d].from:n[d].drop.toUpperCase()+"@")+n[d].to+(n[d].promotion||"");d&&(g=A[d]+" "+g);A.push(g)}return{startingFen:_.FEN||l,hashes:m,fingerprints:C,moves:A,variant:_.Variant}}function makeMoves(e,t,n,a){var l,c,d,f,m,g,_,y,b,A,C;n=n||{};"string"==typeof t&&(t=t.trim().split(" "));d=t.length;for(l=0;l<d;l+=1){m="b"===t[l].board||"B"===t[l].board?e.siblingGame:e;g="string"==typeof t[l].moveLan?uciToObj(t[l].moveLan)[0]:"string"==typeof t[l]?uciToObj(t[l])[0]:t[l].san?t[l].san:t[l];if(!m.move(g)){if(n.autoPromote){!0===n.autoPromote?g.promotion="q":g.promotion=n.autoPromote;if(!m.move(g)){if(n.skipBadLines)break;return!1}}else{if(n.skipBadLines)break;return!1}}y=(_=m._history())[_.length-1];a&&(b=parseInt(a[l],10));("number"!=typeof b||isNaN(b))&&(b=parseInt(t[l].time,10));if("number"==typeof b&&!isNaN(b)){y.time=b;b=void 0}t[l].firstComment&&(_.initComment=t[l].firstComment);t[l].comment&&(y.comment=t[l].comment);t[l].annotation&&(y.annotation=t[l].annotation);t[l].additionalAnnotation&&(y.additionalAnnotation=t[l].additionalAnnotation);t[l].commands&&(y.commands=t[l].commands);if(t[l].lines){f=t[l].lines.length;for(c=0;c<f;++c){A=e._history().id;e.createVariation();C=makeMoves(e,t[l].lines[c],n);if(!C&&!n.skipBadLines)return!1;e.selectLine(A)}}}return!0}function playBughouseTCN(e,t,n){var a,l,c,d=[decodeTCN(t[0]),decodeTCN(t[1])],f=[0,0],m=[0,0],g=d[0].length+d[1].length,_=Math.max(0|n[0][0],0|n[0][1],0|n[1][0],0|n[1][1]),y=[0,0],b=[0,0];_+=600-_%600;a=[[_,_],[_,_]];for(;g--;){b[0]=y[0]+a[0][m[0]]-n[0][f[0]]||0;b[1]=y[1]+a[1][m[1]]-n[1][f[1]]||0;d[l=b[0]<=b[1]?0:1][f[l]]||(l^=1);c=l?e.siblingGame:e;if(!c.move(d[l][f[l]])||g&&c.inCheckmate()&&c.undo(!0)){l^=1;c=l?e.siblingGame:e;if(!c.move(d[l][f[l]]))return!1}c._history()[f[l]].time=n[l][f[l]];a[l][m[l]]=n[l][f[l]];y[l]=b[l];m[l]^=1;++f[l]}return!0}function extendChess(e){var t,c,d=-1,f=0;function descendsFromMove(e,t,n){for(var a,l=e[t];"number"==typeof(a=l.parentId);){if(a===n)return l.atMoveNode;l=e[a]}return!1}function swapMoveAttributes(e,t){var n={moveTime:e.moveTime,firstComment:e.firstComment,comment:e.comment,annotation:e.annotation,additionalAnnotation:e.additionalAnnotation,commands:e.commands};Object.keys(n).forEach(function(a){e[a]=t[a];t[a]=n[a]})}if(!e.extended){e.extended=!0;t={header:e.header,load:e.load,loadPgn:e.loadPgn,createVariation:e.createVariation,undo:e.undo,pgn:e.pgn};e._move=e.move;e.undo=function(){return e.siblingGame?e.deleteBughouseMove(e.curBughouseMove()):e.deletePosition(d,f)};e.getMove=function(n){return n&&("string"==typeof n||n.to&&(n.from||n.drop))&&e._move(n)&&normalizeMoveObj(t.undo())||null};e.premove=function(){var t,a=[];return{queue:a,move:function(l){var c;return(c=makePremove(t=t||n(e.fen(),e.header().Variant),l))&&!f&&d===e._history().length-1?(a.push(c),c):(a.length||(t=void 0),null)},consume:function(){var l,c,d,f=a.shift();if(f){l=e.move(f);if(l){t=void 0;c=a.length;if(c){t=n(e.fen(),e.header().Variant);for(d=0;d<c;++d)makePremove(t,a[d])}return l}e.premove.cancel()}},moves:function(n){return!f&&d===e._history().length-1&&getPremoves(t||e,e.header().Variant,n)},getPieces:function(n){return getPieces(t||e,n)},fen:function(){return(t||e).fen()},cancel:function(){a.length=0;t=void 0}}}();e.getPieces=function(t){return getPieces(e,t)};e.material=function(){var t,n,a,l=e.getPieces(),c={imbalance:0,white:{p:8,n:2,b:2,r:2,q:1,count:0},black:{p:8,n:2,b:2,r:2,q:1,count:0}},d={p:1,n:3,b:3,r:5,q:9,k:0};for(t=l.length-1;t>=0;--t){if(1===l[t].color){n=c.white;a=c.black}else{n=c.black;a=c.white}a[l[t].type]&&--a[l[t].type];n.count+=d[l[t].type]}return c.imbalance=c.white.count-c.black.count,c};e.origHistory=e.history;e.history=function(t,n){var a,l,c,d=[],f=e._history(),m=f.length,g=e._lines();"boolean"==typeof t&&(t={verbose:t});t=t||{};n&&(t.noParentLines=n);t.toCurrent&&(m=e.ids().move+1);for(;;){if(-1==--m){if(f.id&&!t.noParentLines){m=f.atMoveNode;f=g[f.parentId];continue}break}if(t.verbose){a={};for(l in f[m])if(f[m][l]&&"object"==typeof f[m][l]){a[l]=f[m][l].constructor===Array?[]:{};for(c in f[m][l])a[l][c]=f[m][l][c]}else a[l]=f[m][l];d.unshift(a)}else d.unshift(f[m].san)}return d};e._getPos=function(n,a,c){var m,g,_;return("number"!=typeof n&&(n=d),"number"!=typeof a&&(a=f),m=(g=e._lines())[a],n>=0)?m[n]:c?m:m.id?m.atMoveNode?g[m.parentId][m.atMoveNode-1]:e._getPos(m.atMoveNode-1,m.parentId):(_={fen:t.header().FEN||l,hash:m.hash,initial:!0,ids:{move:-1,line:0},moveNumber:-1},e.siblingGame&&(_.bughouseOrder=-1),_)};e.move=function(t,n){var a,l,c,m,g=e._history();if(t&&("string"==typeof t||t.to&&(t.from||t.drop))){if(f===g.id&&d<g.length-1||n){if(e.moveForward(n,t))return!0;if(d<g.length-1){e.selectPosition(d+1);e.createVariation();g=e._history()}}e.siblingGame&&(c=e.isDependent?e.siblingGame.fen():e.fen());a=e._move(t);if(a){normalizeMoveObj(a);f=g.id;d=g.length-1;l=g[d];m=e._getPos(d-1);if(e.siblingGame){l.fen=e.isDependent?e.siblingGame.fen():e.fen();l.beforeFen=c;l.siblingIds=e.siblingGame.ids()}else{l.fen=e.fen();l.beforeFen=m.fen}l.moveNumber=m.moveNumber+1;l.previous=m.ids;f&&0===d&&e._lines()[g.parentId][g.atMoveNode].move===l.move&&(l.isContinuation=!0);l.flags=a.flags;l.to=a.to;l.from=a.from;l.drop=a.drop;l.capturedStr=a.captured;l.promotion=a.promotion;l.piece=a.piece;a.promoted&&(l.promoted=!0);a.capturedPromotedPawn&&(l.capturedPromotedPawn=!0);l.ids={move:d,line:f}}}return a};e.moveDetails=function(t){t=t||e._history()[d];if(t){t.lines=t.lines||null;if(t.flags===a.FLAGS.KSIDE_CASTLE){t.rookFrom="Chess960"===e.header().Variant?t.to:"h"+t.to[1];t.rookTo="f"+t.to[1];t.kingTo="g"+t.to[1]}else if(t.flags===a.FLAGS.QSIDE_CASTLE){t.rookFrom="Chess960"===e.header().Variant?t.to:"a"+t.to[1];t.rookTo="d"+t.to[1];t.kingTo="c"+t.to[1]}else t.flags===a.FLAGS.EP_CAPTURE&&(t.epCapture=t.to[0]+t.from[1])}return t};e.header=e.headers=function(n){var a=t.header(n);return e.siblingGame&&extendChess(e.siblingGame),a};e.load=function(n,a,l,c){var m=t.load(n,a,l,c);e.siblingGame&&extendChess(e.siblingGame);if(m&&!l){d=-1;f=0}return m};e.removeEmptyLines=function(){var t,n,a=e._lines();for(t=a.length-1;t>0;--t)if(!a[t].length){a[t]=void 0;n=!0}n&&e.reorderLines()};e.loadPgn=function(n,a,l){var c=t.loadPgn(n,a,l),m=e._history();return e.removeEmptyLines(),d=m.length-1,(f=m.id)&&e.selectLine(0),c};e.ids=function(){return{move:d,line:f}};e.selectLine=function(t){e.selectPosition(null,t)};e.curBughouseMove=function(){return Math.max(e._getPos().bughouseOrder,e.siblingGame._getPos().bughouseOrder)};e.deleteBughouseMove=function(t){var n,a,l,c=e.curBughouseMove(),d=!1,f=e;if(t>=0){c>=t&&e.selectBughouseMove(t-1);for(;;){a=(n=f._history()).length;for(l=0;l<a;++l)if(n[l].bughouseOrder>=t){n.length=l;d=!0;break}if(f===e.siblingGame)break;f=e.siblingGame}}return d};e.selectBughouseMove=function(t){var n,a,l=e.isDependent?e.siblingGame:e,c=l;if(-1===t)return c.selectPosition(-1,0,!0),c.siblingGame.selectPosition(-1,0,!0),l.load(l.header().FEN,"Bughouse",!0,!0);for(;;){n=c._history();for(a=n.length-1;a>=0;--a)if(n[a].bughouseOrder===t){c.selectPosition(n[a].ids.move,0,!0);c.siblingGame.selectPosition(n[a].siblingIds.move,0,!0);return l.load(n[a].fen,"Bughouse",!0,!0)}if(c===l.siblingGame)return!1;c=l.siblingGame}};e.moveBackward=function(t){var n,a,l;if(e.siblingGame)return e.selectBughouseMove(e.curBughouseMove()-1);if(-1===d&&0===f)return!1;if(d>1||0===f)e.selectPosition(d-1);else{n=e._getPos();a=e._getPos(n.previous.move,n.previous.line);for(;a.isContinuation&&!t;){l=e._lines()[a.ids.line];a=e._getPos(l.atMoveNode,l.parentId)}e.selectPosition(a.ids.move,a.ids.line)}return!0};e.moveForward=function(t,n){var a,l,c,m,g,_,y=e._lines();if(e.siblingGame)return e.selectBughouseMove(e.curBughouseMove()+1);a=y[f][d+1];"string"==typeof n&&(n={san:n});if(!a||n&&!isSameMove(n,a)){if(n&&a&&a.lines){g=a.lines.length;for(m=0;m<g;++m){c=y[a.lines[m]][0];if(c&&isSameMove(n,c)){a=c;_=!0;break}}}if(!_&&t){l=y[f][d];if(l&&l.lines){g=l.lines.length;for(m=0;m<g;++m){c=y[l.lines[m]][0];if(c&&c.isContinuation){c=y[l.lines[m]][1];if(c&&(!n||isSameMove(n,c))){a=c;_=!0;break}}}}}if(!_){try{if(n&&n.san&&(n=e.fixMove(n.san))||n&&n.to&&n.from&&Math.abs(n.to.charCodeAt(0)-n.from.charCodeAt(0))>1&&(n=e.fixMove(n)))return e.moveForward(t,n)}catch(e){}return!1}}return e.selectPosition(a.ids.move,a.ids.line)};e.moveVariation=function(t,n){var a,l,c,d=e._lines(),f=d[t];if(f&&f.id){a=d[f.parentId][f.atMoveNode].lines;for(l=a.length-1;l>=0;--l)if(a[l]===t){c=l-(n?1:-1);if(a[c]){a[l]=a[c];a[c]=t;e.reorderLines();return!0}}}return!1};e.promoteVariation=function(t,n){for(var a,l,c,m,g,_,y=e._lines(),b=y[t];b&&b[0]&&b.id&&(-1!==n||b.parentId);){a=y[c=b.parentId];m=b.atMoveNode;b[0].lines=a[m].lines.concat(b[0].lines||[]);a[m].lines=void 0;_=a.length-m;l=a.splice(m,_);for(g=0;g<_;++g){l[g].ids.line=t;l[g].ids.move=g}l.id=t;l.parentId=c;l.atMoveNode=m;l.hash=b.hash;if(0===m){l.initComment=a.initComment;a.initComment=b.initComment}else b.initComment&&(a[m-1].comment=((a[m-1].comment||"")+" "+b.initComment).trim());y[t]=l;_=b.length;for(g=0;g<_;++g){b[g].ids.line=c;b[g].ids.move=g+m;a.push(b[g])}l[0].isContinuation=!!b[0].isContinuation;a[m].isContinuation=!m&&"number"==typeof a.parentId&&y[a.parentId][a.atMoveNode].move===a[0].move;_=a[m].lines.length;for(g=0;g<_;++g){y[a[m].lines[g]].atMoveNode=m;y[a[m].lines[g]][0]&&(y[a[m].lines[g]][0].isContinuation=y[a[m].lines[g]][0].move===a[m].move)}if(f===t){f=c;d+=m}else if(f===c&&d>=m){f=t;d-=m}if(1===n)break;b=y[t=c]}return void 0!==a&&(e._history(y[f]),e.reorderLines(),!d&&y[f][0].isContinuation&&e.selectPosition(y[f].atMoveNode,y[f].parentId),!0)};e.reorderLines=function(t,n){var a,l,d,m,g,_,y,b,A,C,w=e._lines(),k=!1;if(t)A=n.length-1;else{t=0;n=[w[0]];A=0;c=!1}d=(a=w[t]).length;for(l=0;l<d;++l){m=a[l];if(m.ids.line!==A){k=!0;m.ids.line=A}if(m.lines){g=m.lines.length;for(_=0;_<g;++_){b=w[y=m.lines[_]];if(b){b.atMoveNode=l;C=n.length;m.lines[_]=C;b.parentId=A;if(!c&&y===f){c=!0;f=C}n.push(b);k=e.reorderLines(y,n)||k}else{1===m.lines.length?delete m.lines:m.lines.splice(_,1);--_;--g}}}}return t||e.saveLines(n,!0),k};e.createVariation=function(){var n,a,l,c=e._history(),m=e._lines();return d===c.length-1?(n=t.createVariation(),d=(c=e._history()).length-1,f=c.id,n):-1!==d&&(a=[],l=c[d],a.parentId=c.id,a.id=m.length,l.lines||(l.lines=[]),l.lines.push(a.id),a.hash=e._getPos(d-1).hash,a.atMoveNode=d,m.push(a),e.selectPosition(-1,a.id))};e.selectLineEnd=function(t){return e.siblingGame?e.selectBughouseMove(e._history().length+e.siblingGame._history().length-1):("number"!=typeof t&&(t=f),(t!==f||d<e._history().length-1)&&e.selectPosition(null,t,!0))};e.selectLineStart=function(){var t,n;if(e.siblingGame)return e.selectBughouseMove(-1);if(!f)return -1!==d&&e.selectPosition(-1,0);if(d>1||1===d&&!e._getPos(0).isContinuation)t=e._history();else{n=e._getPos(-1);t=e._lines()[n.ids.line]}return e.selectPosition(t.id?t[1]&&t[0].isContinuation?1:0:-1,t.id)};e.selectPosition=function(n,a,l){var c=e._lines(),m=e._history();if("number"==typeof a&&(a!==f||l)){if(a<0||a>=c.length)return!1;m=c[a];if("number"!=typeof n)n=m.length-1;else if(n<-1||n>=m.length)return!1;f=a;e._history(m);l=!0}if("number"==typeof n&&(n!==d||l)){if(n<-1||n>=m.length)return!1;t.load(e._getPos(n).fen,t.header().Variant,!0,!0);d=n}return!0};e.resetToMainLine=function(){var t=e._lines();e.selectLineEnd(0);if(t.length>1){t.length=1;e.reorderLines()}};e.updateNode=function(t,n,a){var l,c,m=e._lines();a="number"==typeof a?a:f;n="number"==typeof n?n:d;l=m[a][n]||m[a];for(c in t)l[c]=t[c]};e.updateLineComment=function(t,n){e.updateNode({initComment:t},-1,n)};e.saveLines=function(t,n){var a,l,c,d=e._lines(),f=t.length;t!==d&&(d.length=0);for(l=0;l<f;++l){a=t[l];if(l&&"number"!=typeof a.parentId)return!1;t!==d&&d.push(a);a.id=l}e._history(e._history());if(!n){c=e.ids();e.selectPosition(-1,0,!0);e.selectPosition(c.move,c.line)}return!0};e.deletePosition=function(t,n){var a,l,c=e._lines();if(!c[n]||!c[n][t]&&(-1!==t||0===n))return!1;n&&(0===t?t=-1:1===t&&c[n][0].isContinuation&&(t=-1));l=f>0&&n!==f?!1!==(a=descendsFromMove(c,f,n))&&a>=t:n===f&&t<=d;if(l){if(t>1)e.selectPosition(t-1,n);else{e.selectPosition((c[n][0].isContinuation||1===t)&&c[n][1]?1:0,n);e.moveBackward()}}return t>0?c[n].length=t:n?c[n]=null:c[0].length=0,e.reorderLines(),e.ids()};e.mark=function(t,n,a,l){var c=e._getPos(a,l,!0),d=t.type,f=1;t.color&&("arrow"===d?e.mark({key:t.color+t.key,type:"cal"},n,a,l):"square"===d&&e.mark({key:t.color+t.key,type:"csl"},n,a,l));if("cal"!==d&&"csl"!==d){d="c_"+d;f=0}if(c.commands&&c.commands[d]){c.commands[d]=c.commands[d].split(",").filter(function rm(e){return e.slice(f).split(";")[0]!==t.key.slice(f)}).join(",");c.commands[d]||delete c.commands[d]}if(!n){c.commands||(c.commands={});c.commands[d]=(c.commands[d]?c.commands[d]+",":"")+t.key+(t.data?";"+t.data.join(";"):"")}};e.markings=function(t,n){var a,l,c,d,f,m,g,_,y={},b=e._getPos(t,n,!0),A={cal:"arrow",csl:"square"};for(l in b.commands){c=b.commands[l];if(A[l]){l=A[l];d=0}else{if("c_"!==l.substr(0,2))continue;l=l.slice(2);d=1}y[l]=y[l]||{};m=(f=c.split(",")).length;for(a=0;a<m;++a)if(d){_=(g=f[a].split(";")).shift();y[l][_]=y[l][_]||{type:l,key:_};y[l][_].data=g}else{_=f[a].slice(1);y[l][_]=y[l][_]||{type:l,key:_};y[l][_].color=f[a][0]}}return y};e.clearMarkings=function(t,n){var a,l=e._getPos(t,n,!0);for(a in l.commands)/^c[sa]l$|^c_/.test(a)&&delete l.commands[a]};e.pgn=function(n){var a,l=e.ids();return e.selectLineEnd(0),a=t.pgn(n),e.selectPosition(l.move,l.line),a};e.loadMoves=function(t,n){var a,l,c,m,g;n=n||{};"string"==typeof t&&(t=decodeTCN(t));if(t){n.atCurrent||e.selectPosition(-1,0);c=f;l=t.length;for(a=0;a<l;++a){m=e.move(t[a],!0);if(!m){t[a].promotion=!0===n.autoPromote?"q":n.autoPromote;m=e.move(t[a],!0);if(!m)return!1}if(f!==c&&"merge"!==n.method){e.promoteVariation(f,1);if("promote"!==n.method){e._history()[d].lines=void 0;e.reorderLines()}c=f}}if("promote"===n.method){if(l){if(e._history()[d+1]){m=e._history()[d];e.createVariation();e.move(m);swapMoveAttributes(e._history()[0],m);e.promoteVariation(f,1)}g=e._lines();for(a=g.length-1;a>=0;--a)if(1===g[a].length&&g[a][0].isContinuation){swapMoveAttributes(g[a][0],g[g[a].parentId][g[a].atMoveNode]);g[a].length=0}e.removeEmptyLines()}}else"merge"!==n.method&&e.deletePosition(d+1,f)}return!0}}}function createGame(e){var t,a;e=e||{};if(e.game)return e.game;t=n();e.analysis&&extendChess(t);e.disableHashing&&t.hashing(!1);if(e.pgn){if(!t.loadPgn(e.pgn,e.index,e.options)&&("detect"!==e.variant||!n.variants.some(function(n){return e.options=e.options||{},e.options.variant=n,t.loadPgn(e.pgn,e.index,e.options)})))return!1}else{if(e.headers){e.variant=e.headers.Variant||e.variant;e.fen||(e.fen=e.headers.FEN)}"detect"===e.variant&&e.fen&&(e.fen.indexOf("|")>-1?e.variant="Bughouse":9===e.fen.split("/").length?e.variant="Crazyhouse":e.fen.indexOf("+")>-1?e.variant="3-check":e.variant=void 0);if((e.fen||e.variant)&&!t.load(e.fen||l,e.variant))return!1;e.headers&&"object"==typeof e.headers&&!Array.isArray(e.headers)&&t.header(e.headers)}if(e.tcn){if("object"==typeof e.tcn){if(!playBughouseTCN(t,e.tcn,e.timestamps||[[],[]]))return!1}else a=decodeTCN(e.tcn)}else a=e.moves;return(!a||!!makeMoves(t,a,e,e.timestamps))&&t}function generatePgn(e){var t;return(e=e||{}).disableHashing=!0,!!(t=createGame(e))&&t.pgn(e)}function pgnToFen(e,t){var n,l,c=[];a.reset();if(!a.loadPgn(e))return!1;n=a.moveCount();if("number"==typeof t){t<0&&(t=n+t+1);for(l=n-1;l>=t&&l>=0;l-=1)a.undo();return a.fen()}for(l=0;l<=n;l+=1){c.unshift(a.fen());a.undo()}return c}function normalizeMoveObj(e){if(e){e.piece&f&&(e.promoted=!0);e.piece=d[e.piece&c];if(e.captured){e.captured&f&&(e.capturedPromotedPawn=!0);e.captured=d[255&e.captured]}e.promotion&&(e.promotion=d[e.promotion&c]);void 0!==e.drop&&(e.drop="pnbrq"[e.drop])}return e}function normalizeHistory(e){var t,n,a,l,c,d,f,m=e.history(!0,!0);if(e.siblingGame){t=e.siblingGame.history(!0,!0);a=m.length+t.length;n=[];for(l=0;l<a;++l){!m.length||t.length&&t[0].bughouseOrder<m[0].bughouseOrder?(c=t.shift()).board="b":(c=m.shift()).board="a";n.push(c)}m=n}a=m.length;for(l=0;l<a;++l){(d=m[l]).fen||normalizeMoveObj(d);if(d.lines)for(f=d.lines.length-1;f>=0;--f){e.selectLine(d.lines[f]);d.lines[f]=normalizeHistory(e).moves}}return{moves:m}}function pgnToJson(e,t,n){var l,c=[],d=a;if("number"!=typeof t){n=t;t=void 0}return l=d.tokenizePgn(e,n),t<0&&(t=l.length+t),!!l&&((n&&n.includeFen&&(d=createGame({analysis:!0})),l.forEach(function(e,a){void 0===t||a===t?d.loadPgn([e],0,n)?c.push({headers:d.header(),moves:normalizeHistory(d).moves}):c.push(!1):c.push(void 0)}),"number"==typeof t)?c[t]:c)}function sanToObj(e,t,n){return a.reset(),!!a.load(t,n)&&normalizeMoveObj(a.move(e))}function shortenFen(e,t){return a.completeFen(e).split(" ").slice(0,t||4).join(" ")}function getFenFromMoves(e,t,n){return a.reset(),a.load(e,n),(!t||!!makeMoves(a,t))&&a.fen()}function getLegalMoves(e,t){var n,l,c,d;if("string"==typeof e){(l=a).reset();if(!l.load(e,t))return null}else l=createGame(e);d=(n=l.moves({verbose:!0})).length;for(c=0;c<d;++c)normalizeMoveObj(n[c]);return n}function getPositionInfo(e,t,n){var l,c,d={gameOver:!1,check:!1,checkmate:!1,draw:!1,stalemate:!1,threefold:!1,insufficient:!1};if(!Array.isArray(t)){n=t;t=null}if("boolean"==typeof n){l=n;n={}}else l=(n=n||{}).variant;if("string"==typeof e){(c=a).reset();if(0!==c.validateFen(e,l)||!c.load(e,l))return!1}else c=createGame(e);if(t&&!makeMoves(c,t))return!1;n.getLegalMoves&&(d.legalMoves=getLegalMoves({game:c}));if(c.inCheck()){d.check=!0;d.checkmate=c.inCheckmate()}else d.stalemate=c.inStalemate();d.threefold=c.inThreefoldRepetition();d.insufficient=c.insufficientMaterial(n.color);d.fiftyMoveRule=c.in50MoveRule();d.draw=d.stalemate||d.threefold||d.insufficient||d.fiftyMoveRule||c.inDraw();n.skipValidation||(d.isValid=c.isPositionValid(n));if(l){d.variantWin=c.isVariantWin();void 0===d.variantWin&&(d.variantWin=c.isBughouseWin())}return d.gameOver=d.checkmate||d.draw||!!d.variantWin,d}function isFenValid(e,t){return 0===a.validateFen(e,t)}function loadECO(e,n){t.loadBook(e,function onload(e,a){if(!a||!a.json)return n(e||Error("Invalid book"));n(e,function queryECO(e){var n,l,c,d,f,m,g,_,y;if(e.hash){l="string"==typeof e.hash?[t.hex64ToDec(e.hash)]:[e.hash];d=1}else{n=createGame(e);if(!n)return!1;d=(l=n.hashes()).length}for(c=0;c<d;++c){f=a.json[t.to64BitHex(l[c])];if(f){if(f.constructor===Array){if(m&&-1===f[0].m.indexOf(m.m)){for(_=f.length-1;_>=0;--_)if(!_||-1!==f[_].m.indexOf(m.m)){(y=f[_]).e=f[0].e;y.s=f[0].s;y.mate=f[0].mate;y.v=f[0].v;y.h=f[0].h;y.n=y.n||f[0].n;y.u=y.u||f[0].u;y.c=y.c||f[0].c;break}}else y=f[0]}else y=f;(y.n||e.allowNameless)&&(m=y)}else e.mustEndInBook&&(m=void 0)}if(m){g={name:m.n};m.m&&(g.moves=m.m);void 0!==m.d&&(g.sdiff=m.d/100);if(m.c){g.code=m.c;g.url=m.u||m.n.replace(/[\u00e1-\u00e5]/g,"a").replace(/[\u0107\u010d]/g,"c").replace(/[\u00e9\u00e8\u0117\u0113]/g,"e").replace(/[\u00f3\u00f6\u00f8]/g,"o").replace(/[\u016f\u00fc]/g,"u").replace(/['+,]/g,"").replace(/[^a-z0-9.]+/ig,"-").replace(/(with-\d|St)\.+-?/,"$1-")}if(m.e){g.eval=m.e;g.depth=m.h;g.score=m.e[0].cp/100;void 0!==m.e[0].mate&&(g.mate=m.e[0].mate)}else{g.score=m.s/100;void 0!==m.mate&&(g.mate=m.mate)}return m.v&&(g.bad=!0),g}},a.json)})}function jce(t,n){return(e=e||ENGINE_MANAGER(jce))(t,n)}return jce.supportsMultithreading=function(){var e,t=!!jce._hasThreads;if("boolean"!=typeof jce._hasThreads){try{(e=new Worker("data:application/javascript,")).postMessage(new SharedArrayBuffer(1));t=!0}catch(e){}try{e.terminate()}catch(e){}jce._hasThreads=t}return t},jce.supportsSIMD=function(){return"boolean"==typeof jce._hasSIMD?jce._hasSIMD:jce._hasSIMD=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))},jce.gameFingerprints=gameFingerprints,jce.getFenFromMoves=getFenFromMoves,jce.getLegalMoves=getLegalMoves,jce.getPositionInfo=getPositionInfo,jce.isFenValid=isFenValid,jce.encodeTCN=encodeTCN,jce.decodeTCN=decodeTCN,jce.uciToObj=uciToObj,jce.generatePgn=generatePgn,jce.pgnToFen=pgnToFen,jce.pgnToJson=pgnToJson,jce.sanToObj=sanToObj,jce.completeFen=a.completeFen,jce.shortenFen=shortenFen,jce.createGame=createGame,jce.getPositionDetails=getPositionDetails,jce.predict=predict,jce.normalizeMoveObj=normalizeMoveObj,jce.FLAGS=a.FLAGS,jce.loadECO=loadECO,jce.CEE_LIB=function(){var e={};return e.addOptions=function(e,t){for(var n in t)void 0!==t[n]&&e.push("setoption name "+n+" value "+t[n]);return e},e.addVariations=function(e,t,n){t=t||[];n=n||"variation";for(var a,l,c=0;c<t.length;++c){l=n+" "+(Array.isArray((a=t[c]).pv)?a.pv.join(" "):a.pv||"");"number"==typeof a.mateIn?l+=" mate "+a.mateIn:"number"==typeof a.mate?l+=" mate "+a.mate:l+=" cp "+Math.round(a.cp);"number"==typeof a.depth&&(l+=" depth "+a.depth);e.push(l)}return e},e.addPush=function(e,t){var n;return"string"==typeof t&&(t={moveLan:t}),n="push "+t.moveLan,t.isBook&&(n+=" isBook"),t.isRetry&&(n+=" isRetry"),e.push(n),e},e.addPosition=function(e,t){return e.push("position fen "+t),e},e.addClock=function(e,t){return t&&e.push("clock "+t),e},e.addVariant=function(e,t){if("chess960"===String(t).toLowerCase().replace(/ |-/g,"")){e.push("setoption name UCI_Variant value chess");e.push("setoption name UCI_Chess960 value true")}else{e.push("setoption name UCI_Variant value chess");e.push("setoption name UCI_Chess960 value false")}return e},e}(),jce}();e.exports=a}()}(l);var c=l.exports;let d=(0,a.g)(c)},17949:function(e,t,n){"use strict";n.d(t,{X:function(){return isType}});function isType(e){return function markingIsType(t){return t.type===e}}},7948:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var a=(e=>(e.Alt="alt",e.Ctrl="ctrl",e.None="none",e.Shift="shift",e))(a||{})},90992:function(e,t,n){"use strict";n.d(t,{U:function(){return isPromotion}});var a=n(17084);function isPromotion(e){return e.flags===a.Z.Move.Flags.Promotion||e.flags===a.Z.Move.Flags.CapturePromotion}},80606:function(e,t,n){"use strict";n.d(t,{t:function(){return getIdsToDelete}});var a=n(9482);function getIdsToDelete(e){return(0,a.L)(e)?{line:e.ids.line,move:e.ids.move+1}:{line:0,move:0}}},69953:function(e,t,n){"use strict";n.d(t,{v:function(){return isRightButton}});var a=n(64299);function isRightButton(e){return!(0,a.k)(e)&&3===e.which}},77457:function(e,t,n){"use strict";n.d(t,{N:function(){return createCollection}});function createCollection(e={}){let t=e;return{deleteItem:function deleteItem(e){delete t[e]},get:function get(e){if(void 0!==t[e])return t[e];throw Error(`Requested object at key ${e} is undefined.`)},getCollection:function getCollection(){return t},isDefined:function isDefined(e){return void 0!==t[e]},keys:function keys(){return Object.keys(t)},set:function set(e,n){t[e]=n}}}},73696:function(e,t,n){"use strict";n.d(t,{f:function(){return transformThemeToDefaultAssets}});var a=n(79972);let l={board:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABLAAAASwAQMAAADR7yGMAAAABlBMVEV2llbu7tLDYEXtAAADBUlEQVR4Ae3cQQ2FABBDwU0QgCSsIwkBJPsF9Pq5NPMENKOgs9E70bnRPdEfp7CwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsDIsLCwsLCwsLCwsLCwsLCwsLCwsLKwMCwsLCwsLCwsLCwsLCwsLCwsLCwsry46NnomujT6dwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCyrCwsLCwsLCwsLCwsLCwsLCwsLCwsCIsLCwsLCwsLCwsLCwsLCwsLCwsLKymn2YsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLKyqn2YsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCw/zVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRSwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLKymn2YsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLKymn2YsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLKymn2YsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLKwf7yJE8wq7ySwAAAAASUVORK5CYII="};var c=n(72254);let d={config:{perspective:c.b.Perspective.TOP_DOWN},board:{assets:{background:l.board},config:{highlightSquareHex:"#ffff00",darkSquareCoordinateHex:"#edeed1",lightSquareCoordinateHex:"#779952"}},pieces:{assets:a.A},sound:{assets:{capture:{webm:"https://www.chess.com/sounds/_WEBM_/default/capture.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/capture.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/capture.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/capture.wav"},castle:{webm:"https://www.chess.com/sounds/_WEBM_/default/castle.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/castle.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/castle.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/castle.wav"},gameEnd:{webm:"https://www.chess.com/sounds/_WEBM_/default/game-end.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/game-end.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/game-end.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/game-end.wav"},gameStart:{webm:"https://www.chess.com/sounds/_WEBM_/default/game-start.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/game-start.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/game-start.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/game-start.wav"},illegal:{webm:"https://www.chess.com/sounds/_WEBM_/default/illegal.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/illegal.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/illegal.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/illegal.wav"},moveCheck:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-check.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-check.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-check.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-check.wav"},moveOpponent:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-opponent.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-opponent.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-opponent.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-opponent.wav"},moveSelf:{webm:"https://www.chess.com/sounds/_WEBM_/default/move-self.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/move-self.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/move-self.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/move-self.wav"},notify:{webm:"https://www.chess.com/sounds/_WEBM_/default/notify.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/notify.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/notify.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/notify.wav"},premove:{webm:"https://www.chess.com/sounds/_WEBM_/default/premove.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/premove.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/premove.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/premove.wav"},promote:{webm:"https://www.chess.com/sounds/_WEBM_/default/promote.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/promote.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/promote.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/promote.wav"},tenSeconds:{webm:"https://www.chess.com/sounds/_WEBM_/default/tenseconds.webm",mp3:"https://www.chess.com/sounds/_MP3_/default/tenseconds.mp3",ogg:"https://www.chess.com/sounds/_OGG_/default/tenseconds.ogg",wav:"https://www.chess.com/sounds/_WAV_/default/tenseconds.wav"}}}};function transformThemeToDefaultAssets(e){return{...e,board:{assets:{background:l.board},config:{highlightSquareHex:d.board.config.highlightSquareHex,lightSquareCoordinateHex:d.board.config.lightSquareCoordinateHex,darkSquareCoordinateHex:d.board.config.darkSquareCoordinateHex}},pieces:{assets:a.A},config:{perspective:c.b.Perspective.TOP_DOWN}}}},11197:function(e,t,n){"use strict";n.d(t,{A:function(){return createSoundsPlugin}});var a=n(32831),l=n(17229),c=n(77751),d=n(91664);let{loadSound:f}=l._w;function getLegacyThemeUrl({theme:e="default",type:t,format:n,themePath:a}){var l,d;let f=a||(null==(d=null==(l=(0,c.q)())?void 0:l.assetPaths)?void 0:d.soundsTheme);return`${f}_${n.toUpperCase()}_/${e}/${t}.${n}`}function getLegacyThemeUrls(e,t,n){return["webm","ogg","mp3","wav"].map(a=>getLegacyThemeUrl({format:a,theme:e,type:t,themePath:n}))}function getExtraSoundUrls(e,t){return["webm","ogg","mp3","wav"].map(n=>`${e}/${n}/${t}.${n}`)}function orderSoundAssetFormats(e){return["webm","ogg","mp3","wav"].reduce((t,n)=>(e[n]&&t.push(e[n]),t),[])}function buildSoundsFromSoundAssets(e){return{[d.t.BoardSounds.GameStart]:f(orderSoundAssetFormats(e.gameStart)),[d.t.BoardSounds.GameEnd]:f(orderSoundAssetFormats(e.gameEnd)),[d.t.BoardSounds.Capture]:f(orderSoundAssetFormats(e.capture)),[d.t.BoardSounds.Castle]:f(orderSoundAssetFormats(e.castle)),[d.t.BoardSounds.Premove]:f(orderSoundAssetFormats(e.premove)),[d.t.BoardSounds.MoveSelf]:f(orderSoundAssetFormats(e.moveSelf)),[d.t.BoardSounds.MoveCheck]:f(orderSoundAssetFormats(e.moveCheck)),[d.t.BoardSounds.MoveOpponent]:f(orderSoundAssetFormats(e.moveOpponent)),[d.t.BoardSounds.Promote]:f(orderSoundAssetFormats(e.promote)),[d.t.BoardSounds.Notify]:f(orderSoundAssetFormats(e.notify)),[d.t.BoardSounds.TenSeconds]:f(orderSoundAssetFormats(e.tenSeconds)),[d.t.BoardSounds.Illegal]:f(orderSoundAssetFormats(e.illegal))}}let{loadSound:m,playSound:g,enableSound:_}=l._w,y=[d.t.BoardSounds.GameStart,d.t.BoardSounds.GameEnd,d.t.BoardSounds.Capture,d.t.BoardSounds.Castle,d.t.BoardSounds.Premove,d.t.BoardSounds.MoveSelf,d.t.BoardSounds.MoveCheck,d.t.BoardSounds.MoveOpponent,d.t.BoardSounds.Promote,d.t.BoardSounds.Notify,d.t.BoardSounds.TenSeconds,d.t.BoardSounds.Illegal];function createSounds(e){let t;let n=e.options,a=y,l=(null==n?void 0:n.soundTheme)||"default";e&&(a=e.codes);let c=l;load({codes:a,theme:l,soundAssets:null==e?void 0:e.soundAssets});return{destroy,getSounds,getTheme,load,loadExtra,play};function destroy(){Object.keys(t).forEach(e=>{t[e].unload()})}function getSounds(){return t}function getTheme(){return c}function load(e){c=e.theme;t=e.soundAssets?buildSoundsFromSoundAssets(e.soundAssets):(e.codes||y).reduce((e,t)=>{var a;return e[t]=m(getLegacyThemeUrls(c,t,null==(a=n.assetPaths)?void 0:a.soundsTheme)),e},{});_()}function loadExtra(e){let n=e.codes.reduce((t,n)=>(t[n]=m(getExtraSoundUrls(e.baseURL,n)),t),{});Object.keys(n).forEach(e=>{var a;null==(a=t[e])||a.unload();t[e]=n[e]});_()}function play(e){let n=t[e],a=getTheme();if(!n)return a;try{g(n);return a}catch(e){return a}}}var b=n(62541),A=n(4062);function isCheck(e){return!!e&&!!e.san&&["+","#"].includes(e.san.slice(-1))}var C=n(90992);function getSoundType(e,t){return e&&e.san?isCheck(e)?d.t.BoardSounds.MoveCheck:e.isPremove?d.t.BoardSounds.Premove:(0,C.U)(e)?d.t.BoardSounds.Promote:(0,b.B)(e)?d.t.BoardSounds.Capture:(0,A.p)(e)?d.t.BoardSounds.Castle:t?d.t.BoardSounds.MoveOpponent:d.t.BoardSounds.MoveSelf:null}function isNot(e){return function isType(t){return e!==t.type}}var w=n(40378);function createSoundsPlugin(e){let t,n=e;return{api:()=>({getSoundsInstance:()=>n}),match:[{condition:isNot(a.i.UserEvents.Pointermove),handler:runPlaySoundPlugin}],name:d.t.Plugin.Name,create};function create(e){var a;t=null==(a=e.options.themeAssets)?void 0:a.sound.assets;n||(n=createSounds({options:e.options,soundAssets:t}))}function runPlaySoundPlugin(e,l){var c,d,f;if(!n)return;let{api:m,options:g,state:_}=l,y=g.soundTheme!==n.getTheme()||!(0,w.A)(t,null==(c=l.options.themeAssets)?void 0:c.sound.assets);t=null==(d=l.options.themeAssets)?void 0:d.sound.assets;if(e.type===a.i.OptionsEvents.Update&&y){n.destroy();n.load({theme:g.soundTheme,soundAssets:t});return}if(e.type===a.i.SoundEvents.Play){n.play(e.data.sound);_.set({soundPlayed:e.data.sound});return}if(!g.playSounds||!(null==(f=e.data)?void 0:f.plyDiff))return;let b=m.getSelectedNode();e.type===a.i.APIEvents.MoveBackward&&(b=e.data.move);if(!b)return;let A=m.getPlayingAs(),C=!!(A&&A!==b.color),k=getSoundType(b,C);if(k){n.play(k);_.set({soundPlayed:k})}}}},94521:function(e,t,n){"use strict";var a;n.d(t,{Y:function(){return a}});(e=>{(e=>{e.Default="staunton_executive";e.Trigger="real3d"})(e.PieceStyles||(e.PieceStyles={}));(e=>{e.CameraSettings="cameraSettings"})(e.CacheKeys||(e.CacheKeys={}));(e=>{e.Board="board-webgl-3d";e.PieceDrag="piece-dragging";e.PieceHover="piece-hover";e.PromotionWindow="promotion-window-3d";e.StatisticsPanel="statistics-panel"})(e.CssClasses||(e.CssClasses={}));(e=>{e[e.AnalysisOverlay=1]="AnalysisOverlay";e[e.NotationPlane=2]="NotationPlane";e[e.OverSquare=3]="OverSquare";e[e.HighligtedSquare=4]="HighligtedSquare";e[e.Hint=5]="Hint";e[e.CustomItem=6]="CustomItem";e[e.PieceShadow=7]="PieceShadow";e[e.Arrow=8]="Arrow";e[e.Effect=9]="Effect";e[e.Highest=10]="Highest"})(e.ObjectsRenderOrder||(e.ObjectsRenderOrder={}));(e=>{e[e.PositionY=.005]="PositionY"})(e.Arrow||(e.Arrow={}));(e=>{e[e.PositionY=.005]="PositionY"})(e.CustomItem||(e.CustomItem={}));(e=>{e[e.PositionY=.005]="PositionY"})(e.Effect||(e.Effect={}));(e=>{e[e.Size=10]="Size";e[e.HalfSize=5]="HalfSize";e[e.BorderSize=.5]="BorderSize";e[e.OverBorderSize=.5]="OverBorderSize";e[e.VisibleY=.005]="VisibleY";e[e.InvisibleY=-.2]="InvisibleY";e[e.InsideTolerance=.01]="InsideTolerance"})(e.Square||(e.Square={}));(e=>{e[e.MarginSize=4]="MarginSize";e[e.Size=88]="Size"})(e.Board||(e.Board={}));(e=>{e[e.Distance=140]="Distance";e[e.DistanceMin=50]="DistanceMin";e[e.DistanceMax=500]="DistanceMax";e[e.PanAngle=0]="PanAngle";e[e.TiltAngle=100]="TiltAngle";e[e.HorizontalPanning=0]="HorizontalPanning";e[e.VerticalPanning=-12]="VerticalPanning";e[e.ZoomIncrement=5]="ZoomIncrement"})(e.Camera||(e.Camera={}))})(a||(a={}))},91548:function(e,t,n){"use strict";n.d(t,{O:function(){return getColorAsWord}});var a=n(17084);function getColorAsWord(e){return e===a.Z.ColorsAsNumbers.Black?a.Z.ColorsAsWords.Black:a.Z.ColorsAsWords.White}},68364:function(e,t,n){"use strict";n.d(t,{E:function(){return isOneOf}});function isOneOf(e){let t=new Set(Array.isArray(e)?e:Object.values(e));return function isType(e){return t.has(e.type)}}},7170:function(e,t,n){"use strict";var a;n.d(t,{V:function(){return a}});(e=>{(e=>{e.Ready="Ready";e.Updated="Updated"})(e.Events||(e.Events={}));e.Name="move-list"})(a||(a={}))},33376:function(e,t,n){"use strict";n.r(t);n.d(t,{create:function(){return c}});var a=n(78048),l=n(34592);function base(){return{isAllowedToMove,name:l.d.Types.PassiveObserving};function isAllowedToMove(){return!1}}let c=(0,a.k)(base,{canAddMovesToMainLine:{default:!1,editable:!1},canInteractWithPieces:{default:!1,editable:!1},canModifyExistingMovesOnMainLine:{default:!1,editable:!1}})},89226:function(e,t,n){"use strict";n.d(t,{A:function(){return createAnalysisOverlayPlugin}});(e=>{(e=>{e.Name="analysis-overlay"})(e.Plugin||(e.Plugin={}))})(a||(a={}));var a,l=n(32831),c=n(68364);function createAnalysisOverlayPlugin(){let e;return{destroy,match:[{condition:(0,c.E)([l.i.APIEvents.Load,l.i.OptionsEvents.Update,l.i.InstanceEvents.ModeChanged,l.i.InstanceEvents.RendererSet]),handler:updateAnalysisOverlay}],name:a.Plugin.Name};function destroy(){null==e||e.removeAnalysisOverlay()}function updateAnalysisOverlay(t,n){let{options:a,renderer:l}=n;!e&&l&&(e=l);a.overlayInAnalysisMode?null==e||e.addAnalysisOverlay():null==e||e.removeAnalysisOverlay()}}},57322:function(e,t,n){"use strict";n.d(t,{Hk:function(){return a},TK:function(){return c},Vq:function(){return l},dn:function(){return getLegacyThemeValues}});let a=["wp","wn","wb","wr","wq","wk","bp","bn","bb","br","bq","bk"],l={"8_bit":["#6a9b41","#f3f3f4","8_bit",".png","#ffff00"],bases:["#c26b38","#efcca1","bases",".jpg","#f5cc2a"],blackwhite:["#667188","#282f3f","translucent",".png","#5b91b3"],blue:["#4D6D92","#ECECD7","blue",".png","#00a5ff"],brown:["#B58863","#F0D9B5","brown",".png","#ffff00"],bubblegum:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],burled_wood:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],checkers:["#e3a6a9","#999999","checkers",".jpg","#fae18a"],dark_wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],dash:["#6b3a27","#bd9257","dash",".jpg","#eca722"],default:["#779952","#edeed1","green",".png","#ffff00"],glass:["#282f3f","#667188","glass",".png","#5b91b3"],graffiti:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],green:["#779952","#edeed1","green",".png","#ffff00"],grey:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],icy_sea:["#7a9db2","#c5d5dc","icy_sea",".jpg","#5ed7f1"],light:["#aaaaaa","#dcdcdc","light",".png","#a4b8c4"],lolz:["#909898","#e0e9e9","lolz",".jpg","#a3becd"],marble:["#706b66","#c7bdaa","marble",".jpg","#f0db86"],marbleblue:["#c2d7e2","#efefef","marbleblue",".jpg","#65daf7"],marblebrown:["#b96f18","#aeaeae","graffiti",".jpg","#f39011"],marblegreen:["#706b66","#c7bdaa","marblegreen",".jpg","#f0db86"],metal:["#6e6e6e","#c9c9c9","metal",".jpg","#a3becd"],natural:["#D08B18","#FCE4B2","tan",".png","#f0e464"],nature:["#8c976e","#c3d1a4","translucent",".png","#eef396"],neon:["#636363","#b9b9b9","neon",".png","#6d90a6"],newspaper:["#5a5956","#5a5956","newspaper",".jpg","#99976e"],orange:["#D08B18","#FCE4B2","orange",".png","#ffff00"],overlay:["#789ebd","#4878a0","overlay",".png","#0d9acf"],parchment:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],pink:["#f9cdd3","#fff3f3","bubblegum",".png","#de5d6f"],purple:["#8877B7","#EFEFEF","purple",".png","#7dacc9"],red:["#BA5546","#F0D8BF","red",".png","#f8f893"],sand:["#b8a590","#e5d3c4","sand",".jpg","#e2bc87"],sky:["#c2d7e2","#efefef","sky",".png","#65daf7"],stone:["#666463","#c8c3bd","stone",".jpg","#36525f"],tan:["#D08B18","#FCE4B2","tan",".png","#f7d84a"],tournament:["#316549","#ebece8","tournament",".jpg","#a4c25b"],translucent:["#667188","#282f3f","translucent",".png","#5b91b3"],walnut:["#835f42","#c0a684","walnut",".jpg","#d1a52d"],winboard:["#316549","#ebece8","tournament",".jpg","#a4c25b"],wood:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],wooddark:["#895132","#d9b088","burled_wood",".jpg","#ee9016"],woodlight:["#B58863","#F0D9B5","parchment",".jpg","#d8cc66"],woodmid:["#8d675e","#e7cdb2","dark_wood",".jpg","#cc9122"],woodolive:["#6e6e6e","#c9c9c9","woodolive",".jpg","#a3becd"]},c={"3d_staunton":{format:"png",isPseudo3d:!0,path:"3d_staunton"},"3dchesskid":{format:"png",isPseudo3d:!0,path:"3d_chesskid"},"3dplastic":{format:"png",isPseudo3d:!0,path:"3d_plastic"},"3dwood":{format:"png",isPseudo3d:!0,path:"3d_wood"},"8_bit":{format:"png",path:"8_bit"},alpha:{format:"png",path:"alpha"},bases:{format:"png",path:"bases"},blindfold:{format:"png",path:"blindfold"},book:{format:"png",path:"book"},bubblegum:{format:"png",path:"bubblegum"},cases:{format:"png",path:"cases"},classic:{format:"png",path:"classic"},club:{format:"png",path:"club"},condal:{format:"png",path:"condal"},dash:{format:"png",path:"dash"},game_room:{format:"png",path:"game_room"},glass:{format:"png",path:"glass"},gothic:{format:"png",path:"gothic"},graffiti:{format:"png",path:"graffiti"},icy_sea:{format:"png",path:"icy_sea"},light:{format:"png",path:"light"},lolz:{format:"png",path:"lolz"},luca:{format:"png",path:"luca"},marble:{format:"png",path:"marble"},maya:{format:"png",path:"maya"},metal:{format:"png",path:"metal"},modern2:{format:"png",path:"modern"},nature:{format:"png",path:"nature"},neo:{format:"png",path:"neo"},neo_wood:{format:"png",path:"neo_wood"},neon:{format:"png",path:"neon"},newspaper:{format:"png",path:"newspaper"},ocean:{format:"png",path:"ocean"},real3d:{format:"png",path:"neo"},sky:{format:"png",path:"sky"},space:{format:"png",path:"space"},tigers:{format:"png",path:"tigers"},tournament:{format:"png",path:"tournament"},vintage:{format:"png",path:"vintage"},wood:{format:"png",path:"wood"}};function getLegacyThemeValues(e){let t=l[e];if(!t)return null;let[n,a,c,d,f]=t;return{darkSquareColor:n,lightSquareColor:a,path:c,extension:d,highlightColor:f}}},97211:function(e,t,n){"use strict";var a;n.d(t,{_:function(){return a}});(e=>{e.Name="eco";(e=>{e.Update="UpdateECO";e.DBInitialized="DBInitialized"})(e.Events||(e.Events={}));(e=>{(e=>{e.StartingPosition="A00"})(e.Codes||(e.Codes={}));e.InitialFen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"})(e.Config||(e.Config={}))})(a||(a={}))},27112:function(e,t,n){"use strict";var a;n.d(t,{b:function(){return a}});(e=>{class t extends Error{}e.StylesSetFailed=t;(e=>{(e=>{e.Arcade="arcade";e.Default="default";e.Fast="fast";e.Natural="natural";e.None="none";e.Slow="slow"})(e.Types||(e.Types={}));(e=>{e[e.Default=180]="Default";e[e.Fast=100]="Fast";e[e.Slow=500]="Slow"})(e.Speeds||(e.Speeds={}))})(e.Animation||(e.Animation={}));(e=>{e.Selected="#ffff00";e.Blue="#52b0dc";e.Green="#acce59";e.Orange="#ffaa00";e.Red="#eb6150"})(e.HighlightColors||(e.HighlightColors={}));(e=>{e.Analysis="analysis";e.Move="move";e.Selected="selected"})(e.HighlightTypes||(e.HighlightTypes={}));(e=>{e.Blue="rgba(72, 193, 249, 0.8)";e.Green="rgba(159, 207, 63, 0.8)";e.Orange="rgba(255, 170, 0, 0.8)";e.Red="rgba(248, 85, 63, 0.8)"})(e.HighlightedArrowColors||(e.HighlightedArrowColors={}));(e=>{e.Inside="inside";e.Off="off";e.Outside="outside"})(e.CoordinatesPositions||(e.CoordinatesPositions={}));(e=>{e.Click="click";e.Drag="drag";e.Drag_Only="drag_only";e.DragOnly="drag-only"})(e.MoveMethods||(e.MoveMethods={}));(e=>{e.Figurine="figurine";e.Text="text"})(e.MoveListDisplayTypes||(e.MoveListDisplayTypes={}));(e=>{e.Default="default";e.Traditional="traditional"})(e.MoveListClassificationStyles||(e.MoveListClassificationStyles={}));(e=>{e.HoverSquareOutline="hoverSquareOutline"})(e.BooleanOptions||(e.BooleanOptions={}));(e=>{e.AnimationType="animationType";e.BoardStyle="boardStyle";e.Coordinates="coordinates";e.DarkMode="darkMode";e.EvaluationBarType="evaluationBarType";e.HighlightLegalMoves="highlightLegalMoves";e.HighlightMoves="highlightMoves";e.MoveListDisplayType="moveListDisplayType";e.MoveListClassificationStyle="moveListClassificationStyle";e.PieceStyle="pieceStyle";e.SoundTheme="soundTheme";e.PlaySounds="playSounds"})(e.SaveableOptions||(e.SaveableOptions={}))})(a||(a={}))},42839:function(e,t,n){"use strict";n.d(t,{U3:function(){return y},vC:function(){return b},lv:function(){return C},Ql:function(){return A},PN:function(){return _}});(e=>{(e=>{e.ClearAnalysis="ClearAnalysis";e.DeleteComment="DeleteComment";e.DeleteCommentBefore="DeleteCommentBefore";e.DeleteMove="DeleteMove";e.DeleteVariation="DeleteVariation";e.InsertComment="InsertComment";e.InsertCommentBefore="InsertCommentBefore";e.InsertContinuation="InsertContinuation";e.MoveVariationDown="MoveVariationDown";e.MoveVariationUp="MoveVariationUp";e.PromoteVariation="PromoteVariation";e.RemoveAnnotation="RemoveAnnotation";e.RemoveBegin="RemoveBegin";e.RemoveEnd="RemoveEnd";e.RemoveAdditionalAnnotation="RemoveAdditionalAnnotation";e.RemoveFocus="RemoveFocus";e.SetBegin="SetBegin";e.SetEnd="SetEnd";e.SetFocus="SetFocus"})(e.Actions||(e.Actions={}));(e=>{e.AddAnnotation="AddAnnotation";e.AddAdditionalAnnotation="AddAdditionalAnnotation"})(e.AnnotationActions||(e.AnnotationActions={}));(e=>{e.Actions="actions";e.Translations="translations"})(e.Keys||(e.Keys={}));(e=>{e.ActionClicked="action-clicked";e.AnnotationClicked="annotation-clicked";e.Close="close-context-menu"})(e.Events||(e.Events={}));(e=>{e.Name="contextMenu"})(e.Plugin||(e.Plugin={}))})(a||(a={}));(e=>{(e=>{e.ActionName="action-name";e.Annotation="annotation";e.AnnotationsContainer="annotations-container";e.Component="move-node-context-menu";e.Divider="divider"})(e.Classes||(e.Classes={}))})(l||(l={}));var a,l,c=n(17229),d=n(99432),f=n(66548),m=n(27071);let{invertObject:g}=c.ur,_={$1:"!",$2:"?",$3:"!!",$4:"??",$5:"!?",$6:"?!",$9:"☒",$10:"=",$11:"=",$12:"=",$13:"∞",$14:"⩲",$15:"⩱",$16:"\xb1",$17:"∓",$18:"+-",$19:"-+",$22:"⨀",$23:"⨀",$32:"⟳",$33:"⟳",$36:"→",$37:"→",$40:"↑",$41:"↑",$44:"∞/=",$45:"=/∞",$132:"⇆",$133:"⇆",$138:"⊕",$146:"N",$222:"⇈",$256:"=/∞"},y={"??":"?\\?","!?":"!\\?","-+":"-\\+","∞/=":"∞\\/\\=","=/∞":"=\\/\\∞","=":"s=",N:"N\\b"},b=["!","?","!!","??","!?","?!","="],A=g(_);a.AnnotationActions.AddAnnotation,d.r.Nags.$1,_.$1,f.k.Translation.Annotations.GoodMove,a.AnnotationActions.AddAnnotation,d.r.Nags.$2,_.$2,f.k.Translation.Annotations.BadMove,a.AnnotationActions.AddAnnotation,d.r.Nags.$3,_.$3,f.k.Translation.Annotations.ExcellentMove,a.AnnotationActions.AddAnnotation,d.r.Nags.$4,_.$4,f.k.Translation.Annotations.Blunder,a.AnnotationActions.AddAnnotation,d.r.Nags.$5,_.$5,f.k.Translation.Annotations.SpeculativeMove,a.AnnotationActions.AddAnnotation,d.r.Nags.$6,_.$6,f.k.Translation.Annotations.DubiousMove,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$9,_.$9,f.k.Translation.Annotations.Miss,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$10,_.$10,f.k.Translation.Annotations.Drawish,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$13,_.$13,f.k.Translation.Annotations.Unclear,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$14,_.$14,f.k.Translation.Annotations.WhiteHasSlightAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$15,_.$15,f.k.Translation.Annotations.BlackHasSlightAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$16,_.$16,f.k.Translation.Annotations.WhiteHasModerateAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$17,_.$17,f.k.Translation.Annotations.BlackHasModerateAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$18,_.$18,f.k.Translation.Annotations.WhiteHasDecisiveAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$19,_.$19,f.k.Translation.Annotations.BlackHasDecisiveAdvantage,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$22,_.$22,f.k.Translation.Annotations.PositionInZuqZwang,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$36,_.$36,f.k.Translation.Annotations.WithInitiative,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$40,_.$40,f.k.Translation.Annotations.WithCompensation,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$146,_.$146,f.k.Translation.Annotations.Novelty,a.AnnotationActions.AddAdditionalAnnotation,d.r.Nags.$256,_.$256,f.k.Translation.Annotations.WithAttack;let C=[{action:m.C.AddAnnotation,code:d.r.Nags.$3,display:_.$3,meaning:f.k.Translation.Annotations.ExcellentMove},{action:m.C.AddAnnotation,code:d.r.Nags.$1,display:_.$1,meaning:f.k.Translation.Annotations.GoodMove},{action:m.C.AddAnnotation,code:d.r.Nags.$5,display:_.$5,meaning:f.k.Translation.Annotations.SpeculativeMove},{action:m.C.AddAnnotation,code:d.r.Nags.$6,display:_.$6,meaning:f.k.Translation.Annotations.DubiousMove},{action:m.C.AddAnnotation,code:d.r.Nags.$2,display:_.$2,meaning:f.k.Translation.Annotations.BadMove},{action:m.C.AddAnnotation,code:d.r.Nags.$4,display:_.$4,meaning:f.k.Translation.Annotations.Blunder},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$9,display:_.$9,meaning:f.k.Translation.Annotations.Miss},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$18,display:_.$18,meaning:f.k.Translation.Annotations.WhiteHasDecisiveAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$16,display:_.$16,meaning:f.k.Translation.Annotations.WhiteHasModerateAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$14,display:_.$14,meaning:f.k.Translation.Annotations.WhiteHasSlightAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$10,display:_.$10,meaning:f.k.Translation.Annotations.Drawish},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$15,display:_.$15,meaning:f.k.Translation.Annotations.BlackHasSlightAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$17,display:_.$17,meaning:f.k.Translation.Annotations.BlackHasModerateAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$19,display:_.$19,meaning:f.k.Translation.Annotations.BlackHasDecisiveAdvantage},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$13,display:_.$13,meaning:f.k.Translation.Annotations.Unclear},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$45,display:_.$45,meaning:f.k.Translation.Annotations.WithCompensation},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$146,display:_.$146,meaning:f.k.Translation.Annotations.Novelty},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$22,display:_.$22,meaning:f.k.Translation.Annotations.PositionInZuqZwang},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$138,display:_.$138,meaning:f.k.Translation.Annotations.TimeTrouble},{display:""},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$222,display:_.$222,meaning:f.k.Translation.Annotations.DevelopmentLead},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$40,display:_.$40,meaning:f.k.Translation.Annotations.WithInitiative},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$36,display:_.$36,meaning:f.k.Translation.Annotations.WithAttack},{action:m.C.AddAdditionalAnnotation,code:d.r.Nags.$132,display:_.$132,meaning:f.k.Translation.Annotations.Counterplay}]},41946:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});class a extends Error{constructor({code:e,message:t,data:n}){super(t);this.code=e;this.data=n;this.message=t;this.name="ChessError"}}},8246:function(e,t,n){"use strict";n.d(t,{I:function(){return createHandleIllegalMove}});function createHandleIllegalMove(e){return function handleIllegalMove(){e.isAtEndOfLine()||e.selectLineEnd()}}},88370:function(e,t,n){"use strict";n.d(t,{e:function(){return createCoreEvent}});function createCoreEvent(e,t){return{data:t||{},type:e}}},99432:function(e,t,n){"use strict";var a;n.d(t,{r:function(){return a}});(e=>{(e=>{e.$1="$1";e.$2="$2";e.$3="$3";e.$4="$4";e.$5="$5";e.$6="$6";e.$8="$8";e.$9="$9";e.$10="$10";e.$11="$11";e.$12="$12";e.$13="$13";e.$14="$14";e.$15="$15";e.$16="$16";e.$17="$17";e.$18="$18";e.$19="$19";e.$22="$22";e.$23="$23";e.$32="$32";e.$33="$33";e.$36="$36";e.$37="$37";e.$40="$40";e.$41="$41";e.$44="$44";e.$45="$45";e.$132="$132";e.$133="$133";e.$138="$138";e.$146="$146";e.$222="$222";e.$256="$256"})(e.Nags||(e.Nags={}));(e=>{e.$1="!";e.$2="?";e.$3="!!";e.$4="??";e.$5="!?";e.$6="?!";e.$8="□";e.$9="☒";e.$10="=";e.$11="=";e.$12="=";e.$13="∞";e.$14="⩲";e.$15="⩱";e.$16="\xb1";e.$17="∓";e.$18="+-";e.$19="-+";e.$22="⨀";e.$23="⨀";e.$32="⟳";e.$33="⟳";e.$36="→";e.$37="→";e.$40="↑";e.$41="↑";e.$44="∞/=";e.$45="=/∞";e.$132="⇆";e.$133="⇆";e.$138="⊕";e.$146="N";e.$222="⇈";e.$256="=/∞"})(e.Values||(e.Values={}));(e=>{e.GreatFind="!";e.Mistake="?";e.Brilliant="!!";e.Blunder="??";e.Interesting="!?";e.Inaccuracy="?!"})(e.Effects||(e.Effects={}));(e=>{e.Drawish="=";e.Unclear="∞";e.WhiteHasModerateAdvantage="\xb1";e.BlackHasModerateAdvantage="∓";e.WhiteHasDecisiveAdvantage="+-";e.BlackHasDecisiveAdvantage="-+";e.PositionInZugzwang="⨀";e.WithCompensation="↑";e.Novelty="N";e.WithAttack="=/∞"})(e.Additional||(e.Additional={}))})(a||(a={}))},29719:function(e,t,n){"use strict";n.d(t,{Yv:function(){return createStandardPlugins}});(e=>{e.DefaultRightClickModifierKey="a";(e=>{e.Name="accessibility"})(e.Plugin||(e.Plugin={}))})(a||(a={}));var a,l,c,d,f,m,g,_,y,b,A,C,w,k,S,T=n(32831),M=n(47176);function createAccessibilityPlugin(e=a.DefaultRightClickModifierKey){return{beforeState:[{condition:(0,M.is)(T.i.UserEvents.PointerdownLeft),handler:convertToPointerdownRightIfModifierKeyPressed}],name:a.Plugin.Name,requires:["keys"]};function convertToPointerdownRightIfModifierKeyPressed(t,n){let{api:a,queue:l,run:c}=n;return!a.keys.isPressed(e)||(l.add(c,{...t,type:T.i.UserEvents.PointerdownRight}),!1)}}var P=n(64936),L=n(45996),N=n(7948);function createKeyedArrow({options:e,rawArrow:t}){let{data:{color:n,keyPressed:a,from:l,opacity:c,to:d},key:f,type:m}=t;return{data:{color:getArrowColor(a,e)??n??e.arrowColors.default,from:l,opacity:c??e.analysisHighlightOpacity,to:d},key:f,type:m}}function getArrowColor(e,t){let{arrowColors:n}=t;switch(e){case N.U.Alt:return n.alt;case N.U.Ctrl:return n.ctrl;case N.U.Shift:return n.shift;case N.U.None:return n.default;default:return}}var x=n(41906),O=n(17949),I=n(62230);function init(e){let{api:t,options:n,renderer:a}=e;if(!t.markings)return;let l=t.markings,c=(n.allowMarkings?l.getAllWhere({types:[L.M]}):[]).map(e=>createKeyedArrow({rawArrow:e,options:n}));null==a||a.addArrows(c,e)}function createArrowsEventHandlers(){return[{condition:(0,x.q)(L.M),handler:markArrow},{condition:(0,I.b)(L.M),handler:unmarkArrow},{condition:(0,M.is)(T.i.InstanceEvents.RendererSet),handler:onRendererSet}];function onRendererSet(e,t){init(t)}function markArrow(e,t){let{options:n,renderer:a}=t,{data:l}=e,c=l.filter((0,O.X)(L.M)).map(e=>createKeyedArrow({rawArrow:e,options:n}));null==a||a.addArrows(c,t)}function unmarkArrow(e,t){let{options:n,renderer:a}=t,{data:l}=e,c=l.filter((0,O.X)(L.M)).map(e=>createKeyedArrow({rawArrow:e,options:n}));null==a||a.removeArrows(c,t)}}function createArrowsPlugin(){return{match:createArrowsEventHandlers(),name:L.T.Plugin.Name,create:init,destroy};function destroy(e){let{api:t,renderer:n,options:a}=e;if(!t.markings)return;let l=t.markings.getAllWhere({types:[L.M]}).map(e=>createKeyedArrow({rawArrow:e,options:a}));null==n||n.removeArrows(l,e)}}(e=>{(e=>{e.Name="assets"})(e.Plugin||(e.Plugin={}))})(l||(l={}));var R=n(73696);function setBoardFallback(e){e.options.themeAssets&&e.api.setOptions({themeAssets:(0,R.f)(e.options.themeAssets)})}var B=n(77751);function setPiecesFallback(e){var t;if(e.options.themeAssets){e.api.setOptions({themeAssets:(0,R.f)(e.options.themeAssets)});return}e.options.pieceStyle=(0,B.q)().pieceStyle;null==(t=e.renderer)||t.updatePieceBaseImage(e,!0)}var V=n(96446),H=n(27112);function testImageUrl(e){return new Promise(function(t,n){let a=new Image;a.addEventListener("load",()=>t(e));a.addEventListener("error",()=>n(Error(`Failed to load image: ${e}`)));e||n(Error(`Unknown url: ${e}`));a.src=e})}function verifyBoardAssetExistence(e){return new Promise((t,n)=>{try{(0,V.VJ)(e)}catch{return t(!0)}testImageUrl(e.board.assets.background).then(()=>t(!0)).catch(e=>{n(new H.b.StylesSetFailed(e.message))})})}var D=n(57322),F=n(23511),$=n(79972);function verifyPiecesAssetsExistence(e,t){return e.themeAssets?piecesFallbackTestThemeAssets(e.themeAssets):piecesFallbackTestLegacy(t,e)}function piecesFallbackTestThemeAssets(e){return new Promise((t,n)=>{try{(0,V.VJ)(e)}catch{return t(!0)}let a=[];Object.keys(e.pieces.assets).forEach(t=>{e.pieces.assets[t]!==$.A[t]&&a.push(e.pieces.assets[t])});if(0===a.length)return t(!0);Promise.all(a.map(e=>testImageUrl(e))).then(()=>t(!0)).catch(e=>{n(new H.b.StylesSetFailed(e.message))})})}function piecesFallbackTestLegacy(e,t){return new Promise(function(n,a){if(!e){a(new H.b.StylesSetFailed("Piece style not found"));return}let l=(0,F.U)(e.path,void 0,t);Promise.all(D.Hk.map(t=>`${l}/${t}.${e.format}`).map(e=>testImageUrl(e))).then(()=>n(!0)).catch(e=>{a(new H.b.StylesSetFailed(e.message))})})}var U=n(68364),W=n(88370),j=n(40378);function createAssetsPlugin(){let e,t,n;return{match:[{condition:(0,U.E)([T.i.InstanceEvents.RendererSet,T.i.OptionsEvents.Update,T.i.InstanceEvents.WebGLAssetsInitialized]),handler:updateAssets}],create:({options:a})=>{e=a.boardStyle;t=a.pieceStyle;n=a.themeAssets},name:l.Plugin.Name};function updateAssets(a,l){var c,d;let{options:f,renderer:m}=l;if(!m||!m.areAssetsLoaded())return;let g=f.pieceStyle!==t||!(0,j.A)(null==n?void 0:n.pieces,null==(c=f.themeAssets)?void 0:c.pieces),_=f.boardStyle!==e||!(0,j.A)(null==n?void 0:n.board,null==(d=f.themeAssets)?void 0:d.board),updateBoardStyles=()=>{_&&m.updateBoardImage(l)};l.options.themeAssets?verifyBoardAssetExistence(l.options.themeAssets).then(updateBoardStyles).catch(e=>{if(e instanceof H.b.StylesSetFailed){emitError(l,e);setBoardFallback(l)}else _&&updateBoardStyles()}):updateBoardStyles();let updatePieceStyles=()=>{g&&m.updatePieceBaseImage(l)};if("webgl-3d"!==m.name&&m.getPieceStyles){let e=m.getPieceStyles();verifyPiecesAssetsExistence(l.options,e[l.options.pieceStyle]).then(updatePieceStyles).catch(e=>{if(e instanceof H.b.StylesSetFailed){emitError(l,e);setPiecesFallback(l)}else g&&updatePieceStyles()})}else updatePieceStyles();e=f.boardStyle;t=f.pieceStyle;n=f.themeAssets}}function emitError(e,t){e.api.emit(T.i.InstanceEvents.StylesSetFailed,(0,W.e)(T.i.InstanceEvents.StylesSetFailed,{message:"Problem updating styles. Will fallback to default.",error:t}))}(e=>{(e=>{e.Name="blinking-highlight"})(e.Plugin||(e.Plugin={}))})(c||(c={}));(e=>{(e=>{e.Name="blinking-highlight"})(e.Plugin||(e.Plugin={}))})(d||(d={}));function createBlinkingHighlightPlugin(){return{match:[{condition:(0,M.is)(T.i.APIEvents.BlinkHighlight),handler:blinkHighlight}],name:c.Plugin.Name};function blinkHighlight(e,t){let{renderer:n}=t;null==n||n.blinkHighlights(e.data,t)}}(e=>{(e=>{e.Name="board-disabled"})(e.Plugin||(e.Plugin={}))})(f||(f={}));var G=n(11859);function createBoardDisabledPlugin(){return{create,match:[{condition:(0,M.is)(T.i.OptionsEvents.Update),handler:handleEnabledOption}],name:f.Plugin.Name};function create(e){e.el.classList.toggle(G.vv.Disabled,!e.options.enabled)}function handleEnabledOption(e,t){let{data:n}=e,{el:a,renderer:l}=t;if("enabled"in n){a.classList.toggle(G.vv.Disabled,!n.enabled);null==l||l.setBoardEnabled(n.enabled)}}}(e=>{(e=>{e.Name="board-size"})(e.Plugin||(e.Plugin={}))})(m||(m={}));function createBoardSizePlugin(){return{match:[{condition:(0,U.E)([T.i.UIEvents.Resize,T.i.InstanceEvents.RendererSet]),handler:resize}],name:m.Plugin.Name};function resize(e,t){let{renderer:n}=t;null==n||n.resize(t)}}(e=>{(e=>{e.Name="coordinates"})(e.Plugin||(e.Plugin={}))})(g||(g={}));function createCoordinatesPlugin(){let e;let t=!1;return{match:[{condition:(0,U.E)([T.i.InstanceEvents.RendererSet,T.i.OptionsEvents.Update]),handler:updateCoordinates}],name:g.Plugin.Name};function updateCoordinates(n,a){let{options:l,renderer:c}=a;if(c){(l.coordinates!==e||l.flipped!==t||n.type===T.i.InstanceEvents.RendererSet)&&c.setCoordinates({flipped:l.flipped,position:l.coordinates},a);e=l.coordinates;t=l.flipped}}}(e=>{e.FlipBoardModifierKey="x";(e=>{e.Name="flip-board"})(e.Plugin||(e.Plugin={}))})(_||(_={}));(e=>{(e=>{e.Name="keys"})(e.Plugin||(e.Plugin={}));(e=>{e.Keydown="Keydown";e.Keyup="Keyup"})(e.Events||(e.Events={}))})(y||(y={}));function createFlipBoardPlugin(e=_.FlipBoardModifierKey){let t;return{match:[{condition:(0,U.E)([T.i.InstanceEvents.Create,T.i.InstanceEvents.RendererSet,T.i.OptionsEvents.Update]),handler:runFlipBoardPlugin},{condition:(0,M.is)(y.Events.Keydown),handler:onKeydown}],name:_.Plugin.Name};function onKeydown(t,n){let{api:a,options:l,queue:c}=n;t.data.key!==e||l.isSiblingBoard||c.add(a.setOptions,{flipped:!l.flipped})}function runFlipBoardPlugin(e,n){let{options:a,renderer:l,state:c}=n;if(l){if(a.flipped!==t){l.flipBoard(a.flipped,n);let e=c.get(T.i.State.PromotionMove);e&&l.openPromotionWindow(e,n)}t=a.flipped}}}var q=n(93160);function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function excludeIntersection(e,t,{isDuplicateWhen:n}={}){let a=new Set(e);return t.forEach(t=>{if(isObject(t)&&n){let l=e.find(e=>n(e,t));l&&a.delete(l);return}a.delete(t)}),[...a]}function highlightsHaveSameKeyAndColor(e,t){return e.key===t.key&&e.data.color===t.data.color}function createHighlights(e){let t=new Set(e),n=new Map;return{...t,addModule,getModules:getAllModulesAsArray,removeModule,getAll,update,clearState};function clearState(){n.clear()}function addModule(e){return t.add(e)}function getAll(){return Array.from(n.values())}function getAllModulesAsArray(){return Array.from(t)}function removeModule(e){return t.delete(e)}function update(...e){let t=getAll();clearState();let a=Array.from(getAllModulesAsArray().reduce((t,n)=>(n(...e).forEach(e=>{t.set(e.data.square,e)}),t),new Map).values());return a.forEach(e=>n.set(e.data.square,e)),{toAdd:excludeIntersection(a,t,{isDuplicateWhen:highlightsHaveSameKeyAndColor}),toRemove:excludeIntersection(t,a,{isDuplicateWhen:highlightsHaveSameKeyAndColor})}}}function createHighlightsAPI(e){return function createAPI(){return createHighlights(e)}}function chessboard_0745338_init(e){let{api:t,renderer:n}=e;if(!t.markings||!t.highlights)return;let a=t.highlights;a.clearState();let{toAdd:l}=a.update({data:{},type:"DummyHighlightInitEventName"},e);null==n||n.addHighlights(l,e)}function isNotOneOf(e){let t=new Set(Array.isArray(e)?e:Object.values(e));return function isType(e){return!t.has(e.type)}}function createHighlightsEventHandlers(){return[{condition:isNotOneOf([T.i.UserEvents.Pointermove,T.i.InstanceEvents.RendererSet,T.i.APIEvents.NodeUpdated]),handler:updateHighlights},{condition:(0,M.is)(T.i.InstanceEvents.RendererSet),handler:onRendererSet}];function onRendererSet(e,t){chessboard_0745338_init(t)}function updateHighlights(e,t){let{api:n,renderer:a}=t;if(!a)return;let{toAdd:l,toRemove:c}=n.highlights.update(e,t);a.removeHighlights(c,t);a.addHighlights(l,t)}}function createHighlightsPlugin(e){return{api:createHighlightsAPI(e),destroy,create:chessboard_0745338_init,match:createHighlightsEventHandlers(),name:q.S.Plugin.Name};function destroy(e){let{api:t,renderer:n}=e,a=t.highlights;null==n||n.removeHighlights(a.getAll(),e)}}var Z=n(17229);(e=>{(e=>{e.Name="hover-square"})(e.Plugin||(e.Plugin={}))})(b||(b={}));var z=n(41943),K=n(74371),Q=n(68271);function isOptionEnabled(e){return function optionValueIsTruthy(t,n){var a,l;return!!(null==(l=null==(a=n.api)?void 0:a.getOptions)?void 0:l.call(a)[e])}}let{createStateMachine:X}=Z.jd;function createHoverSquarePlugin(){let e=X({data:{square:void 0},initialState:"hidden",states:{hidden:{dragPiece:e=>({data:{square:e},nextState:"showing"})},showing:{dragPiece:e=>({data:{square:e},nextState:"showing"}),dropPiece:()=>({nextState:"hidden"}),setOptionToFalse:()=>({nextState:"hidden"})}}});return{match:[{condition:(0,Q.l)(isOptionEnabled(H.b.BooleanOptions.HoverSquareOutline),isNotOneOf([T.i.APIEvents.ClearMarkings,K.M.Events.Tick])),handler:updateHoverSquare}],name:b.Plugin.Name};function updateHoverSquare(t,n){let{options:a,renderer:l,state:c}=n,d=!0!==c.get(T.i.State.HideHoverSquare)&&c.get(T.i.State.MachineState)!==z.Z.States.PromotionAreaShowing&&c.get(T.i.State.DraggingPiece),f=t.data&&(t.data.square||t.data.squareInsideBoard||e.getData().square||d),m=!1;(a.highlightMoves?d?e.transition("dragPiece",f):e.transition("dropPiece"):e.transition("setOptionToFalse"))&&l&&("hidden"===e.getCurrentState()?l.hideHoverSquare(n):l.showHoverSquare(e.getData().square,n))}}var Y=n(72520),J=n(82246);function getMarkingsFromJCE(e,t){let n=[];return Object.values(t??e.markings()).forEach(e=>{Object.values(e).forEach(e=>{n.push((0,J.h)(e))})}),n}var ee=n(94231);function JCENodeHasMarking(e,t,{onlyCurrentNode:n}={}){let{key:a}=t,l=e.ids(),c=(0,ee.Qy)(t);if(!c)return!1;let{move:d,line:f}=c,m=l.move!==d||l.line!==f;if(m){if(n)return!1;e.selectPosition(d,f)}let g=getMarkingsFromJCE(e);return m&&e.selectPosition(l.move,l.line),!!g.find(e=>e.key===a)}function toStringArray(e){return Object.entries(e).reduce((e,[t,n])=>(void 0===n||e.push(t,n.toString()),e),[])}function convertMarkingToJCE(e){let{data:t,persistent:n}=e,a={...t},l=toJCEColor(t.keyPressed);return void 0!==n&&(a.persistent=n),l!==J.o.Custom&&delete a.color,Object.keys(a).forEach(e=>{a[e]=encodeURIComponent(a[e])}),{color:l!==J.o.Custom?l:void 0,data:toStringArray(a),key:toJCEKey(e),type:e.type}}function toJCEKey(e){let{data:{from:t,square:n,to:a},key:l}=e;return n||(t&&a?`${t}${a}`:l)}function toJCEColor(e){switch(e){case N.U.Alt:return J.o.Alt;case N.U.None:return J.o.Default;case N.U.Shift:return J.o.Shift;case N.U.Ctrl:return J.o.Ctrl;default:return J.o.Custom}}var et=n(99432),en=n(16080);function removeFromJCENode(e,t,n){let a=convertMarkingToJCE(t),{node:l}=t,c="object"!=typeof l?e.ids():l;e.mark(a,!0,c.move,c.line);let d=e._getPos(c.move,c.line),f=et.r.Effects[t.data.type],m=d&&(0,en.v)(d)===t.data.square,g=(null==d?void 0:d.annotation)===f;return f&&m&&g&&n.updateNode(c,{annotation:"",isSync:!0}),{changes:{operation:"remove",command:t},ids:c}}function addToJCENode(e,t,n){let a=convertMarkingToJCE(t),{node:l}=t,c="object"!=typeof l?e.ids():l;e.mark(a,!1,c.move,c.line);let d=e._getPos(c.move,c.line),f=et.r.Effects[t.data.type],m=d&&(0,en.v)(d)===t.data.square,g=(null==d?void 0:d.annotation)===f;return f&&m&&!g&&n.updateNode(c,{annotation:f,isSync:!0}),{changes:{operation:"add",command:t},ids:c}}var eo=n(20146);function invertEnum(e){return Object.entries(e).reduce((e,[t,n])=>(e[n]=t,e),{})}function getAnnotationEffectName(e){let t=invertEnum(et.r.Effects);return e?t[e]:void 0}var er=n(15388),ei=n(28931);let checkSyncBefore=e=>(t,n)=>{n.api.getOptions().syncEffects&&e(t,n)},ea=[{condition:(0,U.E)(eo.n),handler:handlePositionChange},{condition:(0,M.is)(T.i.APIEvents.Mark),handler:checkSyncBefore(handleMark)},{condition:(0,M.is)(T.i.APIEvents.Unmark),handler:checkSyncBefore(handleUnmark)},{condition:(0,M.is)(T.i.APIEvents.Load),handler:checkSyncBefore(handleLoad)},{condition:(0,M.is)(T.i.APIEvents.NodeUpdated),handler:checkSyncBefore(handleNodeUpdated)}];function handleMark(e,t,{includeAlternateNodes:n}={}){let{data:a}=e,{game:l}=t.api.getContext(),c=Array.isArray(a)?a:[a],d=[];c.forEach(e=>{e.node&&!JCENodeHasMarking(l,e,{onlyCurrentNode:!n})&&d.push(addToJCENode(l,e,t.api))});emitBatchedNodeUpdatedMarkingEvents(d,t.api)}function handleUnmark(e,t,{includeAlternateNodes:n}={}){let{data:a}=e,{game:l}=t.api.getContext(),c=Array.isArray(a)?a:[a],d=[];c.forEach(e=>{e.node&&JCENodeHasMarking(l,e,{onlyCurrentNode:!n})&&d.push(removeFromJCENode(l,e,t.api))});emitBatchedNodeUpdatedMarkingEvents(d,t.api)}function emitBatchedNodeUpdatedMarkingEvents(e,t){e.length&&Object.values(e.reduce((e,n)=>{var a;let l=`${n.ids.line}-${n.ids.move}`;if(!e[l]){let c=t.getPosition(n.ids.move,n.ids.line),d=-1===c.ids.move?null==(a=t.getRawLines()[c.ids.line])?void 0:a.commands:c.commands;e[l]={changes:{commands:{...d}},ids:n.ids,node:c,parsedCommandChanges:[]}}return e[l].parsedCommandChanges.push(n.changes),e},{})).forEach(e=>{t.getContext().respond(T.i.APIEvents.NodeUpdated,e)})}function handlePositionChange(e,t){let{api:n,queue:a}=t;(0!==e.data.plyDiff||0!==e.data.lineDiff)&&a.add(()=>refreshMarkings(n))}function handleLoad(e,t){let{api:n}=t,a=n.getRawLines(),l=[];refreshMarkings(n);a.forEach(e=>{e.forEach(e=>{let t=getAnnotationEffectName(e.annotation);if(t){let t=getEffect(e,n.getContext().game);l.push({data:t,type:er.kx,node:e.ids,persistent:!0})}})});n.markings.addMany(l)}function handleNodeUpdated(e,t){let{api:n}=t,{ids:a,changes:l}=e.data;if(!("annotation"in l)||l.isSync)return;let c=n.getPosition(a.move,a.line);if(!("to"in c))return;let d=getAnnotationEffectName(l.annotation),f=getEffect(n.getNodeByIds(a),n.getContext().game);if(!d){let e=(0,ee.xR)({data:{square:c.to},type:er.kx});n.markings.removeOne(e,a);return}n.markings.addOne({data:{...f,type:d},type:er.kx,node:a,persistent:!0})}function refreshMarkings(e){let{game:t}=e.getContext(),n=getMarkingsFromJCE(t);e.markings.removeAllWhere({node:!0});n.length&&e.markings.addMany(n)}function getEffect(e,t){let{move:n,line:a}=e.ids,l=(0,en.v)(e),c=t.markings(n,a),d=(0,ei.C)(c.effect,l),f=getAnnotationEffectName(e.annotation),m={square:(0,en.v)(e),type:f};return d||m}function markingsAPI(e){let{respond:t}=e;return(0,ee.gt)({onMarkingAdded:e=>t(T.i.APIEvents.Mark,(0,Y.$)(e)),onMarkingRemoved:e=>t(T.i.APIEvents.Unmark,(0,Y.$)(e)),onMarkingAddedToAlternateNode:t=>handleMark({data:(0,Y.$)(t)},e,{includeAlternateNodes:!0}),onMarkingRemovedFromAlternateNode:t=>handleUnmark({data:(0,Y.$)(t)},e,{includeAlternateNodes:!0}),context:e})}(e=>{(e=>{e.Name="markings"})(e.Plugin||(e.Plugin={}))})(A||(A={}));function createMarkingsPlugin(){return{api:markingsAPI,match:ea,name:A.Plugin.Name}}(e=>{(e=>{e.Name="move-hints"})(e.Plugin||(e.Plugin={}))})(C||(C={}));var es=n(57571),el=n(17084);function updateHints({addMoveHints:e,addCaptureHints:t,context:n,currentHints:a,getNextHints:l,removeHints:c}){let d=a,{api:f,mode:m,options:g,state:_}=n;if(!g||!g.highlightLegalMoves||!m.isAllowedToMove())return c([...a],n),d.length=0,d;let y=_.get(T.i.State.SelectedPiece)||_.get(T.i.State.DraggingPiece);if(!y){if(d.length){c(d,n);d=[]}return d}let b=_.get(T.i.State.MachineState)===z.Z.States.PromotionAreaShowing?[]:f.getLegalMoves().filter(e=>e.from===y),A=(0,es.b)(b.map(e=>e.to));g.disableRookCastling||A.push(...getExtraCastlingSquares(b));let C=d.filter(e=>!A.includes(e));c(C,n);let w=l(A),k=[],S=[],M=f.getPieces().keys();w.forEach(e=>{t&&M.includes(e)?S.push(e):k.push(e)});k.length&&e(k,n);S.length&&(null==t||t(S,n));return d.filter(e=>!C.includes(e)).concat(w);function getExtraCastlingSquares(e){if(f.getVariant()===el.Z.Variants.Chess960||0===e.length||void 0===e[0].from)return[];let t=f.getPieces().getCollection(),n=t[e[0].from];return(null==n?void 0:n.type)!=="k"?[]:e.reduce((e,a)=>{let l;if("O-O-O"===a.san)l=a.color===el.Z.ColorsAsNumbers.White?"a1":"a8";else{if("O-O"!==a.san)return e;l=a.color===el.Z.ColorsAsNumbers.White?"h1":"h8"}let c=t[l];return(null==c?void 0:c.type.toLowerCase())!=="r"||(null==c?void 0:c.color)!==n.color||(null==c?void 0:c.promoted)||a.to===l||e.push(l),e},[])}}function createMoveHintsPlugin(){let e=[];return{match:[{condition:isNotOneOf([T.i.UserEvents.Pointermove,K.M.Events.Tick]),handler:updateMoveHints},{condition:(0,M.is)(T.i.InstanceEvents.RendererSet),handler:resetMoveHints}],name:C.Plugin.Name};function resetMoveHints(t,n){e=[];updateMoveHints(t,n)}function updateMoveHints(t,n){let{renderer:a}=n;a&&(e=updateHints({addMoveHints:a.addMoveHints,addCaptureHints:a.addCaptureHints,context:n,currentHints:e,getNextHints:t=>t.filter(t=>!e.includes(t)),removeHints:a.removeHints}))}}(e=>{(e=>{e.Name="pieces"})(e.Plugin||(e.Plugin={}))})(w||(w={}));function createPiecesPlugin(){return{match:[{condition:(0,U.E)(T.i.APIEvents),handler:updatePieces},{condition:(0,M.is)(T.i.InstanceEvents.RendererSet),handler:reloadPieces}],name:w.Plugin.Name};function reloadPieces(e,t){let{api:n,renderer:a}=t;null==a||a.loadPieces({pieces:n.getPieces()},t)}function updatePieces(e,t){let{renderer:n}=t;if(!n)return;if(e.type===T.i.APIEvents.IllegalMove){n.illegalMove(!1,t);return}let{plyDiff:a,move:l,pieces:c}=e.data;if(c){n.loadPieces({pieces:c},t);return}if(l&&-1===a){"--"!==l.san&&n.undoMove(l,t);return}l&&n.makeMove(l,t)}}(e=>{(e=>{e.StateDesynchronisation="StateDesynchronisation"})(e.ErrorCodes||(e.ErrorCodes={}));(e=>{e.Name="rendererErrorCatcher"})(e.Plugin||(e.Plugin={}))})(k||(k={}));var eu=n(67868);function reloadOnError({context:e,method:t}){return function wrappedRendererMethod(...n){try{return t(...n)}catch(a){let{api:t,renderer:n}=e;console.error("Board position reloaded due to game and renderer state desynchronisation:\n",a);t.logger.log({code:k.ErrorCodes.StateDesynchronisation,data:a,level:eu.V.Levels.Error});null==n||n.loadPieces({pieces:t.getPieces(),reloadAll:!0},e)}}}let getImportMetaEnvDev=()=>!1;function createRendererErrorCatcherPlugin(){let e={};return{create,destroy,match:[{condition:(0,M.is)(T.i.InstanceEvents.RendererSet),handler:(e,t)=>create(t)}],name:k.Plugin.Name};function create(t){let{options:n,renderer:a}=t;!a||getImportMetaEnvDev()||n.test||["dragPiece","dropPiece","makeMove","removePiece","undoMove"].forEach(n=>{let l=reloadOnError({context:t,method:a[n]});e[n]=a[n];a[n]=l})}function destroy(t){let{renderer:n}=t;if(n){Object.keys(e).forEach(t=>{n[t]=e[t]});e={}}}}var ec=n(11197);function isElementBlacklisted(e){return!!(!e||e.isContentEditable||["INPUT","TEXTAREA"].includes(e.tagName))}(e=>{(e=>{e.Shift="Shift";e.Control="Control";e.Alt="Alt";e.Meta="Meta"})(e.Modifiers||(e.Modifiers={}))})(S||(S={}));let ed=["Escape","Tab","Backspace","Enter","Backlash","Period","Slash","Comma","Space","Delete","Home","End","PageUp","PageDown","ArrowUp","Numpad8","ArrowDown","Numpad5","ArrowLeft","Numpad4","ArrowRight","Numpad6","BracketLeft"],ef=["meta","alt","control"];function convertCodeToKey(e){let t;return e?(e.includes("Digit")?t=e.replace("Digit",""):e.includes("Key")?t=e.replace("Key",""):e.includes(S.Modifiers.Control)?t=S.Modifiers.Control:e.includes(S.Modifiers.Shift)?t=S.Modifiers.Shift:e.includes(S.Modifiers.Alt)?t=S.Modifiers.Alt:e.includes(S.Modifiers.Meta)?t=S.Modifiers.Meta:ed.includes(e)&&(t=e),null==t?void 0:t.toLowerCase()):void 0}function createKeysService({onKeydown:e,onKeyup:t}={}){let n=!0,a=new Set;document.addEventListener("keydown",onKeydownHandler);document.addEventListener("keyup",onKeyupHandler);window.addEventListener("blur",clearPressedKeys);window.addEventListener("contextmenu",clearPressedKeys);return{isPressed,getPressedKeys,disable,enable,destroy};function isPressed(e){return a.has(e.toLowerCase())}function getPressedKeys(){return[...a].sort()}function onKeydownHandler(t){let l=document.activeElement;if(!n||isElementBlacklisted(l))return;let c=convertCodeToKey(t.code);if(c){a.add(c);null==e||e(c,t)}}function onKeyupHandler(e){let n=convertCodeToKey(e.code);if(n){ef.includes(n)&&a.clear();a.delete(n);null==t||t(n,e)}}function clearPressedKeys(){a.clear()}function disable(){n=!1;a.clear()}function enable(){n=!0}function destroy(){document.removeEventListener("keydown",onKeydownHandler);document.removeEventListener("keyup",onKeyupHandler);window.removeEventListener("blur",clearPressedKeys);window.removeEventListener("contextmenu",clearPressedKeys);a.clear()}}function createKeysPlugin(){let e;let t=createKeysService({onKeydown:createEmitter(y.Events.Keydown),onKeyup:createEmitter(y.Events.Keyup)}),n={[y.Events.Keydown]:{},[y.Events.Keyup]:{}},a={isPressed:t.isPressed,getPressedKeys:t.getPressedKeys,setOverrides,removeOverrides};return{api:()=>a,create,destroy,match:[{condition:(0,M.is)(T.i.OptionsEvents.Update),handler:updateKeysPlugin},{condition:(0,M.is)(y.Events.Keydown),handler:queueKeyCallback},{condition:(0,M.is)(y.Events.Keyup),handler:queueKeyCallback}],name:y.Plugin.Name};function create({run:t,options:n}){e=t;toggleKeysService(n.enabled)}function destroy(){t.destroy()}function createEmitter(t){return function emit(n,a){null==e||e((0,W.e)(t,{key:n,rawEvent:a}))}}function queueKeyCallback(e,t){let{type:a,data:l}=e,c=n[a][l.key];c&&t.queue.add(c(t.api))}function setOverrides(e){e.forEach(({key:e,callback:t,trigger:a=y.Events.Keydown})=>{n[a][e]=t})}function removeOverrides(e){e.forEach(({trigger:e=y.Events.Keydown,key:t})=>{delete n[e][t]})}function updateKeysPlugin(e,t){let{options:n}=t;toggleKeysService(n.captureKeyStrokes&&n.enabled)}function toggleKeysService(e){e?t.enable():t.disable()}}var ep=n(73707);function getHighlightColorFromKeyPressed(e,t){switch(e){case N.U.Alt:return t.analysisHighlightColors.alt;case N.U.Ctrl:return t.analysisHighlightColors.ctrl;case N.U.Shift:return t.analysisHighlightColors.shift;case N.U.None:return t.analysisHighlightColors.default;default:return}}function getAnalysisHighlights(e,t){let{api:n,options:a}=t;return a&&a.allowMarkings?n.markings.getAllWhere({types:[q.R]}).map(({data:{color:e,keyPressed:t,opacity:n,square:l}})=>(0,ep.t)({color:getHighlightColorFromKeyPressed(t,a)??e??a.analysisHighlightColors.default,opacity:n??a.analysisHighlightOpacity,square:l,type:"analysis"})):[]}var em=n(5850);function getSelectionSquare(e,t){var n,a;let{options:l,state:c}=t;if(!l||!l.highlightMoves)return[];let d=c.get(T.i.State.SelectedPiece)||c.get(T.i.State.DraggingPiece);return d?[(0,ep.t)({color:(null==(n=l.themeAssets)?void 0:n.board.config.highlightSquareHex)??(null==(a=(0,D.dn)(l.boardStyle))?void 0:a.highlightColor)??H.b.HighlightColors.Selected,opacity:l.highlightOpacity,square:d,type:"SelectionHiglight"})]:[]}var eh=n(85705),eg=n(91664);function createMinimalPlugins(){return[createAssetsPlugin(),createBoardSizePlugin(),createPiecesPlugin(),createRendererErrorCatcherPlugin()]}function createStandardPlugins({exclude:e}={}){let t={[y.Plugin.Name]:createKeysPlugin,[a.Plugin.Name]:createAccessibilityPlugin,[eh.I.Plugin.Name]:P.V,[L.T.Plugin.Name]:createArrowsPlugin,[c.Plugin.Name]:createBlinkingHighlightPlugin,[g.Plugin.Name]:createCoordinatesPlugin,[_.Plugin.Name]:createFlipBoardPlugin,[q.S.Plugin.Name]:createHighlightsPlugin,[b.Plugin.Name]:createHoverSquarePlugin,[A.Plugin.Name]:createMarkingsPlugin,[f.Plugin.Name]:createBoardDisabledPlugin,[C.Plugin.Name]:createMoveHintsPlugin,[eg.t.Plugin.Name]:ec.A};e&&e.forEach(e=>{delete t[e]});let n=[getSelectionSquare,em.B,getAnalysisHighlights],l=[...createMinimalPlugins()];return Object.keys(t).forEach(e=>e===q.S.Plugin.Name?l.push(t[e](n)):l.push(t[e]())),l}},82246:function(e,t,n){"use strict";n.d(t,{o:function(){return c},h:function(){return convertMarkingFromJCE}});var a=n(7948);function stringArrayToObject(e){return e.reduce((e,t,n,a)=>(n%2==0||(e[a[n-1]]=t),e),{})}var l=n(28931),c=(e=>(e.Alt="a",e.Ctrl="l",e.Custom="c",e.Default="d",e.Shift="s",e))(c||{});function convertMarkingFromJCE(e){let{color:t,data:n=[],type:a}=e,c=stringArrayToObject(n);Object.keys(c).forEach(e=>{c[e]=(0,l.y)(decodeURIComponent(c[e]))});let{persistent:d,...f}=c,m={key:fromJCEKey(e.key,e.type),node:!0,data:{...f,keyPressed:f.keyPressed??fromJCEColor(t)},type:a};return void 0!==d&&(m.persistent=d),m}function fromJCEKey(e,t){return`${t}|${e}`}function fromJCEColor(e){switch(e){case"a":return a.U.Alt;case"d":return a.U.None;case"s":return a.U.Shift;case"l":return a.U.Ctrl;default:return}}},15204:function(e,t,n){"use strict";n.d(t,{BB:function(){return a},WP:function(){return l},lF:function(){return c},nC:function(){return d}});var a=(e=>(e.Mousedown="mousedown",e.MouseMove="mousemove",e.Mouseup="mouseup",e.PointerDown="pointerdown",e.PointerMove="pointermove",e.PointerUp="pointerup",e.Touchstart="touchstart",e.Touchmove="touchmove",e.Touchend="touchend",e))(a||{});let{Pointerdown:l,Pointermove:c,Pointerup:d}=getPointerEvents();function getPointerEvents(){let e,t,n;let a="onpointerdown"in window,l="ontouchstart"in window;if(a){e="pointerdown";t="pointermove";n="pointerup"}else if(l){e="touchstart";t="touchmove";n="touchend"}else{e="mousedown";t="mousemove";n="mouseup"}return{Pointerdown:e,Pointermove:t,Pointerup:n}}},57571:function(e,t,n){"use strict";n.d(t,{b:function(){return deduplicate}});function deduplicate(e){return[...new Set(e)]}},9482:function(e,t,n){"use strict";n.d(t,{L:function(){return isNode}});function isNode(e){return(null==e?void 0:e.ids)!==void 0}},58553:function(e,t,n){"use strict";n.d(t,{u:function(){return isMainLine}});function isMainLine(e){return 0===e}},96446:function(e,t,n){"use strict";n.d(t,{PM:function(){return validateBoardOptions2D},VJ:function(){return validateThemeAssets2D},ky:function(){return validateBoardOptions3D}});var a=n(72254);function validateBoardOptions2D(e){return validateThemeAssets2D(e.themeAssets),e}function validateBoardOptions3D(e){return validateThemeAssets3D(e.themeAssets),e}function validateThemeAssets2D(e){if(!e||e.config.perspective!==a.b.Perspective.REAL_3D)return e;throw Error("ThemeAssets: Expected 2D assets, received 3D assets")}function validateThemeAssets3D(e){if(!e||e.config.perspective===a.b.Perspective.REAL_3D)return e;throw Error("ThemeAssets: Expected 3D assets, received 2D assets")}},2700:function(e,t,n){"use strict";var a;n.d(t,{A:function(){return a}});(e=>{(e=>{e.Premove="Premove"})(e.Events||(e.Events={}));(e=>{e.Name="premoves"})(e.Plugin||(e.Plugin={}))})(a||(a={}))},4317:function(e,t,n){"use strict";n.d(t,{u:function(){return Y}});var a=n(5700);let l=`<g id="alternative">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M14.57,4.71l-4.42.2a.2.2,0,0,0-.11,0A.16.16,0,0,0,10,5a.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,9.13,6.5,6.71,8,5.24a.19.19,0,0,0,0-.1A.14.14,0,0,0,8,5,.15.15,0,0,0,8,4.94a.21.21,0,0,0-.11,0L3.42,4.71l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11.18.18,0,0,0,.08.07.25.25,0,0,0,.12,0,.18.18,0,0,0,.09-.06L5.21,8l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.57l2.63-2.63,1.55,1.54a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0,.18.18,0,0,0,.08-.07.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>
      </g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M14.57,4.21l-4.42.2a.2.2,0,0,0-.11,0,.16.16,0,0,0-.07.09.21.21,0,0,0,0,.11.31.31,0,0,0,0,.1l1.4,1.4L8.92,8.63,6.5,6.21,8,4.74a.19.19,0,0,0,0-.1.14.14,0,0,0,0-.11A.15.15,0,0,0,8,4.44a.21.21,0,0,0-.11,0L3.42,4.21l-.08,0-.06,0a.18.18,0,0,0,0,.07.19.19,0,0,0,0,.08l.19,4.42a.15.15,0,0,0,0,.11A.18.18,0,0,0,3.53,9a.25.25,0,0,0,.12,0A.18.18,0,0,0,3.74,9L5.21,7.51l2.55,2.56v4.49a.29.29,0,0,0,0,.09l0,.07.08,0,.09,0H9.85l.09,0a.18.18,0,0,0,.07,0l.05-.07a.29.29,0,0,0,0-.09V10.07l2.63-2.63L14.26,9a.16.16,0,0,0,.09,0,.17.17,0,0,0,.12,0A.18.18,0,0,0,14.55,9a.13.13,0,0,0,0-.1l.19-4.43a.19.19,0,0,0,0-.08.18.18,0,0,0,0-.07l-.07,0Z"></path>
    </g>
  </g>`,c=`<g id="best">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#81B64C" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path class="${a.d.ClassNames.ComponentShadow}" opacity="0.2" d="M9,3.43a.5.5,0,0,0-.27.08.46.46,0,0,0-.17.22L7.24,7.17l-3.68.19a.52.52,0,0,0-.26.1.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23l2.86,2.32-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,8.2A.44.44,0,0,0,14.86,8a.45.45,0,0,0,0-.28.53.53,0,0,0-.16-.23.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.73a.46.46,0,0,0-.17-.22A.5.5,0,0,0,9,3.43Z"></path>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M9,2.93A.5.5,0,0,0,8.73,3a.46.46,0,0,0-.17.22L7.24,6.67l-3.68.19A.52.52,0,0,0,3.3,7a.53.53,0,0,0-.16.23.45.45,0,0,0,0,.28.44.44,0,0,0,.15.23L6.15,10l-1,3.56a.45.45,0,0,0,0,.28.46.46,0,0,0,.17.22.41.41,0,0,0,.26.09.43.43,0,0,0,.27-.08l3.09-2,3.09,2a.46.46,0,0,0,.53,0,.46.46,0,0,0,.17-.22.53.53,0,0,0,0-.28l-1-3.56L14.71,7.7a.44.44,0,0,0,.15-.23.45.45,0,0,0,0-.28A.53.53,0,0,0,14.7,7a.52.52,0,0,0-.26-.1l-3.68-.2L9.44,3.23A.46.46,0,0,0,9.27,3,.5.5,0,0,0,9,2.93Z"></path>
  </g>`,d=`<g id="blunder">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#FA412D" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14.74,5.45A2.58,2.58,0,0,0,14,4.54,3.76,3.76,0,0,0,12.89,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,10.51,4a5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06l.11-.08a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.8a1,1,0,0,1,.26-.7q.27-.28.66-.63A5.79,5.79,0,0,0,14.05,9a4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5.45Z"></path>
      <path d="M12.38,12.65H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.65Z"></path>
      <path d="M6.79,12.65H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,15a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V13a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.65Z"></path>
      <path d="M8.39,4.54A3.76,3.76,0,0,0,7.3,4a4.07,4.07,0,0,0-1.2-.19A3.92,3.92,0,0,0,4.92,4a5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06l.11-.08a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,6.06a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.9a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83V11a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1A.5.5,0,0,0,7,11V10.8a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9.47c.18-.15.35-.31.52-.48A7,7,0,0,0,9,8.39a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1,2.66,2.66,0,0,0-.29-1.27A2.58,2.58,0,0,0,8.39,4.54Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M14.74,5A2.58,2.58,0,0,0,14,4a3.76,3.76,0,0,0-1.09-.56,4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3,3,0,0,0-.32.2,3.46,3.46,0,0,1,.42.63,3.29,3.29,0,0,1,.36,1.47.31.31,0,0,0,.19-.06L10.37,6a2.9,2.9,0,0,1,.29-.19,3.89,3.89,0,0,1,.41-.17,1.55,1.55,0,0,1,.48-.07,1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26.8.8,0,0,1,.07.34,1,1,0,0,1-.25.67,7.71,7.71,0,0,1-.65.63,6.2,6.2,0,0,0-.48.43,2.93,2.93,0,0,0-.45.54,2.55,2.55,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.24.24,0,0,0,0,.12.35.35,0,0,0,.17.17l.12,0h1.71l.12,0a.23.23,0,0,0,.1-.07.21.21,0,0,0,.06-.1.27.27,0,0,0,0-.12V10.3a1,1,0,0,1,.26-.7q.27-.28.66-.63a5.79,5.79,0,0,0,.51-.48,4.51,4.51,0,0,0,.48-.6,2.56,2.56,0,0,0,.36-.72,2.81,2.81,0,0,0,.14-1A2.66,2.66,0,0,0,14.74,5Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M12.38,12.15H10.5l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0h1.88a.24.24,0,0,0,.12,0,.26.26,0,0,0,.11-.07.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,12.38,12.15Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M6.79,12.15H4.91l-.12,0a.34.34,0,0,0-.18.29v1.82a.36.36,0,0,0,.08.23.23.23,0,0,0,.1.07l.12,0H6.79a.24.24,0,0,0,.12,0A.26.26,0,0,0,7,14.51a.36.36,0,0,0,.07-.1.28.28,0,0,0,0-.13V12.46a.27.27,0,0,0,0-.12.61.61,0,0,0-.07-.1A.32.32,0,0,0,6.79,12.15Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M8.39,4A3.76,3.76,0,0,0,7.3,3.48a4.07,4.07,0,0,0-1.2-.19,3.92,3.92,0,0,0-1.18.17,5.87,5.87,0,0,0-.9.37,3.37,3.37,0,0,0-.55.38l-.21.19a.32.32,0,0,0,0,.41l1,1.2a.26.26,0,0,0,.2.12.48.48,0,0,0,.24-.06L4.78,6a2.9,2.9,0,0,1,.29-.19l.4-.17A1.66,1.66,0,0,1,6,5.56a1.1,1.1,0,0,1,.72.24.72.72,0,0,1,.23.26A.77.77,0,0,1,7,6.4a1,1,0,0,1-.26.67,7.6,7.6,0,0,1-.64.63,6.28,6.28,0,0,0-.49.43,2.93,2.93,0,0,0-.45.54,2.72,2.72,0,0,0-.33.66,2.62,2.62,0,0,0-.13.83v.35a.43.43,0,0,0,0,.12.39.39,0,0,0,.08.1.18.18,0,0,0,.1.07.21.21,0,0,0,.12,0H6.72l.12,0a.23.23,0,0,0,.1-.07.36.36,0,0,0,.07-.1.5.5,0,0,0,0-.12V10.3a1,1,0,0,1,.27-.7A8,8,0,0,1,8,9c.18-.15.35-.31.52-.48A7,7,0,0,0,9,7.89a3.23,3.23,0,0,0,.36-.72,3.07,3.07,0,0,0,.13-1A2.66,2.66,0,0,0,9.15,5,2.58,2.58,0,0,0,8.39,4Z"></path>
    </g>
  </g>`,f=`<g id="book">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#D5A47D" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <path class="${a.d.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M8.45,5.9c-1-.75-2.51-1.09-4.83-1.09H2.54v8.71H3.62a8.16,8.16,0,0,1,4.83,1.17Z"></path>
      <path class="${a.d.ClassNames.ComponentShadow}" opacity="0.3" isolation="isolate" d="M9.54,14.69a8.14,8.14,0,0,1,4.84-1.17h1.08V4.81H14.38c-2.31,0-3.81.34-4.84,1.09Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M8.45,5.4c-1-.75-2.51-1.09-4.83-1.09H3V13h.58a8.09,8.09,0,0,1,4.83,1.17Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M9.54,14.19A8.14,8.14,0,0,1,14.38,13H15V4.31h-.58c-2.31,0-3.81.34-4.84,1.09Z"></path>
    </g>
  </g>`,m=`<g id="Brilliant">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#26c2a3" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M12.57,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.84A.41.41,0,0,1,10,14.6V12.7a.32.32,0,0,1,.09-.23.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.9A.36.36,0,0,1,10,3.66a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      <path d="M8.07,14.6a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.67a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M12.57,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0L10,14.34A.41.41,0,0,1,10,14.1V12.2A.32.32,0,0,1,10,12a.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H10.35a.31.31,0,0,1-.34-.31L9.86,3.4A.36.36,0,0,1,10,3.16a.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H12.3a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M8.07,14.1a.51.51,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0h-2l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2A.31.31,0,0,1,8,12a.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13ZM8,10.17a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H5.85a.31.31,0,0,1-.34-.31L5.36,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0H7.8a.35.35,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,g=`<g id="checkmate_black">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M11.44,8.41h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.86H8.31l.18-2.78H6.94L6.76,6.86H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.64H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.09l.1-1.68H9.89l-.1,1.68Z"></path>
    <path class="${a.d.ClassNames.ComponentShadow}" fill="#fff" d="M11.44,7.91h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.36H8.31l.18-2.78H6.94L6.76,6.36H5l-.1,1.55H6.66L6.55,9.59H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.14H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.59l.1-1.68H9.89l-.1,1.68Z"></path>
  </g>`,_=`<g id="checkmate_white">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <circle class="${a.d.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
    <path class="${a.d.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>
  </g>`,y=`<g id="correct">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#81b64c" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>
    </g>
  </g>`,b=`<g id="critical">
    <g class="${a.d.ClassNames.Shadow}" opacity="0.3">
      <path d="M17.68,5.2,11.06,16.67a2.37,2.37,0,0,1-4.11,0L.32,5.2A2.38,2.38,0,0,1,2.38,1.64H15.62A2.38,2.38,0,0,1,17.68,5.2Z"></path>
    </g>
    <path class="${a.d.ClassNames.Background}" fill="#ad5b8c" d="M17.68,4.7,11.06,16.17a2.37,2.37,0,0,1-4.11,0L.32,4.7A2.38,2.38,0,0,1,2.38,1.14H15.62A2.38,2.38,0,0,1,17.68,4.7Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M8.67,3.22,5.9,9.92V10a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07L12.1,8V7.92a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,3.18,8.71,3.12,8.67,3.22Z"></path>
    </g>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M8.67,2.72,5.9,9.42v.05a.14.14,0,0,0,0,.06l0,0,0,0H8.4a.1.1,0,0,1,.09,0,.09.09,0,0,1,0,.08l0,5c0,.11.17.17.21.07l3.4-7.24V7.42a.14.14,0,0,0,0-.06.09.09,0,0,0-.05,0l-.06,0H9.32a.11.11,0,0,1-.08,0,.12.12,0,0,1,0-.09l-.32-4.4C8.87,2.68,8.71,2.62,8.67,2.72Z"></path>
  </g>`,A=`<g id="defeat_black">
<path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${a.d.ClassNames.Background}" fill="#E02828" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>

<filter id="shadow">
  <feDropShadow dx="0" dy="0.3" stdDeviation="0" flood-opacity="0.5"/>
</filter>

<path
 d="m 8.91922,5.86598 c 0.27141,0 0.5622,0.28866 0.96931,0.70103 0.19387,0.20619 0.40707,0.41237 0.65917,0.63918 0,0.12371 -0.0194,0.26804 -0.0194,0.41237 H 8.70598 C 8.47334,7.30928 8.33764,6.95876 8.33764,6.60825 c 0,-0.37114 0.15509,-0.74227 0.58158,-0.74227 z m 0,6.26802 c -0.42649,0 -0.58158,-0.3711 -0.58158,-0.7422 0,-0.3506 0.1357,-0.7011 0.36834,-1.0104 h 1.82232 c 0,0.1444 0.0194,0.2887 0.0194,0.4124 -0.2521,0.2268 -0.4653,0.433 -0.65917,0.6392 -0.40711,0.4124 -0.6979,0.701 -0.96931,0.701 z M 11.3748,4.52577 C 10.6769,3.7835 9.95961,3 8.79645,3 7.14863,3 5.96607,4.23711 5.96607,5.92784 c 0,0.82474 0.17448,1.50515 0.32957,1.91752 L 5.73344,7.96907 V 7.02062 H 5.40388 4.27948 3.96931 V 8.05155 H 3.31018 3 V 8.40206 9.5979 9.9485 h 0.31018 0.65913 v 1.0309 h 0.31017 1.1244 0.32956 v -0.9485 l 0.54281,0.1237 c -0.1357,0.4124 -0.31018,1.0928 -0.31018,1.9176 0,1.6907 1.18256,2.9278 2.83038,2.9278 1.16316,0 1.88045,-0.7835 2.57835,-1.5258 0.3683,-0.3711 0.7367,-0.7629 1.1632,-1.0515 0.1357,0.4536 0.3683,0.7422 0.6979,0.9072 0.3683,0.2062 0.8142,0.2062 1.3182,0.2062 H 14.6704 15 V 13.1856 L 14.9935,4.81443 V 4.46392 H 14.664 14.5477 c -0.5041,0 -0.95,0 -1.3183,0.20618 C 12.8998,4.83505 12.6672,5.12371 12.5315,5.57732 12.105,5.28866 11.7367,4.89691 11.3683,4.52577 Z"
 fill="black"
 style="fill:#000000;fill-opacity:1;filter:url(#shadow);"
 id="path1-6" />
 </g>`,C=`<g id="defeat_white">
<path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${a.d.ClassNames.Background}" fill="#E02828" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>

<filter id="shadow">
  <feDropShadow dx="0" dy="0.3" stdDeviation="0" flood-opacity="0.5"/>
</filter>

<path
 d="m 8.91922,5.86598 c 0.27141,0 0.5622,0.28866 0.96931,0.70103 0.19387,0.20619 0.40707,0.41237 0.65917,0.63918 0,0.12371 -0.0194,0.26804 -0.0194,0.41237 H 8.70598 C 8.47334,7.30928 8.33764,6.95876 8.33764,6.60825 c 0,-0.37114 0.15509,-0.74227 0.58158,-0.74227 z m 0,6.26802 c -0.42649,0 -0.58158,-0.3711 -0.58158,-0.7422 0,-0.3506 0.1357,-0.7011 0.36834,-1.0104 h 1.82232 c 0,0.1444 0.0194,0.2887 0.0194,0.4124 -0.2521,0.2268 -0.4653,0.433 -0.65917,0.6392 -0.40711,0.4124 -0.6979,0.701 -0.96931,0.701 z M 11.3748,4.52577 C 10.6769,3.7835 9.95961,3 8.79645,3 7.14863,3 5.96607,4.23711 5.96607,5.92784 c 0,0.82474 0.17448,1.50515 0.32957,1.91752 L 5.73344,7.96907 V 7.02062 H 5.40388 4.27948 3.96931 V 8.05155 H 3.31018 3 V 8.40206 9.5979 9.9485 h 0.31018 0.65913 v 1.0309 h 0.31017 1.1244 0.32956 v -0.9485 l 0.54281,0.1237 c -0.1357,0.4124 -0.31018,1.0928 -0.31018,1.9176 0,1.6907 1.18256,2.9278 2.83038,2.9278 1.16316,0 1.88045,-0.7835 2.57835,-1.5258 0.3683,-0.3711 0.7367,-0.7629 1.1632,-1.0515 0.1357,0.4536 0.3683,0.7422 0.6979,0.9072 0.3683,0.2062 0.8142,0.2062 1.3182,0.2062 H 14.6704 15 V 13.1856 L 14.9935,4.81443 V 4.46392 H 14.664 14.5477 c -0.5041,0 -0.95,0 -1.3183,0.20618 C 12.8998,4.83505 12.6672,5.12371 12.5315,5.57732 12.105,5.28866 11.7367,4.89691 11.3683,4.52577 Z"
 fill="white"
 style="fill:#ffffff;fill-opacity:1;filter:url(#shadow);"
 id="path1-6" />
 </g>`,w=`<g id="draw_black">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M2.92,7V5.84c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V7Zm8.87-2.39L7,13.88H5l4.8-9.26ZM9.85,13.88c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,8.26,15,8.78,15,10c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
    <path class="${a.d.ClassNames.ComponentShadow}" fill="#fff" d="M2.92,6.51V5.34c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.51Zm8.87-2.39L7,13.38H5l4.8-9.26ZM9.85,13.38c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.76,15,8.28,15,9.5c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
  </g>`,k=`<g id="draw_white">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <circle class="${a.d.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
    <path class="${a.d.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <path d="M2.92,6.61V5.44c.81,0,1.75-.28,1.8-1.22H6.14v5.5H4.34V6.61Zm8.87-2.39L7,13.48H5l4.8-9.26ZM9.85,13.48c-.08-1.54,1.38-2.19,2.57-2.89.33-.17.78-.4.78-.78a.66.66,0,0,0-.68-.7c-.69,0-.94.58-.92,1.16H10a2.17,2.17,0,0,1,.64-1.79,2.74,2.74,0,0,1,1.91-.62C14.1,7.86,15,8.38,15,9.6c0,1.82-2.66,2.18-2.66,2.5h2.73v1.38Z"></path>
  </g>`,S=`<g id="excellent">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#81B64C" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.79,11.34c0-.2.4-.53.4-.94S14,9.72,14,9.58a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7S11.9,4,10.62,3.7c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,8.23a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13.53c.52.12.91.25,1.44.33A11.11,11.11,0,0,0,11,14a6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11.53,13.79,11.34Z"></path>
      <path d="M5.49,8.09H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.59A.5.5,0,0,0,5.49,8.09Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M13.79,10.84c0-.2.4-.53.4-.94S14,9.22,14,9.08a2.06,2.06,0,0,0,.18-.83,1,1,0,0,0-.3-.69,1.13,1.13,0,0,0-.55-.2,10.29,10.29,0,0,1-2.07,0c-.37-.23,0-1.18.18-1.7s.51-2.12-.77-2.43c-.69-.17-.66.37-.78.9-.05.21-.09.43-.13.57A5,5,0,0,1,7.05,7.73a1.57,1.57,0,0,1-.42.18v4.94A7.23,7.23,0,0,1,8,13c.52.12.91.25,1.44.33a11.11,11.11,0,0,0,1.62.16,6.65,6.65,0,0,0,1.18,0,1.09,1.09,0,0,0,1-.59.66.66,0,0,0,.06-.2,1.63,1.63,0,0,1,.07-.3c.13-.28.37-.3.5-.68S13.74,11,13.79,10.84Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M5.49,7.59H4.31a.5.5,0,0,0-.5.5v4.56a.5.5,0,0,0,.5.5H5.49a.5.5,0,0,0,.5-.5V8.09A.5.5,0,0,0,5.49,7.59Z"></path>
    </g>
  </g>`,T=`<g id="fast_win">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M4.85,4.7,9.67,9.19a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L4.85,14a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0A.23.23,0,0,1,4.52,14a.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.7Z"></path>
      <path d="M10,4.7l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18l-.05.07L10,14a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0A.18.18,0,0,1,9.7,14a.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.7Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M4.85,4.2,9.67,8.69a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L9.67,9,4.85,13.5a.24.24,0,0,1-.11.06.3.3,0,0,1-.13,0,.23.23,0,0,1-.09-.08.28.28,0,0,1,0-.12v-9a.28.28,0,0,1,0-.12.23.23,0,0,1,.09-.08.3.3,0,0,1,.13,0A.24.24,0,0,1,4.85,4.2Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M10,4.2l4.82,4.49a.18.18,0,0,1,.05.07.21.21,0,0,1,0,.18L14.85,9,10,13.5a.24.24,0,0,1-.11.06.27.27,0,0,1-.13,0,.18.18,0,0,1-.09-.08.19.19,0,0,1,0-.12v-9a.19.19,0,0,1,0-.12.18.18,0,0,1,.09-.08.27.27,0,0,1,.13,0A.24.24,0,0,1,10,4.2Z"></path>
    </g>
  </g>`,M=`<g id="free_piece">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M9.76,9.66h3.89v4.19a.68.68,0,0,1-.68.68H9.76Z"></path>
      <path d="M4.35,9.66H8.24v4.87H5a.58.58,0,0,1-.26-.06.6.6,0,0,1-.36-.36.58.58,0,0,1,0-.26V9.66Z"></path>
      <path d="M13.39,7H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36A.82.82,0,0,0,12.53,5a.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33L9.08,7H9l-.83-2.9A.73.73,0,0,0,8,3.81a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1A.87.87,0,0,0,5.54,5a.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36A.71.71,0,0,0,5.91,6l2,1H4.61a.46.46,0,0,0-.49.44v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7.48A.47.47,0,0,0,13.39,7Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M9.76,14H13a.71.71,0,0,0,.48-.19.72.72,0,0,0,.2-.48V9.16H9.76Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M4.36,13.35a.58.58,0,0,0,0,.26.6.6,0,0,0,.36.36A.58.58,0,0,0,5,14H8.24V9.16H4.36Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M13.39,6.54H10.13l2-1a.78.78,0,0,0,.29-.25.78.78,0,0,0,.13-.36.82.82,0,0,0-.05-.38.87.87,0,0,0-.23-.31l-1.15-1a.76.76,0,0,0-.34-.16.74.74,0,0,0-.39,0,.94.94,0,0,0-.33.2.84.84,0,0,0-.19.33l-.82,2.9H9l-.83-2.9A.73.73,0,0,0,8,3.31a.79.79,0,0,0-.33-.2.7.7,0,0,0-.38,0,.75.75,0,0,0-.35.16l-1.14,1a.87.87,0,0,0-.23.31.71.71,0,0,0,0,.38.78.78,0,0,0,.13.36.71.71,0,0,0,.29.25l2,1H4.61A.46.46,0,0,0,4.12,7v.87a.47.47,0,0,0,.49.45h8.78a.47.47,0,0,0,.49-.45V7A.47.47,0,0,0,13.39,6.54Z"></path>
    </g>
  </g>`,P=`<path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${a.d.ClassNames.Background}" fill="#7979a1" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<g class="${a.d.ClassNames.ComponentShadow}" opacity="0.1">
    <polygon points="11.29 11.34 11.29 8.56 7.79 11.3 7.79 11.34 5.39 11.34 9.54 16.5 13.73 11.34 11.29 11.34"></polygon>
    <polygon points="7.83 7.51 7.83 10.32 11.33 7.58 11.33 7.5 13.73 7.5 9.58 2.35 5.39 7.51 7.83 7.51"></polygon>
  </g>
<g>
    <polygon class="${a.d.ClassNames.Component}" fill="#fff" points="10.9 10.92 10.9 8.13 7.4 10.87 7.4 10.92 5 10.92 9.15 16.07 13.34 10.92 10.9 10.92"></polygon>
    <polygon class="${a.d.ClassNames.Component}" fill="#fff" points="7.44 7.08 7.44 9.9 10.94 7.16 10.94 7.08 13.34 7.08 9.19 1.93 5 7.08 7.44 7.08"></polygon>
  </g>`,L=`<g id="great_find">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#749BBF" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M10.32,14.6a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.7a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.9a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
      </g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M10.32,14.1a.27.27,0,0,1,0,.13.44.44,0,0,1-.08.11l-.11.08-.13,0H8l-.13,0-.11-.08a.41.41,0,0,1-.08-.24V12.2a.27.27,0,0,1,0-.13.36.36,0,0,1,.07-.1.39.39,0,0,1,.1-.08l.13,0h2a.31.31,0,0,1,.24.1.39.39,0,0,1,.08.1.51.51,0,0,1,0,.13Zm-.12-3.93a.17.17,0,0,1,0,.12.41.41,0,0,1-.07.11.4.4,0,0,1-.23.08H8.1a.31.31,0,0,1-.34-.31L7.61,3.4a.36.36,0,0,1,.09-.24.23.23,0,0,1,.11-.08.27.27,0,0,1,.13,0h2.11a.32.32,0,0,1,.25.1.36.36,0,0,1,.09.24Z"></path>
    </g>
  </g>`,N=`<g id="forced">
    <g id="fast_win">
      <g>
        <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
        <path class="${a.d.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
      </g>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14.39,9.07,9,4.31a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1.29.29,0,0,0,0,.16V7.42H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.79L14.39,10a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,9.07Z"></path>
    </g>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M14.39,8.57,9,3.81a.31.31,0,0,0-.3,0,.32.32,0,0,0-.13.1A.29.29,0,0,0,8.5,4V6.92H3.9a.58.58,0,0,0-.19,0,.5.5,0,0,0-.17.11.91.91,0,0,0-.11.16.63.63,0,0,0,0,.19v3.41a.58.58,0,0,0,0,.19.64.64,0,0,0,.11.16.39.39,0,0,0,.17.11.41.41,0,0,0,.19,0H8.5v2.74a.26.26,0,0,0,.16.26.3.3,0,0,0,.16,0A.34.34,0,0,0,9,14.29l5.42-4.76a.69.69,0,0,0,.16-.22.7.7,0,0,0,0-.52A.69.69,0,0,0,14.39,8.57Z"></path>
  </g>`,x=`<g id="good">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#95b776" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.ComponentShadow}" opacity="0.2" d="M15.11,6.81,9.45,12.47,7.79,14.13a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.78a.39.39,0,0,1-.11-.28.39.39,0,0,1,.11-.27L4.28,7.85a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09l2.69,2.68,5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.81Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M15.11,6.31,9.45,12,7.79,13.63a.39.39,0,0,1-.28.11.39.39,0,0,1-.27-.11L2.89,9.28A.39.39,0,0,1,2.78,9a.39.39,0,0,1,.11-.27L4.28,7.35a.34.34,0,0,1,.12-.09l.15,0a.37.37,0,0,1,.15,0,.38.38,0,0,1,.13.09L7.52,10l5.65-5.65a.38.38,0,0,1,.13-.09.37.37,0,0,1,.15,0,.4.4,0,0,1,.15,0,.34.34,0,0,1,.12.09l1.39,1.38a.41.41,0,0,1,.08.13.33.33,0,0,1,0,.15.4.4,0,0,1,0,.15A.5.5,0,0,1,15.11,6.31Z"></path>
    </g>
  </g>`,O=`<g id="inaccuracy">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#F7C631" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.66,14.8a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.8V12.9a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,4.1A.5.5,0,0,1,11,3.86l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>
      <path d="M7.65,14.82a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V13a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73A5.58,5.58,0,0,1,9,9a4.85,4.85,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7V11a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27A1.16,1.16,0,0,0,6.49,6,1.61,1.61,0,0,0,6,6.11a3,3,0,0,0-.41.18,1.75,1.75,0,0,0-.29.18l-.11.09A.5.5,0,0,1,5,6.62a.31.31,0,0,1-.21-.13l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.68a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17,3.92,3.92,0,0,1,2.3.75,2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.71,3,3,0,0,1,9.85,7.65Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M13.66,14.3a.28.28,0,0,1,0,.13.23.23,0,0,1-.08.11.28.28,0,0,1-.11.08l-.12,0h-2l-.13,0a.27.27,0,0,1-.1-.08A.36.36,0,0,1,11,14.3V12.4a.59.59,0,0,1,0-.13.36.36,0,0,1,.07-.1l.1-.08.13,0h2a.33.33,0,0,1,.23.1.39.39,0,0,1,.08.1.28.28,0,0,1,0,.13Zm-.12-3.93a.31.31,0,0,1,0,.13.3.3,0,0,1-.07.1.3.3,0,0,1-.23.08H11.43a.31.31,0,0,1-.34-.31L10.94,3.6A.5.5,0,0,1,11,3.36l.11-.08.13,0h2.11a.35.35,0,0,1,.26.1.41.41,0,0,1,.08.24Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M7.65,14.32a.27.27,0,0,1,0,.12.26.26,0,0,1-.07.11l-.1.07-.13,0H5.43a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.49a.36.36,0,0,1,.09-.23l.1-.07.12,0H7.32a.32.32,0,0,1,.23.09.3.3,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6A4.85,4.85,0,0,1,8.48,9a8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.21.21,0,0,1,0,.12.17.17,0,0,1-.06.1.23.23,0,0,1-.1.07l-.12,0H5.53a.21.21,0,0,1-.12,0,.18.18,0,0,1-.1-.07.2.2,0,0,1-.08-.1.37.37,0,0,1,0-.12v-.35a2.68,2.68,0,0,1,.13-.84,2.91,2.91,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.84,7.84,0,0,0,.65-.64,1,1,0,0,0,.25-.67.77.77,0,0,0-.07-.34.67.67,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24A1.61,1.61,0,0,0,6,5.61a3,3,0,0,0-.41.18A1.75,1.75,0,0,0,5.3,6l-.11.09A.5.5,0,0,1,5,6.12.31.31,0,0,1,4.74,6l-1-1.21a.3.3,0,0,1,0-.4A1.36,1.36,0,0,1,4,4.18a3.07,3.07,0,0,1,.56-.38,5.49,5.49,0,0,1,.9-.37,3.69,3.69,0,0,1,1.19-.17A3.92,3.92,0,0,1,8.93,4a2.85,2.85,0,0,1,.77.92A2.82,2.82,0,0,1,10,6.21,3,3,0,0,1,9.85,7.15Z"></path>
    </g>
  </g>`,I=`<g id="incorrect">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#fa412d" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M14,12.51a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,11.37,5.94,14.44a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,13.06a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12.51L7.07,9.45,4,6.39a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.84L5.39,4.46a.39.39,0,0,1,.27-.11.43.43,0,0,1,.28.11L9,7.52l3.06-3.06a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.84a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9.45Z"></path>
    </g>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M14,12a.57.57,0,0,1,.08.13.39.39,0,0,1,0,.3.5.5,0,0,1-.08.12l-1.38,1.38a.5.5,0,0,1-.12.08l-.15,0-.15,0a.57.57,0,0,1-.13-.08L9,10.87,5.94,13.94a.57.57,0,0,1-.13.08l-.15,0-.15,0a.36.36,0,0,1-.12-.08L4,12.56a.39.39,0,0,1-.11-.27A.41.41,0,0,1,4,12L7.07,9,4,5.89a.43.43,0,0,1-.11-.28A.39.39,0,0,1,4,5.34L5.39,4a.39.39,0,0,1,.27-.11A.43.43,0,0,1,5.94,4L9,7,12.06,4a.41.41,0,0,1,.28-.11.39.39,0,0,1,.27.11L14,5.34a.36.36,0,0,1,.08.12.39.39,0,0,1,0,.3.57.57,0,0,1-.08.13L10.92,9Z"></path>
  </g>`,R=`<g id="mate">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M11.44,8.61h1.74l.1-1.55H11.54l.18-2.78H10.17L10,7.06H8.31l.18-2.78H6.94L6.76,7.06H5l-.1,1.55H6.66l-.11,1.68H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.84H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,10.29l.1-1.68H9.89l-.1,1.68Z"></path>
      </g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M11.44,8.11h1.74l.1-1.55H11.54l.18-2.78H10.17L10,6.56H8.31l.18-2.78H6.94L6.76,6.56H5l-.1,1.55H6.66L6.55,9.79H4.82l-.1,1.55H6.46l-.18,2.78H7.83L8,11.34H9.69l-.18,2.78h1.55l.18-2.78H13l.1-1.55H11.34ZM8.11,9.79l.1-1.68H9.89l-.1,1.68Z"></path>
    </g>
  </g>`,B=`<g id="missed_win">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <rect x="2.74" y="8.1" width="12.51" height="3.11" rx="0.36"></rect>
      </g>
      <rect class="${a.d.ClassNames.Component}" fill="#fff" x="2.74" y="7.6" width="12.51" height="3.11" rx="0.36"></rect>
    </g>
  </g>`,V=`<g id="mistake">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#FFA459" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M9.92,15a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08A.31.31,0,0,1,7.39,15V13.19A.32.32,0,0,1,7.48,13l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35A2.42,2.42,0,0,1,7.61,10a2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34.75.75,0,0,0-.23-.27,1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07,3,3,0,0,0-.41.18,1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.69L6,5.48a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2,3.07,3.07,0,0,1,.56-.38,5.38,5.38,0,0,1,.89-.37A3.75,3.75,0,0,1,8.9,4a4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.85Z"></path>
      </g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M9.92,14.52a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.69a.32.32,0,0,1,.09-.23l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35a2.42,2.42,0,0,1,.13-.84,2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34A.75.75,0,0,0,9.48,6a1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07A3,3,0,0,0,7.86,6a1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.19L6,5a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2A3.07,3.07,0,0,1,6.81,4a5.38,5.38,0,0,1,.89-.37,3.75,3.75,0,0,1,1.2-.17,4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.35Z"></path>
    </g>
  </g>`,H=`<g id="resign_black">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g>
      <path d="M4.94,6.34H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.78A.62.62,0,0,0,4.94,6.34Z"></path>
      <path d="M12.33,4.48c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69a.46.46,0,0,0,.12-.44c-.21-.78-.8-3-1.1-4.05C12.62,4.44,12.42,4.36,12.33,4.48Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.ComponentShadow}" fill="#fff" d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>
      <path class="${a.d.ClassNames.ComponentShadow}" fill="#fff" d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>
    </g>
  </g>`,D=`<g id="resign_white">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <circle class="${a.d.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
      <g>
        <path d="M4.94,5.74H4.89a.63.63,0,0,0-.44.77l2.16,8.09a.63.63,0,0,0,.77.45l0,0a.62.62,0,0,0,.44-.76L5.7,6.18A.62.62,0,0,0,4.94,5.74Z"></path>
        <path d="M12.33,3.88c-2,2.29-3.83-.41-6,1.52a.54.54,0,0,0-.15.25.48.48,0,0,0,0,.29c.22.89.87,3.3,1.12,4.15a.15.15,0,0,0,.26.07c1.92-2.65,4,.27,6.11-1.69A.46.46,0,0,0,13.76,8c-.21-.78-.8-3-1.1-4C12.62,3.84,12.42,3.76,12.33,3.88Z"></path>
      </g>
    </g>
    <path class="${a.d.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
  </g>`,F=`<g id="sharp">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#ad5b8c" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M13.37,11.74,9.25,2.81a.22.22,0,0,0-.1-.11.27.27,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.74a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14.51a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09L13.31,12a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.74ZM9,5v8.73a.24.24,0,0,1-.38.17L5.91,11.76a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16L8.84,5a.08.08,0,0,1,0,0h.06A.09.09,0,0,1,9,5S9,5,9,5Z"></path>
    </g>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M13.37,11.24,9.25,2.31a.22.22,0,0,0-.1-.11.26.26,0,0,0-.28,0,.18.18,0,0,0-.1.11L4.63,11.24a.26.26,0,0,0,0,.15.25.25,0,0,0,.08.14l2.67,2.29.07.09a.3.3,0,0,1,0,.1v1.08a.25.25,0,0,0,.08.18.24.24,0,0,0,.18.07h2.57a.26.26,0,0,0,.18-.07.25.25,0,0,0,.08-.18V14a.16.16,0,0,1,0-.1.47.47,0,0,1,.06-.09l2.67-2.29a.25.25,0,0,0,.08-.14A.26.26,0,0,0,13.37,11.24ZM9,4.51v8.73a.24.24,0,0,1-.38.17L5.91,11.26a.3.3,0,0,1-.09-.13.22.22,0,0,1,0-.16l3-6.49a.08.08,0,0,1,0,0h.06a.09.09,0,0,1,.05,0S9,4.49,9,4.51Z"></path>
  </g>`,$=`<g id="take_back">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#96af8b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M3.67,10.38a.25.25,0,0,1,.24-.31L5,9.93a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2,3.77,3.77,0,0,0,1.26,2.34,3.87,3.87,0,0,0,2.52.94,3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3A3.94,3.94,0,0,0,11.77,7a3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.75c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,8a.46.46,0,0,1,0-.21V4.6a.4.4,0,0,1,.16-.38c.11,0,.26,0,.42.17L5.6,5.49a5.93,5.93,0,0,1,1.63-1,5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.8a5.48,5.48,0,0,1,1.16,1.73,5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.36,5.36,0,0,1-2.85-2.48A5.43,5.43,0,0,1,3.67,10.38Z"></path>
    </g>
    <path class="${a.d.ClassNames.Component}" fill="#fff" d="M3.67,9.88a.25.25,0,0,1,.24-.31L5,9.43a.49.49,0,0,1,.2.05.26.26,0,0,1,.1.2A3.77,3.77,0,0,0,6.56,12,3.87,3.87,0,0,0,9.08,13a3.53,3.53,0,0,0,1.47-.31,3.72,3.72,0,0,0,1.22-.81,4.13,4.13,0,0,0,.82-1.2,3.74,3.74,0,0,0,0-3,3.94,3.94,0,0,0-.82-1.2,3.72,3.72,0,0,0-1.22-.81,3.53,3.53,0,0,0-1.47-.31,3.43,3.43,0,0,0-1.23.22,3.07,3.07,0,0,0-1.09.6L7.85,7.25c.16.14.22.29.16.38s-.18.16-.4.16H4.45a.33.33,0,0,1-.19,0,1,1,0,0,1-.17-.1A.57.57,0,0,1,4,7.47a.46.46,0,0,1,0-.21V4.1a.4.4,0,0,1,.16-.38c.11-.05.26,0,.42.17L5.6,5A5.93,5.93,0,0,1,7.23,4a5.42,5.42,0,0,1,4,.11A5.17,5.17,0,0,1,12.93,5.3,5.48,5.48,0,0,1,14.09,7a5.17,5.17,0,0,1,.44,2.12,5,5,0,0,1-.44,2.12,5.54,5.54,0,0,1-2.88,2.91,5.77,5.77,0,0,1-2.13.42,5.39,5.39,0,0,1-1.94-.37,5.63,5.63,0,0,1-1.65-1,5.59,5.59,0,0,1-1.2-1.5A5.43,5.43,0,0,1,3.67,9.88Z"></path>
  </g>`,U=`<g id="threat">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
    <path class="${a.d.ClassNames.Background}" fill="#ec6250" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path d="M15.12,9.65a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.84,6.11,6.11,0,0,1,9,3.53a6.15,6.15,0,0,1,6.12,6.12ZM5,9.65a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.65Z"></path>
      <path d="M6.75,9.65a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12,2.22,2.22,0,0,0,1.76-1.76,2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M15.12,9.15a6.14,6.14,0,0,1-3.78,5.65,6.19,6.19,0,0,1-3.53.35A6.15,6.15,0,0,1,3,10.34,6.11,6.11,0,0,1,9,3a6.15,6.15,0,0,1,6.12,6.12ZM5,9.15a4,4,0,0,0,.67,2.22,4.09,4.09,0,0,0,1.79,1.47,4,4,0,0,0,5.22-5.22A4,4,0,0,0,5,9.15Z"></path>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M6.75,9.15a2.24,2.24,0,0,0,.38,1.25,2.27,2.27,0,0,0,1,.83,2.22,2.22,0,0,0,1.3.12A2.22,2.22,0,0,0,11.2,9.59a2.22,2.22,0,0,0-.13-1.3,2.25,2.25,0,0,0-4.32.86Z"></path>
    </g>
  </g>`,W=`<path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<path class="${a.d.ClassNames.Background}" fill="#312e2b" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<path d="M8.57,7.26,8.11,10l.89.86L9.89,10,9.45,7.26ZM9,12.86A3.35,3.35,0,1,1,12.36,9.5,3.34,3.34,0,0,1,9,12.86Zm.7-8.29V4.12h.82V2.79h-3V4.12H8.3v.45a5,5,0,1,0,1.4,0Z"></path>
<path class="${a.d.ClassNames.ComponentShadow}" fill="#fff" d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,j=`<path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
<circle class="${a.d.ClassNames.Background}" fill="#f8f8f8" cx="9" cy="9" r="8.5"></circle>
<path class="${a.d.ClassNames.ComponentShadow}" fill="#e8e8e8" d="M9,1A8,8,0,1,1,1,9,8,8,0,0,1,9,1M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
<path d="M8.57,6.76,8.11,9.48l.89.86.89-.86L9.45,6.76ZM9,12.36A3.35,3.35,0,1,1,12.36,9,3.34,3.34,0,0,1,9,12.36Zm.7-8.29V3.62h.82V2.29h-3V3.62H8.3v.45a5,5,0,1,0,1.4,0Z"></path>`,G=`
  <path
    class="${a.d.ClassNames.Shadow}"
    d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"
    opacity=".3"></path>
  <path
    class="${a.d.ClassNames.Background}"
    d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"
    fill="#8a8886"></path>
  <path
    d="M3.59,10.23a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,13.31,3.58,3.58,0,0,0,10.47,13a3.94,3.94,0,0,0,1.22-.81A4.09,4.09,0,0,0,12.5,11a3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2A3.94,3.94,0,0,0,10.47,6,3.65,3.65,0,0,0,9,5.69a3.61,3.61,0,0,0-1.23.21,3.23,3.23,0,0,0-1.09.6L7.77,7.59c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,8a.52.52,0,0,1-.17-.38V4.45c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,5.34a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,4.05a5.3,5.3,0,0,1,2.12.44,5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,7.38a5.23,5.23,0,0,1,.44,2.12A5.16,5.16,0,0,1,14,11.62a5.59,5.59,0,0,1-1.16,1.73,5.32,5.32,0,0,1-1.73,1.18A5.64,5.64,0,0,1,9,15a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,12.1,5.1,5.1,0,0,1,3.59,10.23Z"
    class="${a.d.ClassNames.ComponentShadow}"
    opacity=".3"></path>
  <path
    d="M3.59,9.73a.25.25,0,0,1,.24-.31l1.08-.15a.49.49,0,0,1,.2.06.25.25,0,0,1,.11.2,3.58,3.58,0,0,0,.42,1.28,3.68,3.68,0,0,0,.84,1.06,3.76,3.76,0,0,0,1.16.69A3.9,3.9,0,0,0,9,12.81a3.58,3.58,0,0,0,1.47-.31,3.94,3.94,0,0,0,1.22-.81,4.09,4.09,0,0,0,.81-1.2,3.74,3.74,0,0,0,0-3,4.09,4.09,0,0,0-.81-1.2,3.94,3.94,0,0,0-1.22-.81A3.65,3.65,0,0,0,9,5.19a3.61,3.61,0,0,0-1.23.21A3.23,3.23,0,0,0,6.68,6L7.77,7.09c.16.15.21.29.16.38s-.18.17-.4.17H4.37a.36.36,0,0,1-.2,0A.76.76,0,0,1,4,7.49a.52.52,0,0,1-.17-.38V4c0-.2.06-.33.17-.38s.25,0,.41.16L5.51,4.84a5.83,5.83,0,0,1,1.64-1A5.19,5.19,0,0,1,9,3.55,5.3,5.3,0,0,1,11.12,4a5,5,0,0,1,1.73,1.16A5.59,5.59,0,0,1,14,6.88,5.23,5.23,0,0,1,14.45,9,5.16,5.16,0,0,1,14,11.12a5.59,5.59,0,0,1-1.16,1.73A5.32,5.32,0,0,1,11.12,14,5.64,5.64,0,0,1,9,14.45a5.23,5.23,0,0,1-1.94-.37A5.27,5.27,0,0,1,4.21,11.6,5.1,5.1,0,0,1,3.59,9.73Z"
    class="${a.d.ClassNames.Component}"
    fill="#ffffff"></path>
`,q=`<g id="winner">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>
    </g>
    <path class="undefined" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>
  </g>`,Z=`<g id="winner-white" fill="#fff">
    <g>
      <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"></path>
      <path class="${a.d.ClassNames.Background}" fill="#dbac16" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"></path>
    </g>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
      <path class="cls-4" d="M4.35,12.66,2.86,7.72a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,7.34a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21.05L6.27,9.15l.14,0h.14a.31.31,0,0,0,.13-.06A.48.48,0,0,0,6.77,9L8.69,5.54a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18L11.22,9a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21-.05.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.37.37,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.66Z"></path>
    </g>
    <path class="undefined" fill-rule="evenodd" d="M4.35,12.06,2.86,7.12a.37.37,0,0,1,0-.21A.35.35,0,0,1,3,6.74a.31.31,0,0,1,.2-.07.3.3,0,0,1,.21,0L6.27,8.55l.14,0h.14a.31.31,0,0,0,.13-.06.48.48,0,0,0,.09-.11L8.69,4.94a.4.4,0,0,1,.13-.13.37.37,0,0,1,.18,0,.36.36,0,0,1,.31.18l1.91,3.48a.52.52,0,0,0,.1.11.31.31,0,0,0,.13.06h.14l.13,0,2.89-1.83a.3.3,0,0,1,.21,0,.31.31,0,0,1,.2.07.35.35,0,0,1,.12.17.38.38,0,0,1,0,.21l-1.49,4.94a.34.34,0,0,1-.13.18.31.31,0,0,1-.21.07H4.69a.31.31,0,0,1-.21-.07A.34.34,0,0,1,4.35,12.06Z"></path>
  </g>`,z=`<g id="interesting">
    <path class="${a.d.ClassNames.Shadow}" d="m9 .5a9 9 0 1 0 9 9 9 9 0 0 0 -9-9z" opacity="0.3"></path>
    <path  class="${a.d.ClassNames.Background}" d="m0 9a9 9 0 1 0 9-9 9 9 0 0 0 -9 9z" fill="#7979a1"></path>
    <g  class="${a.d.ClassNames.Component}" opacity=".2">
      <path d="m4.75 12.9a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.1-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.82a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.05-.12.35.35 0 0 1 -.08-.22v-1.78a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.2a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 .02-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .61-.62 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.77-.28 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.29.18l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.09.56 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.11.98z"/></g><g fill="#fff"><path d="m4.75 12.4a.28.28 0 0 1 0-.13.25.25 0 0 1 .08-.1.33.33 0 0 1 .23-.1h2 .12l.11.08a.36.36 0 0 1 .07.1.59.59 0 0 1 0 .13v1.9a.36.36 0 0 1 -.09.24.27.27 0 0 1 -.1.08h-.13-2-.12a.44.44 0 0 1 -.19-.19.28.28 0 0 1 0-.13zm-.06-8.8a.41.41 0 0 1 .08-.24.35.35 0 0 1 .23-.1h2.14.13l.11.08a.5.5 0 0 1 .09.24l-.15 6.77c0 .21-.15.31-.34.31h-1.78a.3.3 0 0 1 -.2-.06.3.3 0 0 1 -.07-.1.31.31 0 0 1 0-.13z"/><path d="m12.39 14.32a.25.25 0 0 1 0 .12.28.28 0 0 1 -.08.11l-.1.07h-.12-1.91a.27.27 0 0 1 -.13 0 .39.39 0 0 1 -.1-.08.35.35 0 0 1 -.08-.22v-1.83a.32.32 0 0 1 .09-.23l.1-.07h.12 1.89a.33.33 0 0 1 .23.09.61.61 0 0 1 .07.1.27.27 0 0 1 0 .13zm2.2-7.17a2.49 2.49 0 0 1 -.36.73 4.51 4.51 0 0 1 -.48.6 6 6 0 0 1 -.52.49q-.39.34-.66.63a1 1 0 0 0 -.27.7v.22a.22.22 0 0 1 0 .12.35.35 0 0 1 -.17.17.2.2 0 0 1 -.11 0h-1.75-.12a.23.23 0 0 1 -.1-.07.26.26 0 0 1 -.07-.1.22.22 0 0 1 0-.12v-.35a2.41 2.41 0 0 1 .12-.84 2.91 2.91 0 0 1 .33-.66 3.38 3.38 0 0 1 .45-.55l.49-.42a6.55 6.55 0 0 0 .63-.64 1 1 0 0 0 .26-.67.66.66 0 0 0 -.08-.34.64.64 0 0 0 -.18-.27 1.18 1.18 0 0 0 -.73-.24 1.66 1.66 0 0 0 -.49.07 3 3 0 0 0 -.41.18 2.29 2.29 0 0 0 -.37.21l-.1.09a.53.53 0 0 1 -.24.06c-.12 0-.19-.07-.21-.13l-1-1.21a.29.29 0 0 1 0-.4 1.36 1.36 0 0 1 .21-.2 3 3 0 0 1 .55-.38 5.87 5.87 0 0 1 .9-.37 3.75 3.75 0 0 1 1.2-.17 4.12 4.12 0 0 1 1.2.19 4 4 0 0 1 1.16.52 2.73 2.73 0 0 1 .77.92 2.7 2.7 0 0 1 .29 1.28 2.72 2.72 0 0 1 -.14.95z"/>
    </g>
  </g>`,K=`<g id="warning">
    <g>
      <g class="${a.d.ClassNames.Shadow}" opacity="0.3">
        <path d="M.32,14.3,6.94,2.83a2.37,2.37,0,0,1,4.11,0L17.68,14.3a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,14.3Z"></path>
      </g>
      <path class="${a.d.ClassNames.Background}" fill="#ec6250" d="M.32,13.8,6.94,2.33a2.37,2.37,0,0,1,4.11,0L17.68,13.8a2.38,2.38,0,0,1-2.06,3.56H2.38A2.38,2.38,0,0,1,.32,13.8Z"></path>
    </g>
    <g>
      <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.2">
        <path d="M10.21,15.19a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1.31.31,0,0,1-.22.09H8.1a.25.25,0,0,1-.12,0,.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13.45a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,13.17l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.6a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,5.41a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,5.1H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>
      </g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M10.21,14.69a.5.5,0,0,1,0,.12.26.26,0,0,1-.07.1A.31.31,0,0,1,9.9,15H8.1A.25.25,0,0,1,8,15a.31.31,0,0,1-.09-.07.35.35,0,0,1-.08-.22V13a.29.29,0,0,1,.09-.21A.22.22,0,0,1,8,12.67l.11,0H9.9a.31.31,0,0,1,.22.09.27.27,0,0,1,.09.21ZM10.1,11.1a.22.22,0,0,1,0,.11.23.23,0,0,1-.07.1.27.27,0,0,1-.21.07H8.18a.29.29,0,0,1-.31-.28L7.73,4.91a.35.35,0,0,1,.08-.22.23.23,0,0,1,.1-.07A.25.25,0,0,1,8,4.6H10a.32.32,0,0,1,.23.09.35.35,0,0,1,.08.22Z"></path>
    </g>
  </g>`,Q=`<g id="equal">
    <path class="${a.d.ClassNames.Shadow}" opacity="0.3" d="M9,.5a9,9,0,1,0,9,9A9,9,0,0,0,9,.5Z"/>
    <path class="${a.d.ClassNames.Background}" fill="#a88865" d="M9,0a9,9,0,1,0,9,9A9,9,0,0,0,9,0Z"/>
    <g class="${a.d.ClassNames.ComponentShadow}" opacity="0.4">
      <path d="M5.31,8.36l-.15,0A.57.57,0,0,1,5,8.25.57.57,0,0,1,5,8.12a.4.4,0,0,1,0-.15V6a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V8a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>
      <path d="M5.31,13.36l-.15,0A.57.57,0,0,1,5,13.25.57.57,0,0,1,5,13.12a.4.4,0,0,1,0-.15V11a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V13a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>
    </g>
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#f1f2f2" d="M5.31,7.86l-.15,0A.57.57,0,0,1,5,7.75.57.57,0,0,1,5,7.62a.4.4,0,0,1,0-.15V5.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39V7.47a.4.4,0,0,1,0,.15.57.57,0,0,1-.08.13.57.57,0,0,1-.13.08l-.15,0Z"/>
      <path class="${a.d.ClassNames.Component}" fill="#f1f2f2" d="M5.31,12.86l-.15,0A.57.57,0,0,1,5,12.75.57.57,0,0,1,5,12.62a.4.4,0,0,1,0-.15V10.53a.38.38,0,0,1,.39-.39h7.38a.38.38,0,0,1,.39.39v1.94a.4.4,0,0,1,0,.15.33.33,0,0,1-.21.21l-.15,0Z"/>
    </g>
  </g>`;var X=n(15388);let Y={[X.Rc.Alternative]:l,[X.Rc.BestMove]:c,[X.Rc.Blunder]:d,[X.Rc.Book]:f,[X.Rc.Brilliant]:m,[X.Rc.CheckmateBlack]:g,[X.Rc.CheckmateWhite]:_,[X.Rc.Correct]:y,[X.Rc.Critical]:b,[X.Rc.DefeatWhite]:C,[X.Rc.DefeatBlack]:A,[X.Rc.DrawBlack]:w,[X.Rc.DrawWhite]:k,[X.Rc.Excellent]:S,[X.Rc.FastWin]:T,[X.Rc.Forced]:N,[X.Rc.FreePiece]:M,[X.Rc.Gamechanger]:P,[X.Rc.Good]:x,[X.Rc.GreatFind]:L,[X.Rc.Inaccuracy]:O,[X.Rc.Incorrect]:I,[X.Rc.Mate]:R,[X.Rc.Miss]:'<defs><style>.cls-1{fill:#f1f2f2;}.cls-2{fill:#FF7769;}.cls-3{opacity:.2;}.cls-4{opacity:.3;}</style></defs><g id="incorrect"><path class="cls-4" d="M9,.5C4.03,.5,0,4.53,0,9.5s4.03,9,9,9,9-4.03,9-9S13.97,.5,9,.5Z"/><path class="cls-2" d="M9,0C4.03,0,0,4.03,0,9s4.03,9,9,9,9-4.03,9-9S13.97,0,9,0Z"/><g class="cls-3"><path d="M13.99,12.51s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-1.37,1.37s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-3.06-3.06-3.06,3.06s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-1.37-1.37c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l3.06-3.06-3.06-3.06c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l1.37-1.37c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l3.06,3.06,3.06-3.06c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l1.37,1.37s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-3.06,3.06,3.06,3.06Z"/></g><path class="cls-1" d="M13.99,12.01s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-1.37,1.37s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-3.06-3.06-3.06,3.06s-.08,.06-.13,.08c-.05,.02-.1,.03-.15,.03s-.1-.01-.15-.03c-.05-.02-.09-.05-.13-.08l-1.37-1.37c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l3.06-3.06-3.06-3.06c-.07-.07-.11-.17-.11-.28s.04-.2,.11-.28l1.37-1.37c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l3.06,3.06,3.06-3.06c.07-.07,.17-.11,.28-.11s.2,.04,.28,.11l1.37,1.37s.06,.08,.08,.13c.02,.05,.03,.1,.03,.15s-.01,.1-.03,.15c-.02,.05-.05,.09-.08,.13l-3.06,3.06,3.06,3.06Z"/></g>',[X.Rc.MissedWin]:B,[X.Rc.Mistake]:V,[X.Rc.ResignBlack]:H,[X.Rc.ResignWhite]:D,[X.Rc.Sharp]:F,[X.Rc.Takeback]:$,[X.Rc.Threat]:U,[X.Rc.TimeoutBlack]:W,[X.Rc.TimeoutWhite]:j,[X.Rc.Undo]:G,[X.Rc.Winner]:q,[X.Rc.WinnerWhite]:Z,[X.Rc.Interesting]:z,[X.Rc.Warning]:K,[X.Rc.Equal]:Q}},41943:function(e,t,n){"use strict";var a,l;n.d(t,{Z:function(){return a}});(e=>{(e=>{e.AddingMarkings="AddingMarkings";e.Idle="Idle";e.PieceDragging="PieceDragging";e.PieceSelected="PieceSelected";e.PromotionAreaShowing="PomotionAreaShowing"})(e.States||(e.States={}))})(a||(a={}));(e=>{e.Name="core"})(l||(l={}))},52929:function(e,t,n){"use strict";n.d(t,{y:function(){return millisecondsToDeciseconds}});function millisecondsToDeciseconds(e){return Math.round(e/100)}},83789:function(e,t,n){"use strict";n.d(t,{Y:function(){return getPreviousNodeOfSameColor}});function getPreviousNodeOfSameColor({api:e,node:t}){return e.getNodeByIds({move:t.ids.move-2,line:t.ids.line})}},68007:function(e,t,n){"use strict";n.d(t,{i:function(){return makeSvgIcon}});function makeSvgIcon({className:e="",path:t="",size:n="24",viewBox:a="0 0 18 19"}){return`
    <svg xmlns="http://www.w3.org/2000/svg" class="${e}" width="${n}" height="${n}" viewBox="${a}">
      ${t}
    </svg>
  `}},85705:function(e,t,n){"use strict";var a;n.d(t,{I:function(){return a}});(e=>{(e=>{e.Name="arrowKeys"})(e.Plugin||(e.Plugin={}));(e=>{e.Left="arrowleft";e.NumLeft="numpad4";e.Up="arrowup";e.NumUp="numpad8";e.Right="arrowright";e.NumRight="numpad6";e.Down="arrowdown";e.NumDown="numpad5"})(e.Arrow||(e.Arrow={}))})(a||(a={}))},67234:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var a=(e=>(e.Arrows="arrows",e.BlinkingHighlights="blinking-highlights",e.CaptureHints="capture-hints",e.Coordinates="coordinates",e.Effects="effects",e.FadeSetup="fade-setup",e.HoverSquare="hover-square",e.MoveHints="move-hints",e.Pieces="pieces",e.PromotionWindow="promotion-window",e.Squares="squares",e))(a||{})},77751:function(e,t,n){"use strict";n.d(t,{q:function(){return getDefaultOptions}});var a=n(27112);function generateRandomId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return[0,0,0,0,0,0,0,0,0,0].reduce(t=>t+e.charAt(Math.floor(Math.random()*e.length)),"")}function getDefaultOptions(){return{allowMarkings:!0,disableUserMarkings:!1,analysisHighlightColors:{alt:a.b.HighlightColors.Blue,ctrl:a.b.HighlightColors.Orange,default:a.b.HighlightColors.Red,shift:a.b.HighlightColors.Green},analysisHighlightOpacity:.8,animationType:a.b.Animation.Types.Default,arrowColors:{alt:a.b.HighlightedArrowColors.Blue,ctrl:a.b.HighlightedArrowColors.Red,default:a.b.HighlightedArrowColors.Orange,shift:a.b.HighlightedArrowColors.Green},aspectRatio:1,autoClaimDraw:!0,autoPromote:!1,autoResize:!0,boardStyle:"green",captureKeyStrokes:!0,checkBlinkingSquareColor:"#ff0000",coordinates:a.b.CoordinatesPositions.Inside,darkMode:!1,diagramStyle:!0,enabled:!0,disableUserNavigation:!1,fadeSetup:0,flipped:!1,highlightColor:void 0,highlightLegalMoves:!0,highlightMoves:!0,highlightOpacity:.5,hoverSquareOutline:!0,id:generateRandomId(),moveListContextMenuEnabled:!0,moveListDisplayType:a.b.MoveListDisplayTypes.Text,moveListClassificationStyle:a.b.MoveListClassificationStyles.Default,moveMethod:a.b.MoveMethods.Drag,overlayInAnalysisMode:!1,pieceStyle:"neo",playSounds:!0,premoveDelay:200,premoveHighlightColor:"#f42a32",premoveHighlightOpacity:.5,rounded:!0,soundTheme:"default",syncEffects:!0,threatSquareColor:"#ff0000",threatSquareOpacity:.8,useSharedStyleTag:!1,disableRookCastling:!1,assetPaths:{basePath:"https://www.chess.com",enPassant:"https://www.chess.com/article/view/how-to-capture-en-passant",soundsTheme:"https://images.chesscomfiles.com/chess-themes/sounds/"}}}},32831:function(e,t,n){"use strict";var a;n.d(t,{i:function(){return a}});(e=>{(e=>{e.Event="Event";e.State="State"})(e.LogCodes||(e.LogCodes={}));(e=>{e.DraggingPiece="draggingPiece";e.HideHoverSquare="hideHoverSquare";e.MachineState="machineState";e.PromotionMove="promotionMove";e.SoundPlayed="soundPlayed";e.SelectedPiece="selectedPiece"})(e.State||(e.State={}));(e=>{e.AddMove="AddMove";e.BlinkHighlight="BlinkHighlight";e.ClearMarkings="ClearMarkings";e.CreateContinuation="CreateContinuation";e.CreateGame="CreateGame";e.DeletePosition="DeletePosition";e.DrawAgreed="DrawAgreed";e.DrawClaimed="DrawClaimed";e.GameResigned="GameResigned";e.IllegalMove="IllegalMove";e.LineCommentUpdated="LineCommentUpdated";e.LineUpdated="LineUpdated";e.Load="Load";e.Mark="Mark";e.Move="Move";e.MoveBackward="MoveBackward";e.MoveForward="MoveForward";e.MoveVariation="MoveVariation";e.NodeUpdated="NodeUpdated";e.NodeLimitsUpdated="NodeLimitsUpdated";e.OutOfTime="OutOfTime";e.PromoteVariation="PromoteVariation";e.Reload="Reload";e.ResetGame="ResetGame";e.ResetToMainLine="ResetToMainLine";e.SelectLineEnd="SelectLineEnd";e.SelectNode="SelectNode";e.SelectLineStart="SelectLineStart";e.SetBoardPosition="SetBoardPosition";e.SetPlayingAs="SetPlayingAs";e.TurnSet="TurnSet";e.Undo="Undo";e.Unmark="Unmark";e.UpdatePGNHeaders="UpdatePGNHeaders"})(e.APIEvents||(e.APIEvents={}));(e=>{e.PromotionAreaClosePointerdown="PromotionAreaClosePointerdown";e.PromotionPiecePointerdown="PromotionPiecePointerdown"})(e.BoardEvents||(e.BoardEvents={}));(e=>{e.Create="Create";e.Destroy="Destroy";e.ModeChanged="ModeChanged";e.RendererSet="RendererSet";e.RendererSetFailed="RendererSetFailed";e.WebGLAssetsInitialized="WebGLAssetsInitialized";e.StylesSetFailed="StylesSetFailed"})(e.InstanceEvents||(e.InstanceEvents={}));(e=>{e.Update="UpdateOptions";e.UpdateMode="UpdateModeOptions"})(e.OptionsEvents||(e.OptionsEvents={}));(e=>{e.Play="PlaySound"})(e.SoundEvents||(e.SoundEvents={}));(e=>{e.Resize="Resize";e.ToggleHotkeyLegend="ToggleHotkeyLegend"})(e.UIEvents||(e.UIEvents={}));(e=>{e.MousedownLeft="MousedownLeft";e.MousedownRight="MousedownRight";e.PointerdownLeft="PointerdownLeft";e.PointerdownRight="PointerdownRight";e.Pointermove="Pointermove";e.Pointerup="Pointerup";e.Wheel="Wheel"})(e.UserEvents||(e.UserEvents={}));(e=>{e.UntrustedUserEvent="UntrustedUserEvent"})(e.FairPlay||(e.FairPlay={}))})(a||(a={}))},74371:function(e,t,n){"use strict";var a;n.d(t,{M:function(){return a}});(e=>{(e=>{e.Reset="Reset";e.Start="Start";e.Stop="Stop";e.Tick="Tick"})(e.Actions||(e.Actions={}));(e=>{e.End="End";e.Reset="Reset";e.Start="Start";e.Stop="Stop";e.Tick="Tick";e.TimeAdded="TimeAdded"})(e.Events||(e.Events={}));(e=>{e.Ended="Ended";e.Going="Going";e.Initial="Initial";e.Stopped="Stopped"})(e.States||(e.States={}))})(a||(a={}))},79670:function(e,t,n){"use strict";var a;n.d(t,{B:function(){return a}});(e=>{(e=>{e.Name="timeControl"})(e.Plugin||(e.Plugin={}));(e=>{e.Blitz="blitz";e.Bullet="bullet";e.Rapid="rapid"})(e.Types||(e.Types={}));(e=>{e.Null="-";e.Separator="+";e.TimePerMove="/";e.Unset="?"})(e.Header||(e.Header={}))})(a||(a={}))},84878:function(e,t,n){"use strict";n.d(t,{i:function(){return createAnimator}});var a=n(37131);function updateAnimatedProperties(e){let t,n,l,c,d;let{animatedProps:f,animatedPropsKeyframes:m,frameInfo:g,isTargetHTMLElement:_,params:y}=e,{keyframes:b,target:A}=y,{elapsedPercentage:C}=g,w=y.easing||a.y;b&&Object.keys(f).forEach(e=>{for(let a=1;a<m[e].length;a++){l=m[e][a-1];c=m[e][a];if(C>=l&&C<=c){t=b[l][e];n=b[c][e];break}}d=w(d=(C-l)/(c-l));f[e]=t+(n-t)*d;A&&!_&&(A[e]=f[e])})}function createAnimation(e){let{data:t,keyframes:n,repeat:a,target:l,onEnd:c}=e,d=getAnimatedProps(n),f=getAnimatedPropsKeyframes(d,n),m={animatedProps:d,animatedPropsKeyframes:f,data:{...t},endCallbacks:[],ended:!1,endTime:0,forcedEnd:!1,frameInfo:{deltaTime:0,elapsedInterval:0,elapsedPercentage:0},isTargetHTMLElement:l instanceof HTMLElement,onEnd:e=>m.endCallbacks.push(e),params:e,repeatCount:a||1,started:!1,startTime:0,keptAlive:!1};return c&&m.endCallbacks.push(c),m}function getAnimatedProps(e){if(!e)return{};if(!e[0])throw Error("The animation keyframes must contain values at `0` percentage.");return{...e[0]}}function getAnimatedPropsKeyframes(e,t){if(!t)return{};let n=Object.keys(e),a={};return n.forEach(e=>a[e]=[]),Object.keys(t).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).forEach(e=>{n.forEach(n=>{void 0!==t[e][n]&&a[n].push(parseInt(e,10))})}),a}function createAnimator(e=!1){let t=[],n=0,a=0;return{end,endAll,play,playingAnimations:t,playingAnimationsCount:()=>t.length,update};function animationLoop(l){let c=(l-a)*.001;t.forEach(e=>{if(e.startTime>l)return;let t=e.frameInfo;t.deltaTime=c;if(e.started||onAnimationStart(e,l)){if(e.endTime){t.elapsedInterval=(l-e.startTime)/(e.endTime-e.startTime);t.elapsedInterval>1&&(t.elapsedInterval=1);t.elapsedPercentage=Math.round(100*t.elapsedInterval)}onAnimationUpdate(e);e.endTime&&e.endTime<=l&&onAnimationEnd(e)}});a=l;t.length&&!e&&(n=requestAnimationFrame(animationLoop))}function end(e){if(!(e.ended||0>t.indexOf(e))){e.frameInfo.elapsedInterval=1;e.frameInfo.elapsedPercentage=100;onAnimationUpdate(e);onAnimationEnd(e,!0)}}function endAll(){[...t].forEach(end)}function onAnimationEnd(e,t=!1){let{duration:n,keepAlive:a,repeatDelay:l}=e.params;e.repeatCount--;e.forcedEnd=t;if(!t&&e.repeatCount>0&&n&&n!==1/0){e.startTime=e.endTime+(l||0);e.endTime=e.startTime+n;return}if(!t&&a){e.keptAlive=!0;return}e.ended=!0;e.endCallbacks.forEach(t=>t(e));removeAnimation(e)}function onAnimationStart(e,t){let{duration:n,delay:a,onStart:l}=e.params;if(!e.startTime){e.startTime=t+(a||0);n&&n!==1/0&&(e.endTime=e.startTime+n)}return!(e.startTime>t)&&(e.started=!0,null==l||l(e),!0)}function onAnimationUpdate(e){let{onUpdate:t}=e.params;updateAnimatedProperties(e);null==t||t(e)}function play(a){let l=createAnimation(a);return t.push(l),n||e||startAnimationLoop(),l}function removeAnimation(n){let a=t.indexOf(n);a>=0&&t.splice(a,1);t.length||e||stopAnimationLoop()}function startAnimationLoop(){a=performance.now();n=requestAnimationFrame(animationLoop)}function stopAnimationLoop(){n&&cancelAnimationFrame(n);n=0}function update(e){animationLoop(e)}}},28931:function(e,t,n){"use strict";n.d(t,{C:function(){return parseEffects},y:function(){return convertStringToType}});function parseEffects(e,t){let n={};for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let{data:a}=e[t];n[t]={};for(let e=0;e<a.length;e+=2){let l=a[e],c=a[e+1];n[t][l]=convertStringToType(c)}}let a=t?n[t]||{}:n;return 0===Object.keys(a).length?void 0:a}function convertStringToType(e){return"true"===e||"false"!==e&&("undefined"!==e?e:void 0)}},40986:function(e,t,n){"use strict";var a;n.d(t,{d:function(){return a}});(e=>{(e=>{(e=>{e.Brilliant="Brilliant!";e.GreatFind="Great!";e.BestMove="Best Move";e.Inaccuracy="Inaccuracy";e.Miss="Miss";e.CheckmateBlack="Checkmate";e.CheckmateWhite="Checkmate";e.Mate="Checkmate";e.Mistake="Mistake";e.DrawBlack="Draw";e.DrawWhite="Draw";e.Stalemate="Stalemate";e.Blunder="Blunder";e.ResignBlack="Resign";e.ResignWhite="Resign";e.Winner="Winner";e.WinnerWhite="Winner";e.TimeoutBlack="Timeout";e.TimeoutWhite="Timeout";e.Abandon="Abandon"})(e.EffectLabels||(e.EffectLabels={}))})(e.Translation||(e.Translation={}))})(a||(a={}))},7215:function(e,t,n){"use strict";n.d(t,{R:function(){return l}});var a=n(5700);let l=`<g id="mistake">
    <g>
      <path class="${a.d.ClassNames.Component}" fill="#fff" d="M9.92,14.52a.27.27,0,0,1,0,.12.41.41,0,0,1-.07.11.32.32,0,0,1-.23.09H7.7a.25.25,0,0,1-.12,0,.27.27,0,0,1-.1-.08.31.31,0,0,1-.09-.22V12.69a.32.32,0,0,1,.09-.23l.1-.07.12,0H9.59a.32.32,0,0,1,.23.09.61.61,0,0,1,.07.1.28.28,0,0,1,0,.13Zm2.2-7.17a3.1,3.1,0,0,1-.36.73,5.58,5.58,0,0,1-.49.6,6,6,0,0,1-.52.49,8,8,0,0,0-.65.63,1,1,0,0,0-.27.7v.22a.24.24,0,0,1,0,.12.17.17,0,0,1-.06.1.3.3,0,0,1-.1.07l-.12,0H7.79l-.12,0a.3.3,0,0,1-.1-.07.26.26,0,0,1-.07-.1.37.37,0,0,1,0-.12v-.35a2.42,2.42,0,0,1,.13-.84,2.55,2.55,0,0,1,.33-.66,3.38,3.38,0,0,1,.45-.55c.16-.15.33-.29.49-.42a7.73,7.73,0,0,0,.64-.64,1,1,0,0,0,.26-.67.77.77,0,0,0-.07-.34A.75.75,0,0,0,9.48,6a1.16,1.16,0,0,0-.72-.24,1.61,1.61,0,0,0-.49.07A3,3,0,0,0,7.86,6a1.41,1.41,0,0,0-.29.18l-.11.09a.5.5,0,0,1-.24.06A.31.31,0,0,1,7,6.19L6,5a.29.29,0,0,1,0-.4,1.36,1.36,0,0,1,.21-.2A3.07,3.07,0,0,1,6.81,4a5.38,5.38,0,0,1,.89-.37,3.75,3.75,0,0,1,1.2-.17,4.07,4.07,0,0,1,1.2.19,4,4,0,0,1,1.09.56,2.76,2.76,0,0,1,.78.92,2.82,2.82,0,0,1,.28,1.28A3,3,0,0,1,12.12,7.35Z"></path>
    </g>
  </g>`},6803:function(e,t,n){"use strict";n.d(t,{J:function(){return createGame}});var a,l,c,d=n(32831),f=n(41946),m=n(78339);function getExtendedNode({move:e,startingMoveNumber:t}){if(!e)return null;let n=(0,m.Ms)(e,t);return{...e,ply:e.ids.move+1,wholeMoveNumber:n}}var g=n(52929),_=n(67577);function getTimestamp({baseTimeDs:e,incrementDs:t,lastTimeDs:n,currentTimeDs:a}){return a?Math.max((n??e)-(a-t),_.P):_.P}var y=n(83789);function calculateTimestampValue({api:e,node:t}){let n=e.getLine(0),a=e.timeControl.get();if(!n||!a)return null;let l=t.time,c=(0,y.Y)({api:e,node:t}),d=null==c?void 0:c.time,{baseTime:f,increment:m}=a;return getTimestamp({baseTimeDs:(0,g.y)(f),incrementDs:(0,g.y)(m),lastTimeDs:d,currentTimeDs:l})}function formatClk(e){let t=Math.floor(e%36e3/600),n=Math.floor(e%36e3%600)/10;return`${Math.floor(e/36e3)}:${t<10?"0":""}${t}:${n<10?"0":""}${n}`}function setClkOnNode({api:e,node:t,clk:n}){let{line:a,move:l}=t.ids,c=e.getContext().game;t.commands||(t.commands={});c.updateNode({commands:Object.assign(t.commands,{clk:null===n?n:formatClk(n)})},l,a)}var b=n(5825);function handleTimestamp({context:e,time:t}){let{api:n,game:a}=e,l=a.moveDetails();l.time=t;setClkOnNode({api:n,node:l,clk:t});let c=calculateTimestampValue({api:n,node:l});c&&(0,b.q)({api:n,node:l,timestamp:c})}var A=n(18792);function createAddMoveToEndOfLine(e){return function addMoveToEndOfLine(t,n=0){let{api:a,game:l,mutateGame:c,respond:f}=e,{ids:m}=a.getSelectedNode()??{ids:{move:-1,line:0}},{move:g,line:_}=m;l.selectLineEnd(n);let y=(0,A.B)(t,a.getFEN(),a.getVariant()),b=null!==y?c(function callMethod(){l.move(y,!1);y.time&&handleTimestamp({context:e,time:y.time})}):null;return(l.selectPosition(g,_),null===b)?f(d.i.APIEvents.IllegalMove,{fen:l.fen(),move:y}):(b.move=getExtendedNode({move:b.move,startingMoveNumber:l.startingMoveNumber()})||void 0,f(d.i.APIEvents.AddMove,{listMove:b.move}))}}var C=n(17084),w=n(66548);function createAgreeDraw(e){return function agreeDraw(){let{api:t,respond:n}=e;if(t.isGameOver())return null;let a=C.Z.Results.Draw,l=w.k.Translation.GameTerminationMessages.DrawByAgreement;return t.setGameDetails({Result:a,Termination:l}),n(d.i.APIEvents.DrawAgreed)}}var k=n(93160);function createBlinkHighlight(e){return function blinkHighlight(t){let{respond:n}=e,a={data:t,type:k.R};return n(d.i.APIEvents.BlinkHighlight,[a])}}function tryMovingForward(e){let{move:t,followContinuations:n=!0,steps:a=1,context:l}=e,{mutateGame:c,game:d}=l,f=d.ids(),m=c(function callMethod(){d.moveForward(n,t)}),g=(null==m?void 0:m.plyDiff)===1;if(a>1&&g)for(let e=1;e<a;e++){g=d.moveForward(n);if(!g)break}let _=d.ids();return d.selectPosition(f.move,f.line),{firstStepData:m,startIds:f,endIds:_,success:g}}function createCanMoveForward(e){return function canMoveForward(t){let{move:n,followContinuations:a,steps:l}=t??{},{success:c}=tryMovingForward({context:e,move:n,followContinuations:a,steps:l});return c}}function isClaimableDraw(e){return e.inThreefoldRepetition()||e.in50MoveRule()}function createClaimDraw(e){return function claimDraw(){let{api:t,game:n}=e;return t.isGameOver()?null:isClaimableDraw(n)?(t.setResult(C.Z.Results.Draw),e.respond(d.i.APIEvents.DrawClaimed)):null}}let S={ClearMarkings:buildMarkingsWarning("clearMarkings","api.markings.removeAll/removeAllWhere/removeMany/removeOne"),Mark:buildMarkingsWarning("mark","api.markings.addOne/addMany"),ToggleMarking:buildMarkingsWarning("toggleMarking","api.markings.toggleOne/toggleMany"),Unmark:buildMarkingsWarning("unmark","api.markings.removeOne/removeMany")};function buildMarkingsWarning(e,t){return`The "${e}" method is deprecated and will be removed in v2.0.0. Please use the ${t} methods instead.`}function createClearMarkings(e){return function clearMarkings(t,n={}){console.warn(S.ClearMarkings);let{api:a,respond:l}=e,c=a.markings,f=null==t?void 0:t.map(e=>"square"===e?"highlight":e);return c.removeAllWhere({...n,types:f}),l(d.i.APIEvents.ClearMarkings)}}function createCreateContinuation(e){return function createContinuation(){let{api:t,game:n,respond:a}=e,l=n._getPos();if("initial"in l)return null;n.createVariation();n.move(l);let c=t.getRelativeNode();return a(d.i.APIEvents.CreateContinuation,{node:c})}}function createDeletePosition(e){return function deletePosition(t,n){let{api:a,game:l,respond:c}=e,f=a.getRawLines()[n];return l.deletePosition(t,n),0===n&&a.getResult()!==C.Z.Results.None&&a.setResult(C.Z.Results.None),c(d.i.APIEvents.DeletePosition,{ids:{line:n,move:t},line:f,pieces:a.getPieces()})}}var T=n(17229);function createExtendAPI(e){let t={};return function extendAPI(n,a){let l=Object.entries(a).map(([a,l])=>l?(t[a]||(t[a]={extensions:{},original:e.api[a]}),e.api[a]=l(e),t[a].extensions[n]=l,function destroyOverride(){delete t[a].extensions[n];e.api[a]=t[a].original;Object.keys(t[a].extensions).map(n=>e.api[a]=t[a].extensions[n](e))}):void 0);return function destroyOverride(){l.map(e=>e&&e())}}}function isJCEWin(e){return e.inCheckmate()||!!e.isVariantWin()||!!e.isBughouseWin()}function createGetCalculatedResult(e){return function getCalculatedResult(){let{api:t,game:n}=e,a=C.Z.Results.None,l=isClaimableDraw(n);return isJCEWin(n)?a=n.turn()===C.Z.ColorsAsNumbers.Black?C.Z.Results.White:C.Z.Results.Black:(l&&t.getOptions().autoClaimDraw||!l&&n.inDraw())&&(a=C.Z.Results.Draw),a}}function createGetContext(e){return function getContext(){return e}}function createGetCurrentFullLine(e){return function getCurrentFullLine(){let{game:t}=e;return t.history({toCurrent:!0,verbose:!0})}}function createGetFen(e){return function getFEN(){let{game:t}=e;return t.fen()}}var M=n(10269);function createGetFingerprints(e){return function getFingerprints(){return M.A.gameFingerprints({game:e.game,analysis:!0})}}function createGetHeaders(e){return function getHeaders(){let{game:t}=e;return t.headers()}}function isFirstNodeInLine(e){return -1===e}function createGetHistoryFENs(e){return function getHistoryFENs(t=!1){let{game:n}=e,a=n._getPos();return a.ids&&0===a.ids.line&&isFirstNodeInLine(a.ids.move)&&a.fen?[a.fen]:n.history({toCurrent:!t,verbose:!0}).map(e=>e.fen)}}function createGetHistorySANs(e){return function getHistorySANs(){let{game:t}=e;return t.history(!1)}}function createGetJCEGameCopy(e){return function getJCEGameCopy(){var t;let{api:n}=e,a=(null==(t=n.premoves)?void 0:t.getQueue())||[],l=M.A.createGame({pgn:n.getPGN(),analysis:!0,timestamps:n.times.get()||n.timestamps.get()||void 0});if(!l)throw Error("Unable to create JCE game copy");return l.premove.queue.push(...a),l}}function createGetLastMove(e){return function getLastMove(){let{game:t}=e;return getExtendedNode({move:t.history(!0).slice(-1)[0],startingMoveNumber:t.startingMoveNumber()})??void 0}}function createGetLegalMoves(e){return function getLegalMoves(){let{game:t}=e;return M.A.getLegalMoves({game:t})}}var P=n(57571);function createGetLegalMovesForSquare(e){return function getLegalMovesForSquare(t){return(0,P.b)(e.api.getLegalMoves().filter(e=>void 0===t||e.from===t).map(e=>e.to))}}function createGetLine(e){return function getLine(t){let{game:n}=e,a=n.startingMoveNumber(),l=e.api.getRawLines()[t];if(!l){if(0===t)throw Error("Expected a main line");return}return l.forEach((e,t)=>{let n=getExtendedNode({move:e,startingMoveNumber:a});l[t]=n}),l}}var L=n(82246);function convertMarkingsToCollection(e){let t={[C.Z.Node.Marking.Types.Arrow]:{},[C.Z.Node.Marking.Types.CustomItem]:{},[C.Z.Node.Marking.Types.Effect]:{},[C.Z.Node.Marking.Types.Square]:{}};return e.map(e=>({markingType:"highlight"===e.type?"square":e.type,key:e.data.square??`${e.data.from}${e.data.to}`,color:L.o.Default,...e.data})).reduce((e,t)=>{let{key:n,markingType:a}=t;return e[a][n]=t,e},t)}function createGetMarkings(e){return function getMarkings(){let{api:t}=e;return convertMarkingsToCollection(t.markings.getAll())}}function createGetMaterial(e){return function getMaterial(){let{game:t}=e;return t.material()}}function createGetMove(e){return function getMove(t){let{game:n}=e;if(null===t.to)return null;let a=n.getMove(t);if(null===a){Object.assign(t,{promotion:"q"});a=n.getMove(t)}return a&&(a=n.moveDetails(a)),a}}function createGetNodeByIds(e){return function getNodeByIds(t){let{api:n,game:a}=e,l=n.getRawLines()[t.line];return l&&-1!==t.move?getExtendedNode({move:l[t.move],startingMoveNumber:a.startingMoveNumber()}):null}}function getLineDiff(e,t){return t.ids.line-e.ids.line}function getMoveNumber(e){let{moveNumber:t}=e;return void 0!==t?t:-1}function getPlyDiff(e,t){return getMoveNumber(t)-getMoveNumber(e)}function getEPCapturedSquare(e){if(e.flags===C.Z.Move.Flags.EPCapture&&e.from)return`${e.to.slice(0,1)}${e.from.slice(-1)}`}function extendMove(e){let t={...e,EPCapturedSquare:getEPCapturedSquare(e)};return e.rookFrom&&e.rookTo&&(t.rookMove={animate:!0,from:e.rookFrom,to:e.rookTo}),t}function createGetNodeDiffData(e){return function getNodeDiffData(t,n){let{api:a,game:l}=e,c=n??l._getPos(),d=t??l._getPos(-1,0),f={};f.plyDiff=getPlyDiff(d,c);f.lineDiff=getLineDiff(d,c);if(-1===f.plyDiff)f.move=extendMove({...t,animate:!0});else if(1===f.plyDiff){f.animate=!0;f.move=extendMove({...c,animate:!0})}else f.pieces=a.getPieces();return f}}function createGetNodeIds(e){return function getNodeIds(){let{game:t}=e;return t.ids()}}var N=n(77457);function createGetPieces(e){return function getPieces(){let{game:t}=e;return(0,N.N)(t.getPieces(!0))}}function createGetPGN(e){return function getPGN(t={}){let{game:n}=e;return n.pgn({...t,useResultHeader:!0})}}function createGetPiece(e){return function getPiece(t){let{game:n}=e;return n.get(t)}}function createGetPosition(e){return function getPosition(t,n){let{game:a}=e;return a._getPos(t,n)}}function createGetPositionDetails(e){return function getPositionDetails(t){let n=e.api.getPGN();return M.A.getPositionDetails({pgn:n},t)}}function isJCEMoveModel(e){return void 0!==e.color}function createGetPositionInfo(e){return function getPositionInfo(t=[],n,a){let{api:l}=e,c=n??{game:e.game,analysis:!0},d=C.Z.JCEVariantTypes[l.getVariant()],f=M.A.getPositionInfo(c,t,{variant:d});if("object"==typeof f){let n=e.game.header().Termination,c={...f,...getMetaGameTerminationReasons(n,a),gameOver:l.isGameOver()||f.gameOver,draw:l.getResult()===C.Z.Results.Draw||f.draw};if("string"!=typeof t){let e=t[t.length-1];void 0!==e&&isJCEMoveModel(e)&&(c.lastMoveColor=e.color)}return c}return!1}}function getMetaGameTerminationReasons(e,t){return t?{drawByAgreement:e===t.drawByAgreement,timeoutVsInsufficientMaterial:e===t.timeoutVsInsufficientMaterial}:{}}function createGetRawLines(e){return function getRawLines(){let{game:t}=e;return t._lines()}}function createGetRelativeNode(e){return function getRelativeNode(t=0){let{game:n}=e,a={...n.ids()};a.move+=t;let l=e.api.getRawLines()[a.line];return isFirstNodeInLine(a.move)?l:getExtendedNode({move:l[a.move],startingMoveNumber:n.startingMoveNumber()})}}function createGetResult(e){return function getResult(){let{game:t}=e;return t.headers().Result}}function createGetSelectedNode(e){return function getSelectedNode(){let{api:t,game:n}=e,a=n.ids();return isFirstNodeInLine(a.move)?null:getExtendedNode({move:t.getRawLines()[a.line][a.move],startingMoveNumber:n.startingMoveNumber()})}}function createGetTCN(e){return function getTCN(){let{game:t}=e;return M.A.encodeTCN(t.history(!0))}}function createGetTurn(e){return function getTurn(){let{game:t}=e;return t.turn()}}let x={"3-check":C.Z.Variants.ThreeCheck,Bughouse:C.Z.Variants.Bughouse,Chess:C.Z.Variants.Chess,Chess960:C.Z.Variants.Chess960,Crazyhouse:C.Z.Variants.Crazyhouse,"King of the Hill":C.Z.Variants.KingOfTheHill};function createGetVariant(e){return function getVariant(){let{api:t}=e,n=t.getHeaders().Variant;return n?x[n]??C.Z.Variants.Chess:C.Z.Variants.Chess}}function createIsAtEndOfLine(e){return function isAtEndOfLine(){let{game:t}=e,n=t.ids();return e.api.getRawLines()[n.line].length-1===n.move}}function createIsCheck(e){return function isCheck(){let{game:t}=e;if(t.inCheck()){let n=e.api.getPieces();return n.keys().filter(e=>{let a=n.get(e);return"k"===a.type&&a.color===t.turn()})[0]}return!1}}function createIsGameOver(e){return function isGameOver(){let{api:t}=e;return"*"!==t.getResult()}}function createIsLegalMove(e){return function isLegalMove(t){let{game:n}=e;return null!==n.getMove(t)}}var O=n(47834);function convertTimesToTimestamps(e,t){if(t&&e){let n=(0,g.y)(e.baseTime),a=(0,g.y)(e.increment);return t.map((e,l)=>"number"!=typeof e?e:getTimestamp({baseTimeDs:n,incrementDs:a,lastTimeDs:l<=1?void 0:t[l-2],currentTimeDs:e}))}return t}var I=n(42839);function convertNagsToAnnotations(e){let t=e;return Object.keys(I.PN).reverse().forEach(e=>{t=t.replace(RegExp(`\\${e}`,"gm"),I.PN[e])}),t}function createLoad(e){return function load({fen:t,moves:n,pgn:a,times:l,timestamps:c,timeControl:m,variant:g=C.Z.Variants.Chess,pieces:_},y){let{api:A,game:w,respond:k}=e,S=!1,T=w.pgn();if(a){let e=convertNagsToAnnotations(a);S=w.loadPgn(e)}else t&&(S=w.load(t,g));(n||""===n)&&(S=w.loadMoves(n,{autoPromote:!0,...y}));if(!S){w.loadPgn(T);throw new f.V({code:O.t.BadData,data:{fen:t,pgn:a},message:"Unable to load with provided data."})}let P=A.getLine(0),L=l?convertTimesToTimestamps(m||A.timeControl.get(),l):c;L&&P&&P.forEach((e,t)=>{let n=L[t];void 0!==n&&(0,b.q)({api:A,node:e,timestamp:n})});m&&A.timeControl.set(m);let N=A.getResult();return A.setResult(N===C.Z.Results.None?A.getCalculatedResult():N),w._lines().forEach(e=>e.forEach(e=>w.moveDetails(e))),k(d.i.APIEvents.Load,{...M.A.getPositionDetails({game:w,skipValidation:!0}),...M.A.getPositionInfo({analysis:!0,game:w}),line:P,pieces:_??A.getPieces(),variant:g})}}var R=n(94231),B=n(72520);function formatForMarkingsAPI(e,t={}){let[n,a]=Object.entries(e)[0],{node:l,persistent:c}=t;return(0,B.$)(a).map(e=>{let t={data:e,node:l,persistent:c,type:"square"===n?k.R:n};return{...t,key:(0,R.xR)(t)}})}var V=n(88370);function createMark(e){return function mark(t,n,a){console.warn(S.Mark);let{api:l}=e,c=l.markings,f=formatForMarkingsAPI(t,{node:(null==a?void 0:a.node)??n,persistent:(null==a?void 0:a.persistent)??!0});return c.addMany(f),(0,V.e)(d.i.APIEvents.Mark,f)}}function createMemoryCache(e={}){let t=copy(e);return{add,clear,get,remove};function add(e,...n){let a=t;n.forEach(e=>{e in a||(a[e]={});a=a[e]});Object.assign(a,e)}function clear(n){n?t[n]={}:t=copy(e)}function get(){return copy(t)}function remove(...e){let n=t,a=e.length-1;e.forEach((e,t)=>{e in n&&t!==a&&(n=n[e])});delete n[e[a]]}function copy(e){return JSON.parse(JSON.stringify(e))}}function createMove(e){return function move(t,n=!0){let{api:a,game:l,mutateGame:c,respond:f}=e,m=(0,A.B)(t,a.getFEN(),a.getVariant()),g=null!==m?c(function makeMove(){let a;a="san"in m?l.move(m.san||m,n):"object"==typeof t&&"tcn"in t?l.loadMoves(t.tcn.slice(0,2),{atCurrent:!0,method:"merge"}):l.move(m,n);if(!a)return null;m.time&&handleTimestamp({context:e,time:m.time})}):null;if(null===g)return f(d.i.APIEvents.IllegalMove,{fen:l.fen(),move:t});g.result&&a.setResult(g.result);if(g.move&&m){Object.assign(g.move,{animate:m.animate,userGenerated:m.userGenerated,userGeneratedDrop:m.userGeneratedDrop,isExternalBoard:m.isExternalBoard});m.ac&&(g.move.ac=m.ac);g.move=extendMove(g.move)}return f(d.i.APIEvents.Move,g)}}function tryMovingBackward(e){let{selectContinuationMoves:t=!1,steps:n=1,context:a}=e,{mutateGame:l,game:c}=a,d=c.ids(),f=l(function callMethod(){c.moveBackward(t)}),m=(null==f?void 0:f.plyDiff)===-1;if(n>1&&m)for(let e=1;e<n;e++){m=c.moveBackward(t);if(!m)break}let g=c.ids();return c.selectPosition(d.move,d.line),{firstStepData:f,startIds:d,endIds:g,success:m}}function createMoveBackward(e){return function moveBackward(t){let{respond:n,api:a,game:l}=e,{selectContinuationMoves:c,steps:f}=getMoveBackwardParameters(t);if(f<1)return null;let{firstStepData:m,success:g,endIds:_}=tryMovingBackward({context:e,selectContinuationMoves:c,steps:f});return 1===f||(null==m?void 0:m.plyDiff)!==-1?(l.selectPosition(_.move,_.line),n(d.i.APIEvents.MoveBackward,m)):g?a.selectNode(_.line,_.move):n(d.i.APIEvents.MoveBackward,null)}}function getMoveBackwardParameters(e){let t,n={};"object"==typeof e?n=e:t=e;let{selectContinuationMoves:a,steps:l}=n;return{selectContinuationMoves:a??t??!1,steps:l??1}}function createMoveForward(e){return function moveForward(t,n){let{respond:a,api:l,game:c}=e,{move:f,followContinuations:m,steps:g}=getMoveForwardParameters(t,n);if(g<1)return null;let{firstStepData:_,success:y,endIds:b}=tryMovingForward({context:e,move:f,followContinuations:m,steps:g});return 1===g||(null==_?void 0:_.plyDiff)!==1?(c.selectPosition(b.move,b.line),a(d.i.APIEvents.MoveForward,_)):y?l.selectNode(b.line,b.move):a(d.i.APIEvents.MoveForward,null)}}function getMoveForwardParameters(e,t){let n,a={};"object"==typeof e?a=e:n=e;let{move:l,followContinuations:c,steps:d}=a;return{move:l??t,followContinuations:c??n??!0,steps:d??1}}function createMoveVariation(e){return function moveVariation(t,n){let{game:a,respond:l}=e;return a.moveVariation(t,n)?l(d.i.APIEvents.MoveVariation):null}}var H=n(58553);function createMutateGame(e,t){return function mutateGame(n){let a=e.moveDetails(),l=t.getCalculatedResult(),c=n();if(null===c)return null;let d=e.moveDetails(),f=t.getCalculatedResult(),m=t.getNodeDiffData(a,d);l!==f&&(0,H.u)(null==d?void 0:d.ids.line)&&(m.result=f);let{line:g,move:_}=e.ids();return m.linesReordered=0!==g&&0===_&&e.reorderLines(),m}}function removeUnsetHeaders(e){return Object.keys(e).reduce((t,n)=>(e[n]!==C.Z.EmptyPGNHeaders.Value&&e[n]!==C.Z.EmptyPGNHeaders.Date&&(t[n]=e[n]),t),{})}var D=n(91548);let F={trans,transChoice};function trans(e,t,n){return e}function transChoice(e,t,n,a){return`${t}`}var $=n(49165);let{capitalizeFirstLetter:U}=T.wr;function createOutOfTime(e){return function outOfTime(t){let{api:n,game:a,respond:l}=e,c=(0,$.T)(t),{Result:f,Termination:m}=insufficientMaterial(t)?getInsufficientDetails():getWinnerDetails();n.setGameDetails({Result:f,Termination:m});a.header({Termination:m});return l(d.i.APIEvents.OutOfTime,{...removeUnsetHeaders(a.header()),color:t});function getWinnerDetails(){let e=U((0,D.O)(c)),t=n.getHeaders()[e];return{Result:c===C.Z.ColorsAsNumbers.Black?C.Z.Results.Black:C.Z.Results.White,Termination:F.trans("%username% won on time",{"%username":t})}}function getInsufficientDetails(){return{Result:C.Z.Results.Draw,Termination:w.k.Translation.GameTerminationMessages.TimeoutVsInsufficientMaterial}}};function insufficientMaterial(t){let n="[a-jl-z]",a=e.api.getFEN().replace(RegExp(t===C.Z.ColorsAsNumbers.Black?n:n.toUpperCase(),"g"),"1");return M.A.createGame({fen:a,analysis:!0}).insufficientMaterial()}}function createOverrideAPI(e){let t={};return function overrideAPI(n,a){let l=Object.entries(a);return l.forEach(([a,l])=>{let c=t[a];if(!c){t[a]={methodName:a,original:e.api[a],current:e.api[a],before:[],after:[],instead:[],extensions:{}};c=t[a];e.api[a]=withOverrides(a)}let addOverride=t=>{c[t.run].push({id:n,...t,handler:t.handler(e)});c[t.run].sort((e,t)=>(e.order||0)-(t.order||0))};if(Array.isArray(l))l.forEach(e=>{addOverride(e)});else if("object"==typeof l)addOverride(l);else if("function"==typeof l){c.extensions[n]=l;c.current=l(reformContext(c))}}),function destroyOverrides(){l.forEach(([e])=>{let a=t[e];delete a.extensions[n];let l=Object.values(a.extensions)[0];a.current=l?l(reformContext(a)):a.original;["before","after","instead"].forEach(e=>{a[e]=a[e].filter(e=>e.id!==n)})})}};function withOverrides(n){let a=t[n],getOverrides=(t,...n)=>a[t].filter(t=>!t.conditions||(Array.isArray(t.conditions)?t.conditions.every(t=>!!t(e,...n)):!!t.conditions(e,...n)));return(...e)=>{var t;let n;let l=getOverrides("before",...e),c=null==(t=getOverrides("instead",...e)[0])?void 0:t.handler,d=l.reduce((e,t)=>{let n=t.handler(...e);return t.changeArgs?n:e},e);return n=c?c(...d):a.current(...d),getOverrides("after",...d,n).reduce((e,t)=>t.handler(e,...d),n)}}function reformContext(t){return{...e,api:{...e.api,[t.methodName]:t.original}}}}function createReload(e){return function reload(){let{api:t,game:n,respond:a}=e;return a(d.i.APIEvents.Reload,{holdSelectedPiece:!0,pieces:(0,N.N)(n.getPieces(!0)),variant:t.getVariant()})}}function createPlayingAsAPI(e){let t=C.Z.ColorsAsNumbers.White,n=!1;return{getPlayingAs,setPlayingAs,usePlayingAs};function getPlayingAs(){return n?t:void 0}function setPlayingAs(n){if(n===t)return null;let{respond:a}=e;return t=n,a(d.i.APIEvents.SetPlayingAs,n)}function usePlayingAs(e){n=e||!1}}function createPromoteVariation(e){return function promoteVariation(t,n,a={replace:!1}){let{game:l,respond:c}=e;return l.promoteVariation(t,n)?(a.replace&&l.deletePosition(-1,t),c(d.i.APIEvents.PromoteVariation)):null}}function createResetGame(e){return function resetGame(){let{api:t,respond:n}=e;return t.setResult(C.Z.Results.None),t.load({fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"}),n(d.i.APIEvents.ResetGame)}}function createResign(e){return function resign(t){let{api:n,respond:a}=e;if(n.isGameOver())return null;let l=t===C.Z.ColorsAsNumbers.White?C.Z.Results.Black:C.Z.Results.White;return n.setResult(l),a(d.i.APIEvents.GameResigned,l)}}function createResetToMainLine(e){return function resetToMainLine(){let{api:t,game:n,respond:a}=e;return n.resetToMainLine(),a(d.i.APIEvents.ResetToMainLine,{pieces:t.getPieces()})}}function createRespond(e){return function respond(t,n){let a=(0,V.e)(t,n);return e.emit(t,a),a}}function createSelectLineEnd(e){return function selectLineEnd(t){let{api:n,game:a,mutateGame:l,respond:c}=e,f=l(function callMethod(){a.selectLineEnd(t)});return f&&(f.pieces=n.getPieces()),c(d.i.APIEvents.SelectLineEnd,f)}}function createSelectLineStart(e){return function selectLineStart(){let{api:t,game:n,mutateGame:a,respond:l}=e,c=a(function callMethod(){n.selectLineStart()});return c&&(c.pieces=t.getPieces()),l(d.i.APIEvents.SelectLineStart,c)}}function createSelectNode(e){return function selectNode(t,n){let{api:a,game:l,respond:c}=e,f=l.moveDetails();l.selectPosition(n,t);let m=l.moveDetails(),g=a.getNodeDiffData(f,m);return 0===g.plyDiff&&0===g.lineDiff?null:(0!==g.lineDiff&&(g.pieces=a.getPieces()),c(d.i.APIEvents.SelectNode,g))}}function createSetGameDetails(e){return function setGameDetails(t){let{game:n,respond:a}=e,l=removeUnsetHeaders(n.header(t));return a(d.i.APIEvents.UpdatePGNHeaders,l)}}function createSetResult(e){return function setResult(t){let{api:n}=e;return n.setGameDetails({Result:t})}}function createSetTurn(e){return function setTurn(t){let{game:n,respond:a}=e;return n.turn()===t?null:(n.turn(t),a(d.i.APIEvents.TurnSet,t))}}function createToggleMarking(e){return function toggleMarking(t,n,a){console.warn(S.ToggleMarking);let{api:l}=e,c=l.markings,f=formatForMarkingsAPI(t,{node:(null==a?void 0:a.node)??n,persistent:(null==a?void 0:a.persistent)??!0});return c.toggleMany(f),(0,V.e)(d.i.APIEvents.Mark,f)}}function createUndo(e){return function undo(){let{api:t}=e,n=t.getSelectedNode();return n?t.deletePosition(n.ids.move,n.ids.line):null}}function createUpdateNode(e){return function updateNode(t,n){let{game:a,respond:l}=e;return a.updateNode(n,t.move,t.line),l(d.i.APIEvents.NodeUpdated,{changes:n,ids:t,node:a._getPos(t.move,t.line)})}}function createUpdateLineComment(e){return function updateLineComment(t,n){let{game:a,respond:l}=e;return a.updateLineComment(t,n),l(d.i.APIEvents.LineCommentUpdated,{comment:t,lineId:n})}}function createUnmark(e){return function unmark(t,n,a){console.warn(S.Unmark);let{api:l}=e,c=l.markings,f=formatForMarkingsAPI(t,{node:(null==a?void 0:a.node)??n,persistent:(null==a?void 0:a.persistent)??!0});return c.removeMany(f.map(e=>e.key)),(0,V.e)(d.i.APIEvents.Unmark,f)}}function getBughouseGameTimeValues(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function createCreateGame(e){return function createGame(t){let n=M.A.createGame({timestamps:t.times||t.timestamps||void 0,...t,analysis:!0,autoPromote:!0});if(!n)return;let{api:a}=e,{times:l,timestamps:c}=t;if(t.variant===C.Z.Variants.Bughouse){l=getBughouseGameTimeValues(l);c=getBughouseGameTimeValues(c)}return a.load({pgn:n.pgn({useResultHeader:!0}),variant:t.variant,times:l,timestamps:c,premoves:n.premove.queue&&n.premove.queue.length>0?n.premove.queue:void 0})}}var W=n(79670);function createGetTimeControl(e){return function getTimeControl(){let t=e.api.getHeaders().TimeControl;if(!t||t===W.B.Header.Null||t.includes(W.B.Header.Unset)||t.includes(W.B.Header.TimePerMove))return null;let[n,a]=t.split(W.B.Header.Separator).map(e=>Math.round(1e3*parseFloat(e)));return{baseTime:n,increment:a||0}}}function getExpectedGameDuration(e){let{baseTime:t,increment:n}=e;return(t+40*(n||0))/1e3}var j=n(12062);function createGetTimeControlType(e){return function getTimeControlType(){let{api:t}=e,n=t.timeControl.get();if(n){let e=getExpectedGameDuration(n);if(e<j.Md)return W.B.Types.Bullet;if(e>j.ep)return W.B.Types.Rapid}return W.B.Types.Blitz}}function createSetTimeControl(e){return function setTimeControl(t){let{api:n}=e;if(null===t)return n.setGameDetails({TimeControl:W.B.Header.Null});let{baseTime:a,increment:l}=t,c=a/1e3,d=l/1e3;return n.setGameDetails({TimeControl:d?`${c}+${d}`:`${c}`})}}function createTimeControlAPI(e){return{get:createGetTimeControl(e),getType:createGetTimeControlType(e),set:createSetTimeControl(e)}}(e=>{(e=>{e.Milliseconds="Milliseconds";e.Deciseconds="Deciseconds";e.Seconds="Seconds"})(e.Units||(e.Units={}))})(a||(a={}));function toUnit(e,t){let n;if(null===e)return null;switch(t){case a.Units.Milliseconds:n=100*e;break;case a.Units.Seconds:n=10*e;break;case a.Units.Deciseconds:default:n=e}return n}function toRoundedDeciseconds(e,t){let n;switch(t){case a.Units.Milliseconds:n=e/100;break;case a.Units.Seconds:n=10*e;break;case a.Units.Deciseconds:default:n=e}return Math.round(n)}function getValidTimestamp(e,t){return null===e?null:Math.max(_.P,toRoundedDeciseconds(e,t))}var G=n(9802);function createTimestampsAPI(e){return{get,set,setMany};function get(t,{filtered:n=!0}={},l=a.Units.Deciseconds){var c;let{api:d}=e,f=null==(c=d.getLine(0))?void 0:c.map(G.H);return void 0!==t?f[t]&&toUnit(f[t],l):(n?f.filter(e=>void 0!==e):f).map(e=>toUnit(e,l))}function getAll(){return get(void 0,{filtered:!1})}function set(t,n,l=a.Units.Deciseconds){var c;let{api:f,respond:m}=e,{getLine:g}=f,_=null==(c=g(0))?void 0:c[n];if(!_)return null;let y=getValidTimestamp(t,l);return void 0===y?null:((0,b.q)({api:f,node:_,timestamp:y}),m(d.i.APIEvents.NodeUpdated,{changes:{timestamp:y,node:_}}))}function setMany(t=[],n=a.Units.Deciseconds){let{api:l,respond:c}=e,f=0===t.length?getAll().map(()=>null):t;return l.getRawLines()[0].forEach((e,t)=>{if(void 0===f[t])return;let a=getValidTimestamp(f[t],n);void 0!==a&&(0,b.q)({api:l,node:e,timestamp:a})}),c(d.i.APIEvents.LineUpdated)}}function createGetTimes(e){return function get(t){var n;let{api:a}=e,l=a.getLine(0);return void 0!==t?null==(n=l[t])?void 0:n.time:l.map(e=>e.time)}}function createSetManyTimes(e){return function setMany(t=[]){let{api:n,respond:a}=e;return n.getRawLines()[0].forEach((e,a)=>{if(void 0!==t[a]){!e.time&&t[a]&&(e.time=t[a]);n.timestamps.set(calculateTimestampValue({api:n,node:e}),a)}}),a(d.i.APIEvents.LineUpdated)}}function createSetTimes(e){return function set(t,n){var a;let{api:l,respond:c}=e,{getLine:f}=l,m=null==(a=f(0))?void 0:a[n];return m?(m.time||(m.time=t),l.timestamps.set(calculateTimestampValue({api:l,node:m}),n),c(d.i.APIEvents.NodeUpdated,{changes:{time:t,node:m}})):null}}function createTimesAPI(e){return{get:createGetTimes(e),set:createSetTimes(e),setMany:createSetManyTimes(e)}}var q=n(67868);let{createEventEmitter:Z}=T.rG;function createLoggerAPI(e=100){let t=Z(),n=[],a=q.V.Levels.Debug,l={[q.V.Levels.None]:0,[q.V.Levels.Error]:1,[q.V.Levels.Debug]:2};return{...t,clear,get,log,setLogLevel};function clear(){n.length=0}function get(e){return e?n.filter(t=>Object.entries(e).every(([e,n])=>t[e]===n)):n}function log({code:c,data:d,level:f=q.V.Levels.Debug,message:m}){if(l[f]>l[a])return;n.length===e&&n.shift();let g={code:c,data:d,level:f,message:m,timestamp:Date.now()};n.push(g);t.emit(q.V.Events.EntryAdded,g)}function setLogLevel(e){a=e}}function createGetFinalPositionInfo(e){return function getFinalPositionInfo(t){let{api:n}=e,a=n.getLine(0),{startingFen:l}=n.getFingerprints();return n.getPositionInfo(a,l,t)}}let{createEventEmitter:z}=T.rG;function createAPI({game:e,logger:t,options:n,eventEmitter:a}){let l=e||M.A.createGame({...n,analysis:!0,autoPromote:!0});if(!l)throw new f.V({code:O.t.BadData,data:n,message:"Error creating game from createAPI"});let c=a||z(),d=createMemoryCache({arrow:{},customItem:{},effect:{},square:{}}),m={},g=createMutateGame(l,m),_=createRespond(c),y={api:m,emitter:c,game:l,markingCache:d,mutateGame:g,respond:_};Object.assign(y.api,createAPIModel());return y.api;function createAPIModel(){return{addMoveToEndOfLine:createAddMoveToEndOfLine(y),agreeDraw:createAgreeDraw(y),blinkSquare:createBlinkHighlight(y),canMoveForward:createCanMoveForward(y),claimDraw:createClaimDraw(y),clearMarkings:createClearMarkings(y),createContinuation:createCreateContinuation(y),createGame:createCreateGame(y),...createPlayingAsAPI(y),deletePosition:createDeletePosition(y),...c,extendAPI:createExtendAPI(y),overrideAPI:createOverrideAPI(y),getCalculatedResult:createGetCalculatedResult(y),getContext:createGetContext(y),getCurrentFullLine:createGetCurrentFullLine(y),getFEN:createGetFen(y),getFingerprints:createGetFingerprints(y),getHeaders:createGetHeaders(y),getHistoryFENs:createGetHistoryFENs(y),getHistorySANs:createGetHistorySANs(y),getJCEGameCopy:createGetJCEGameCopy(y),getLastMove:createGetLastMove(y),getLegalMoves:createGetLegalMoves(y),getLegalMovesForSquare:createGetLegalMovesForSquare(y),getLine:createGetLine(y),getMarkings:createGetMarkings(y),getMaterial:createGetMaterial(y),getMove:createGetMove(y),getNodeByIds:createGetNodeByIds(y),getNodeDiffData:createGetNodeDiffData(y),getNodeIds:createGetNodeIds(y),getPGN:createGetPGN(y),getPiece:createGetPiece(y),getPieces:createGetPieces(y),getPosition:createGetPosition(y),getPositionDetails:createGetPositionDetails(y),getPositionInfo:createGetPositionInfo(y),getFinalPositionInfo:createGetFinalPositionInfo(y),getRawLines:createGetRawLines(y),getRelativeNode:createGetRelativeNode(y),getResult:createGetResult(y),getSelectedNode:createGetSelectedNode(y),getStartingMoveNumber:y.game.startingMoveNumber,getTCN:createGetTCN(y),getTurn:createGetTurn(y),getVariant:createGetVariant(y),isAtEndOfLine:createIsAtEndOfLine(y),isCheck:createIsCheck(y),isGameOver:createIsGameOver(y),isLegalMove:createIsLegalMove(y),load:createLoad(y),logger:t||createLoggerAPI(),mark:createMark(y),move:createMove(y),moveBackward:createMoveBackward(y),moveForward:createMoveForward(y),moveVariation:createMoveVariation(y),outOfTime:createOutOfTime(y),promoteVariation:createPromoteVariation(y),reload:createReload(y),resetGame:createResetGame(y),resetToMainLine:createResetToMainLine(y),resign:createResign(y),selectLineEnd:createSelectLineEnd(y),selectLineStart:createSelectLineStart(y),selectNode:createSelectNode(y),setGameDetails:createSetGameDetails(y),setResult:createSetResult(y),setTurn:createSetTurn(y),timeControl:createTimeControlAPI(y),times:createTimesAPI(y),timestamps:createTimestampsAPI(y),toggleMarking:createToggleMarking(y),undo:createUndo(y),unmark:createUnmark(y),updateLineComment:createUpdateLineComment(y),updateNode:createUpdateNode(y)}}}function createGetSet(e={}){let t=e;return{get,set};function get(e){return e?t[e]:t}function set(e){Object.assign(t,e)}}var K=n(90760);function createContext({params:e,run:t}){let n={queue:(0,K.y)(!1),reset,run:t,setMode,setRenderer,state:createGetSet(),...e};n.reset();return n;function reset(){n.queue=(0,K.y)(!1);n.state=createGetSet()}function setMode(e){n.mode=e}function setRenderer(e){n.renderer=e}}function isAPIEvent(e){return Object.values(d.i.APIEvents).includes(e.type)}function shouldIgnoreEvent(e){return[d.i.APIEvents.AddMove,d.i.APIEvents.BlinkHighlight,d.i.APIEvents.ClearMarkings,d.i.APIEvents.Mark,d.i.APIEvents.LineUpdated,d.i.APIEvents.NodeUpdated,d.i.APIEvents.Unmark,d.i.APIEvents.UpdatePGNHeaders].includes(e)}var Q=n(41943);let X={anyAPIEvent:({UpdateParams:e})=>(e.cancelMarkingStartSquare(),Q.Z.States.Idle),[d.i.UserEvents.PointerdownLeft]:({UpdateParams:e})=>(e.cancelMarkingStartSquare(),Q.Z.States.Idle),[d.i.UserEvents.Pointerup]:({context:e,data:{keyPressed:t,square:n},params:{markingStartSquare:a},UpdateParams:l})=>{let{api:{markings:c},queue:d}=e;if(n&&a){let e=a===n?c.factory.buildStandardAnalysisHighlight(n,t):c.factory.buildStandardArrow(a,n,t);d.add(c.toggleOne,e)}return l.cancelMarkingStartSquare(),Q.Z.States.Idle}};function createUpdateParams(e){return{cancelMarkingStartSquare,cancelPromotion,deselectPiece,dragPiece,dropPiece,resetElevatedState,selectPiece,setMarkingStartSquare,showPromotionArea};function cancelMarkingStartSquare(){e.markingStartSquare=void 0}function cancelPromotion(){e.promotionMove=void 0}function deselectPiece(){e.selectedPiece=void 0}function dragPiece(t,n){e.draggingPiece=n;e.draggingCoords=t}function dropPiece(){e.draggingPiece=void 0;e.draggingCoords=void 0}function resetElevatedState(){e.draggingPiece=void 0;e.draggingCoords=void 0;e.promotionMove=void 0;e.selectedPiece=void 0}function selectPiece(t){e.selectedPiece=t}function setMarkingStartSquare(t){e.markingStartSquare=t}function showPromotionArea(t){e.promotionMove={...t}}}var Y=n(27112),J=n(15388),ee=n(45996);let et={[d.i.UserEvents.PointerdownLeft]:({context:e,data:{coords:t,square:n},UpdateParams:a})=>{let{api:{getPieces:l,markings:c},mode:{getOptions:d},options:m,queue:g,renderer:_,state:y}=e;n&&!m.disableUserMarkings&&g.add(c.removeAllWhere,{node:!0,persistent:!1,types:[ee.M,J.kx,k.R]});if(!m.enabled||!d().canInteractWithPieces)return Q.Z.States.Idle;let b=l();if(!b.isDefined(n))return Q.Z.States.Idle;if(m.moveMethod===Y.b.MoveMethods.Click){let t=null==_?void 0:_.getCoordsFromSquare(n,m.flipped);if(void 0===t)throw new f.V({code:O.t.BadData,message:`getCoordsFromSquare returned undefined for ${n}`});return a.dragPiece(t,n),y.set({hideHoverSquare:!0}),null==_||_.dragPiece({coords:t,square:n},e),Q.Z.States.PieceDragging}a.dragPiece(t,n);let A=t||(null==_?void 0:_.getCoordsFromSquare(n,m.flipped));return null==_||_.dragPiece({coords:A,square:n},e),Q.Z.States.PieceDragging},[d.i.UserEvents.PointerdownRight]:({context:e,data:{square:t},UpdateParams:n})=>{let{options:a}=e;return!a.enabled||a.disableUserMarkings?void 0:(n.setMarkingStartSquare(t),Q.Z.States.AddingMarkings)}};var en=n(90992),eo=n(91664);function shouldDropOrDeselectPiece({api:e,move:t,plyDiff:n,pieceSquare:a}){var l;let c=a&&(null==(l=e.getPieces().getCollection()[a])?void 0:l.color);return!t||1!==n||!c||c===t.color&&!t.userGenerated||t.from===a||t.to===a}let er={anyAPIEvent:({context:e,data:{holdSelectedPiece:t,move:n,plyDiff:a},params:{draggingPiece:l},UpdateParams:c})=>{let{renderer:d}=e;return l&&!t&&shouldDropOrDeselectPiece({api:e.api,move:n,pieceSquare:l,plyDiff:a})?(c.resetElevatedState(),null==d||d.dropPiece(l,e),Q.Z.States.Idle):Q.Z.States.PieceDragging},[d.i.UserEvents.MousedownRight]:({context:e,params:{draggingPiece:t},UpdateParams:n})=>{let{renderer:a}=e;if(!t)throw new f.V({code:O.t.BadData,message:"Attempted to pointerdown on a dragging piece but dragging piece is null or undefined"});return n.dropPiece(),n.deselectPiece(),null==a||a.dropPiece(t,e),Q.Z.States.Idle},[d.i.UserEvents.Pointermove]:({context:e,data:{coordsInsideBoard:t},params:{draggingPiece:n},UpdateParams:a})=>{let{renderer:l}=e;if(!n)throw new f.V({code:O.t.BadData,message:"Attempted to drag a piece but draggingPiece is null or undefined"});return a.dragPiece(t,n),null==l||l.dragPiece({coords:t,square:n},e),Q.Z.States.PieceDragging},[d.i.UserEvents.Pointerup]:({context:e,data:{keyPressed:t,square:n},params:{draggingPiece:a,selectedPiece:l},UpdateParams:c})=>{var d;let{api:{getMove:m,getPiece:g,getTurn:_,isCheck:y,move:b,playSound:A},mode:w,options:k,queue:S,renderer:T}=e;if(!a)throw new f.V({code:O.t.BadData,message:"Attempted to pointerup on a dragging piece but dragging piece is null or undefined"});if(e.options.test){let t=e.el.querySelector(".dragging");null==t||t.setAttribute("data-test-dragging","false");null==t||t.removeAttribute("dragging")}if(a===n)return(c.dropPiece(),null==T||T.dropPiece(a,e),l===n||k.moveMethod===Y.b.MoveMethods.Drag_Only||k.moveMethod===Y.b.MoveMethods.DragOnly)?(c.deselectPiece(),Q.Z.States.Idle):(c.selectPiece(a),Q.Z.States.PieceSelected);l&&c.deselectPiece();let M={from:a,to:n},P=m(M),L=!!w.isAllowedToMove()&&!!P&&{...P,animate:!1,userGenerated:!0,userGeneratedDrop:!0};if(!L){c.dropPiece();w.handleIllegalMove&&S.add(w.handleIllegalMove,M);let t=y(),n=!1;if((null==(d=g(a))?void 0:d.color)===_()&&t){k.playSounds&&S.add(A,eo.t.BoardSounds.Illegal);n=t}return(null==T||T.illegalMove(n,e),null==T||T.dropPiece(a,e),k.moveMethod===Y.b.MoveMethods.DragOnly)?(c.deselectPiece(),Q.Z.States.Idle):(c.selectPiece(a),Q.Z.States.PieceSelected)}return(0,en.U)(L)?k.autoPromote&&"alt"!==t?(c.dropPiece(),null==T||T.dropPiece(L.to,e),S.add(b,{...L,promotion:C.Z.Piece.Types.Queen}),Q.Z.States.Idle):(c.dragPiece({},a),c.showPromotionArea(L),null==T||T.dragPiece({square:a,toSquare:L.to},e),null==T||T.openPromotionWindow(L,e),Q.Z.States.PromotionAreaShowing):(c.dropPiece(),null===n&&w.getOptions().canDropOffBoard?null==T||T.removePiece(a,e):null==T||T.dropPiece(n,e),S.add(b,L),Q.Z.States.Idle)}};var ei=n(4062);let ea={anyAPIEvent:({context:e,data:{holdSelectedPiece:t,move:n,plyDiff:a},params:{selectedPiece:l},UpdateParams:c})=>!t&&shouldDropOrDeselectPiece({api:e.api,move:n,pieceSquare:l,plyDiff:a})?(c.resetElevatedState(),Q.Z.States.Idle):Q.Z.States.PieceSelected,[d.i.UserEvents.PointerdownLeft]:({context:e,data:{coords:t,keyPressed:n,square:a},params:{selectedPiece:l},UpdateParams:c})=>{var d;let{api:{getMove:m,getPieces:g,getVariant:_,move:y},mode:{isAllowedToMove:b},options:A,queue:w,renderer:k,state:S}=e;if(!l)throw new f.V({code:O.t.BadData,message:"Attempted to interact with a selectedPiece but selectedPiece is null or undefined"});if(a===l){let n=A.moveMethod===Y.b.MoveMethods.Drag||A.moveMethod===Y.b.MoveMethods.Drag_Only||A.moveMethod===Y.b.MoveMethods.DragOnly?t:(null==k?void 0:k.getCoordsFromSquare(a,A.flipped))||t;return c.dragPiece(n,l),A.moveMethod===Y.b.MoveMethods.Click&&S.set({hideHoverSquare:!0}),null==k||k.dragPiece({coords:n,square:l},e),Q.Z.States.PieceDragging}let T=g(),M=m({from:l,to:a}),P=!!b()&&!!M&&{...M,userGenerated:!0},L=_()===C.Z.Variants.Chess960,N=T.isDefined(a)&&(null==(d=T.get(a))?void 0:d.type)===C.Z.Piece.Types.Rook,x=A.disableRookCastling&&P&&!L&&(0,ei.p)(P)&&N;if(!P||x){c.deselectPiece();if(!T.isDefined(a))return Q.Z.States.Idle;if(A.moveMethod===Y.b.MoveMethods.Click){let n=(null==k?void 0:k.getCoordsFromSquare(a,A.flipped))||t;return c.dragPiece(n,a),S.set({hideHoverSquare:!0}),null==k||k.dragPiece({coords:n,square:a},e),Q.Z.States.PieceDragging}return c.dragPiece(t,a),null==k||k.dragPiece({coords:t,square:a},e),Q.Z.States.PieceDragging}return(0,en.U)(P)?A.autoPromote&&"alt"!==n?(c.deselectPiece(),w.add(y,P,{...P,promotion:C.Z.Piece.Types.Queen}),Q.Z.States.Idle):(c.deselectPiece(),c.dragPiece({},l),c.showPromotionArea(P),null==k||k.dragPiece({square:l,toSquare:P.to},e),null==k||k.openPromotionWindow(P,e),Q.Z.States.PromotionAreaShowing):(c.deselectPiece(),w.add(y,P),Q.Z.States.Idle)},[d.i.UserEvents.PointerdownRight]:({context:e,data:{square:t},UpdateParams:n})=>{let{options:a}=e;return!a.enabled||a.disableUserMarkings?void 0:(n.deselectPiece(),n.setMarkingStartSquare(t),Q.Z.States.AddingMarkings)}};function cancelPromotion({context:e,params:{draggingPiece:t},UpdateParams:n}){let{renderer:a}=e;return n.dropPiece(),n.cancelPromotion(),null==a||a.dropPiece(t,e),null==a||a.closePromotionWindow(e),Q.Z.States.Idle}let es={anyAPIEvent:e=>e.type===d.i.APIEvents.Move?Q.Z.States.PromotionAreaShowing:cancelPromotion(e),[d.i.BoardEvents.PromotionPiecePointerdown]:({context:e,data:{piece:t},params:{draggingPiece:n,promotionMove:a},UpdateParams:l})=>{let{api:{move:c},queue:d,renderer:f}=e;return l.dropPiece(),l.cancelPromotion(),null==f||f.dropPiece(n,e),null==f||f.closePromotionWindow(e),a&&d.add(c,{animate:!1,flags:a.flags,from:a.from,piece:C.Z.Piece.Types.Pawn,promotion:t,to:a.to,userGenerated:!0}),Q.Z.States.Idle},[d.i.BoardEvents.PromotionAreaClosePointerdown]:cancelPromotion,[d.i.UserEvents.PointerdownLeft]:cancelPromotion,[d.i.UserEvents.PointerdownRight]:cancelPromotion},el={createUpdateParams:createUpdateParams,getCurrentState:()=>Q.Z.States.Idle,getParams:()=>({draggingCoords:void 0,draggingPiece:void 0,markingStartSquare:void 0,promotionMove:void 0,selectedPiece:void 0}),states:{[Q.Z.States.AddingMarkings]:X,[Q.Z.States.PieceDragging]:er,[Q.Z.States.Idle]:et,[Q.Z.States.PromotionAreaShowing]:es,[Q.Z.States.PieceSelected]:ea}};var eu=n(74371);function createUpdateMachineState(){let e=el.getParams(),t=el.createUpdateParams(e),n=el.getCurrentState(),a=[eu.M.Events.Tick];return function updateMachineState(l,c){if(a.includes(l.type))return;let{state:d}=c;d.set({draggingPiece:e.draggingPiece,machineState:n,promotionMove:e.promotionMove,selectedPiece:e.selectedPiece});let m=isAPIEvent(l)&&!shouldIgnoreEvent(l.type)?"anyAPIEvent":l.type;if(!el.states[n]||!el.states[n][m]){d.set({machineState:n});return}let g=el.states[n][m]({context:c,data:l.data,params:e,UpdateParams:t,type:l.type}),_=n;_!==(n=g||n)&&(n===Q.Z.States.PieceDragging?document.onselectstart=()=>!1:_===Q.Z.States.PieceDragging&&(document.onselectstart=null));if(!machineIsValid())throw{data:{draggingPiece:e.draggingPiece,machineState:n,oldState:_,selectedPiece:e.selectedPiece},error:new f.V({code:O.t.InvalidStateMachine,message:"The machine parameters and state do not match up."})};d.set({draggingPiece:e.draggingPiece,machineState:n,selectedPiece:e.selectedPiece})};function machineIsValid(){return n===Q.Z.States.Idle?!e.draggingPiece&&!e.selectedPiece:n===Q.Z.States.PieceDragging?!!e.draggingPiece:n!==Q.Z.States.PieceSelected||!e.draggingPiece&&!!e.selectedPiece}}function runBeforeState(e,t){if(!e.beforeState)return!0;let n=!0;return e.beforeState.forEach(e=>{!1===run(e,t)&&(n=!1)}),n}function run(e,t){if(e.condition(...t))return e.handler(...t)}function runPlugin(e,t){e.match&&e.match.forEach(e=>run(e,t));function run(e,t){e.condition(...t)&&e.handler(...t)}}function splitPluginsByHookType(e){return e.reduce((e,t)=>(t.afterRender?e.afterRender.push(t):e.beforeRender.push(t),e),{beforeRender:[],afterRender:[]})}function createCore({params:e,plugins:t}){let n=createContext({params:e,run}),a=createUpdateMachineState();return{getContext,getMode,run,setMode,setRenderer};function getContext(){return n}function getMode(){return n.mode}function run(e){let{api:{logger:l}}=n;l.log({code:d.i.LogCodes.Event,data:e});n.reset();let c=t.get();runBeforeStateHooks(e,c)&&a(e,n);let{beforeRender:f,afterRender:m}=splitPluginsByHookType(c);try{f.forEach(t=>runPlugin(t,[e,n]));n.queue.flush();m.forEach(t=>runPlugin(t,[e,n]));n.queue.flush();l.log({code:d.i.LogCodes.State,data:n.state.get()})}catch(t){l.log({code:d.i.LogCodes.State,data:{...t.data,event:e,queue:n.queue,state:n.state.get()},level:q.V.Levels.Error});throw t}}function setMode(e){n.setMode(e)}function setRenderer(e){n.setRenderer(e)}function runBeforeStateHooks(e,t){return t.every(t=>runBeforeState(t,[e,n]))}}var ec=n(29719),ed=n(15204),ef=n(7948);function getKeyPressed(e){return e.altKey?ef.U.Alt:e.ctrlKey?ef.U.Ctrl:e.shiftKey?ef.U.Shift:ef.U.None}var ep=n(69953);function onNextTick(e){setTimeout(e)}function debounceAnimationFrame(e){let t;return function run(...n){t&&cancelAnimationFrame(t);t=requestAnimationFrame(()=>{t=null;e(...n)})}}function createUserEventHandlers({el:e,getPointerPosition:t,options:n,run:a,api:l,monitorUntrustedEvents:c}){let f=debounceAnimationFrame(runPointerMoveEvent);return{handleDocumentPointerdown:createTrustedEventHandler(handleDocumentPointerdown),handlePointerdown:createTrustedEventHandler(handlePointerdown),handlePointermove:createTrustedEventHandler(f),handlePointerup:createTrustedEventHandler(handlePointerup)};function createTrustedEventHandler(e){return function(t){e(t);if(!t.isTrusted&&c){let e=(0,V.e)(d.i.FairPlay.UntrustedUserEvent,t);l.emit(d.i.FairPlay.UntrustedUserEvent,e)}}}function handleDocumentPointerdown(e){let t=(0,ep.v)(e)?d.i.UserEvents.PointerdownRight:d.i.UserEvents.PointerdownLeft,n=(0,V.e)(t);return n.data={square:null},a(n)}function handlePointerdown(l){l.stopPropagation();document.addEventListener(ed.lF,f);document.addEventListener(ed.nC,handlePointerup);let c=(0,ep.v)(l)?d.i.UserEvents.PointerdownRight:d.i.UserEvents.PointerdownLeft,m=(0,V.e)(c);return m.data={...t({el:e,event:l,flipped:n.flipped}),keyPressed:getKeyPressed(l),timestamp:performance.now()},onNextTick(function addMouseDownListener(){document.addEventListener(ed.BB.Mousedown,handleMousedown,{once:!0})}),a(m)}function handleMousedown(l){let c=(0,ep.v)(l)?d.i.UserEvents.MousedownRight:d.i.UserEvents.MousedownLeft,f=(0,V.e)(c);return f.data={...t({el:e,event:l,flipped:n.flipped}),keyPressed:getKeyPressed(l),timestamp:performance.now()},a(f)}function runPointerMoveEvent(l){let c=(0,V.e)(d.i.UserEvents.Pointermove);c.data={...t({el:e,event:l,flipped:n.flipped}),keyPressed:getKeyPressed(l),timestamp:performance.now()};a(c)}function handlePointerup(l){document.removeEventListener(ed.BB.Mousedown,handleMousedown);document.removeEventListener(ed.lF,f);document.removeEventListener(ed.nC,handlePointerup);let c=(0,V.e)(d.i.UserEvents.Pointerup);return c.data={...t({el:e,event:l,flipped:n.flipped}),keyPressed:getKeyPressed(l),timestamp:performance.now()},a(c)}}var em=n(77751);(e=>{(e=>{e.CreateFailure="CreateFailure"})(e.LogCodes||(e.LogCodes={}))})(l||(l={}));function buildErrorMsg(e){return(Array.isArray(e)?e:[e]).map(e=>{var t;return`${e.name} (requires: ${null==(t=e.requires)?void 0:t.join(", ")})`}).join(", ")}function requiredPluginsExist(e,t=new Map){return!e||e.every(e=>t.has(e))}function getMapOfLoadablePlugins(e,t=new Map){return getLoadablePlugins(e,t,new Map)}function getLoadablePlugins(e,t,n){if(0===e.size)return n;let a=e.size,l=new Map([...t.entries(),...n.entries()]);return(e.forEach(t=>{let a=requiredPluginsExist(t.requires,l);if(a){n.set(t.name,t);e.delete(t.name)}}),a===e.size)?(n.clear(),n):getLoadablePlugins(e,t,n)}function getPluginsOrderedByRequires(e,t){if(0===e.length)return[];let n=getMapOfLoadablePlugins(new Map(e.map(e=>[e.name,e])),new Map(t.map(e=>[e.name,e])));if(0===n.size){let t=buildErrorMsg(e);throw Error(`Required plugins do not exist: ${t}`)}return[...n.values()]}(e=>{(e=>{e.PluginAdded="PluginAdded";e.PluginRemoved="PluginRemoved";e.ContextSet="ContextSet"})(e.Events||(e.Events={}))})(c||(c={}));let{createEventEmitter:eh}=T.rG;function createPluginsAPI(e=[],t,n=eh()){let a=new Map,l=t;addMany(e);return{add:addPlugin,addMany,destroy,...n,getAll,getContext,getOne,has:a.has.bind(a),remove,setContext};function addPlugin(e){var t;return!!e.name&&(a.has(e.name)&&remove(e.name),a.set(e.name,e),null==(t=e.create)||t.call(e,l),n.emit(c.Events.PluginAdded,e),!0)}function addMany(e){return!!e&&0!==e.length&&(Array.isArray(e)?e:[e]).reduce(function pluginsAddedSuccessfully(e,t){return addPlugin(t)||(e=!1),e},!0)}function destroy(){a.forEach(e=>remove(e.name))}function getAll(){return[...a.values()]}function getContext(){return l}function getOne(e){return a.get(e)}function remove(e){var t;let d=a.get(e);return!!d&&(null==(t=d.destroy)||t.call(d,l),a.delete(e),n.emit(c.Events.PluginRemoved,d),!0)}function setContext(e){l=e;n.emit(c.Events.ContextSet,l)}}function createChessboardPluginsAPI(e=[],t){let n=createPluginsAPI();n.addMany(e);return{add,addMany:add,get:n.getAll,has:n.has,remove,setCreatePluginContext:n.setContext};function loadPlugin(e){let t=n.getContext();if(!t)return;let{api:a,apiOverrides:l,modeOverrides:c,name:d}=e;a&&(e.destroyAPIMethods=t.api.extendAPI(d,{[d]:a}));l&&(e.destroyAPIOverrides=t.api.overrideAPI(d,l));c&&(e.destroyModeOverrides=t.mode.extendMode(c))}function add(e){getPluginsOrderedByRequires(Array.isArray(e)?e:[e],n.getAll()).forEach(a=>{n.has(a.name)&&n.remove(a.name);loadPlugin(a);let c=n.add(a);if(!c){let{name:c}=a;null==t||t.log({code:l.LogCodes.CreateFailure,data:{currentPlugins:n.getAll().map(e=>e.name),data:buildErrorMsg(e),plugin:c},level:q.V.Levels.Error,message:`Could not create ${c} plugin`});remove(a.name)}})}function remove(e){var t,a,l;if(!n.has(e))return;let c=n.getOne(e);n.remove(e);null==(t=null==c?void 0:c.destroyAPIMethods)||t.call(c);null==(a=null==c?void 0:c.destroyAPIOverrides)||a.call(c);null==(l=null==c?void 0:c.destroyModeOverrides)||l.call(c)}}var eg=n(72254),ev=n(11859),e_=n(94521);function fetchRenderer(e){return e===ev.A4.Types.WebGL3D?Promise.all([n.e(9155),n.e(7818)]).then(n.bind(n,57818)):e===ev.A4.Types.WebGL2D?Promise.all([n.e(9155),n.e(7150)]).then(n.bind(n,17150)):n.e(3519).then(n.bind(n,13519))}function getRendererType(e){let{Arcade:t,Natural:n}=Y.b.Animation.Types;return(e.themeAssets?e.themeAssets.config.perspective===eg.b.Perspective.REAL_3D:e.pieceStyle===e_.Y.PieceStyles.Trigger)?ev.A4.Types.WebGL3D:[t,n].includes(e.animationType)?ev.A4.Types.WebGL2D:ev.A4.Types.Default}function getRenderer(e){return fetchRenderer(getRendererType(e))}var ey=n(73696);function shouldSetRenderer(e={},t,n,a){var l;let c=getRendererType(n),d=c===ev.A4.Types.WebGL2D,f="animationType"in e,m=e.animationType!==t.animationType;return(e.themeAssets&&e.themeAssets.config.perspective!==(null==(l=t.themeAssets)?void 0:l.config.perspective)||Object.keys(e).some(e=>ev.A4.TriggerOptions.includes(e)))&&(c!==a||d&&f&&m)}function checkWebGLSupport(e){let t=getRendererType(e),n=t===ev.A4.Types.WebGL2D||t===ev.A4.Types.WebGL3D;if(!n)return!0;void 0===window.hasWebGLSupport&&(window.hasWebGLSupport=isWebGLSupported());if(window.hasWebGLSupport)return!0;defaultOptions(e,t===ev.A4.Types.WebGL3D);return!1;function isWebGLSupported(){let e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!t&&t instanceof WebGLRenderingContext}}function defaultOptions(e,t=!1){let{pieceStyle:n,animationType:a}=(0,em.q)();e.animationType=a;if(t){e.pieceStyle=n;e.themeAssets&&(e.themeAssets=(0,ey.f)(e.themeAssets))}}let __variableDynamicImportRuntimeHelper=(e,t)=>{let n=e[t];return n?"function"==typeof n?n():Promise.resolve(n):new Promise((e,n)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,Error("Unknown variable dynamic import: "+t)))})};async function getMode(e){return __variableDynamicImportRuntimeHelper(Object.assign({"../analysis/index.ts":()=>Promise.resolve().then(n.bind(n,83995)),"../capture-the-star/index.ts":()=>n.e(534).then(n.bind(n,90534)),"../exploring/index.ts":()=>n.e(9741).then(n.bind(n,89741)),"../guess-the-move/index.ts":()=>n.e(5862).then(n.bind(n,35862)),"../observing/index.ts":()=>n.e(6468).then(n.bind(n,96468)),"../passive-observing/index.ts":()=>Promise.resolve().then(n.bind(n,33376)),"../playing/index.ts":()=>Promise.resolve().then(n.bind(n,46204)),"../setup/index.ts":()=>n.e(8177).then(n.bind(n,78177))}),`../${e.toLowerCase()}/index.ts`)}function createIsDragging(e){return function isDragging(){return e.state.get().machineState===Q.Z.States.PieceDragging}}function createGame({api:e,apiOptions:t,el:n,emitter:a,init:l,logger:c,mode:f,options:m=(0,em.q)(),plugins:g=(0,ec.Yv)(),renderer:_,monitorUntrustedEvents:y=!1}){let b,A;let C=e||createAPI({eventEmitter:a,logger:c,options:t||{}}),w={...(0,em.q)(),...m};n.id=`board-${w.id}`;let k=createChessboardPluginsAPI(),S=createSetRenderer(),T=createCore({params:{api:C,el:n,options:w},plugins:k});k.setCreatePluginContext(T.getContext());let M=Object.assign(C,{destroy,getMode:T.getMode,getOptions,getVersion:()=>"1.105.0",isDragging:createIsDragging(T.getContext()),getRenderer:()=>b,playSound,plugins:k,resize,run:runCoreEvent,setMode,setOptions,setRenderer:S}),P=setMode(f);"name"in P?finishInit():P.then(finishInit);return M;function finishInit(){k.add(g);runCoreEvent((0,V.e)(d.i.InstanceEvents.Create));n.addEventListener("contextmenu",e=>(e.stopPropagation(),e.preventDefault(),!1));C.onAll(runCoreEvent);C.emit(d.i.InstanceEvents.Create,(0,V.e)(d.i.InstanceEvents.Create,T.getMode().name));S(_).then(()=>{l&&C.load(l)})}function destroy(){destroyRenderer();C.offAll(runCoreEvent);let e=(0,V.e)(d.i.InstanceEvents.Destroy);runCoreEvent(e);C.emit(d.i.InstanceEvents.Destroy,e)}function destroyRenderer(){T.setRenderer();null==b||b.offAll(C.logger.log);null==b||b.destroy();b=void 0;n.removeEventListener(ed.WP,null==A?void 0:A.handlePointerdown);document.removeEventListener(ed.WP,null==A?void 0:A.handleDocumentPointerdown);document.removeEventListener(ed.lF,null==A?void 0:A.handlePointermove);document.removeEventListener(ed.nC,null==A?void 0:A.handlePointerup)}function getOptions(){return{...w}}function runCoreEvent(e){return T.run(e),e}function playSound(e){runCoreEvent((0,V.e)(d.i.SoundEvents.Play,{sound:e}))}function resize(e,t){runCoreEvent((0,V.e)(d.i.UIEvents.Resize,{height:t,width:e}))}function setMode(e){return"modeType"in e?getMode(e.modeType).then(t=>setModeWithBuilder(t.create(e.options))):setModeWithBuilder(e)}function setModeWithBuilder(e){var t,n;let a=T&&T.getMode();if(a){null==(t=a.plugins)||t.forEach(e=>k.remove(e.name));k.get().forEach(e=>{var t;return null==(t=e.destroyModeOverrides)?void 0:t.call(e)});null==(n=a.destroy)||n.call(a)}let l=e(C);C.usePlayingAs(l.usePlayingAs);l.plugins&&k.add(l.plugins);k.get().forEach(e=>e.modeOverrides&&l.extendMode(e.modeOverrides));if(T){T.setMode(l);runCoreEvent((0,V.e)(d.i.InstanceEvents.ModeChanged));C.emit(d.i.InstanceEvents.ModeChanged,(0,V.e)(d.i.InstanceEvents.ModeChanged,T.getMode().name))}return l}function setOptions(e){let t={...w};Object.assign(w||{},e);e&&b&&shouldSetRenderer(e,t,w,b.name)&&S();C.emit(d.i.OptionsEvents.Update,(0,V.e)(d.i.OptionsEvents.Update,e))}function createSetRenderer(){let e=(0,K.y)();return async function set(t){e.add(handler,t)};async function handler(e){destroyRenderer();if(e)b=e;else try{checkWebGLSupport(w)||C.emit(d.i.InstanceEvents.RendererSetFailed,(0,V.e)(d.i.InstanceEvents.RendererSetFailed,{message:"WebGL is not supported by the browser. Will fallback to default.",isWebGLRenderError:!0}));b=(await getRenderer(w)).createRenderer({el:n,options:w})}catch(e){C.emit(d.i.InstanceEvents.RendererSetFailed,(0,V.e)(d.i.InstanceEvents.RendererSetFailed,{message:"Problem creating renderer. Will fallback to default.",error:e}));defaultOptions(w,!0);b=(await getRenderer(w)).createRenderer({el:n,options:w})}T.setRenderer(b);Object.assign(M,{animationComplete:b.animationComplete,getPointerPosition:b.getPointerPosition,isAnimating:b.isAnimating});A=createUserEventHandlers({el:n,getPointerPosition:b.getPointerPosition,options:w,run:runCoreEvent,monitorUntrustedEvents:y,api:C});n.addEventListener(ed.WP,A.handlePointerdown);document.addEventListener(ed.WP,A.handleDocumentPointerdown);b.onAll(C.logger.log);b.on(d.i.InstanceEvents.WebGLAssetsInitialized,()=>{C.emit(d.i.InstanceEvents.WebGLAssetsInitialized,{type:d.i.InstanceEvents.WebGLAssetsInitialized})});C.emit(d.i.InstanceEvents.RendererSet,(0,V.e)(d.i.InstanceEvents.RendererSet,b.name))}}}},40378:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});let a=(0,n(59074).g)(function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){n=e.length;if(n!=t.length)return!1;for(a=n;0!=a--;)if(!equal(e[a],t[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();n=(l=Object.keys(e)).length;if(n!==Object.keys(t).length)return!1;for(a=n;0!=a--;)if(!Object.prototype.hasOwnProperty.call(t,l[a]))return!1;for(a=n;0!=a--;){var n,a,l,c=l[a];if(!equal(e[c],t[c]))return!1}return!0}return e!=e&&t!=t})},9205:function(e,t,n){"use strict";n.d(t,{QZ:function(){return ListAllBotsInGroup},g:function(){return GetCustomBotGameOverModal},iD:function(){return ListBotGroups}});var a=n(72505);function GetCustomBotGameOverModal(e,t,n,l){return a.post(`${l??""}${n??"/rpc"}/chesscom.bots.v1.CustomBotGameOverModalService/GetCustomBotGameOverModal`,e,{headers:t,params:void 0,withCredentials:!0})}function ListBotGroups(e,t,n,l){return a.post(`${l??""}${n??"/rpc"}/chesscom.bots.v1.BotGroupService/ListBotGroups`,e,{headers:t,params:void 0,withCredentials:!0})}function ListAllBotsInGroup(e,t,n,l){return a.post(`${l??""}${n??"/rpc"}/chesscom.bots.v1.BotGroupService/ListAllBotsInGroup`,e,{headers:t,params:void 0,withCredentials:!0})}},11613:function(e,t,n){"use strict";n.d(t,{Eg:function(){return q},Ml:function(){return y},Mo:function(){return W},Om:function(){return I},Qv:function(){return S},SoundUtil:function(){return ei},U8:function(){return w},_W:function(){return N},aF:function(){return _},cU:function(){return A},l5:function(){return T},oD:function(){return Z},rG:function(){return j},ur:function(){return G}});var a,l,c,d=n(20641),f=n(53751),m=n(90033),g=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>__defNormalProp(e,"symbol"!=typeof t?t+"":t,n);(e=>{(e=>{e[e.Backspace=8]="Backspace";e[e.Delete=46]="Delete";e[e.DownArrow=40]="DownArrow";e[e.Enter=13]="Enter";e[e.Escape=27]="Escape";e[e.LeftArrow=37]="LeftArrow";e[e.RightArrow=39]="RightArrow";e[e.Spacebar=32]="Spacebar";e[e.Stop=137]="Stop";e[e.Tab=9]="Tab";e[e.UpArrow=38]="UpArrow"})(e.KeyCodes||(e.KeyCodes={}))})(R||(R={}));(e=>{(e=>{e.DidHide="modal-did-hide"})(e.Events||(e.Events={}))})(B||(B={}));let _export_sfc=(e,t)=>{let n=e.__vccOpts||e;for(let[e,a]of t)n[e]=a;return n};function _sfc_render$a(e,t,n,a,l,c){return(0,d.uX)(),(0,d.Wv)(f.eB,{"enter-active-class":e.$style.enter,"leave-active-class":e.$style.leave},{default:(0,d.k6)(()=>[l.visible?((0,d.uX)(),(0,d.CE)("div",{key:0,class:(0,m.C4)(e.$style.component)},[(0,d.Lk)("div",{class:(0,m.C4)([e.$style.backdrop,{[e.$style["bg-transparent"]]:n.isTransparent}]),onClick:t[0]||(t[0]=e=>c.onBackgroundClick(e))},null,2),(0,d.Lk)("div",{ref:"body",class:(0,m.C4)([e.$style.body,e.$style[n.corners],e.$style[n.modalWidth],e.$style[n.bgColor]])},[(0,d.RG)(e.$slots,"default")],2)],2)):(0,d.Q3)("",!0)]),_:3},8,["enter-active-class","leave-active-class"])}let _=_export_sfc({name:"Modal",props:{autoShow:{type:Boolean,default:!1},closeOnAction:{type:Boolean,default:!0},bgColor:{type:String,default:null},enableBackgroundScroll:{type:Boolean,default:!0},corners:{type:String,default:null},isTransparent:{type:Boolean,default:!1},modalWidth:{type:String,default:null}},data:()=>({visible:!1}),mounted(){this.closeOnAction&&window.addEventListener("keyup",this.onKeyPress);this.autoShow&&this.show()},beforeUnmount(){this.hide();this.closeOnAction&&window.removeEventListener("keyup",this.onKeyPress)},methods:{hide(){this.visible=!1;document.body.classList.remove("modal-overflow-hidden");this.$emit(B.Events.DidHide)},onBackgroundClick(e){document.contains(e.target)&&this.closeOnAction&&this.$refs.body&&!this.$refs.body.contains(e.target)&&this.hide()},onKeyPress(e){e.keyCode===R.KeyCodes.Escape&&this.hide()},show(){this.visible=!0;this.enableBackgroundScroll||document.body.classList.add("modal-overflow-hidden")}}},[["render",_sfc_render$a],["__cssModules",{$style:{component:"ui_modal-component","rounded-sm":"ui_modal-rounded-sm","rounded-lg":"ui_modal-rounded-lg",header:"ui_modal-header",footer:"ui_modal-footer",body:"ui_modal-body","light-grey":"ui_modal-light-grey",light:"ui_modal-light",dark:"ui_modal-dark",backdrop:"ui_modal-backdrop","bg-transparent":"ui_modal-bg-transparent",enter:"ui_modal-enter",leave:"ui_modal-leave",xxs:"ui_modal-xxs",xs:"ui_modal-xs",sm:"ui_modal-sm",md:"ui_modal-md",lg:"ui_modal-lg",xl:"ui_modal-xl"}}]]),y=_export_sfc({name:"OutsideClose",emits:["click"]},[["render",function _sfc_render$9(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("button",{type:"button","aria-label":"Close",class:(0,m.C4)(e.$style.component),onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[(0,d.Lk)("div",{class:(0,m.C4)(["icon-font-chess x",e.$style.icon])},null,2)],2)}],["__cssModules",{$style:{component:"ui_outside-close-component",icon:"ui_outside-close-icon"}}]]),b=["textContent"],A=_export_sfc({name:"PaginationItem",props:{active:{type:Boolean,default:!1},content:{type:String,required:!1},disabled:{type:Boolean,default:!1},icon:{type:String,required:!1},href:{default:null,type:String,required:!1}},emits:["click"]},[["render",function _sfc_render$8(e,t,n,a,l,c){return(0,d.uX)(),(0,d.Wv)((0,d.$y)(n.href?"a":"button"),{rel:"nofollow","aria-selected":n.active,disabled:!n.href&&n.disabled,class:(0,m.C4)([e.$style.component,{[e.$style.disabled]:n.href&&n.disabled,[e.$style.active]:n.active}]),href:n.href,type:!n.href&&"button",onClick:t[0]||(t[0]=t=>e.$emit("click",t))},{default:(0,d.k6)(()=>[n.icon?((0,d.uX)(),(0,d.CE)("span",{key:0,class:(0,m.C4)([e.$style.icon,"icon-font-chess",n.icon])},null,2)):(0,d.Q3)("",!0),n.content?((0,d.uX)(),(0,d.CE)("span",{key:1,textContent:(0,m.v_)(n.content)},null,8,b)):(0,d.Q3)("",!0)]),_:1},8,["aria-selected","disabled","class","href","type"])}],["__cssModules",{$style:{component:"ui_pagination-item-component",disabled:"ui_pagination-item-disabled",active:"ui_pagination-item-active",icon:"ui_pagination-item-icon"}}]]),C=["textContent"],w=_export_sfc({name:"PaginationSpread"},[["render",function _sfc_render$7(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("div",{class:(0,m.C4)(e.$style.component),textContent:(0,m.v_)("...")},null,10,C)}],["__cssModules",{$style:{component:"ui_pagination-spread-component"}}]]),k=["value"];function _sfc_render$4(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("input",{class:(0,m.C4)([e.$style.component,e.$style[n.size],{[e.$style.dark]:"dark"==n.forceTheme,[e.$style.light]:"light"==n.forceTheme,[e.$style.error]:n.hasError}]),value:n.modelValue,onBlur:t[0]||(t[0]=t=>e.$emit("blur",t)),onChange:t[1]||(t[1]=t=>e.$emit("change",t)),onFocus:t[2]||(t[2]=t=>e.$emit("focus",t)),onInput:t[3]||(t[3]=(...e)=>c.onInput&&c.onInput(...e)),onKeydown:t[4]||(t[4]=t=>e.$emit("keydown",t)),onKeyup:[t[5]||(t[5]=e=>c.keyupEvent(e)),t[6]||(t[6]=(0,f.jR)(t=>e.$emit("enter",t),["enter"]))],onPaste:t[7]||(t[7]=t=>e.$emit("paste",t))},null,42,k)}let S=_export_sfc({name:"V5Input",props:{size:{type:String,default:""},forceTheme:{type:String,default:""},value:{default:"",type:[Number,String]},modelValue:{default:"",type:[Number,String]},hasError:{default:!1,type:Boolean},hasNativeInputEvent:{default:!1,type:Boolean}},emits:["blur","change","focus","keydown","enter","paste","keyup","update:modelValue"],methods:{keyupEvent(e){this.$emit("keyup",e)},onInput(e){this.$emit("update:modelValue",this.hasNativeInputEvent?e:e.target.value)}}},[["render",_sfc_render$4],["__cssModules",{$style:{component:"ui_v5-input-component",light:"ui_v5-input-light",dark:"ui_v5-input-dark",error:"ui_v5-input-error",large:"ui_v5-input-large","x-large":"ui_v5-input-x-large"}}]]);function _sfc_render$3(e,t,n,a,l,c){let g=(0,d.g2)("V5Input");return(0,d.uX)(),(0,d.CE)("div",{class:(0,m.C4)([e.$style.component,{[e.$style.dark]:"dark"==n.forceTheme,[e.$style.light]:"light"==n.forceTheme}])},[(0,d.bF)(g,{id:n.id,"aria-label":n.ariaLabel,autocapitalize:n.autocapitalize,autocomplete:n.autocomplete,autocorrect:n.autocorrect,autofocus:n.autofocus,"force-theme":n.forceTheme,class:(0,m.C4)(c.inputClasses),maxlength:n.maxlength,"model-value":n.modelValue,name:n.name,placeholder:n.placeholder,readonly:n.disabled,spellcheck:n.spellcheck,type:n.type,size:n.size,onBlur:t[0]||(t[0]=e=>c.blurEvent(e)),onChange:t[1]||(t[1]=t=>e.$emit("change",t)),onFocus:t[2]||(t[2]=e=>c.focusEvent(e)),onKeydown:t[3]||(t[3]=e=>c.keydownEvent(e)),onKeyup:[t[4]||(t[4]=e=>c.keyupEvent(e)),t[5]||(t[5]=(0,f.jR)(e=>c.keyupEnterEvent(e),["enter"]))],"onUpdate:modelValue":t[6]||(t[6]=e=>c.updateValue(e))},null,8,["id","aria-label","autocapitalize","autocomplete","autocorrect","autofocus","force-theme","class","maxlength","model-value","name","placeholder","readonly","spellcheck","type","size"]),n.iconLeft?((0,d.uX)(),(0,d.CE)("span",{key:0,class:(0,m.C4)(["icon-font-chess",[e.$style.icon,e.$style.left,n.iconLeft]]),onClick:t[7]||(t[7]=e=>c.onIconClick("left"))},null,2)):(0,d.Q3)("",!0),n.iconRight?((0,d.uX)(),(0,d.CE)("span",{key:1,class:(0,m.C4)(["icon-font-chess",[e.$style.icon,e.$style.right,n.iconRight]]),onClick:t[8]||(t[8]=e=>c.onIconClick("right"))},null,2)):(0,d.Q3)("",!0),n.clearButtonIcon&&!n.iconRight&&n.modelValue?((0,d.uX)(),(0,d.CE)("button",{key:2,type:"button",class:(0,m.C4)(e.$style.button),onClick:t[9]||(t[9]=e=>c.clearButtonAction(e))},[(0,d.Lk)("span",{class:(0,m.C4)(["icon-font-chess circle-x",e.$style.icon])},null,2)],2)):(0,d.Q3)("",!0),!n.clearButtonIcon||n.iconRight||n.modelValue?(0,d.Q3)("",!0):((0,d.uX)(),(0,d.CE)("span",{key:3,class:(0,m.C4)(["icon-font-chess",[e.$style.icon,e.$style.right,n.clearButtonIcon]])},null,2))],2)}let T=_export_sfc({name:"V5InputGroup",components:{V5Input:S},props:{ariaLabel:{type:String,default:""},autocapitalize:{required:!1,type:String},autocomplete:{type:String,default:"off"},autocorrect:{required:!1,type:String},autofocus:Boolean,clearButtonIcon:{type:String,default:""},disabled:Boolean,forceTheme:{type:String,default:""},iconLeft:{type:String,default:""},iconRight:{type:String,default:""},id:{type:String,default:""},maxlength:{type:Number,default:524288},name:{type:String,default:""},placeholder:{type:String,default:""},size:{type:String,default:"small"},spellcheck:{required:!1,type:String},type:{type:String,default:"text"},value:{type:[String,Number],default:""},modelValue:{default:"",type:[Number,String]}},emits:["change","clear-button-action","blur","focus","keydown","keyup","enter","update:modelValue"],computed:{inputClasses(){return[{[this.$style["space-left"]]:this.iconLeft,[this.$style["space-right"]]:this.iconRight||this.clearButtonIcon}]}},methods:{clearButtonAction(e){this.$emit("clear-button-action",e)},blurEvent(e){this.$emit("blur",e)},focusEvent(e){this.$emit("focus",e)},keydownEvent(e){this.$emit("keydown",e)},keyupEvent(e){this.$emit("keyup",e)},keyupEnterEvent(e){this.$emit("enter",e)},onIconClick(e){this.$emit(`icon-click-${e}`)},updateValue(e){this.$emit("update:modelValue",e)}}},[["render",_sfc_render$3],["__cssModules",{$style:{component:"ui_v5-input-group-component",light:"ui_v5-input-group-light",dark:"ui_v5-input-group-dark",icon:"ui_v5-input-group-icon",left:"ui_v5-input-group-left",right:"ui_v5-input-group-right","space-left":"ui_v5-input-group-space-left","space-right":"ui_v5-input-group-space-right",button:"ui_v5-input-group-button"}}]]),M=["textContent"],P=["textContent"],L=["disabled","hidden","selected","value"];function _sfc_render$2(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("select",{class:(0,m.C4)([e.$style.component,e.$style[n.size],{[e.$style.dark]:"dark"==n.forceTheme,[e.$style.light]:"light"==n.forceTheme,[e.$style.error]:n.hasError}]),onChange:t[0]||(t[0]=e=>c.setSelectedOption(e.target.value))},[n.placeholderText?((0,d.uX)(),(0,d.CE)("option",{key:0,disabled:"",hidden:"",selected:"",value:"",textContent:(0,m.v_)(n.placeholderText)},null,8,M)):(0,d.Q3)("",!0),n.emptyOption?((0,d.uX)(),(0,d.CE)("option",{key:1,selected:"",value:"",textContent:(0,m.v_)(n.emptyOption)},null,8,P)):(0,d.Q3)("",!0),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(n.options,(e,t)=>((0,d.uX)(),(0,d.CE)("option",{key:t,disabled:e.disabled,hidden:e.hidden,selected:c.getValue(e)===n.modelValue,value:c.getValue(e)??""},(0,m.v_)(c.getLabel(e)),9,L))),128))],34)}let N=_export_sfc({name:"V5Select",props:{emptyOption:{type:String,default:""},forceTheme:{type:String,default:""},hasError:{default:!1,type:Boolean},labelKey:{type:String,default:"label"},options:{type:Array,required:!0},placeholderText:{type:String,default:""},size:{type:String,default:""},value:{type:[String,Number],required:!1,default:""},modelValue:{type:[String,Number],default:""},valueKey:{type:String,default:"value"}},emits:["update:modelValue"],methods:{getLabel(e){return this.labelKey?e[this.labelKey]:e},getValue(e){return this.valueKey?e[this.valueKey]:e},setSelectedOption(e){this.$emit("update:modelValue",e);this.onChange&&this.onChange()}}},[["render",_sfc_render$2],["__cssModules",{$style:{component:"ui_v5-select-component",light:"ui_v5-select-light",dark:"ui_v5-select-dark",error:"ui_v5-select-error",large:"ui_v5-select-large"}}]]),x=["id","checked","disabled","name"],O=["for"];function _sfc_render$1(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("div",{class:(0,m.C4)(e.$style.component)},[(0,d.Lk)("input",{id:n.name,type:"checkbox",checked:n.modelValue,class:(0,m.C4)(e.$style.checkbox),disabled:n.isDisabled,name:n.name,onChange:t[0]||(t[0]=e=>c.setSwitchStatus(e.target.checked))},null,42,x),(0,d.Lk)("label",{class:(0,m.C4)(e.$style.label),for:n.name},[(0,d.Lk)("div",{class:(0,m.C4)(e.$style.button)},null,2)],10,O)],2)}let I=_export_sfc({name:"V5Switch",props:{name:{type:String,required:!0},value:{type:Boolean},modelValue:{type:Boolean,required:!0},isDisabled:{type:Boolean,default:!1}},emits:["update:modelValue"],methods:{setSwitchStatus(e){this.$emit("update:modelValue",e)}}},[["render",_sfc_render$1],["__cssModules",{$style:{component:"ui_v5-switch-component",checkbox:"ui_v5-switch-checkbox",label:"ui_v5-switch-label",readonly:"ui_v5-switch-readonly",button:"ui_v5-switch-button",group:"ui_v5-switch-group"}}]]);var R,B,V,H,D="function"==typeof Map?new Map:(V=[],H=[],{has:function(e){return V.indexOf(e)>-1},get:function(e){return H[V.indexOf(e)]},set:function(e,t){-1===V.indexOf(e)&&(V.push(e),H.push(t))},delete:function(e){var t=V.indexOf(e);t>-1&&(V.splice(t,1),H.splice(t,1))}}),o=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function r(e){var t=D.get(e);t&&t.destroy()}function i(e){var t=D.get(e);t&&t.update()}var F=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((F=function(e){return e}).destroy=function(e){return e},F.update=function(e){return e}):((F=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!D.has(e)){var t,n=null,a=null,l=null,a2=function(){e.clientWidth!==a&&p()},c=(function(t){window.removeEventListener("resize",a2,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",c,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),D.delete(e)}).bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",a2,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",D.set(e,{destroy:c,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),isNaN(n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth))&&(n=0),p()}function s(t){var n=e.style.width;e.style.width="0px",e.style.width=n,e.style.overflowY=t}function u(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&(e.parentNode.style.scrollBehavior="auto",t.push([e.parentNode,e.parentNode.scrollTop])),e=e.parentNode;return function(){return t.forEach(function(e){var t=e[0];t.scrollTop=e[1],t.style.scrollBehavior=null})}}(e);e.style.height="",e.style.height=e.scrollHeight+n+"px",a=e.clientWidth,t()}}function p(){u();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),a="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(a<t?"hidden"===n.overflowY&&(s("scroll"),u(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(s("hidden"),u(),a="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),l!==a){l=a;var c=o("autosize:resized");try{e.dispatchEvent(c)}catch(e){}}}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},F.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e});var $=F;let U=["value"];function _sfc_render(e,t,n,a,l,c){return(0,d.uX)(),(0,d.CE)("textarea",{class:(0,m.C4)([e.$style.component,e.$style[n.size],{[e.$style.dark]:"dark"==n.forceTheme,[e.$style.light]:"light"==n.forceTheme,[e.$style.autosize]:n.autosize,[e.$style.error]:n.hasError}]),value:n.modelValue,onBlur:t[0]||(t[0]=t=>e.$emit("blur",t)),onFocus:t[1]||(t[1]=t=>e.$emit("focus",t)),onKeydown:t[2]||(t[2]=t=>e.$emit("keydown",t)),onInput:t[3]||(t[3]=e=>c.onInput(e.target.value))},null,42,U)}let W=_export_sfc({name:"V5Textarea",props:{autofocus:{default:!1,type:Boolean},autosize:{type:Boolean,default:!1},forceTheme:{type:String,default:""},hasError:{default:!1,type:Boolean},size:{type:String,default:""},value:{default:"",type:[Number,String]},modelValue:{default:"",type:[Number,String]}},emits:["blur","focus","keydown","update:modelValue","resize"],watch:{value:{handler(){this.autosize&&setTimeout(()=>{$.update(this.$el)},50)}},modelValue:{handler(){this.autosize&&setTimeout(()=>{$.update(this.$el)},50)}}},mounted(){if(this.autosize){$(this.$el);this.$el.addEventListener("autosize:resized",this.resizeEvent)}this.autofocus&&this.$el.focus()},beforeUnmount(){this.autosize&&this.$el.removeEventListener("autosize:resized",this.resizeEvent)},methods:{onInput(e){this.$emit("update:modelValue",e)},resizeEvent(){this.$nextTick(()=>{this.$emit("resize")})}}},[["render",_sfc_render],["__cssModules",{$style:{component:"ui_v5-textarea-component",light:"ui_v5-textarea-light",dark:"ui_v5-textarea-dark",error:"ui_v5-textarea-error",autosize:"ui_v5-textarea-autosize",small:"ui_v5-textarea-small",large:"ui_v5-textarea-large","x-large":"ui_v5-textarea-x-large"}}]]);(e=>{(e=>{e.Hidden="hidden";e.Invisible="invisible"})(e.Classes||(e.Classes={}))})(a||(a={}));(e=>{(e=>{e[e.Backspace=8]="Backspace";e[e.Delete=46]="Delete";e[e.DownArrow=40]="DownArrow";e[e.Enter=13]="Enter";e[e.Escape=27]="Escape";e[e.LeftArrow=37]="LeftArrow";e[e.RightArrow=39]="RightArrow";e[e.Spacebar=32]="Spacebar";e[e.Stop=137]="Stop";e[e.Tab=9]="Tab";e[e.UpArrow=38]="UpArrow"})(e.KeyCodes||(e.KeyCodes={}))})(l||(l={}));let j=Object.freeze(Object.defineProperty({__proto__:null,createEventEmitter:function createEventEmitter(){let e=[];return{emit,listeners:e,off,offAll,offMany,on,onAll,onMany,once};function emit(t,n){let a;for(a of e)(a.type===t||"all"===a.type)&&a.handler(n)}function off(t){let n=e.findIndex(e=>t.type===e.type&&t.handler===e.handler);-1!==n&&e.splice(n,1)}function offAll(e){return off({handler:e,type:"all"})}function offMany(e=[]){e.forEach(e=>off(e))}function on(t,n){e.push({handler:n,type:t})}function onAll(e){on("all",e)}function onMany(e=[],t){e.forEach(e=>on(e,t))}function once(t,n){let a={handler:(...e)=>{off(a);n(...e)},type:t};e.push(a)}}},Symbol.toStringTag,{value:"Module"}));function noop(){}let G=Object.freeze(Object.defineProperty({__proto__:null,hasAllProperties:function hasAllProperties(e,t){return t.every(t=>Object.prototype.hasOwnProperty.call(e,t))},hasData:function hasData(e={}){return Object.keys(e).length>0},hasProperty:function hasProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)},hasSomeProperties:function hasSomeProperties(e,t){return t.some(t=>Object.prototype.hasOwnProperty.call(e,t))},invertObject:function invertObject(e){return Object.keys(e).reduce((t,n)=>({...t,[e[n]]:n}),{})},isEmpty:function isEmpty(e){return!Object.keys(e).length},objectWithExcludedProps:function objectWithExcludedProps(e,t=[]){return Object.keys(e).filter(e=>!t.includes(e)).reduce((t,n)=>({...t,[n]:e[n]}),{})},pick:function pick(e,t){return t.reduce((t,n)=>(Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]),t),{})},transformObjectBooleansToBinaryString:function transformObjectBooleansToBinaryString(e){return Object.keys(e).reduce((t,n)=>{let a=e[n];return"boolean"==typeof a&&(a=a?"1":"0"),t[n]=a,t},{})}},Symbol.toStringTag,{value:"Module"})),q=Object.freeze(Object.defineProperty({__proto__:null,createExternallyResolvablePromise:function createExternallyResolvablePromise(){let e,t;return{promise:new Promise((n,a)=>{e=n;t=a}),reject:t,resolve:e}}},Symbol.toStringTag,{value:"Module"})),Z=Object.freeze(Object.defineProperty({__proto__:null,createQueue:function createQueue(e=!0){let t=[],n=!1;return{add,clear,flush,getEntries};function add(a,...l){let c=noop,d=noop,f=new Promise((e,t)=>{d=e;c=t});return t.push({fn:a,params:l,reject:c,resolve:d}),e&&!1===n&&flush(),f}function clear(){n=!1;t.length=0}async function flush(){let e=t.shift();if(!e){n=!1;return}n=!0;try{let t=await e.fn(...e.params);e.resolve(t);return flush()}catch(t){e.reject(t);return flush()}}function getEntries(){return t}}},Symbol.toStringTag,{value:"Module"}));(e=>{(e=>{(e=>{e.NoTransition="NoTransition";e.OnEnter="Enter";e.OnExit="Exit";e.OnReEnter="ReEnter"})(e.Types||(e.Types={}))})(e.Event||(e.Event={}))})(c||(c={}));var z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K={};!/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */function(e){!function(){var HowlerGlobal2=function(){this.init()};HowlerGlobal2.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;e=parseFloat(e);n.ctx||setupAudioContext();if(void 0!==e&&e>=0&&e<=1){n._volume=e;if(n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var l=n._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=n._howls[a]._soundById(l[c]);d&&d._node&&(d._node.volume=d._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||setupAudioContext();n._muted=e;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var a=0;a<n._howls.length;a++)if(!n._howls[a]._webAudio)for(var l=n._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=n._howls[a]._soundById(l[c]);d&&d._node&&(d._node.muted=!!e||d._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();if(e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close){e.ctx.close();e.ctx=null;setupAudioContext()}return e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;e.state=e.ctx&&e.ctx.state||"suspended";e._autoSuspend();if(!e.usingWebAudio){if("undefined"!=typeof Audio)try{var n=new Audio;void 0===n.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0}try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!n||"function"!=typeof n.canPlayType)return e;var a=n.canPlayType("audio/mpeg;").replace(/^no$/,""),l=e._navigator?e._navigator.userAgent:"",c=l.match(/OPR\/(\d+)/g),d=c&&33>parseInt(c[0].split("/")[1],10),f=-1!==l.indexOf("Safari")&&-1===l.indexOf("Chrome"),m=l.match(/Version\/(.*?) /),g=f&&m&&15>parseInt(m[1],10);return e._codecs={mp3:!!(!d&&(a||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!a,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!g&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!g&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1;e.autoUnlock=!1;if(!e._mobileUnloaded&&44100!==e.ctx.sampleRate){e._mobileUnloaded=!0;e.unload()}e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var unlock=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0;e._releaseHtml5Audio(n)}catch(t){e.noAudio=!0;break}for(var a=0;a<e._howls.length;a++)if(!e._howls[a]._webAudio)for(var l=e._howls[a]._getSoundIds(),c=0;c<l.length;c++){var d=e._howls[a]._soundById(l[c]);if(d&&d._node&&!d._node._unlocked){d._node._unlocked=!0;d._node.load()}}e._autoResume();var f=e.ctx.createBufferSource();f.buffer=e._scratchBuffer;f.connect(e.ctx.destination);void 0===f.start?f.noteOn(0):f.start(0);"function"==typeof e.ctx.resume&&e.ctx.resume();f.onended=function(){f.disconnect(0);e._audioUnlocked=!0;document.removeEventListener("touchstart",unlock,!0);document.removeEventListener("touchend",unlock,!0);document.removeEventListener("click",unlock,!0);document.removeEventListener("keydown",unlock,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",unlock,!0),document.addEventListener("touchend",unlock,!0),document.addEventListener("click",unlock,!0),document.addEventListener("keydown",unlock,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var a=0;a<e._howls[n]._sounds.length;a++)if(!e._howls[n]._sounds[a]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null;e.state="suspending";var handleSuspension=function(){e.state="suspended";if(e._resumeAfterSuspend){delete e._resumeAfterSuspend;e._autoResume()}};e.ctx.suspend().then(handleSuspension,handleSuspension)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio){if("running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer){clearTimeout(e._suspendTimer);e._suspendTimer=null}else if("suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state){e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")});if(e._suspendTimer){clearTimeout(e._suspendTimer);e._suspendTimer=null}}else"suspending"===e.state&&(e._resumeAfterSuspend=!0);return e}}};var t=new HowlerGlobal2,Howl2=function(e){if(!e.src||0===e.src.length){console.error("An array of source files must be passed with any new Howl.");return}this.init(e)};Howl2.prototype={init:function(e){var n=this;return t.ctx||setupAudioContext(),n._autoplay=e.autoplay||!1,n._format="string"!=typeof e.format?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src="string"!=typeof e.src?e.src:[e.src],n._volume=void 0!==e.volume?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!!e.xhr&&!!e.xhr.withCredentials&&e.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var e,n,a=this,l=null;if(t.noAudio){a._emit("loaderror",null,"No audio support.");return}"string"==typeof a._src&&(a._src=[a._src]);for(var c=0;c<a._src.length;c++){if(a._format&&a._format[c])e=a._format[c];else{n=a._src[c];if("string"!=typeof n){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(n))||(e=/\.([^.]+)$/.exec(n.split("?",1)[0]));e&&(e=e[1].toLowerCase())}e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');if(e&&t.codecs(e)){l=a._src[c];break}}if(!l){a._emit("loaderror",null,"No codec support for selected audio sources.");return}a._src=l;a._state="loading";if("https:"===window.location.protocol&&"http:"===l.slice(0,5)){a._html5=!0;a._webAudio=!1}return new Sound3(a),a._webAudio&&loadBuffer(a),a},play:function(e,n){var a=this,l=null;if("number"==typeof e){l=e;e=null}else if("string"==typeof e&&"loaded"===a._state&&!a._sprite[e])return null;else if(void 0===e){e="__default";if(!a._playLock){for(var c=0,d=0;d<a._sounds.length;d++)if(a._sounds[d]._paused&&!a._sounds[d]._ended){c++;l=a._sounds[d]._id}1===c?e=null:l=null}}var f=l?a._soundById(l):a._inactiveSound();if(!f)return null;l&&!e&&(e=f._sprite||"__default");if("loaded"!==a._state){f._sprite=e;f._ended=!1;var m=f._id;return a._queue.push({event:"play",action:function(){a.play(m)}}),m}if(l&&!f._paused)return n||a._loadQueue("play"),f._id;a._webAudio&&t._autoResume();var g=Math.max(0,f._seek>0?f._seek:a._sprite[e][0]/1e3),_=Math.max(0,(a._sprite[e][0]+a._sprite[e][1])/1e3-g),y=1e3*_/Math.abs(f._rate),b=a._sprite[e][0]/1e3,A=(a._sprite[e][0]+a._sprite[e][1])/1e3;f._sprite=e;f._ended=!1;var setParams=function(){f._paused=!1;f._seek=g;f._start=b;f._stop=A;f._loop=!!(f._loop||a._sprite[e][2])};if(g>=A){a._ended(f);return}var C=f._node;if(a._webAudio){var playWebAudio=function(){a._playLock=!1;setParams();a._refreshBuffer(f);var e=f._muted||a._muted?0:f._volume;C.gain.setValueAtTime(e,t.ctx.currentTime);f._playStart=t.ctx.currentTime;void 0===C.bufferSource.start?f._loop?C.bufferSource.noteGrainOn(0,g,86400):C.bufferSource.noteGrainOn(0,g,_):f._loop?C.bufferSource.start(0,g,86400):C.bufferSource.start(0,g,_);y!==1/0&&(a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),y));n||setTimeout(function(){a._emit("play",f._id);a._loadQueue()},0)};if("running"===t.state&&"interrupted"!==t.ctx.state)playWebAudio();else{a._playLock=!0;a.once("resume",playWebAudio);a._clearTimer(f._id)}}else{var playHtml5=function(){C.currentTime=g;C.muted=f._muted||a._muted||t._muted||C.muted;C.volume=f._volume*t.volume();C.playbackRate=f._rate;try{var l=C.play();if(l&&"undefined"!=typeof Promise&&(l instanceof Promise||"function"==typeof l.then)){a._playLock=!0;setParams();l.then(function(){a._playLock=!1;C._unlocked=!0;n?a._loadQueue():a._emit("play",f._id)}).catch(function(){a._playLock=!1;a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");f._ended=!0;f._paused=!0})}else if(!n){a._playLock=!1;setParams();a._emit("play",f._id)}C.playbackRate=f._rate;if(C.paused){a._emit("playerror",f._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}if("__default"!==e||f._loop)a._endTimers[f._id]=setTimeout(a._ended.bind(a,f),y);else{a._endTimers[f._id]=function(){a._ended(f);C.removeEventListener("ended",a._endTimers[f._id],!1)};C.addEventListener("ended",a._endTimers[f._id],!1)}}catch(e){a._emit("playerror",f._id,e)}};if("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===C.src){C.src=a._src;C.load()}var w=window&&window.ejecta||!C.readyState&&t._navigator.isCocoonJS;if(C.readyState>=3||w)playHtml5();else{a._playLock=!0;a._state="loading";var listener=function(){a._state="loaded";playHtml5();C.removeEventListener(t._canPlayEvent,listener,!1)};C.addEventListener(t._canPlayEvent,listener,!1);a._clearTimer(f._id)}}return f._id},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),a=0;a<n.length;a++){t._clearTimer(n[a]);var l=t._soundById(n[a]);if(l&&!l._paused){l._seek=t.seek(n[a]);l._rateSeek=0;l._paused=!0;t._stopFade(n[a]);if(l._node){if(t._webAudio){if(!l._node.bufferSource)continue;void 0===l._node.bufferSource.stop?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0);t._cleanBuffer(l._node)}else isNaN(l._node.duration)&&l._node.duration!==1/0||l._node.pause()}}arguments[1]||t._emit("pause",l?l._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var a=n._getSoundIds(e),l=0;l<a.length;l++){n._clearTimer(a[l]);var c=n._soundById(a[l]);if(c){c._seek=c._start||0;c._rateSeek=0;c._paused=!0;c._ended=!0;n._stopFade(a[l]);if(c._node){if(n._webAudio){if(c._node.bufferSource){void 0===c._node.bufferSource.stop?c._node.bufferSource.noteOff(0):c._node.bufferSource.stop(0);n._cleanBuffer(c._node)}}else if(!isNaN(c._node.duration)||c._node.duration===1/0){c._node.currentTime=c._start||0;c._node.pause();c._node.duration===1/0&&n._clearSound(c._node)}}t||n._emit("stop",c._id)}}return n},mute:function(e,n){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"mute",action:function(){a.mute(e,n)}}),a;if(void 0===n){if("boolean"!=typeof e)return a._muted;a._muted=e}for(var l=a._getSoundIds(n),c=0;c<l.length;c++){var d=a._soundById(l[c]);if(d){d._muted=e;d._interval&&a._stopFade(d._id);a._webAudio&&d._node?d._node.gain.setValueAtTime(e?0:d._volume,t.ctx.currentTime):d._node&&(d._node.muted=!!t._muted||e);a._emit("mute",d._id)}}return a},volume:function(){var e,n,a,l=this,c=arguments;if(0===c.length)return l._volume;if(1===c.length||2===c.length&&void 0===c[1])l._getSoundIds().indexOf(c[0])>=0?n=parseInt(c[0],10):e=parseFloat(c[0]);else if(c.length>=2){e=parseFloat(c[0]);n=parseInt(c[1],10)}if(void 0===e||!(e>=0)||!(e<=1))return(a=n?l._soundById(n):l._sounds[0])?a._volume:0;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"volume",action:function(){l.volume.apply(l,c)}}),l;void 0===n&&(l._volume=e);n=l._getSoundIds(n);for(var d=0;d<n.length;d++){a=l._soundById(n[d]);if(a){a._volume=e;c[2]||l._stopFade(n[d]);l._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,t.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*t.volume());l._emit("volume",a._id)}}return l},fade:function(e,n,a,l){var c=this;if("loaded"!==c._state||c._playLock)return c._queue.push({event:"fade",action:function(){c.fade(e,n,a,l)}}),c;e=Math.min(Math.max(0,parseFloat(e)),1);n=Math.min(Math.max(0,parseFloat(n)),1);a=parseFloat(a);c.volume(e,l);for(var d=c._getSoundIds(l),f=0;f<d.length;f++){var m=c._soundById(d[f]);if(m){l||c._stopFade(d[f]);if(c._webAudio&&!m._muted){var g=t.ctx.currentTime,_=g+a/1e3;m._volume=e;m._node.gain.setValueAtTime(e,g);m._node.gain.linearRampToValueAtTime(n,_)}c._startFadeInterval(m,e,n,a,d[f],void 0===l)}}return c},_startFadeInterval:function(e,t,n,a,l,c){var d=this,f=t,m=n-t,g=Math.abs(m/.01),_=Date.now();e._fadeTo=n;e._interval=setInterval(function(){var l=(Date.now()-_)/a;_=Date.now();f+=m*l;f=Math.round(100*f)/100;f=m<0?Math.max(n,f):Math.min(n,f);d._webAudio?e._volume=f:d.volume(f,e._id,!0);c&&(d._volume=f);if(n<t&&f<=n||n>t&&f>=n){clearInterval(e._interval);e._interval=null;e._fadeTo=null;d.volume(n,e._id);d._emit("fade",e._id)}},Math.max(4,g>0?a/g:a))},_stopFade:function(e){var n=this,a=n._soundById(e);if(a&&a._interval){n._webAudio&&a._node.gain.cancelScheduledValues(t.ctx.currentTime);clearInterval(a._interval);a._interval=null;n.volume(a._fadeTo,e);a._fadeTo=null;n._emit("fade",e)}return n},loop:function(){var e,t,n,a=this,l=arguments;if(0===l.length)return a._loop;if(1===l.length){if("boolean"!=typeof l[0])return!!(n=a._soundById(parseInt(l[0],10)))&&n._loop;e=l[0];a._loop=e}else if(2===l.length){e=l[0];t=parseInt(l[1],10)}for(var c=a._getSoundIds(t),d=0;d<c.length;d++){n=a._soundById(c[d]);if(n){n._loop=e;if(a._webAudio&&n._node&&n._node.bufferSource){n._node.bufferSource.loop=e;if(e){n._node.bufferSource.loopStart=n._start||0;n._node.bufferSource.loopEnd=n._stop;if(a.playing(c[d])){a.pause(c[d],!0);a.play(c[d],!0)}}}}}return a},rate:function(){var e,n,a,l=this,c=arguments;if(0===c.length)n=l._sounds[0]._id;else if(1===c.length)l._getSoundIds().indexOf(c[0])>=0?n=parseInt(c[0],10):e=parseFloat(c[0]);else if(2===c.length){e=parseFloat(c[0]);n=parseInt(c[1],10)}if("number"!=typeof e)return(a=l._soundById(n))?a._rate:l._rate;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"rate",action:function(){l.rate.apply(l,c)}}),l;void 0===n&&(l._rate=e);n=l._getSoundIds(n);for(var d=0;d<n.length;d++){a=l._soundById(n[d]);if(a){if(l.playing(n[d])){a._rateSeek=l.seek(n[d]);a._playStart=l._webAudio?t.ctx.currentTime:a._playStart}a._rate=e;l._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):a._node&&(a._node.playbackRate=e);var f=l.seek(n[d]),m=1e3*((l._sprite[a._sprite][0]+l._sprite[a._sprite][1])/1e3-f)/Math.abs(a._rate);if(l._endTimers[n[d]]||!a._paused){l._clearTimer(n[d]);l._endTimers[n[d]]=setTimeout(l._ended.bind(l,a),m)}l._emit("rate",a._id)}}return l},seek:function(){var e,n,a=this,l=arguments;if(0===l.length)a._sounds.length&&(n=a._sounds[0]._id);else if(1===l.length){var c=a._getSoundIds().indexOf(l[0]);if(c>=0)n=parseInt(l[0],10);else if(a._sounds.length){n=a._sounds[0]._id;e=parseFloat(l[0])}}else if(2===l.length){e=parseFloat(l[0]);n=parseInt(l[1],10)}if(void 0===n)return 0;if("number"==typeof e&&("loaded"!==a._state||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,l)}}),a;var d=a._soundById(n);if(d){if("number"==typeof e&&e>=0){var f=a.playing(n);f&&a.pause(n,!0);d._seek=e;d._ended=!1;a._clearTimer(n);a._webAudio||!d._node||isNaN(d._node.duration)||(d._node.currentTime=e);var seekAndEmit=function(){f&&a.play(n,!0);a._emit("seek",n)};if(f&&!a._webAudio){var emitSeek=function(){a._playLock?setTimeout(emitSeek,0):seekAndEmit()};setTimeout(emitSeek,0)}else seekAndEmit()}else{if(!a._webAudio)return d._node.currentTime;var m=a.playing(n)?t.ctx.currentTime-d._playStart:0,g=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(g+m*Math.abs(d._rate))}}return a},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var a=0;a<t._sounds.length;a++)if(!t._sounds[a]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,a=t._soundById(e);return a&&(n=t._sprite[a._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,a=e._sounds,l=0;l<a.length;l++){a[l]._paused||e.stop(a[l]._id);if(!e._webAudio){e._clearSound(a[l]._node);a[l]._node.removeEventListener("error",a[l]._errorFn,!1);a[l]._node.removeEventListener(t._canPlayEvent,a[l]._loadFn,!1);a[l]._node.removeEventListener("ended",a[l]._endFn,!1);t._releaseHtml5Audio(a[l]._node)}delete a[l]._node;e._clearTimer(a[l]._id)}var c=t._howls.indexOf(e);c>=0&&t._howls.splice(c,1);var d=!0;for(l=0;l<t._howls.length;l++)if(t._howls[l]._src===e._src||e._src.indexOf(t._howls[l]._src)>=0){d=!1;break}return n&&d&&delete n[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,a){var l=this,c=l["_on"+e];return"function"==typeof t&&c.push(a?{id:n,fn:t,once:a}:{id:n,fn:t}),l},off:function(e,t,n){var a=this,l=a["_on"+e],c=0;if("number"==typeof t){n=t;t=null}if(t||n)for(c=0;c<l.length;c++){var d=n===l[c].id;if(t===l[c].fn&&d||!t&&d){l.splice(c,1);break}}else if(e)a["_on"+e]=[];else{var f=Object.keys(a);for(c=0;c<f.length;c++)0===f[c].indexOf("_on")&&Array.isArray(a[f[c]])&&(a[f[c]]=[])}return a},once:function(e,t,n){var a=this;return a.on(e,t,n,1),a},_emit:function(e,t,n){for(var a=this,l=a["_on"+e],c=l.length-1;c>=0;c--)if(!l[c].id||l[c].id===t||"load"===e){setTimeout((function(e){e.call(this,t,n)}).bind(a,l[c].fn),0);l[c].once&&a.off(e,l[c].fn,l[c].id)}return a._loadQueue(e),a},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];if(n.event===e){t._queue.shift();t._loadQueue()}e||n.action()}return t},_ended:function(e){var n=this,a=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var l=!!(e._loop||n._sprite[a][2]);n._emit("end",e._id);!n._webAudio&&l&&n.stop(e._id,!0).play(e._id);if(n._webAudio&&l){n._emit("play",e._id);e._seek=e._start||0;e._rateSeek=0;e._playStart=t.ctx.currentTime;var c=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),c)}if(n._webAudio&&!l){e._paused=!0;e._ended=!0;e._seek=e._start||0;e._rateSeek=0;n._clearTimer(e._id);n._cleanBuffer(e._node);t._autoSuspend()}return n._webAudio||l||n.stop(e._id,!0),n},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new Sound3(e)},_drain:function(){var e=this,t=e._pool,n=0,a=0;if(!(e._sounds.length<t)){for(a=0;a<e._sounds.length;a++)e._sounds[a]._ended&&n++;for(a=e._sounds.length-1;a>=0;a--){if(n<=t)return;if(e._sounds[a]._ended){e._webAudio&&e._sounds[a]._node&&e._sounds[a]._node.disconnect(0);e._sounds.splice(a,1);n--}}}},_getSoundIds:function(e){var t=this;if(void 0!==e)return[e];for(var n=[],a=0;a<t._sounds.length;a++)n.push(t._sounds[a]._id);return n},_refreshBuffer:function(e){var a=this;e._node.bufferSource=t.ctx.createBufferSource();e._node.bufferSource.buffer=n[a._src];e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node);e._node.bufferSource.loop=e._loop;if(e._loop){e._node.bufferSource.loopStart=e._start||0;e._node.bufferSource.loopEnd=e._stop||0}return e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),a},_cleanBuffer:function(e){var n=this,a=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return n;if(t._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null;e.bufferSource.disconnect(0);if(a)try{e.bufferSource.buffer=t._scratchBuffer}catch(e){}}return e.bufferSource=null,n},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var Sound3=function(e){this._parent=e;this.init()};Sound3.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,a=t._muted||e._muted||e._parent._muted?0:e._volume;if(n._webAudio){e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain();e._node.gain.setValueAtTime(a,t.ctx.currentTime);e._node.paused=!0;e._node.connect(t.masterGain)}else if(!t.noAudio){e._node=t._obtainHtml5Audio();e._errorFn=e._errorListener.bind(e);e._node.addEventListener("error",e._errorFn,!1);e._loadFn=e._loadListener.bind(e);e._node.addEventListener(t._canPlayEvent,e._loadFn,!1);e._endFn=e._endListener.bind(e);e._node.addEventListener("ended",e._endFn,!1);e._node.src=n._src;e._node.preload=!0===n._preload?"auto":n._preload;e._node.volume=a*t.volume();e._node.load()}return e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0);e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10;0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]});if("loaded"!==n._state){n._state="loaded";n._emit("load");n._loadQueue()}e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;if(t._duration===1/0){t._duration=Math.ceil(10*e._node.duration)/10;t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration);t._ended(e)}e._node.removeEventListener("ended",e._endFn,!1)}};var n={},loadBuffer=function(e){var t=e._src;if(n[t]){e._duration=n[t].duration;loadSound2(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var a=atob(t.split(",")[1]),l=new Uint8Array(a.length),c=0;c<a.length;++c)l[c]=a.charCodeAt(c);decodeAudioData(l.buffer,e)}else{var d=new XMLHttpRequest;d.open(e._xhr.method,t,!0);d.withCredentials=e._xhr.withCredentials;d.responseType="arraybuffer";e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){d.setRequestHeader(t,e._xhr.headers[t])});d.onload=function(){var t=(d.status+"")[0];if("0"!==t&&"2"!==t&&"3"!==t){e._emit("loaderror",null,"Failed loading audio file with status: "+d.status+".");return}decodeAudioData(d.response,e)};d.onerror=function(){if(e._webAudio){e._html5=!0;e._webAudio=!1;e._sounds=[];delete n[t];e.load()}};safeXhrSend(d)}},safeXhrSend=function(e){try{e.send()}catch(t){e.onerror()}},decodeAudioData=function(e,a){var error2=function(){a._emit("loaderror",null,"Decoding audio data failed.")},success=function(e){if(e&&a._sounds.length>0){n[a._src]=e;loadSound2(a,e)}else error2()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(success).catch(error2):t.ctx.decodeAudioData(e,success,error2)},loadSound2=function(e,t){t&&!e._duration&&(e._duration=t.duration);0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]});if("loaded"!==e._state){e._state="loaded";e._emit("load");e._loadQueue()}},setupAudioContext=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(e){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),a=n?parseInt(n[1],10):null;if(e&&a&&a<9){var l=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!l&&(t.usingWebAudio=!1)}if(t.usingWebAudio){t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain();t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime);t.masterGain.connect(t.ctx.destination)}t._setup()}};e.Howler=t;e.Howl=Howl2;if(void 0!==z){z.HowlerGlobal=HowlerGlobal2;z.Howler=t;z.Howl=Howl2;z.Sound=Sound3}else if("undefined"!=typeof window){window.HowlerGlobal=HowlerGlobal2;window.Howler=t;window.Howl=Howl2;window.Sound=Sound3}}();!/*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   */function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t};HowlerGlobal.prototype.pos=function(e,t,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;t="number"!=typeof t?a._pos[1]:t;n="number"!=typeof n?a._pos[2]:n;if("number"!=typeof e)return a._pos;a._pos=[e,t,n];if(void 0!==a.ctx.listener.positionX){a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1);a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1);a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)}else a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);return a};HowlerGlobal.prototype.orientation=function(e,t,n,a,l,c){var d=this;if(!d.ctx||!d.ctx.listener)return d;var f=d._orientation;t="number"!=typeof t?f[1]:t;n="number"!=typeof n?f[2]:n;a="number"!=typeof a?f[3]:a;l="number"!=typeof l?f[4]:l;c="number"!=typeof c?f[5]:c;if("number"!=typeof e)return f;d._orientation=[e,t,n,a,l,c];if(void 0!==d.ctx.listener.forwardX){d.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1);d.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1);d.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1);d.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1);d.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1);d.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)}else d.ctx.listener.setOrientation(e,t,n,a,l,c);return d};Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init);Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var a=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e;n._pos=[e,0,0]}for(var l=n._getSoundIds(t),c=0;c<l.length;c++){var d=n._soundById(l[c]);if(d){if("number"!=typeof e)return d._stereo;d._stereo=e;d._pos=[e,0,0];if(d._node){d._pannerAttr.panningModel="equalpower";d._panner&&d._panner.pan||setupPanner(d,a);if("spatial"===a){if(void 0!==d._panner.positionX){d._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime);d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime);d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)}else d._panner.setPosition(e,0,0)}else d._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)}n._emit("stereo",d._id)}}return n};Howl.prototype.pos=function(e,t,n,a){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"pos",action:function(){l.pos(e,t,n,a)}}),l;t="number"!=typeof t?0:t;n="number"!=typeof n?-.5:n;if(void 0===a){if("number"!=typeof e)return l._pos;l._pos=[e,t,n]}for(var c=l._getSoundIds(a),d=0;d<c.length;d++){var f=l._soundById(c[d]);if(f){if("number"!=typeof e)return f._pos;f._pos=[e,t,n];if(f._node){(!f._panner||f._panner.pan)&&setupPanner(f,"spatial");if(void 0!==f._panner.positionX){f._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime);f._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime);f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)}else f._panner.setPosition(e,t,n)}l._emit("pos",f._id)}}return l};Howl.prototype.orientation=function(e,t,n,a){var l=this;if(!l._webAudio)return l;if("loaded"!==l._state)return l._queue.push({event:"orientation",action:function(){l.orientation(e,t,n,a)}}),l;t="number"!=typeof t?l._orientation[1]:t;n="number"!=typeof n?l._orientation[2]:n;if(void 0===a){if("number"!=typeof e)return l._orientation;l._orientation=[e,t,n]}for(var c=l._getSoundIds(a),d=0;d<c.length;d++){var f=l._soundById(c[d]);if(f){if("number"!=typeof e)return f._orientation;f._orientation=[e,t,n];if(f._node){if(!f._panner){f._pos||(f._pos=l._pos||[0,0,-.5]);setupPanner(f,"spatial")}if(void 0!==f._panner.orientationX){f._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime);f._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime);f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)}else f._panner.setOrientation(e,t,n)}l._emit("orientation",f._id)}}return l};Howl.prototype.pannerAttr=function(){var e,t,n,a=this,l=arguments;if(!a._webAudio)return a;if(0===l.length)return a._pannerAttr;if(1===l.length){if("object"!=typeof l[0])return(n=a._soundById(parseInt(l[0],10)))?n._pannerAttr:a._pannerAttr;e=l[0];if(void 0===t){e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel});a._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:a._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:a._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:a._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:a._panningModel}}}else if(2===l.length){e=l[0];t=parseInt(l[1],10)}for(var c=a._getSoundIds(t),d=0;d<c.length;d++){n=a._soundById(c[d]);if(n){var f=n._pannerAttr;f={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:f.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:f.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:f.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:f.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:f.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:f.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:f.panningModel};var m=n._panner;if(!m){n._pos||(n._pos=a._pos||[0,0,-.5]);setupPanner(n,"spatial");m=n._panner}m.coneInnerAngle=f.coneInnerAngle;m.coneOuterAngle=f.coneOuterAngle;m.coneOuterGain=f.coneOuterGain;m.distanceModel=f.distanceModel;m.maxDistance=f.maxDistance;m.refDistance=f.refDistance;m.rolloffFactor=f.rolloffFactor;m.panningModel=f.panningModel}}return a};Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation;t._stereo=n._stereo;t._pos=n._pos;t._pannerAttr=n._pannerAttr;e.call(this);t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init);Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation;t._stereo=n._stereo;t._pos=n._pos;t._pannerAttr=n._pannerAttr;if(t._stereo)n.stereo(t._stereo);else if(t._pos)n.pos(t._pos[0],t._pos[1],t._pos[2],t._id);else if(t._panner){t._panner.disconnect(0);t._panner=void 0;n._refreshBuffer(t)}return e.call(this)}}(Sound.prototype.reset);var setupPanner=function(e,t){t=t||"spatial";if("spatial"===t){e._panner=Howler.ctx.createPanner();e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle;e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle;e._panner.coneOuterGain=e._pannerAttr.coneOuterGain;e._panner.distanceModel=e._pannerAttr.distanceModel;e._panner.maxDistance=e._pannerAttr.maxDistance;e._panner.refDistance=e._pannerAttr.refDistance;e._panner.rolloffFactor=e._pannerAttr.rolloffFactor;e._panner.panningModel=e._pannerAttr.panningModel;if(void 0!==e._panner.positionX){e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime);e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime);e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)}else e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]);if(void 0!==e._panner.orientationX){e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime);e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime);e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)}else e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])}else{e._panner=Howler.ctx.createStereoPanner();e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)}e._panner.connect(e._node);e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}(K);let Q=class{constructor(e,t=!1){__publicField(this,"assets");__publicField(this,"howler",null);__publicField(this,"useAudioElement",!1);/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.assets=e.filter(e=>e.endsWith("mp3")).concat(e.filter(e=>!e.endsWith("mp3"))):this.assets=e;this.useAudioElement=t}load(){this.unload();this.howler||(this.howler=new K.Howl({html5:this.useAudioElement,src:this.assets,onloaderror:()=>{console.warn("Howler: sounds failed to load, falling back to html5 audio");this.howler=new K.Howl({html5:!0,src:this.assets,onloaderror:()=>{console.error("Howler: html5 audio fallback failed to load")}})}}))}unload(){var e;null==(e=this.howler)||e.unload()}play(){var e;this.howler||this.load();null==(e=this.howler)||e.play();if(window.Cypress){window.Cypress.howlerHistory||(window.Cypress.howlerHistory=[]);window.Cypress.howlerHistory.push({time:Date.now(),src:this.assets.slice(0)})}}};var X=(e=>(e.Suspended="web-ui-sound-suspended",e.Enabled="web-ui-sound-enabled",e))(X||{});let Y=window.chesscom||{},J=window.AudioContext||window.webkitAudioContext,ee=!!J;function newAudioContext(){try{return new J}catch(e){return null}}function isSuspended(){return ee}function resumeAudio(e){if(J){Y.audioContext||(Y.audioContext=newAudioContext());if(!Y.audioContext||!Y.audioContext.resume){ee=!1;e();return}Y.audioContext.resume().then(()=>{ee=!1;e()})}}let et=["mousedown","keydown","touchstart","touchend"],en=!1;function addWindowEvents(e){if(!en){en=!0;et.forEach(t=>window.addEventListener(t,e))}}function removeWindowEvents(e){if(en){en=!1;et.forEach(t=>window.removeEventListener(t,e))}}function waitMessage(e,t){function listener(n){var a;if((null==(a=null==n?void 0:n.data)?void 0:a.key)===e){t();window.removeEventListener("message",listener)}}window.addEventListener("message",listener)}function enableSound(){isSuspended()&&resumeAudio(()=>{window.postMessage({key:X.Enabled},window.location.origin);removeWindowEvents(enableSound)})}function loadSound(e,t=!1){let n=new Q(e,t);if(isSuspended()){addWindowEvents(enableSound);waitMessage(X.Enabled,()=>n.load())}else n.load();return n}let eo=0,er=!1;function playSound(e){if(isSuspended()){if(!er&&eo>3){eo=0;er=!0;window.postMessage({key:X.Suspended},window.location.origin)}else if(!er){eo++;enableSound();waitMessage(X.Enabled,()=>e.play())}}else e.play()}let ei=Object.freeze(Object.defineProperty({__proto__:null,Sound:Q,SoundEvents:X,enableSound,loadSound,playSound},Symbol.toStringTag,{value:"Module"}))},97786:function(e,t,n){"use strict";n.d(t,{GF$:function(){return useElementHover},Lhy:function(){return useElementSize},MLh:function(){return useEventListener},X2F:function(){return onClickOutside},lWr:function(){return useWindowSize}});var a=n(22720),l=n(20641),c=n(50953),d=n(12189);function unrefElement(e){var t;let n=(0,a.BA)(e);return null!=(t=null==n?void 0:n.$el)?t:n}let f=a.oc?window:void 0;a.oc&&window.document;a.oc&&window.navigator;a.oc&&window.location;function useEventListener(...e){let t,n,c,d;if("string"==typeof e[0]||Array.isArray(e[0])){[n,c,d]=e;t=f}else[t,n,c,d]=e;if(!t)return a.lQ;Array.isArray(n)||(n=[n]);Array.isArray(c)||(c=[c]);let m=[],cleanup=()=>{m.forEach(e=>e());m.length=0},register=(e,t,n,a)=>(e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)),g=(0,l.wB)(()=>[unrefElement(t),(0,a.BA)(d)],([e,t])=>{cleanup();if(!e)return;let l=(0,a.Gv)(t)?{...t}:t;m.push(...n.flatMap(t=>c.map(n=>register(e,t,n,l))))},{immediate:!0,flush:"post"}),stop=()=>{g();cleanup()};return(0,a.Uo)(stop),stop}let m=!1;function onClickOutside(e,t,n={}){let{window:l=f,ignore:c=[],capture:d=!0,detectIframe:g=!1}=n;if(!l)return a.lQ;if(a.un&&!m){m=!0;Array.from(l.document.body.children).forEach(e=>e.addEventListener("click",a.lQ));l.document.documentElement.addEventListener("click",a.lQ)}let _=!0,shouldIgnore=e=>c.some(t=>{if("string"==typeof t)return Array.from(l.document.querySelectorAll(t)).some(t=>t===e.target||e.composedPath().includes(t));{let n=unrefElement(t);return n&&(e.target===n||e.composedPath().includes(n))}}),y=[useEventListener(l,"click",n=>{let a=unrefElement(e);if(!(!a||a===n.target||n.composedPath().includes(a))){0===n.detail&&(_=!shouldIgnore(n));if(!_){_=!0;return}t(n)}},{passive:!0,capture:d}),useEventListener(l,"pointerdown",t=>{let n=unrefElement(e);_=!shouldIgnore(t)&&!!(n&&!t.composedPath().includes(n))},{passive:!0}),g&&useEventListener(l,"blur",n=>{setTimeout(()=>{var a;let c=unrefElement(e);(null==(a=l.document.activeElement)?void 0:a.tagName)!=="IFRAME"||(null==c?void 0:c.contains(l.document.activeElement))||t(n)},0)})].filter(Boolean);return()=>y.forEach(e=>e())}function useMounted(){let e=(0,c.KR)(!1),t=(0,l.nI)();return t&&(0,l.sV)(()=>{e.value=!0},d.LER?void 0:t),e}function useSupported(e){let t=useMounted();return(0,l.EW)(()=>(t.value,!!e()))}function useMediaQuery(e,t={}){let n;let{window:d=f}=t,m=useSupported(()=>d&&"matchMedia"in d&&"function"==typeof d.matchMedia),g=(0,c.KR)(!1),handler=e=>{g.value=e.matches},cleanup=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",handler):n.removeListener(handler))},_=(0,l.nT)(()=>{if(m.value){cleanup();"addEventListener"in(n=d.matchMedia((0,a.BA)(e)))?n.addEventListener("change",handler):n.addListener(handler);g.value=n.matches}});return(0,a.Uo)(()=>{_();cleanup();n=void 0}),g}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function useResizeObserver(e,t,n={}){let c;let{window:d=f,...m}=n,g=useSupported(()=>d&&"ResizeObserver"in d),cleanup=()=>{if(c){c.disconnect();c=void 0}},_=(0,l.EW)(()=>Array.isArray(e)?e.map(e=>unrefElement(e)):[unrefElement(e)]),y=(0,l.wB)(_,e=>{cleanup();if(g.value&&d){c=new ResizeObserver(t);for(let t of e)t&&c.observe(t,m)}},{immediate:!0,flush:"post"}),stop=()=>{cleanup();y()};return(0,a.Uo)(stop),{isSupported:g,stop}}function useElementHover(e,t={}){let n;let{delayEnter:a=0,delayLeave:l=0,window:d=f}=t,m=(0,c.KR)(!1),toggle=e=>{let t=e?a:l;if(n){clearTimeout(n);n=void 0}t?n=setTimeout(()=>m.value=e,t):m.value=e};return d&&(useEventListener(e,"mouseenter",()=>toggle(!0),{passive:!0}),useEventListener(e,"mouseleave",()=>toggle(!1),{passive:!0})),m}function useElementSize(e,t={width:0,height:0},n={}){let{window:d=f,box:m="content-box"}=n,g=(0,l.EW)(()=>{var t,n;return null==(n=null==(t=unrefElement(e))?void 0:t.namespaceURI)?void 0:n.includes("svg")}),_=(0,c.KR)(t.width),y=(0,c.KR)(t.height),{stop:b}=useResizeObserver(e,([t])=>{let n="border-box"===m?t.borderBoxSize:"content-box"===m?t.contentBoxSize:t.devicePixelContentBoxSize;if(d&&g.value){let t=unrefElement(e);if(t){let e=t.getBoundingClientRect();_.value=e.width;y.value=e.height}}else if(n){let e=Array.isArray(n)?n:[n];_.value=e.reduce((e,{inlineSize:t})=>e+t,0);y.value=e.reduce((e,{blockSize:t})=>e+t,0)}else{_.value=t.contentRect.width;y.value=t.contentRect.height}},n);(0,a.rd)(()=>{let n=unrefElement(e);if(n){_.value="offsetWidth"in n?n.offsetWidth:t.width;y.value="offsetHeight"in n?n.offsetHeight:t.height}});let A=(0,l.wB)(()=>unrefElement(e),e=>{_.value=e?t.width:0;y.value=e?t.height:0});return{width:_,height:y,stop:function stop(){b();A()}}}a.D_;function useWindowSize(e={}){let{window:t=f,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:d=Number.POSITIVE_INFINITY,listenOrientation:m=!0,includeScrollbar:g=!0}=e,_=(0,c.KR)(n),y=(0,c.KR)(d),update=()=>{if(t){if(g){_.value=t.innerWidth;y.value=t.innerHeight}else{_.value=t.document.documentElement.clientWidth;y.value=t.document.documentElement.clientHeight}}};update();(0,a.rd)(update);useEventListener("resize",update,{passive:!0});if(m){let e=useMediaQuery("(orientation: portrait)");(0,l.wB)(e,()=>update())}return{width:_,height:y}}},22720:function(e,t,n){"use strict";n.d(t,{BA:function(){return toValue},D_:function(){return identity},Gv:function(){return isObject},TO:function(){return useTimeoutFn},Uo:function(){return tryOnScopeDispose},lQ:function(){return noop},oc:function(){return d},rd:function(){return tryOnMounted},un:function(){return m}});var a=n(50953),l=n(12189),c=n(20641);function tryOnScopeDispose(e){return!!(0,a.o5)()&&((0,a.jr)(e),!0)}function toValue(e){return"function"==typeof e?e():(0,a.R1)(e)}let d="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&WorkerGlobalScope;let f=Object.prototype.toString,isObject=e=>"[object Object]"===f.call(e),noop=()=>{},m=getIsIOS();function getIsIOS(){var e,t;return d&&(null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||(null==(t=null==window?void 0:window.navigator)?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(null==window?void 0:window.navigator.userAgent))}l.Sg5,l.Sg5,l.Sg5;function cacheStringFunction(e){let t=Object.create(null);return n=>t[n]||(t[n]=e(n))}let g=/\B([A-Z])/g;cacheStringFunction(e=>e.replace(g,"-$1").toLowerCase());let _=/-(\w)/g;cacheStringFunction(e=>e.replace(_,(e,t)=>t?t.toUpperCase():""));function identity(e){return e}function getLifeCycleTarget(e){return e||(0,c.nI)()}function tryOnMounted(e,t=!0,n){getLifeCycleTarget()?(0,c.sV)(e,n):t?e():(0,c.dY)(e)}function useTimeoutFn(e,t,n={}){let{immediate:l=!0}=n,c=(0,a.KR)(!1),f=null;function clear(){if(f){clearTimeout(f);f=null}}function stop(){c.value=!1;clear()}function start(...n){clear();c.value=!0;f=setTimeout(()=>{c.value=!1;f=null;e(...n)},toValue(t))}if(l){c.value=!0;d&&start()}return tryOnScopeDispose(stop),{isPending:(0,a.tB)(c),start,stop}}},71227:function(e,t,n){"use strict";n.d(t,{A:function(){return _baseGetTag}});var a=n(41917).A.Symbol,l=Object.prototype,c=l.hasOwnProperty,d=l.toString,f=a?a.toStringTag:void 0,_getRawTag=function(e){var t=c.call(e,f),n=e[f];try{e[f]=void 0;var a=!0}catch(e){}var l=d.call(e);return a&&(t?e[f]=n:delete e[f]),l},m=Object.prototype.toString,g=a?a.toStringTag:void 0,_baseGetTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":g&&g in Object(e)?_getRawTag(e):function(e){return m.call(e)}(e)}},72136:function(e,t){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t.A=n},41917:function(e,t,n){"use strict";var a=n(72136),l="object"==typeof self&&self&&self.Object===Object&&self,c=a.A||l||Function("return this")();t.A=c},44906:function(e,t,n){"use strict";n.d(t,{A:function(){return lodash_es_debounce}});var a=n(23149),l=n(41917),lodash_es_now=function(){return l.A.Date.now()},c=/\s/,_trimmedEndIndex=function(e){for(var t=e.length;t--&&c.test(e.charAt(t)););return t},d=/^\s+/,f=n(71227),m=n(53098),g=0/0,_=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,b=/^0o[0-7]+$/i,A=parseInt,lodash_es_toNumber=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,m.A)(e)&&"[object Symbol]"==(0,f.A)(e)}(e))return g;if((0,a.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=function(e){return e?e.slice(0,_trimmedEndIndex(e)+1).replace(d,""):e}(e);var n=y.test(e);return n||b.test(e)?A(e.slice(2),n?2:8):_.test(e)?g:+e},C=Math.max,w=Math.min,lodash_es_debounce=function(e,t,n){var l,c,d,f,m,g,_=0,y=!1,b=!1,A=!0;if("function"!=typeof e)throw TypeError("Expected a function");t=lodash_es_toNumber(t)||0;if((0,a.A)(n)){y=!!n.leading;d=(b="maxWait"in n)?C(lodash_es_toNumber(n.maxWait)||0,t):d;A="trailing"in n?!!n.trailing:A}function invokeFunc(t){var n=l,a=c;return l=c=void 0,_=t,f=e.apply(a,n)}function leadingEdge(e){return _=e,m=setTimeout(timerExpired,t),y?invokeFunc(e):f}function remainingWait(e){var n=e-g,a=e-_,l=t-n;return b?w(l,d-a):l}function shouldInvoke(e){var n=e-g,a=e-_;return void 0===g||n>=t||n<0||b&&a>=d}function timerExpired(){var e=lodash_es_now();if(shouldInvoke(e))return trailingEdge(e);m=setTimeout(timerExpired,remainingWait(e))}function trailingEdge(e){return(m=void 0,A&&l)?invokeFunc(e):(l=c=void 0,f)}function cancel(){void 0!==m&&clearTimeout(m);_=0;l=g=c=m=void 0}function flush(){return void 0===m?f:trailingEdge(lodash_es_now())}function debounced(){var e=lodash_es_now(),n=shouldInvoke(e);l=arguments;c=this;g=e;if(n){if(void 0===m)return leadingEdge(g);if(b)return clearTimeout(m),m=setTimeout(timerExpired,t),invokeFunc(g)}return void 0===m&&(m=setTimeout(timerExpired,t)),f}return debounced.cancel=cancel,debounced.flush=flush,debounced}},350:function(e,t,n){"use strict";n.d(t,{A:function(){return lodash_es_forOwn}});var a=function createBaseFor(e){return function(t,n,a){for(var l=-1,c=Object(t),d=a(t),f=d.length;f--;){var m=d[e?f:++l];if(!1===n(c[m],m,c))break}return t}}(),_baseTimes=function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a},l=n(71227),c=n(53098),_baseIsArguments=function(e){return(0,c.A)(e)&&"[object Arguments]"==(0,l.A)(e)},d=Object.prototype,f=d.hasOwnProperty,m=d.propertyIsEnumerable,g=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return(0,c.A)(e)&&f.call(e,"callee")&&!m.call(e,"callee")},_=Array.isArray,y=n(41917),b="object"==typeof exports&&exports&&!exports.nodeType&&exports,A=b&&"object"==typeof module&&module&&!module.nodeType&&module,C=A&&A.exports===b?y.A.Buffer:void 0,w=(C?C.isBuffer:void 0)||function(){return!1},k=/^(?:0|[1-9]\d*)$/,_isIndex=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&k.test(e))&&e>-1&&e%1==0&&e<t},lodash_es_isLength=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0;S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S["[object Function]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object WeakMap]"]=!1;var T=n(72136),M="object"==typeof exports&&exports&&!exports.nodeType&&exports,P=M&&"object"==typeof module&&module&&!module.nodeType&&module,L=P&&P.exports===M&&T.A.process,N=function(){try{var e=P&&P.require&&P.require("util").types;if(e)return e;return L&&L.binding&&L.binding("util")}catch(e){}}(),x=N&&N.isTypedArray,O=x?function(e){return function(t){return e(t)}}(x):function(e){return(0,c.A)(e)&&lodash_es_isLength(e.length)&&!!S[(0,l.A)(e)]},I=Object.prototype.hasOwnProperty,_arrayLikeKeys=function(e,t){var n=_(e),a=!n&&g(e),l=!n&&!a&&w(e),c=!n&&!a&&!l&&O(e),d=n||a||l||c,f=d?_baseTimes(e.length,String):[],m=f.length;for(var y in e)(t||I.call(e,y))&&!(d&&("length"==y||l&&("offset"==y||"parent"==y)||c&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||_isIndex(y,m)))&&f.push(y);return f},R=Object.prototype,_isPrototype=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||R)},B=function overArg(e,t){return function(n){return e(t(n))}}(Object.keys,Object),V=Object.prototype.hasOwnProperty,_baseKeys=function(e){if(!_isPrototype(e))return B(e);var t=[];for(var n in Object(e))V.call(e,n)&&"constructor"!=n&&t.push(n);return t},H=n(23149),lodash_es_isFunction=function(e){if(!(0,H.A)(e))return!1;var t=(0,l.A)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},lodash_es_keys=function(e){return!function(e){return null!=e&&lodash_es_isLength(e.length)&&!lodash_es_isFunction(e)}(e)?_baseKeys(e):_arrayLikeKeys(e)},lodash_es_identity=function(e){return e},lodash_es_forOwn=function(e,t){return e&&function(e,t){return e&&a(e,t,lodash_es_keys)}(e,function(e){return"function"==typeof e?e:lodash_es_identity}(t))}},23149:function(e,t){"use strict";function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.A=isObject},53098:function(e,t){"use strict";function isObjectLike(e){return null!=e&&"object"==typeof e}t.A=isObjectLike},74022:function(e,t,n){"use strict";var a=n(44906),l=n(23149);function throttle(e,t,n){var c=!0,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");if((0,l.A)(n)){c="leading"in n?!!n.leading:c;d="trailing"in n?!!n.trailing:d}return(0,a.A)(e,t,{leading:c,maxWait:t,trailing:d})}t.A=throttle},12189:function(e,t,n){"use strict";n.d(t,{LER:function(){return a},Sg5:function(){return l}});var a=!1,l=!0},596:function(e,t,n){"use strict";var a=n(20641);let l={};function filterAttrs(e){return Object.keys(e).reduce((t,n)=>(!1!==e[n]&&null!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),t),{})}function setTitle(e,t){let n=e.getElementsByTagName("title");if(n.length)n[0].textContent=t;else{let n=document.createElementNS("http://www.w3.org/2000/svg","title");n.textContent=t;e.insertBefore(n,e.firstChild)}}function makePromiseState(e){if(e.getIsPending)return e;let t=!0,n=e.then(e=>(t=!1,e),e=>{t=!1;throw e});return n.getIsPending=function getIsPending(){return t},n}t.A={name:"InlineSvg",inheritAttrs:!1,render(){return this.svgElSource?(0,a.h)("svg",Object.assign({},this.getSvgAttrs(this.svgElSource),filterAttrs(this.$attrs),{innerHTML:this.getSvgContent(this.svgElSource)})):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},emits:["loaded","unloaded","error"],data:()=>({svgElSource:null,request:void 0}),watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let t={},n=e.attributes;if(!n)return t;for(let e=n.length-1;e>=0;e--)t[n[e].name]=n[e].value;return t},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&setTitle(e,this.title),e.innerHTML},getSource(e){l[e]||(l[e]=this.download(e));if(this.svgElSource&&l[e].getIsPending()&&!this.keepDuringLoading){this.svgElSource=null;this.$emit("unloaded")}l[e].then(e=>{this.svgElSource=e;this.$nextTick(()=>{this.$emit("loaded",this.$el)})}).catch(t=>{if(this.svgElSource){this.svgElSource=null;this.$emit("unloaded")}delete l[e];this.$emit("error",t)})},download(e){return makePromiseState(new Promise((t,n)=>{let a=new XMLHttpRequest;a.open("GET",e,!0);this.request=a;a.onload=()=>{if(a.status>=200&&a.status<400)try{let e=new DOMParser().parseFromString(a.responseText,"text/xml").getElementsByTagName("svg")[0];e?t(e):n(Error('Loaded file is not valid SVG"'))}catch(e){n(e)}else n(Error("Error loading SVG"))};a.onerror=n;a.send()}))}}}}}]);